(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function s_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Td={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g;function B0(){if(_g)return Ce;_g=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.iterator;function C(b){return b===null||typeof b!="object"?null:(b=T&&b[T]||b["@@iterator"],typeof b=="function"?b:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,G={};function $(b,K,fe){this.props=b,this.context=K,this.refs=G,this.updater=fe||B}$.prototype.isReactComponent={},$.prototype.setState=function(b,K){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,K,"setState")},$.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function ve(){}ve.prototype=$.prototype;function ae(b,K,fe){this.props=b,this.context=K,this.refs=G,this.updater=fe||B}var re=ae.prototype=new ve;re.constructor=ae,q(re,$.prototype),re.isPureReactComponent=!0;var ge=Array.isArray,Se=Object.prototype.hasOwnProperty,Ee={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(b,K,fe){var Ae,Pe={},ke=null,Fe=null;if(K!=null)for(Ae in K.ref!==void 0&&(Fe=K.ref),K.key!==void 0&&(ke=""+K.key),K)Se.call(K,Ae)&&!S.hasOwnProperty(Ae)&&(Pe[Ae]=K[Ae]);var Be=arguments.length-2;if(Be===1)Pe.children=fe;else if(1<Be){for(var Ge=Array(Be),wt=0;wt<Be;wt++)Ge[wt]=arguments[wt+2];Pe.children=Ge}if(b&&b.defaultProps)for(Ae in Be=b.defaultProps,Be)Pe[Ae]===void 0&&(Pe[Ae]=Be[Ae]);return{$$typeof:s,type:b,key:ke,ref:Fe,props:Pe,_owner:Ee.current}}function R(b,K){return{$$typeof:s,type:b.type,key:K,ref:b.ref,props:b.props,_owner:b._owner}}function x(b){return typeof b=="object"&&b!==null&&b.$$typeof===s}function k(b){var K={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(fe){return K[fe]})}var N=/\/+/g;function P(b,K){return typeof b=="object"&&b!==null&&b.key!=null?k(""+b.key):K.toString(36)}function Oe(b,K,fe,Ae,Pe){var ke=typeof b;(ke==="undefined"||ke==="boolean")&&(b=null);var Fe=!1;if(b===null)Fe=!0;else switch(ke){case"string":case"number":Fe=!0;break;case"object":switch(b.$$typeof){case s:case e:Fe=!0}}if(Fe)return Fe=b,Pe=Pe(Fe),b=Ae===""?"."+P(Fe,0):Ae,ge(Pe)?(fe="",b!=null&&(fe=b.replace(N,"$&/")+"/"),Oe(Pe,K,fe,"",function(wt){return wt})):Pe!=null&&(x(Pe)&&(Pe=R(Pe,fe+(!Pe.key||Fe&&Fe.key===Pe.key?"":(""+Pe.key).replace(N,"$&/")+"/")+b)),K.push(Pe)),1;if(Fe=0,Ae=Ae===""?".":Ae+":",ge(b))for(var Be=0;Be<b.length;Be++){ke=b[Be];var Ge=Ae+P(ke,Be);Fe+=Oe(ke,K,fe,Ge,Pe)}else if(Ge=C(b),typeof Ge=="function")for(b=Ge.call(b),Be=0;!(ke=b.next()).done;)ke=ke.value,Ge=Ae+P(ke,Be++),Fe+=Oe(ke,K,fe,Ge,Pe);else if(ke==="object")throw K=String(b),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Fe}function Et(b,K,fe){if(b==null)return b;var Ae=[],Pe=0;return Oe(b,Ae,"","",function(ke){return K.call(fe,ke,Pe++)}),Ae}function We(b){if(b._status===-1){var K=b._result;K=K(),K.then(function(fe){(b._status===0||b._status===-1)&&(b._status=1,b._result=fe)},function(fe){(b._status===0||b._status===-1)&&(b._status=2,b._result=fe)}),b._status===-1&&(b._status=0,b._result=K)}if(b._status===1)return b._result.default;throw b._result}var qe={current:null},Z={transition:null},me={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:Z,ReactCurrentOwner:Ee};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:Et,forEach:function(b,K,fe){Et(b,function(){K.apply(this,arguments)},fe)},count:function(b){var K=0;return Et(b,function(){K++}),K},toArray:function(b){return Et(b,function(K){return K})||[]},only:function(b){if(!x(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Ce.Component=$,Ce.Fragment=t,Ce.Profiler=o,Ce.PureComponent=ae,Ce.StrictMode=i,Ce.Suspense=g,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ce.act=se,Ce.cloneElement=function(b,K,fe){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var Ae=q({},b.props),Pe=b.key,ke=b.ref,Fe=b._owner;if(K!=null){if(K.ref!==void 0&&(ke=K.ref,Fe=Ee.current),K.key!==void 0&&(Pe=""+K.key),b.type&&b.type.defaultProps)var Be=b.type.defaultProps;for(Ge in K)Se.call(K,Ge)&&!S.hasOwnProperty(Ge)&&(Ae[Ge]=K[Ge]===void 0&&Be!==void 0?Be[Ge]:K[Ge])}var Ge=arguments.length-2;if(Ge===1)Ae.children=fe;else if(1<Ge){Be=Array(Ge);for(var wt=0;wt<Ge;wt++)Be[wt]=arguments[wt+2];Ae.children=Be}return{$$typeof:s,type:b.type,key:Pe,ref:ke,props:Ae,_owner:Fe}},Ce.createContext=function(b){return b={$$typeof:h,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:l,_context:b},b.Consumer=b},Ce.createElement=I,Ce.createFactory=function(b){var K=I.bind(null,b);return K.type=b,K},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(b){return{$$typeof:f,render:b}},Ce.isValidElement=x,Ce.lazy=function(b){return{$$typeof:w,_payload:{_status:-1,_result:b},_init:We}},Ce.memo=function(b,K){return{$$typeof:_,type:b,compare:K===void 0?null:K}},Ce.startTransition=function(b){var K=Z.transition;Z.transition={};try{b()}finally{Z.transition=K}},Ce.unstable_act=se,Ce.useCallback=function(b,K){return qe.current.useCallback(b,K)},Ce.useContext=function(b){return qe.current.useContext(b)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(b){return qe.current.useDeferredValue(b)},Ce.useEffect=function(b,K){return qe.current.useEffect(b,K)},Ce.useId=function(){return qe.current.useId()},Ce.useImperativeHandle=function(b,K,fe){return qe.current.useImperativeHandle(b,K,fe)},Ce.useInsertionEffect=function(b,K){return qe.current.useInsertionEffect(b,K)},Ce.useLayoutEffect=function(b,K){return qe.current.useLayoutEffect(b,K)},Ce.useMemo=function(b,K){return qe.current.useMemo(b,K)},Ce.useReducer=function(b,K,fe){return qe.current.useReducer(b,K,fe)},Ce.useRef=function(b){return qe.current.useRef(b)},Ce.useState=function(b){return qe.current.useState(b)},Ce.useSyncExternalStore=function(b,K,fe){return qe.current.useSyncExternalStore(b,K,fe)},Ce.useTransition=function(){return qe.current.useTransition()},Ce.version="18.3.1",Ce}var vg;function o_(){return vg||(vg=1,Td.exports=B0()),Td.exports}var An=o_();const ne=s_(An);var Uu={},Sd={exports:{}},tn={},Ad={exports:{}},Rd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg;function z0(){return Eg||(Eg=1,function(s){function e(Z,me){var se=Z.length;Z.push(me);e:for(;0<se;){var b=se-1>>>1,K=Z[b];if(0<o(K,me))Z[b]=me,Z[se]=K,se=b;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var me=Z[0],se=Z.pop();if(se!==me){Z[0]=se;e:for(var b=0,K=Z.length,fe=K>>>1;b<fe;){var Ae=2*(b+1)-1,Pe=Z[Ae],ke=Ae+1,Fe=Z[ke];if(0>o(Pe,se))ke<K&&0>o(Fe,Pe)?(Z[b]=Fe,Z[ke]=se,b=ke):(Z[b]=Pe,Z[Ae]=se,b=Ae);else if(ke<K&&0>o(Fe,se))Z[b]=Fe,Z[ke]=se,b=ke;else break e}}return me}function o(Z,me){var se=Z.sortIndex-me.sortIndex;return se!==0?se:Z.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();s.unstable_now=function(){return h.now()-f}}var g=[],_=[],w=1,T=null,C=3,B=!1,q=!1,G=!1,$=typeof setTimeout=="function"?setTimeout:null,ve=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function re(Z){for(var me=t(_);me!==null;){if(me.callback===null)i(_);else if(me.startTime<=Z)i(_),me.sortIndex=me.expirationTime,e(g,me);else break;me=t(_)}}function ge(Z){if(G=!1,re(Z),!q)if(t(g)!==null)q=!0,We(Se);else{var me=t(_);me!==null&&qe(ge,me.startTime-Z)}}function Se(Z,me){q=!1,G&&(G=!1,ve(I),I=-1),B=!0;var se=C;try{for(re(me),T=t(g);T!==null&&(!(T.expirationTime>me)||Z&&!k());){var b=T.callback;if(typeof b=="function"){T.callback=null,C=T.priorityLevel;var K=b(T.expirationTime<=me);me=s.unstable_now(),typeof K=="function"?T.callback=K:T===t(g)&&i(g),re(me)}else i(g);T=t(g)}if(T!==null)var fe=!0;else{var Ae=t(_);Ae!==null&&qe(ge,Ae.startTime-me),fe=!1}return fe}finally{T=null,C=se,B=!1}}var Ee=!1,S=null,I=-1,R=5,x=-1;function k(){return!(s.unstable_now()-x<R)}function N(){if(S!==null){var Z=s.unstable_now();x=Z;var me=!0;try{me=S(!0,Z)}finally{me?P():(Ee=!1,S=null)}}else Ee=!1}var P;if(typeof ae=="function")P=function(){ae(N)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,Et=Oe.port2;Oe.port1.onmessage=N,P=function(){Et.postMessage(null)}}else P=function(){$(N,0)};function We(Z){S=Z,Ee||(Ee=!0,P())}function qe(Z,me){I=$(function(){Z(s.unstable_now())},me)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Z){Z.callback=null},s.unstable_continueExecution=function(){q||B||(q=!0,We(Se))},s.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Z?Math.floor(1e3/Z):5},s.unstable_getCurrentPriorityLevel=function(){return C},s.unstable_getFirstCallbackNode=function(){return t(g)},s.unstable_next=function(Z){switch(C){case 1:case 2:case 3:var me=3;break;default:me=C}var se=C;C=me;try{return Z()}finally{C=se}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(Z,me){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var se=C;C=Z;try{return me()}finally{C=se}},s.unstable_scheduleCallback=function(Z,me,se){var b=s.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?b+se:b):se=b,Z){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=se+K,Z={id:w++,callback:me,priorityLevel:Z,startTime:se,expirationTime:K,sortIndex:-1},se>b?(Z.sortIndex=se,e(_,Z),t(g)===null&&Z===t(_)&&(G?(ve(I),I=-1):G=!0,qe(ge,se-b))):(Z.sortIndex=K,e(g,Z),q||B||(q=!0,We(Se))),Z},s.unstable_shouldYield=k,s.unstable_wrapCallback=function(Z){var me=C;return function(){var se=C;C=me;try{return Z.apply(this,arguments)}finally{C=se}}}}(Rd)),Rd}var wg;function U0(){return wg||(wg=1,Ad.exports=z0()),Ad.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig;function j0(){if(Ig)return tn;Ig=1;var s=o_(),e=U0();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,r){h(n,r),h(n+"Capture",r)}function h(n,r){for(o[n]=r,n=0;n<r.length;n++)i.add(r[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},T={};function C(n){return g.call(T,n)?!0:g.call(w,n)?!1:_.test(n)?T[n]=!0:(w[n]=!0,!1)}function B(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,r,a,c){if(r===null||typeof r>"u"||B(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function G(n,r,a,c,d,m,v){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=m,this.removeEmptyString=v}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){$[n]=new G(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];$[r]=new G(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){$[n]=new G(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){$[n]=new G(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){$[n]=new G(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){$[n]=new G(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){$[n]=new G(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){$[n]=new G(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){$[n]=new G(n,5,!1,n.toLowerCase(),null,!1,!1)});var ve=/[\-:]([a-z])/g;function ae(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(ve,ae);$[r]=new G(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(ve,ae);$[r]=new G(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(ve,ae);$[r]=new G(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){$[n]=new G(n,1,!1,n.toLowerCase(),null,!1,!1)}),$.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){$[n]=new G(n,1,!1,n.toLowerCase(),null,!0,!0)});function re(n,r,a,c){var d=$.hasOwnProperty(r)?$[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(q(r,a,d,c)&&(a=null),c||d===null?C(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var ge=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),Ee=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),k=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),Oe=Symbol.for("react.suspense_list"),Et=Symbol.for("react.memo"),We=Symbol.for("react.lazy"),qe=Symbol.for("react.offscreen"),Z=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,b;function K(n){if(b===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);b=r&&r[1]||""}return`
`+b+n}var fe=!1;function Ae(n,r){if(!n||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(z){var c=z}Reflect.construct(n,[],r)}else{try{r.call()}catch(z){c=z}n.call(r.prototype)}else{try{throw Error()}catch(z){c=z}n()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),m=c.stack.split(`
`),v=d.length-1,A=m.length-1;1<=v&&0<=A&&d[v]!==m[A];)A--;for(;1<=v&&0<=A;v--,A--)if(d[v]!==m[A]){if(v!==1||A!==1)do if(v--,A--,0>A||d[v]!==m[A]){var V=`
`+d[v].replace(" at new "," at ");return n.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",n.displayName)),V}while(1<=v&&0<=A);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?K(n):""}function Pe(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function ke(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case Ee:return"Portal";case R:return"Profiler";case I:return"StrictMode";case P:return"Suspense";case Oe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case k:return(n.displayName||"Context")+".Consumer";case x:return(n._context.displayName||"Context")+".Provider";case N:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Et:return r=n.displayName||null,r!==null?r:ke(n.type)||"Memo";case We:r=n._payload,n=n._init;try{return ke(n(r))}catch{}}return null}function Fe(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(r);case 8:return r===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ge(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function wt(n){var r=Ge(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,m.call(this,v)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function sr(n){n._valueTracker||(n._valueTracker=wt(n))}function ys(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=Ge(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function kr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function vi(n,r){var a=r.checked;return se({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function _s(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=Be(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function $o(n,r){r=r.checked,r!=null&&re(n,"checked",r,!1)}function qo(n,r){$o(n,r);var a=Be(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?vs(n,r.type,a):r.hasOwnProperty("defaultValue")&&vs(n,r.type,Be(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function Rl(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function vs(n,r,a){(r!=="number"||kr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var or=Array.isArray;function ar(n,r,a,c){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Be(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function Ko(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Es(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(or(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:Be(a)}}function ws(n,r){var a=Be(r.value),c=Be(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Go(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function pt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?pt(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var lr,Ho=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,d)})}:n}(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(lr=lr||document.createElement("div"),lr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=lr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Dr(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wi=["Webkit","ms","Moz","O"];Object.keys(Ei).forEach(function(n){wi.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Ei[r]=Ei[n]})});function Qo(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Ei.hasOwnProperty(n)&&Ei[n]?(""+r).trim():r+"px"}function Wo(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Qo(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Yo=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xo(n,r){if(r){if(Yo[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function Jo(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ii=null;function Is(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ts=null,mn=null,qn=null;function Ss(n){if(n=Ia(n)){if(typeof Ts!="function")throw Error(t(280));var r=n.stateNode;r&&(r=nu(r),Ts(n.stateNode,n.type,r))}}function Kn(n){mn?qn?qn.push(n):qn=[n]:mn=n}function Zo(){if(mn){var n=mn,r=qn;if(qn=mn=null,Ss(n),r)for(n=0;n<r.length;n++)Ss(r[n])}}function Ti(n,r){return n(r)}function ea(){}var ur=!1;function ta(n,r,a){if(ur)return n(r,a);ur=!0;try{return Ti(n,r,a)}finally{ur=!1,(mn!==null||qn!==null)&&(ea(),Zo())}}function lt(n,r){var a=n.stateNode;if(a===null)return null;var c=nu(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var As=!1;if(f)try{var Cn={};Object.defineProperty(Cn,"passive",{get:function(){As=!0}}),window.addEventListener("test",Cn,Cn),window.removeEventListener("test",Cn,Cn)}catch{As=!1}function Si(n,r,a,c,d,m,v,A,V){var z=Array.prototype.slice.call(arguments,3);try{r.apply(a,z)}catch(Q){this.onError(Q)}}var Ai=!1,Rs=null,xn=!1,na=null,Xc={onError:function(n){Ai=!0,Rs=n}};function Ps(n,r,a,c,d,m,v,A,V){Ai=!1,Rs=null,Si.apply(Xc,arguments)}function Pl(n,r,a,c,d,m,v,A,V){if(Ps.apply(this,arguments),Ai){if(Ai){var z=Rs;Ai=!1,Rs=null}else throw Error(t(198));xn||(xn=!0,na=z)}}function Vn(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function Ri(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function kn(n){if(Vn(n)!==n)throw Error(t(188))}function Cl(n){var r=n.alternate;if(!r){if(r=Vn(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return kn(d),n;if(m===c)return kn(d),r;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var v=!1,A=d.child;A;){if(A===a){v=!0,a=d,c=m;break}if(A===c){v=!0,c=d,a=m;break}A=A.sibling}if(!v){for(A=m.child;A;){if(A===a){v=!0,a=m,c=d;break}if(A===c){v=!0,c=m,a=d;break}A=A.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function ra(n){return n=Cl(n),n!==null?Cs(n):null}function Cs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=Cs(n);if(r!==null)return r;n=n.sibling}return null}var xs=e.unstable_scheduleCallback,ia=e.unstable_cancelCallback,xl=e.unstable_shouldYield,Jc=e.unstable_requestPaint,He=e.unstable_now,Vl=e.unstable_getCurrentPriorityLevel,Pi=e.unstable_ImmediatePriority,Nr=e.unstable_UserBlockingPriority,gn=e.unstable_NormalPriority,sa=e.unstable_LowPriority,kl=e.unstable_IdlePriority,Ci=null,rn=null;function Dl(n){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Ci,n,void 0,(n.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:bl,oa=Math.log,Nl=Math.LN2;function bl(n){return n>>>=0,n===0?32:31-(oa(n)/Nl|0)|0}var Vs=64,ks=4194304;function br(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function xi(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,v=a&268435455;if(v!==0){var A=v&~d;A!==0?c=br(A):(m&=v,m!==0&&(c=br(m)))}else v=a&~d,v!==0?c=br(v):m!==0&&(c=br(m));if(c===0)return 0;if(r!==0&&r!==c&&(r&d)===0&&(d=c&-c,m=r&-r,d>=m||d===16&&(m&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-Ut(r),d=1<<a,c|=n[a],r&=~d;return c}function Zc(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cr(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var v=31-Ut(m),A=1<<v,V=d[v];V===-1?((A&a)===0||(A&c)!==0)&&(d[v]=Zc(A,r)):V<=r&&(n.expiredLanes|=A),m&=~A}}function sn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Vi(){var n=Vs;return Vs<<=1,(Vs&4194240)===0&&(Vs=64),n}function Mr(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function Or(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-Ut(r),n[r]=a}function Ke(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Ut(a),m=1<<d;r[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function Lr(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-Ut(a),d=1<<c;d&r|n[c]&r&&(n[c]|=r),a&=~d}}var Ve=0;function Fr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ml,Ds,Ol,Ll,Fl,aa=!1,Gn=[],Pt=null,Dn=null,Nn=null,Br=new Map,yn=new Map,Hn=[],eh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bl(n,r){switch(n){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Nn=null;break;case"pointerover":case"pointerout":Br.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":yn.delete(r.pointerId)}}function Qt(n,r,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},r!==null&&(r=Ia(r),r!==null&&Ds(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function th(n,r,a,c,d){switch(r){case"focusin":return Pt=Qt(Pt,n,r,a,c,d),!0;case"dragenter":return Dn=Qt(Dn,n,r,a,c,d),!0;case"mouseover":return Nn=Qt(Nn,n,r,a,c,d),!0;case"pointerover":var m=d.pointerId;return Br.set(m,Qt(Br.get(m)||null,n,r,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,yn.set(m,Qt(yn.get(m)||null,n,r,a,c,d)),!0}return!1}function zl(n){var r=Mi(n.target);if(r!==null){var a=Vn(r);if(a!==null){if(r=a.tag,r===13){if(r=Ri(a),r!==null){n.blockedOn=r,Fl(n.priority,function(){Ol(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function hr(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Ns(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Ii=c,a.target.dispatchEvent(c),Ii=null}else return r=Ia(a),r!==null&&Ds(r),n.blockedOn=a,!1;r.shift()}return!0}function ki(n,r,a){hr(n)&&a.delete(r)}function Ul(){aa=!1,Pt!==null&&hr(Pt)&&(Pt=null),Dn!==null&&hr(Dn)&&(Dn=null),Nn!==null&&hr(Nn)&&(Nn=null),Br.forEach(ki),yn.forEach(ki)}function bn(n,r){n.blockedOn===r&&(n.blockedOn=null,aa||(aa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ul)))}function Mn(n){function r(d){return bn(d,n)}if(0<Gn.length){bn(Gn[0],n);for(var a=1;a<Gn.length;a++){var c=Gn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Pt!==null&&bn(Pt,n),Dn!==null&&bn(Dn,n),Nn!==null&&bn(Nn,n),Br.forEach(r),yn.forEach(r),a=0;a<Hn.length;a++)c=Hn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Hn.length&&(a=Hn[0],a.blockedOn===null);)zl(a),a.blockedOn===null&&Hn.shift()}var dr=ge.ReactCurrentBatchConfig,zr=!0;function Je(n,r,a,c){var d=Ve,m=dr.transition;dr.transition=null;try{Ve=1,la(n,r,a,c)}finally{Ve=d,dr.transition=m}}function nh(n,r,a,c){var d=Ve,m=dr.transition;dr.transition=null;try{Ve=4,la(n,r,a,c)}finally{Ve=d,dr.transition=m}}function la(n,r,a,c){if(zr){var d=Ns(n,r,a,c);if(d===null)fh(n,r,c,Di,a),Bl(n,c);else if(th(d,n,r,a,c))c.stopPropagation();else if(Bl(n,c),r&4&&-1<eh.indexOf(n)){for(;d!==null;){var m=Ia(d);if(m!==null&&Ml(m),m=Ns(n,r,a,c),m===null&&fh(n,r,c,Di,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else fh(n,r,c,null,a)}}var Di=null;function Ns(n,r,a,c){if(Di=null,n=Is(c),n=Mi(n),n!==null)if(r=Vn(n),r===null)n=null;else if(a=r.tag,a===13){if(n=Ri(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Di=n,null}function ua(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vl()){case Pi:return 1;case Nr:return 4;case gn:case sa:return 16;case kl:return 536870912;default:return 16}default:return 16}}var on=null,bs=null,Wt=null;function ca(){if(Wt)return Wt;var n,r=bs,a=r.length,c,d="value"in on?on.value:on.textContent,m=d.length;for(n=0;n<a&&r[n]===d[n];n++);var v=a-n;for(c=1;c<=v&&r[a-c]===d[m-c];c++);return Wt=d.slice(n,1<c?1-c:void 0)}function Ms(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Qn(){return!0}function ha(){return!1}function Ct(n){function r(a,c,d,m,v){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Qn:ha,this.isPropagationStopped=ha,this}return se(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){},isPersistent:Qn}),r}var On={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Os=Ct(On),Wn=se({},On,{view:0,detail:0}),rh=Ct(Wn),Ls,fr,Ur,Ni=se({},Wn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ur&&(Ur&&n.type==="mousemove"?(Ls=n.screenX-Ur.screenX,fr=n.screenY-Ur.screenY):fr=Ls=0,Ur=n),Ls)},movementY:function(n){return"movementY"in n?n.movementY:fr}}),Fs=Ct(Ni),da=se({},Ni,{dataTransfer:0}),jl=Ct(da),Bs=se({},Wn,{relatedTarget:0}),zs=Ct(Bs),$l=se({},On,{animationName:0,elapsedTime:0,pseudoElement:0}),pr=Ct($l),ql=se({},On,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Kl=Ct(ql),Gl=se({},On,{data:0}),fa=Ct(Gl),Us={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ql(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Hl[n])?!!r[n]:!1}function Yn(){return Ql}var u=se({},Wn,{key:function(n){if(n.key){var r=Us[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ms(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?jt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yn,charCode:function(n){return n.type==="keypress"?Ms(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ms(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=Ct(u),y=se({},Ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=Ct(y),M=se({},Wn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yn}),U=Ct(M),J=se({},On,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ue=Ct(J),gt=se({},Ni,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),De=Ct(gt),It=[9,13,27,32],ct=f&&"CompositionEvent"in window,_n=null;f&&"documentMode"in document&&(_n=document.documentMode);var an=f&&"TextEvent"in window&&!_n,bi=f&&(!ct||_n&&8<_n&&11>=_n),js=" ",dp=!1;function fp(n,r){switch(n){case"keyup":return It.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var $s=!1;function OE(n,r){switch(n){case"compositionend":return pp(r);case"keypress":return r.which!==32?null:(dp=!0,js);case"textInput":return n=r.data,n===js&&dp?null:n;default:return null}}function LE(n,r){if($s)return n==="compositionend"||!ct&&fp(n,r)?(n=ca(),Wt=bs=on=null,$s=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return bi&&r.locale!=="ko"?null:r.data;default:return null}}var FE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mp(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!FE[n.type]:r==="textarea"}function gp(n,r,a,c){Kn(c),r=Zl(r,"onChange"),0<r.length&&(a=new Os("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var pa=null,ma=null;function BE(n){bp(n,0)}function Wl(n){var r=Qs(n);if(ys(r))return n}function zE(n,r){if(n==="change")return r}var yp=!1;if(f){var ih;if(f){var sh="oninput"in document;if(!sh){var _p=document.createElement("div");_p.setAttribute("oninput","return;"),sh=typeof _p.oninput=="function"}ih=sh}else ih=!1;yp=ih&&(!document.documentMode||9<document.documentMode)}function vp(){pa&&(pa.detachEvent("onpropertychange",Ep),ma=pa=null)}function Ep(n){if(n.propertyName==="value"&&Wl(ma)){var r=[];gp(r,ma,n,Is(n)),ta(BE,r)}}function UE(n,r,a){n==="focusin"?(vp(),pa=r,ma=a,pa.attachEvent("onpropertychange",Ep)):n==="focusout"&&vp()}function jE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Wl(ma)}function $E(n,r){if(n==="click")return Wl(r)}function qE(n,r){if(n==="input"||n==="change")return Wl(r)}function KE(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Ln=typeof Object.is=="function"?Object.is:KE;function ga(n,r){if(Ln(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(r,d)||!Ln(n[d],r[d]))return!1}return!0}function wp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ip(n,r){var a=wp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=wp(a)}}function Tp(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Tp(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Sp(){for(var n=window,r=kr();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=kr(n.document)}return r}function oh(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function GE(n){var r=Sp(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&Tp(a.ownerDocument.documentElement,a)){if(c!==null&&oh(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=Ip(a,m);var v=Ip(a,c);d&&v&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(r),n.extend(v.node,v.offset)):(r.setEnd(v.node,v.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var HE=f&&"documentMode"in document&&11>=document.documentMode,qs=null,ah=null,ya=null,lh=!1;function Ap(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;lh||qs==null||qs!==kr(c)||(c=qs,"selectionStart"in c&&oh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ya&&ga(ya,c)||(ya=c,c=Zl(ah,"onSelect"),0<c.length&&(r=new Os("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=qs)))}function Yl(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Ks={animationend:Yl("Animation","AnimationEnd"),animationiteration:Yl("Animation","AnimationIteration"),animationstart:Yl("Animation","AnimationStart"),transitionend:Yl("Transition","TransitionEnd")},uh={},Rp={};f&&(Rp=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function Xl(n){if(uh[n])return uh[n];if(!Ks[n])return n;var r=Ks[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Rp)return uh[n]=r[a];return n}var Pp=Xl("animationend"),Cp=Xl("animationiteration"),xp=Xl("animationstart"),Vp=Xl("transitionend"),kp=new Map,Dp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(n,r){kp.set(n,r),l(r,[n])}for(var ch=0;ch<Dp.length;ch++){var hh=Dp[ch],QE=hh.toLowerCase(),WE=hh[0].toUpperCase()+hh.slice(1);jr(QE,"on"+WE)}jr(Pp,"onAnimationEnd"),jr(Cp,"onAnimationIteration"),jr(xp,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(Vp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YE=new Set("cancel close invalid load scroll toggle".split(" ").concat(_a));function Np(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,Pl(c,r,void 0,n),n.currentTarget=null}function bp(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var v=c.length-1;0<=v;v--){var A=c[v],V=A.instance,z=A.currentTarget;if(A=A.listener,V!==m&&d.isPropagationStopped())break e;Np(d,A,z),m=V}else for(v=0;v<c.length;v++){if(A=c[v],V=A.instance,z=A.currentTarget,A=A.listener,V!==m&&d.isPropagationStopped())break e;Np(d,A,z),m=V}}}if(xn)throw n=na,xn=!1,na=null,n}function Ye(n,r){var a=r[vh];a===void 0&&(a=r[vh]=new Set);var c=n+"__bubble";a.has(c)||(Mp(r,n,2,!1),a.add(c))}function dh(n,r,a){var c=0;r&&(c|=4),Mp(a,n,c,r)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function va(n){if(!n[Jl]){n[Jl]=!0,i.forEach(function(a){a!=="selectionchange"&&(YE.has(a)||dh(a,!1,n),dh(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Jl]||(r[Jl]=!0,dh("selectionchange",!1,r))}}function Mp(n,r,a,c){switch(ua(r)){case 1:var d=Je;break;case 4:d=nh;break;default:d=la}a=d.bind(null,r,a,n),d=void 0,!As||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function fh(n,r,a,c,d){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var A=c.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(v===4)for(v=c.return;v!==null;){var V=v.tag;if((V===3||V===4)&&(V=v.stateNode.containerInfo,V===d||V.nodeType===8&&V.parentNode===d))return;v=v.return}for(;A!==null;){if(v=Mi(A),v===null)return;if(V=v.tag,V===5||V===6){c=m=v;continue e}A=A.parentNode}}c=c.return}ta(function(){var z=m,Q=Is(a),W=[];e:{var H=kp.get(n);if(H!==void 0){var ie=Os,le=n;switch(n){case"keypress":if(Ms(a)===0)break e;case"keydown":case"keyup":ie=p;break;case"focusin":le="focus",ie=zs;break;case"focusout":le="blur",ie=zs;break;case"beforeblur":case"afterblur":ie=zs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Fs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=jl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=U;break;case Pp:case Cp:case xp:ie=pr;break;case Vp:ie=Ue;break;case"scroll":ie=rh;break;case"wheel":ie=De;break;case"copy":case"cut":case"paste":ie=Kl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=E}var ce=(r&4)!==0,ut=!ce&&n==="scroll",L=ce?H!==null?H+"Capture":null:H;ce=[];for(var D=z,F;D!==null;){F=D;var X=F.stateNode;if(F.tag===5&&X!==null&&(F=X,L!==null&&(X=lt(D,L),X!=null&&ce.push(Ea(D,X,F)))),ut)break;D=D.return}0<ce.length&&(H=new ie(H,le,null,a,Q),W.push({event:H,listeners:ce}))}}if((r&7)===0){e:{if(H=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",H&&a!==Ii&&(le=a.relatedTarget||a.fromElement)&&(Mi(le)||le[mr]))break e;if((ie||H)&&(H=Q.window===Q?Q:(H=Q.ownerDocument)?H.defaultView||H.parentWindow:window,ie?(le=a.relatedTarget||a.toElement,ie=z,le=le?Mi(le):null,le!==null&&(ut=Vn(le),le!==ut||le.tag!==5&&le.tag!==6)&&(le=null)):(ie=null,le=z),ie!==le)){if(ce=Fs,X="onMouseLeave",L="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(ce=E,X="onPointerLeave",L="onPointerEnter",D="pointer"),ut=ie==null?H:Qs(ie),F=le==null?H:Qs(le),H=new ce(X,D+"leave",ie,a,Q),H.target=ut,H.relatedTarget=F,X=null,Mi(Q)===z&&(ce=new ce(L,D+"enter",le,a,Q),ce.target=F,ce.relatedTarget=ut,X=ce),ut=X,ie&&le)t:{for(ce=ie,L=le,D=0,F=ce;F;F=Gs(F))D++;for(F=0,X=L;X;X=Gs(X))F++;for(;0<D-F;)ce=Gs(ce),D--;for(;0<F-D;)L=Gs(L),F--;for(;D--;){if(ce===L||L!==null&&ce===L.alternate)break t;ce=Gs(ce),L=Gs(L)}ce=null}else ce=null;ie!==null&&Op(W,H,ie,ce,!1),le!==null&&ut!==null&&Op(W,ut,le,ce,!0)}}e:{if(H=z?Qs(z):window,ie=H.nodeName&&H.nodeName.toLowerCase(),ie==="select"||ie==="input"&&H.type==="file")var he=zE;else if(mp(H))if(yp)he=qE;else{he=jE;var ye=UE}else(ie=H.nodeName)&&ie.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(he=$E);if(he&&(he=he(n,z))){gp(W,he,a,Q);break e}ye&&ye(n,H,z),n==="focusout"&&(ye=H._wrapperState)&&ye.controlled&&H.type==="number"&&vs(H,"number",H.value)}switch(ye=z?Qs(z):window,n){case"focusin":(mp(ye)||ye.contentEditable==="true")&&(qs=ye,ah=z,ya=null);break;case"focusout":ya=ah=qs=null;break;case"mousedown":lh=!0;break;case"contextmenu":case"mouseup":case"dragend":lh=!1,Ap(W,a,Q);break;case"selectionchange":if(HE)break;case"keydown":case"keyup":Ap(W,a,Q)}var _e;if(ct)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else $s?fp(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(bi&&a.locale!=="ko"&&($s||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&$s&&(_e=ca()):(on=Q,bs="value"in on?on.value:on.textContent,$s=!0)),ye=Zl(z,Ie),0<ye.length&&(Ie=new fa(Ie,n,null,a,Q),W.push({event:Ie,listeners:ye}),_e?Ie.data=_e:(_e=pp(a),_e!==null&&(Ie.data=_e)))),(_e=an?OE(n,a):LE(n,a))&&(z=Zl(z,"onBeforeInput"),0<z.length&&(Q=new fa("onBeforeInput","beforeinput",null,a,Q),W.push({event:Q,listeners:z}),Q.data=_e))}bp(W,r)})}function Ea(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Zl(n,r){for(var a=r+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=lt(n,a),m!=null&&c.unshift(Ea(n,m,d)),m=lt(n,r),m!=null&&c.push(Ea(n,m,d))),n=n.return}return c}function Gs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Op(n,r,a,c,d){for(var m=r._reactName,v=[];a!==null&&a!==c;){var A=a,V=A.alternate,z=A.stateNode;if(V!==null&&V===c)break;A.tag===5&&z!==null&&(A=z,d?(V=lt(a,m),V!=null&&v.unshift(Ea(a,V,A))):d||(V=lt(a,m),V!=null&&v.push(Ea(a,V,A)))),a=a.return}v.length!==0&&n.push({event:r,listeners:v})}var XE=/\r\n?/g,JE=/\u0000|\uFFFD/g;function Lp(n){return(typeof n=="string"?n:""+n).replace(XE,`
`).replace(JE,"")}function eu(n,r,a){if(r=Lp(r),Lp(n)!==r&&a)throw Error(t(425))}function tu(){}var ph=null,mh=null;function gh(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var yh=typeof setTimeout=="function"?setTimeout:void 0,ZE=typeof clearTimeout=="function"?clearTimeout:void 0,Fp=typeof Promise=="function"?Promise:void 0,e0=typeof queueMicrotask=="function"?queueMicrotask:typeof Fp<"u"?function(n){return Fp.resolve(null).then(n).catch(t0)}:yh;function t0(n){setTimeout(function(){throw n})}function _h(n,r){var a=r,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Mn(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Mn(r)}function $r(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function Bp(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var Hs=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Hs,wa="__reactProps$"+Hs,mr="__reactContainer$"+Hs,vh="__reactEvents$"+Hs,n0="__reactListeners$"+Hs,r0="__reactHandles$"+Hs;function Mi(n){var r=n[Xn];if(r)return r;for(var a=n.parentNode;a;){if(r=a[mr]||a[Xn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=Bp(n);n!==null;){if(a=n[Xn])return a;n=Bp(n)}return r}n=a,a=n.parentNode}return null}function Ia(n){return n=n[Xn]||n[mr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Qs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function nu(n){return n[wa]||null}var Eh=[],Ws=-1;function qr(n){return{current:n}}function Xe(n){0>Ws||(n.current=Eh[Ws],Eh[Ws]=null,Ws--)}function Qe(n,r){Ws++,Eh[Ws]=n.current,n.current=r}var Kr={},Nt=qr(Kr),Yt=qr(!1),Oi=Kr;function Ys(n,r){var a=n.type.contextTypes;if(!a)return Kr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=r[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=d),d}function Xt(n){return n=n.childContextTypes,n!=null}function ru(){Xe(Yt),Xe(Nt)}function zp(n,r,a){if(Nt.current!==Kr)throw Error(t(168));Qe(Nt,r),Qe(Yt,a)}function Up(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(t(108,Fe(n)||"Unknown",d));return se({},a,c)}function iu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Kr,Oi=Nt.current,Qe(Nt,n),Qe(Yt,Yt.current),!0}function jp(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Up(n,r,Oi),c.__reactInternalMemoizedMergedChildContext=n,Xe(Yt),Xe(Nt),Qe(Nt,n)):Xe(Yt),Qe(Yt,a)}var gr=null,su=!1,wh=!1;function $p(n){gr===null?gr=[n]:gr.push(n)}function i0(n){su=!0,$p(n)}function Gr(){if(!wh&&gr!==null){wh=!0;var n=0,r=Ve;try{var a=gr;for(Ve=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}gr=null,su=!1}catch(d){throw gr!==null&&(gr=gr.slice(n+1)),xs(Pi,Gr),d}finally{Ve=r,wh=!1}}return null}var Xs=[],Js=0,ou=null,au=0,vn=[],En=0,Li=null,yr=1,_r="";function Fi(n,r){Xs[Js++]=au,Xs[Js++]=ou,ou=n,au=r}function qp(n,r,a){vn[En++]=yr,vn[En++]=_r,vn[En++]=Li,Li=n;var c=yr;n=_r;var d=32-Ut(c)-1;c&=~(1<<d),a+=1;var m=32-Ut(r)+d;if(30<m){var v=d-d%5;m=(c&(1<<v)-1).toString(32),c>>=v,d-=v,yr=1<<32-Ut(r)+d|a<<d|c,_r=m+n}else yr=1<<m|a<<d|c,_r=n}function Ih(n){n.return!==null&&(Fi(n,1),qp(n,1,0))}function Th(n){for(;n===ou;)ou=Xs[--Js],Xs[Js]=null,au=Xs[--Js],Xs[Js]=null;for(;n===Li;)Li=vn[--En],vn[En]=null,_r=vn[--En],vn[En]=null,yr=vn[--En],vn[En]=null}var ln=null,un=null,Ze=!1,Fn=null;function Kp(n,r){var a=Sn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function Gp(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,ln=n,un=$r(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,ln=n,un=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Li!==null?{id:yr,overflow:_r}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=Sn(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,ln=n,un=null,!0):!1;default:return!1}}function Sh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ah(n){if(Ze){var r=un;if(r){var a=r;if(!Gp(n,r)){if(Sh(n))throw Error(t(418));r=$r(a.nextSibling);var c=ln;r&&Gp(n,r)?Kp(c,a):(n.flags=n.flags&-4097|2,Ze=!1,ln=n)}}else{if(Sh(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ze=!1,ln=n}}}function Hp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ln=n}function lu(n){if(n!==ln)return!1;if(!Ze)return Hp(n),Ze=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!gh(n.type,n.memoizedProps)),r&&(r=un)){if(Sh(n))throw Qp(),Error(t(418));for(;r;)Kp(n,r),r=$r(r.nextSibling)}if(Hp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){un=$r(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}un=null}}else un=ln?$r(n.stateNode.nextSibling):null;return!0}function Qp(){for(var n=un;n;)n=$r(n.nextSibling)}function Zs(){un=ln=null,Ze=!1}function Rh(n){Fn===null?Fn=[n]:Fn.push(n)}var s0=ge.ReactCurrentBatchConfig;function Ta(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===m?r.ref:(r=function(v){var A=d.refs;v===null?delete A[m]:A[m]=v},r._stringRef=m,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function uu(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function Wp(n){var r=n._init;return r(n._payload)}function Yp(n){function r(L,D){if(n){var F=L.deletions;F===null?(L.deletions=[D],L.flags|=16):F.push(D)}}function a(L,D){if(!n)return null;for(;D!==null;)r(L,D),D=D.sibling;return null}function c(L,D){for(L=new Map;D!==null;)D.key!==null?L.set(D.key,D):L.set(D.index,D),D=D.sibling;return L}function d(L,D){return L=ei(L,D),L.index=0,L.sibling=null,L}function m(L,D,F){return L.index=F,n?(F=L.alternate,F!==null?(F=F.index,F<D?(L.flags|=2,D):F):(L.flags|=2,D)):(L.flags|=1048576,D)}function v(L){return n&&L.alternate===null&&(L.flags|=2),L}function A(L,D,F,X){return D===null||D.tag!==6?(D=yd(F,L.mode,X),D.return=L,D):(D=d(D,F),D.return=L,D)}function V(L,D,F,X){var he=F.type;return he===S?Q(L,D,F.props.children,X,F.key):D!==null&&(D.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===We&&Wp(he)===D.type)?(X=d(D,F.props),X.ref=Ta(L,D,F),X.return=L,X):(X=Nu(F.type,F.key,F.props,null,L.mode,X),X.ref=Ta(L,D,F),X.return=L,X)}function z(L,D,F,X){return D===null||D.tag!==4||D.stateNode.containerInfo!==F.containerInfo||D.stateNode.implementation!==F.implementation?(D=_d(F,L.mode,X),D.return=L,D):(D=d(D,F.children||[]),D.return=L,D)}function Q(L,D,F,X,he){return D===null||D.tag!==7?(D=Gi(F,L.mode,X,he),D.return=L,D):(D=d(D,F),D.return=L,D)}function W(L,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return D=yd(""+D,L.mode,F),D.return=L,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Se:return F=Nu(D.type,D.key,D.props,null,L.mode,F),F.ref=Ta(L,null,D),F.return=L,F;case Ee:return D=_d(D,L.mode,F),D.return=L,D;case We:var X=D._init;return W(L,X(D._payload),F)}if(or(D)||me(D))return D=Gi(D,L.mode,F,null),D.return=L,D;uu(L,D)}return null}function H(L,D,F,X){var he=D!==null?D.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return he!==null?null:A(L,D,""+F,X);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Se:return F.key===he?V(L,D,F,X):null;case Ee:return F.key===he?z(L,D,F,X):null;case We:return he=F._init,H(L,D,he(F._payload),X)}if(or(F)||me(F))return he!==null?null:Q(L,D,F,X,null);uu(L,F)}return null}function ie(L,D,F,X,he){if(typeof X=="string"&&X!==""||typeof X=="number")return L=L.get(F)||null,A(D,L,""+X,he);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Se:return L=L.get(X.key===null?F:X.key)||null,V(D,L,X,he);case Ee:return L=L.get(X.key===null?F:X.key)||null,z(D,L,X,he);case We:var ye=X._init;return ie(L,D,F,ye(X._payload),he)}if(or(X)||me(X))return L=L.get(F)||null,Q(D,L,X,he,null);uu(D,X)}return null}function le(L,D,F,X){for(var he=null,ye=null,_e=D,Ie=D=0,At=null;_e!==null&&Ie<F.length;Ie++){_e.index>Ie?(At=_e,_e=null):At=_e.sibling;var Le=H(L,_e,F[Ie],X);if(Le===null){_e===null&&(_e=At);break}n&&_e&&Le.alternate===null&&r(L,_e),D=m(Le,D,Ie),ye===null?he=Le:ye.sibling=Le,ye=Le,_e=At}if(Ie===F.length)return a(L,_e),Ze&&Fi(L,Ie),he;if(_e===null){for(;Ie<F.length;Ie++)_e=W(L,F[Ie],X),_e!==null&&(D=m(_e,D,Ie),ye===null?he=_e:ye.sibling=_e,ye=_e);return Ze&&Fi(L,Ie),he}for(_e=c(L,_e);Ie<F.length;Ie++)At=ie(_e,L,Ie,F[Ie],X),At!==null&&(n&&At.alternate!==null&&_e.delete(At.key===null?Ie:At.key),D=m(At,D,Ie),ye===null?he=At:ye.sibling=At,ye=At);return n&&_e.forEach(function(ti){return r(L,ti)}),Ze&&Fi(L,Ie),he}function ce(L,D,F,X){var he=me(F);if(typeof he!="function")throw Error(t(150));if(F=he.call(F),F==null)throw Error(t(151));for(var ye=he=null,_e=D,Ie=D=0,At=null,Le=F.next();_e!==null&&!Le.done;Ie++,Le=F.next()){_e.index>Ie?(At=_e,_e=null):At=_e.sibling;var ti=H(L,_e,Le.value,X);if(ti===null){_e===null&&(_e=At);break}n&&_e&&ti.alternate===null&&r(L,_e),D=m(ti,D,Ie),ye===null?he=ti:ye.sibling=ti,ye=ti,_e=At}if(Le.done)return a(L,_e),Ze&&Fi(L,Ie),he;if(_e===null){for(;!Le.done;Ie++,Le=F.next())Le=W(L,Le.value,X),Le!==null&&(D=m(Le,D,Ie),ye===null?he=Le:ye.sibling=Le,ye=Le);return Ze&&Fi(L,Ie),he}for(_e=c(L,_e);!Le.done;Ie++,Le=F.next())Le=ie(_e,L,Ie,Le.value,X),Le!==null&&(n&&Le.alternate!==null&&_e.delete(Le.key===null?Ie:Le.key),D=m(Le,D,Ie),ye===null?he=Le:ye.sibling=Le,ye=Le);return n&&_e.forEach(function(F0){return r(L,F0)}),Ze&&Fi(L,Ie),he}function ut(L,D,F,X){if(typeof F=="object"&&F!==null&&F.type===S&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Se:e:{for(var he=F.key,ye=D;ye!==null;){if(ye.key===he){if(he=F.type,he===S){if(ye.tag===7){a(L,ye.sibling),D=d(ye,F.props.children),D.return=L,L=D;break e}}else if(ye.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===We&&Wp(he)===ye.type){a(L,ye.sibling),D=d(ye,F.props),D.ref=Ta(L,ye,F),D.return=L,L=D;break e}a(L,ye);break}else r(L,ye);ye=ye.sibling}F.type===S?(D=Gi(F.props.children,L.mode,X,F.key),D.return=L,L=D):(X=Nu(F.type,F.key,F.props,null,L.mode,X),X.ref=Ta(L,D,F),X.return=L,L=X)}return v(L);case Ee:e:{for(ye=F.key;D!==null;){if(D.key===ye)if(D.tag===4&&D.stateNode.containerInfo===F.containerInfo&&D.stateNode.implementation===F.implementation){a(L,D.sibling),D=d(D,F.children||[]),D.return=L,L=D;break e}else{a(L,D);break}else r(L,D);D=D.sibling}D=_d(F,L.mode,X),D.return=L,L=D}return v(L);case We:return ye=F._init,ut(L,D,ye(F._payload),X)}if(or(F))return le(L,D,F,X);if(me(F))return ce(L,D,F,X);uu(L,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,D!==null&&D.tag===6?(a(L,D.sibling),D=d(D,F),D.return=L,L=D):(a(L,D),D=yd(F,L.mode,X),D.return=L,L=D),v(L)):a(L,D)}return ut}var eo=Yp(!0),Xp=Yp(!1),cu=qr(null),hu=null,to=null,Ph=null;function Ch(){Ph=to=hu=null}function xh(n){var r=cu.current;Xe(cu),n._currentValue=r}function Vh(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function no(n,r){hu=n,Ph=to=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(Jt=!0),n.firstContext=null)}function wn(n){var r=n._currentValue;if(Ph!==n)if(n={context:n,memoizedValue:r,next:null},to===null){if(hu===null)throw Error(t(308));to=n,hu.dependencies={lanes:0,firstContext:n}}else to=to.next=n;return r}var Bi=null;function kh(n){Bi===null?Bi=[n]:Bi.push(n)}function Jp(n,r,a,c){var d=r.interleaved;return d===null?(a.next=a,kh(r)):(a.next=d.next,d.next=a),r.interleaved=a,vr(n,c)}function vr(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Hr=!1;function Dh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zp(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Er(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function Qr(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Me&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,vr(n,a)}return d=c.interleaved,d===null?(r.next=r,kh(c)):(r.next=d.next,d.next=r),c.interleaved=r,vr(n,a)}function du(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Lr(n,a)}}function em(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?d=m=r:m=m.next=r}else d=m=r;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function fu(n,r,a,c){var d=n.updateQueue;Hr=!1;var m=d.firstBaseUpdate,v=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var V=A,z=V.next;V.next=null,v===null?m=z:v.next=z,v=V;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,A=Q.lastBaseUpdate,A!==v&&(A===null?Q.firstBaseUpdate=z:A.next=z,Q.lastBaseUpdate=V))}if(m!==null){var W=d.baseState;v=0,Q=z=V=null,A=m;do{var H=A.lane,ie=A.eventTime;if((c&H)===H){Q!==null&&(Q=Q.next={eventTime:ie,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var le=n,ce=A;switch(H=r,ie=a,ce.tag){case 1:if(le=ce.payload,typeof le=="function"){W=le.call(ie,W,H);break e}W=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ce.payload,H=typeof le=="function"?le.call(ie,W,H):le,H==null)break e;W=se({},W,H);break e;case 2:Hr=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,H=d.effects,H===null?d.effects=[A]:H.push(A))}else ie={eventTime:ie,lane:H,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Q===null?(z=Q=ie,V=W):Q=Q.next=ie,v|=H;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;H=A,A=H.next,H.next=null,d.lastBaseUpdate=H,d.shared.pending=null}}while(!0);if(Q===null&&(V=W),d.baseState=V,d.firstBaseUpdate=z,d.lastBaseUpdate=Q,r=d.shared.interleaved,r!==null){d=r;do v|=d.lane,d=d.next;while(d!==r)}else m===null&&(d.shared.lanes=0);ji|=v,n.lanes=v,n.memoizedState=W}}function tm(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Sa={},Jn=qr(Sa),Aa=qr(Sa),Ra=qr(Sa);function zi(n){if(n===Sa)throw Error(t(174));return n}function Nh(n,r){switch(Qe(Ra,r),Qe(Aa,n),Qe(Jn,Sa),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:mt(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=mt(r,n)}Xe(Jn),Qe(Jn,r)}function ro(){Xe(Jn),Xe(Aa),Xe(Ra)}function nm(n){zi(Ra.current);var r=zi(Jn.current),a=mt(r,n.type);r!==a&&(Qe(Aa,n),Qe(Jn,a))}function bh(n){Aa.current===n&&(Xe(Jn),Xe(Aa))}var nt=qr(0);function pu(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Mh=[];function Oh(){for(var n=0;n<Mh.length;n++)Mh[n]._workInProgressVersionPrimary=null;Mh.length=0}var mu=ge.ReactCurrentDispatcher,Lh=ge.ReactCurrentBatchConfig,Ui=0,rt=null,yt=null,Tt=null,gu=!1,Pa=!1,Ca=0,o0=0;function bt(){throw Error(t(321))}function Fh(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Ln(n[a],r[a]))return!1;return!0}function Bh(n,r,a,c,d,m){if(Ui=m,rt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,mu.current=n===null||n.memoizedState===null?c0:h0,n=a(c,d),Pa){m=0;do{if(Pa=!1,Ca=0,25<=m)throw Error(t(301));m+=1,Tt=yt=null,r.updateQueue=null,mu.current=d0,n=a(c,d)}while(Pa)}if(mu.current=vu,r=yt!==null&&yt.next!==null,Ui=0,Tt=yt=rt=null,gu=!1,r)throw Error(t(300));return n}function zh(){var n=Ca!==0;return Ca=0,n}function Zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?rt.memoizedState=Tt=n:Tt=Tt.next=n,Tt}function In(){if(yt===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=yt.next;var r=Tt===null?rt.memoizedState:Tt.next;if(r!==null)Tt=r,yt=n;else{if(n===null)throw Error(t(310));yt=n,n={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Tt===null?rt.memoizedState=Tt=n:Tt=Tt.next=n}return Tt}function xa(n,r){return typeof r=="function"?r(n):r}function Uh(n){var r=In(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=yt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var v=d.next;d.next=m.next,m.next=v}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var A=v=null,V=null,z=m;do{var Q=z.lane;if((Ui&Q)===Q)V!==null&&(V=V.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:n(c,z.action);else{var W={lane:Q,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};V===null?(A=V=W,v=c):V=V.next=W,rt.lanes|=Q,ji|=Q}z=z.next}while(z!==null&&z!==m);V===null?v=c:V.next=A,Ln(c,r.memoizedState)||(Jt=!0),r.memoizedState=c,r.baseState=v,r.baseQueue=V,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,rt.lanes|=m,ji|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function jh(n){var r=In(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=r.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do m=n(m,v.action),v=v.next;while(v!==d);Ln(m,r.memoizedState)||(Jt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,c]}function rm(){}function im(n,r){var a=rt,c=In(),d=r(),m=!Ln(c.memoizedState,d);if(m&&(c.memoizedState=d,Jt=!0),c=c.queue,$h(am.bind(null,a,c,n),[n]),c.getSnapshot!==r||m||Tt!==null&&Tt.memoizedState.tag&1){if(a.flags|=2048,Va(9,om.bind(null,a,c,d,r),void 0,null),St===null)throw Error(t(349));(Ui&30)!==0||sm(a,r,d)}return d}function sm(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=rt.updateQueue,r===null?(r={lastEffect:null,stores:null},rt.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function om(n,r,a,c){r.value=a,r.getSnapshot=c,lm(r)&&um(n)}function am(n,r,a){return a(function(){lm(r)&&um(n)})}function lm(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Ln(n,a)}catch{return!0}}function um(n){var r=vr(n,1);r!==null&&jn(r,n,1,-1)}function cm(n){var r=Zn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:n},r.queue=n,n=n.dispatch=u0.bind(null,rt,n),[r.memoizedState,n]}function Va(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=rt.updateQueue,r===null?(r={lastEffect:null,stores:null},rt.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function hm(){return In().memoizedState}function yu(n,r,a,c){var d=Zn();rt.flags|=n,d.memoizedState=Va(1|r,a,void 0,c===void 0?null:c)}function _u(n,r,a,c){var d=In();c=c===void 0?null:c;var m=void 0;if(yt!==null){var v=yt.memoizedState;if(m=v.destroy,c!==null&&Fh(c,v.deps)){d.memoizedState=Va(r,a,m,c);return}}rt.flags|=n,d.memoizedState=Va(1|r,a,m,c)}function dm(n,r){return yu(8390656,8,n,r)}function $h(n,r){return _u(2048,8,n,r)}function fm(n,r){return _u(4,2,n,r)}function pm(n,r){return _u(4,4,n,r)}function mm(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function gm(n,r,a){return a=a!=null?a.concat([n]):null,_u(4,4,mm.bind(null,r,n),a)}function qh(){}function ym(n,r){var a=In();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Fh(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function _m(n,r){var a=In();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Fh(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function vm(n,r,a){return(Ui&21)===0?(n.baseState&&(n.baseState=!1,Jt=!0),n.memoizedState=a):(Ln(a,r)||(a=Vi(),rt.lanes|=a,ji|=a,n.baseState=!0),r)}function a0(n,r){var a=Ve;Ve=a!==0&&4>a?a:4,n(!0);var c=Lh.transition;Lh.transition={};try{n(!1),r()}finally{Ve=a,Lh.transition=c}}function Em(){return In().memoizedState}function l0(n,r,a){var c=Jr(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},wm(n))Im(r,a);else if(a=Jp(n,r,a,c),a!==null){var d=qt();jn(a,n,c,d),Tm(a,r,c)}}function u0(n,r,a){var c=Jr(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(wm(n))Im(r,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var v=r.lastRenderedState,A=m(v,a);if(d.hasEagerState=!0,d.eagerState=A,Ln(A,v)){var V=r.interleaved;V===null?(d.next=d,kh(r)):(d.next=V.next,V.next=d),r.interleaved=d;return}}catch{}finally{}a=Jp(n,r,d,c),a!==null&&(d=qt(),jn(a,n,c,d),Tm(a,r,c))}}function wm(n){var r=n.alternate;return n===rt||r!==null&&r===rt}function Im(n,r){Pa=gu=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Tm(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Lr(n,a)}}var vu={readContext:wn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},c0={readContext:wn,useCallback:function(n,r){return Zn().memoizedState=[n,r===void 0?null:r],n},useContext:wn,useEffect:dm,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,yu(4194308,4,mm.bind(null,r,n),a)},useLayoutEffect:function(n,r){return yu(4194308,4,n,r)},useInsertionEffect:function(n,r){return yu(4,2,n,r)},useMemo:function(n,r){var a=Zn();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=Zn();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=l0.bind(null,rt,n),[c.memoizedState,n]},useRef:function(n){var r=Zn();return n={current:n},r.memoizedState=n},useState:cm,useDebugValue:qh,useDeferredValue:function(n){return Zn().memoizedState=n},useTransition:function(){var n=cm(!1),r=n[0];return n=a0.bind(null,n[1]),Zn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=rt,d=Zn();if(Ze){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),St===null)throw Error(t(349));(Ui&30)!==0||sm(c,r,a)}d.memoizedState=a;var m={value:a,getSnapshot:r};return d.queue=m,dm(am.bind(null,c,m,n),[n]),c.flags|=2048,Va(9,om.bind(null,c,m,a,r),void 0,null),a},useId:function(){var n=Zn(),r=St.identifierPrefix;if(Ze){var a=_r,c=yr;a=(c&~(1<<32-Ut(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=Ca++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=o0++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},h0={readContext:wn,useCallback:ym,useContext:wn,useEffect:$h,useImperativeHandle:gm,useInsertionEffect:fm,useLayoutEffect:pm,useMemo:_m,useReducer:Uh,useRef:hm,useState:function(){return Uh(xa)},useDebugValue:qh,useDeferredValue:function(n){var r=In();return vm(r,yt.memoizedState,n)},useTransition:function(){var n=Uh(xa)[0],r=In().memoizedState;return[n,r]},useMutableSource:rm,useSyncExternalStore:im,useId:Em,unstable_isNewReconciler:!1},d0={readContext:wn,useCallback:ym,useContext:wn,useEffect:$h,useImperativeHandle:gm,useInsertionEffect:fm,useLayoutEffect:pm,useMemo:_m,useReducer:jh,useRef:hm,useState:function(){return jh(xa)},useDebugValue:qh,useDeferredValue:function(n){var r=In();return yt===null?r.memoizedState=n:vm(r,yt.memoizedState,n)},useTransition:function(){var n=jh(xa)[0],r=In().memoizedState;return[n,r]},useMutableSource:rm,useSyncExternalStore:im,useId:Em,unstable_isNewReconciler:!1};function Bn(n,r){if(n&&n.defaultProps){r=se({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function Kh(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:se({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Eu={isMounted:function(n){return(n=n._reactInternals)?Vn(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=qt(),d=Jr(n),m=Er(c,d);m.payload=r,a!=null&&(m.callback=a),r=Qr(n,m,d),r!==null&&(jn(r,n,d,c),du(r,n,d))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=qt(),d=Jr(n),m=Er(c,d);m.tag=1,m.payload=r,a!=null&&(m.callback=a),r=Qr(n,m,d),r!==null&&(jn(r,n,d,c),du(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=qt(),c=Jr(n),d=Er(a,c);d.tag=2,r!=null&&(d.callback=r),r=Qr(n,d,c),r!==null&&(jn(r,n,c,a),du(r,n,c))}};function Sm(n,r,a,c,d,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,v):r.prototype&&r.prototype.isPureReactComponent?!ga(a,c)||!ga(d,m):!0}function Am(n,r,a){var c=!1,d=Kr,m=r.contextType;return typeof m=="object"&&m!==null?m=wn(m):(d=Xt(r)?Oi:Nt.current,c=r.contextTypes,m=(c=c!=null)?Ys(n,d):Kr),r=new r(a,m),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Eu,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),r}function Rm(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&Eu.enqueueReplaceState(r,r.state,null)}function Gh(n,r,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Dh(n);var m=r.contextType;typeof m=="object"&&m!==null?d.context=wn(m):(m=Xt(r)?Oi:Nt.current,d.context=Ys(n,m)),d.state=n.memoizedState,m=r.getDerivedStateFromProps,typeof m=="function"&&(Kh(n,r,m,a),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Eu.enqueueReplaceState(d,d.state,null),fu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function io(n,r){try{var a="",c=r;do a+=Pe(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:r,stack:d,digest:null}}function Hh(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function Qh(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var f0=typeof WeakMap=="function"?WeakMap:Map;function Pm(n,r,a){a=Er(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){Pu||(Pu=!0,ud=c),Qh(n,r)},a}function Cm(n,r,a){a=Er(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;a.payload=function(){return c(d)},a.callback=function(){Qh(n,r)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Qh(n,r),typeof c!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var v=r.stack;this.componentDidCatch(r.value,{componentStack:v!==null?v:""})}),a}function xm(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new f0;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(a)||(d.add(a),n=P0.bind(null,n,r,a),r.then(n,n))}function Vm(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function km(n,r,a,c,d){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=Er(-1,1),r.tag=2,Qr(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var p0=ge.ReactCurrentOwner,Jt=!1;function $t(n,r,a,c){r.child=n===null?Xp(r,null,a,c):eo(r,n.child,a,c)}function Dm(n,r,a,c,d){a=a.render;var m=r.ref;return no(r,d),c=Bh(n,r,a,c,m,d),a=zh(),n!==null&&!Jt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,wr(n,r,d)):(Ze&&a&&Ih(r),r.flags|=1,$t(n,r,c,d),r.child)}function Nm(n,r,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!gd(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=m,bm(n,r,m,c,d)):(n=Nu(a.type,null,c,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,(n.lanes&d)===0){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:ga,a(v,c)&&n.ref===r.ref)return wr(n,r,d)}return r.flags|=1,n=ei(m,c),n.ref=r.ref,n.return=r,r.child=n}function bm(n,r,a,c,d){if(n!==null){var m=n.memoizedProps;if(ga(m,c)&&n.ref===r.ref)if(Jt=!1,r.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Jt=!0);else return r.lanes=n.lanes,wr(n,r,d)}return Wh(n,r,a,c,d)}function Mm(n,r,a){var c=r.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(oo,cn),cn|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Qe(oo,cn),cn|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,Qe(oo,cn),cn|=c}else m!==null?(c=m.baseLanes|a,r.memoizedState=null):c=a,Qe(oo,cn),cn|=c;return $t(n,r,d,a),r.child}function Om(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function Wh(n,r,a,c,d){var m=Xt(a)?Oi:Nt.current;return m=Ys(r,m),no(r,d),a=Bh(n,r,a,c,m,d),c=zh(),n!==null&&!Jt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,wr(n,r,d)):(Ze&&c&&Ih(r),r.flags|=1,$t(n,r,a,d),r.child)}function Lm(n,r,a,c,d){if(Xt(a)){var m=!0;iu(r)}else m=!1;if(no(r,d),r.stateNode===null)Iu(n,r),Am(r,a,c),Gh(r,a,c,d),c=!0;else if(n===null){var v=r.stateNode,A=r.memoizedProps;v.props=A;var V=v.context,z=a.contextType;typeof z=="object"&&z!==null?z=wn(z):(z=Xt(a)?Oi:Nt.current,z=Ys(r,z));var Q=a.getDerivedStateFromProps,W=typeof Q=="function"||typeof v.getSnapshotBeforeUpdate=="function";W||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==c||V!==z)&&Rm(r,v,c,z),Hr=!1;var H=r.memoizedState;v.state=H,fu(r,c,v,d),V=r.memoizedState,A!==c||H!==V||Yt.current||Hr?(typeof Q=="function"&&(Kh(r,a,Q,c),V=r.memoizedState),(A=Hr||Sm(r,a,A,c,H,V,z))?(W||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=V),v.props=c,v.state=V,v.context=z,c=A):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,Zp(n,r),A=r.memoizedProps,z=r.type===r.elementType?A:Bn(r.type,A),v.props=z,W=r.pendingProps,H=v.context,V=a.contextType,typeof V=="object"&&V!==null?V=wn(V):(V=Xt(a)?Oi:Nt.current,V=Ys(r,V));var ie=a.getDerivedStateFromProps;(Q=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==W||H!==V)&&Rm(r,v,c,V),Hr=!1,H=r.memoizedState,v.state=H,fu(r,c,v,d);var le=r.memoizedState;A!==W||H!==le||Yt.current||Hr?(typeof ie=="function"&&(Kh(r,a,ie,c),le=r.memoizedState),(z=Hr||Sm(r,a,z,c,H,le,V)||!1)?(Q||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,le,V),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,le,V)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=le),v.props=c,v.state=le,v.context=V,c=z):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(r.flags|=1024),c=!1)}return Yh(n,r,a,c,m,d)}function Yh(n,r,a,c,d,m){Om(n,r);var v=(r.flags&128)!==0;if(!c&&!v)return d&&jp(r,a,!1),wr(n,r,m);c=r.stateNode,p0.current=r;var A=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&v?(r.child=eo(r,n.child,null,m),r.child=eo(r,null,A,m)):$t(n,r,A,m),r.memoizedState=c.state,d&&jp(r,a,!0),r.child}function Fm(n){var r=n.stateNode;r.pendingContext?zp(n,r.pendingContext,r.pendingContext!==r.context):r.context&&zp(n,r.context,!1),Nh(n,r.containerInfo)}function Bm(n,r,a,c,d){return Zs(),Rh(d),r.flags|=256,$t(n,r,a,c),r.child}var Xh={dehydrated:null,treeContext:null,retryLane:0};function Jh(n){return{baseLanes:n,cachePool:null,transitions:null}}function zm(n,r,a){var c=r.pendingProps,d=nt.current,m=!1,v=(r.flags&128)!==0,A;if((A=v)||(A=n!==null&&n.memoizedState===null?!1:(d&2)!==0),A?(m=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Qe(nt,d&1),n===null)return Ah(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(v=c.children,n=c.fallback,m?(c=r.mode,m=r.child,v={mode:"hidden",children:v},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=v):m=bu(v,c,0,null),n=Gi(n,c,a,null),m.return=r,n.return=r,m.sibling=n,r.child=m,r.child.memoizedState=Jh(a),r.memoizedState=Xh,n):Zh(r,v));if(d=n.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return m0(n,r,v,c,A,d,a);if(m){m=c.fallback,v=r.mode,d=n.child,A=d.sibling;var V={mode:"hidden",children:c.children};return(v&1)===0&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=V,r.deletions=null):(c=ei(d,V),c.subtreeFlags=d.subtreeFlags&14680064),A!==null?m=ei(A,m):(m=Gi(m,v,a,null),m.flags|=2),m.return=r,c.return=r,c.sibling=m,r.child=c,c=m,m=r.child,v=n.child.memoizedState,v=v===null?Jh(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},m.memoizedState=v,m.childLanes=n.childLanes&~a,r.memoizedState=Xh,c}return m=n.child,n=m.sibling,c=ei(m,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function Zh(n,r){return r=bu({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function wu(n,r,a,c){return c!==null&&Rh(c),eo(r,n.child,null,a),n=Zh(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function m0(n,r,a,c,d,m,v){if(a)return r.flags&256?(r.flags&=-257,c=Hh(Error(t(422))),wu(n,r,v,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(m=c.fallback,d=r.mode,c=bu({mode:"visible",children:c.children},d,0,null),m=Gi(m,d,v,null),m.flags|=2,c.return=r,m.return=r,c.sibling=m,r.child=c,(r.mode&1)!==0&&eo(r,n.child,null,v),r.child.memoizedState=Jh(v),r.memoizedState=Xh,m);if((r.mode&1)===0)return wu(n,r,v,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var A=c.dgst;return c=A,m=Error(t(419)),c=Hh(m,c,void 0),wu(n,r,v,c)}if(A=(v&n.childLanes)!==0,Jt||A){if(c=St,c!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|v))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,vr(n,d),jn(c,n,d,-1))}return md(),c=Hh(Error(t(421))),wu(n,r,v,c)}return d.data==="$?"?(r.flags|=128,r.child=n.child,r=C0.bind(null,n),d._reactRetry=r,null):(n=m.treeContext,un=$r(d.nextSibling),ln=r,Ze=!0,Fn=null,n!==null&&(vn[En++]=yr,vn[En++]=_r,vn[En++]=Li,yr=n.id,_r=n.overflow,Li=r),r=Zh(r,c.children),r.flags|=4096,r)}function Um(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Vh(n.return,r,a)}function ed(n,r,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function jm(n,r,a){var c=r.pendingProps,d=c.revealOrder,m=c.tail;if($t(n,r,c.children,a),c=nt.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Um(n,a,r);else if(n.tag===19)Um(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Qe(nt,c),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&pu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),ed(r,!1,d,a,m);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&pu(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}ed(r,!0,a,null,m);break;case"together":ed(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Iu(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function wr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),ji|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=ei(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=ei(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function g0(n,r,a){switch(r.tag){case 3:Fm(r),Zs();break;case 5:nm(r);break;case 1:Xt(r.type)&&iu(r);break;case 4:Nh(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;Qe(cu,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Qe(nt,nt.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?zm(n,r,a):(Qe(nt,nt.current&1),n=wr(n,r,a),n!==null?n.sibling:null);Qe(nt,nt.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return jm(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Qe(nt,nt.current),c)break;return null;case 22:case 23:return r.lanes=0,Mm(n,r,a)}return wr(n,r,a)}var $m,td,qm,Km;$m=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},td=function(){},qm=function(n,r,a,c){var d=n.memoizedProps;if(d!==c){n=r.stateNode,zi(Jn.current);var m=null;switch(a){case"input":d=vi(n,d),c=vi(n,c),m=[];break;case"select":d=se({},d,{value:void 0}),c=se({},c,{value:void 0}),m=[];break;case"textarea":d=Ko(n,d),c=Ko(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=tu)}Xo(a,c);var v;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var A=d[z];for(v in A)A.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?m||(m=[]):(m=m||[]).push(z,null));for(z in c){var V=c[z];if(A=d!=null?d[z]:void 0,c.hasOwnProperty(z)&&V!==A&&(V!=null||A!=null))if(z==="style")if(A){for(v in A)!A.hasOwnProperty(v)||V&&V.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in V)V.hasOwnProperty(v)&&A[v]!==V[v]&&(a||(a={}),a[v]=V[v])}else a||(m||(m=[]),m.push(z,a)),a=V;else z==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,A=A?A.__html:void 0,V!=null&&A!==V&&(m=m||[]).push(z,V)):z==="children"?typeof V!="string"&&typeof V!="number"||(m=m||[]).push(z,""+V):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(V!=null&&z==="onScroll"&&Ye("scroll",n),m||A===V||(m=[])):(m=m||[]).push(z,V))}a&&(m=m||[]).push("style",a);var z=m;(r.updateQueue=z)&&(r.flags|=4)}},Km=function(n,r,a,c){a!==c&&(r.flags|=4)};function ka(n,r){if(!Ze)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Mt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function y0(n,r,a){var c=r.pendingProps;switch(Th(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(r),null;case 1:return Xt(r.type)&&ru(),Mt(r),null;case 3:return c=r.stateNode,ro(),Xe(Yt),Xe(Nt),Oh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(lu(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Fn!==null&&(dd(Fn),Fn=null))),td(n,r),Mt(r),null;case 5:bh(r);var d=zi(Ra.current);if(a=r.type,n!==null&&r.stateNode!=null)qm(n,r,a,c,d),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return Mt(r),null}if(n=zi(Jn.current),lu(r)){c=r.stateNode,a=r.type;var m=r.memoizedProps;switch(c[Xn]=r,c[wa]=m,n=(r.mode&1)!==0,a){case"dialog":Ye("cancel",c),Ye("close",c);break;case"iframe":case"object":case"embed":Ye("load",c);break;case"video":case"audio":for(d=0;d<_a.length;d++)Ye(_a[d],c);break;case"source":Ye("error",c);break;case"img":case"image":case"link":Ye("error",c),Ye("load",c);break;case"details":Ye("toggle",c);break;case"input":_s(c,m),Ye("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},Ye("invalid",c);break;case"textarea":Es(c,m),Ye("invalid",c)}Xo(a,m),d=null;for(var v in m)if(m.hasOwnProperty(v)){var A=m[v];v==="children"?typeof A=="string"?c.textContent!==A&&(m.suppressHydrationWarning!==!0&&eu(c.textContent,A,n),d=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(m.suppressHydrationWarning!==!0&&eu(c.textContent,A,n),d=["children",""+A]):o.hasOwnProperty(v)&&A!=null&&v==="onScroll"&&Ye("scroll",c)}switch(a){case"input":sr(c),Rl(c,m,!0);break;case"textarea":sr(c),Go(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=tu)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=pt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[Xn]=r,n[wa]=c,$m(n,r,!1,!1),r.stateNode=n;e:{switch(v=Jo(a,c),a){case"dialog":Ye("cancel",n),Ye("close",n),d=c;break;case"iframe":case"object":case"embed":Ye("load",n),d=c;break;case"video":case"audio":for(d=0;d<_a.length;d++)Ye(_a[d],n);d=c;break;case"source":Ye("error",n),d=c;break;case"img":case"image":case"link":Ye("error",n),Ye("load",n),d=c;break;case"details":Ye("toggle",n),d=c;break;case"input":_s(n,c),d=vi(n,c),Ye("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=se({},c,{value:void 0}),Ye("invalid",n);break;case"textarea":Es(n,c),d=Ko(n,c),Ye("invalid",n);break;default:d=c}Xo(a,d),A=d;for(m in A)if(A.hasOwnProperty(m)){var V=A[m];m==="style"?Wo(n,V):m==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Ho(n,V)):m==="children"?typeof V=="string"?(a!=="textarea"||V!=="")&&Dr(n,V):typeof V=="number"&&Dr(n,""+V):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?V!=null&&m==="onScroll"&&Ye("scroll",n):V!=null&&re(n,m,V,v))}switch(a){case"input":sr(n),Rl(n,c,!1);break;case"textarea":sr(n),Go(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Be(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?ar(n,!!c.multiple,m,!1):c.defaultValue!=null&&ar(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=tu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Mt(r),null;case 6:if(n&&r.stateNode!=null)Km(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=zi(Ra.current),zi(Jn.current),lu(r)){if(c=r.stateNode,a=r.memoizedProps,c[Xn]=r,(m=c.nodeValue!==a)&&(n=ln,n!==null))switch(n.tag){case 3:eu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&eu(c.nodeValue,a,(n.mode&1)!==0)}m&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Xn]=r,r.stateNode=c}return Mt(r),null;case 13:if(Xe(nt),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ze&&un!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Qp(),Zs(),r.flags|=98560,m=!1;else if(m=lu(r),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[Xn]=r}else Zs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Mt(r),m=!1}else Fn!==null&&(dd(Fn),Fn=null),m=!0;if(!m)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(nt.current&1)!==0?_t===0&&(_t=3):md())),r.updateQueue!==null&&(r.flags|=4),Mt(r),null);case 4:return ro(),td(n,r),n===null&&va(r.stateNode.containerInfo),Mt(r),null;case 10:return xh(r.type._context),Mt(r),null;case 17:return Xt(r.type)&&ru(),Mt(r),null;case 19:if(Xe(nt),m=r.memoizedState,m===null)return Mt(r),null;if(c=(r.flags&128)!==0,v=m.rendering,v===null)if(c)ka(m,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(v=pu(n),v!==null){for(r.flags|=128,ka(m,!1),c=v.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)m=a,n=c,m.flags&=14680066,v=m.alternate,v===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=v.childLanes,m.lanes=v.lanes,m.child=v.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=v.memoizedProps,m.memoizedState=v.memoizedState,m.updateQueue=v.updateQueue,m.type=v.type,n=v.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Qe(nt,nt.current&1|2),r.child}n=n.sibling}m.tail!==null&&He()>ao&&(r.flags|=128,c=!0,ka(m,!1),r.lanes=4194304)}else{if(!c)if(n=pu(v),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),ka(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!Ze)return Mt(r),null}else 2*He()-m.renderingStartTime>ao&&a!==1073741824&&(r.flags|=128,c=!0,ka(m,!1),r.lanes=4194304);m.isBackwards?(v.sibling=r.child,r.child=v):(a=m.last,a!==null?a.sibling=v:r.child=v,m.last=v)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=He(),r.sibling=null,a=nt.current,Qe(nt,c?a&1|2:a&1),r):(Mt(r),null);case 22:case 23:return pd(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(cn&1073741824)!==0&&(Mt(r),r.subtreeFlags&6&&(r.flags|=8192)):Mt(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function _0(n,r){switch(Th(r),r.tag){case 1:return Xt(r.type)&&ru(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return ro(),Xe(Yt),Xe(Nt),Oh(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return bh(r),null;case 13:if(Xe(nt),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));Zs()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Xe(nt),null;case 4:return ro(),null;case 10:return xh(r.type._context),null;case 22:case 23:return pd(),null;case 24:return null;default:return null}}var Tu=!1,Ot=!1,v0=typeof WeakSet=="function"?WeakSet:Set,oe=null;function so(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ot(n,r,c)}else a.current=null}function nd(n,r,a){try{a()}catch(c){ot(n,r,c)}}var Gm=!1;function E0(n,r){if(ph=zr,n=Sp(),oh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,A=-1,V=-1,z=0,Q=0,W=n,H=null;t:for(;;){for(var ie;W!==a||d!==0&&W.nodeType!==3||(A=v+d),W!==m||c!==0&&W.nodeType!==3||(V=v+c),W.nodeType===3&&(v+=W.nodeValue.length),(ie=W.firstChild)!==null;)H=W,W=ie;for(;;){if(W===n)break t;if(H===a&&++z===d&&(A=v),H===m&&++Q===c&&(V=v),(ie=W.nextSibling)!==null)break;W=H,H=W.parentNode}W=ie}a=A===-1||V===-1?null:{start:A,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(mh={focusedElem:n,selectionRange:a},zr=!1,oe=r;oe!==null;)if(r=oe,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,oe=n;else for(;oe!==null;){r=oe;try{var le=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(le!==null){var ce=le.memoizedProps,ut=le.memoizedState,L=r.stateNode,D=L.getSnapshotBeforeUpdate(r.elementType===r.type?ce:Bn(r.type,ce),ut);L.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(X){ot(r,r.return,X)}if(n=r.sibling,n!==null){n.return=r.return,oe=n;break}oe=r.return}return le=Gm,Gm=!1,le}function Da(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&nd(r,a,m)}d=d.next}while(d!==c)}}function Su(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function rd(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function Hm(n){var r=n.alternate;r!==null&&(n.alternate=null,Hm(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[Xn],delete r[wa],delete r[vh],delete r[n0],delete r[r0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Qm(n){return n.tag===5||n.tag===3||n.tag===4}function Wm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Qm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function id(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=tu));else if(c!==4&&(n=n.child,n!==null))for(id(n,r,a),n=n.sibling;n!==null;)id(n,r,a),n=n.sibling}function sd(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(sd(n,r,a),n=n.sibling;n!==null;)sd(n,r,a),n=n.sibling}var xt=null,zn=!1;function Wr(n,r,a){for(a=a.child;a!==null;)Ym(n,r,a),a=a.sibling}function Ym(n,r,a){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Ci,a)}catch{}switch(a.tag){case 5:Ot||so(a,r);case 6:var c=xt,d=zn;xt=null,Wr(n,r,a),xt=c,zn=d,xt!==null&&(zn?(n=xt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):xt.removeChild(a.stateNode));break;case 18:xt!==null&&(zn?(n=xt,a=a.stateNode,n.nodeType===8?_h(n.parentNode,a):n.nodeType===1&&_h(n,a),Mn(n)):_h(xt,a.stateNode));break;case 4:c=xt,d=zn,xt=a.stateNode.containerInfo,zn=!0,Wr(n,r,a),xt=c,zn=d;break;case 0:case 11:case 14:case 15:if(!Ot&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,v=m.destroy;m=m.tag,v!==void 0&&((m&2)!==0||(m&4)!==0)&&nd(a,r,v),d=d.next}while(d!==c)}Wr(n,r,a);break;case 1:if(!Ot&&(so(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){ot(a,r,A)}Wr(n,r,a);break;case 21:Wr(n,r,a);break;case 22:a.mode&1?(Ot=(c=Ot)||a.memoizedState!==null,Wr(n,r,a),Ot=c):Wr(n,r,a);break;default:Wr(n,r,a)}}function Xm(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new v0),r.forEach(function(c){var d=x0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Un(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,v=r,A=v;e:for(;A!==null;){switch(A.tag){case 5:xt=A.stateNode,zn=!1;break e;case 3:xt=A.stateNode.containerInfo,zn=!0;break e;case 4:xt=A.stateNode.containerInfo,zn=!0;break e}A=A.return}if(xt===null)throw Error(t(160));Ym(m,v,d),xt=null,zn=!1;var V=d.alternate;V!==null&&(V.return=null),d.return=null}catch(z){ot(d,r,z)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Jm(r,n),r=r.sibling}function Jm(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Un(r,n),er(n),c&4){try{Da(3,n,n.return),Su(3,n)}catch(ce){ot(n,n.return,ce)}try{Da(5,n,n.return)}catch(ce){ot(n,n.return,ce)}}break;case 1:Un(r,n),er(n),c&512&&a!==null&&so(a,a.return);break;case 5:if(Un(r,n),er(n),c&512&&a!==null&&so(a,a.return),n.flags&32){var d=n.stateNode;try{Dr(d,"")}catch(ce){ot(n,n.return,ce)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,v=a!==null?a.memoizedProps:m,A=n.type,V=n.updateQueue;if(n.updateQueue=null,V!==null)try{A==="input"&&m.type==="radio"&&m.name!=null&&$o(d,m),Jo(A,v);var z=Jo(A,m);for(v=0;v<V.length;v+=2){var Q=V[v],W=V[v+1];Q==="style"?Wo(d,W):Q==="dangerouslySetInnerHTML"?Ho(d,W):Q==="children"?Dr(d,W):re(d,Q,W,z)}switch(A){case"input":qo(d,m);break;case"textarea":ws(d,m);break;case"select":var H=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var ie=m.value;ie!=null?ar(d,!!m.multiple,ie,!1):H!==!!m.multiple&&(m.defaultValue!=null?ar(d,!!m.multiple,m.defaultValue,!0):ar(d,!!m.multiple,m.multiple?[]:"",!1))}d[wa]=m}catch(ce){ot(n,n.return,ce)}}break;case 6:if(Un(r,n),er(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(ce){ot(n,n.return,ce)}}break;case 3:if(Un(r,n),er(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Mn(r.containerInfo)}catch(ce){ot(n,n.return,ce)}break;case 4:Un(r,n),er(n);break;case 13:Un(r,n),er(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(ld=He())),c&4&&Xm(n);break;case 22:if(Q=a!==null&&a.memoizedState!==null,n.mode&1?(Ot=(z=Ot)||Q,Un(r,n),Ot=z):Un(r,n),er(n),c&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!Q&&(n.mode&1)!==0)for(oe=n,Q=n.child;Q!==null;){for(W=oe=Q;oe!==null;){switch(H=oe,ie=H.child,H.tag){case 0:case 11:case 14:case 15:Da(4,H,H.return);break;case 1:so(H,H.return);var le=H.stateNode;if(typeof le.componentWillUnmount=="function"){c=H,a=H.return;try{r=c,le.props=r.memoizedProps,le.state=r.memoizedState,le.componentWillUnmount()}catch(ce){ot(c,a,ce)}}break;case 5:so(H,H.return);break;case 22:if(H.memoizedState!==null){tg(W);continue}}ie!==null?(ie.return=H,oe=ie):tg(W)}Q=Q.sibling}e:for(Q=null,W=n;;){if(W.tag===5){if(Q===null){Q=W;try{d=W.stateNode,z?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(A=W.stateNode,V=W.memoizedProps.style,v=V!=null&&V.hasOwnProperty("display")?V.display:null,A.style.display=Qo("display",v))}catch(ce){ot(n,n.return,ce)}}}else if(W.tag===6){if(Q===null)try{W.stateNode.nodeValue=z?"":W.memoizedProps}catch(ce){ot(n,n.return,ce)}}else if((W.tag!==22&&W.tag!==23||W.memoizedState===null||W===n)&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===n)break e;for(;W.sibling===null;){if(W.return===null||W.return===n)break e;Q===W&&(Q=null),W=W.return}Q===W&&(Q=null),W.sibling.return=W.return,W=W.sibling}}break;case 19:Un(r,n),er(n),c&4&&Xm(n);break;case 21:break;default:Un(r,n),er(n)}}function er(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(Qm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Dr(d,""),c.flags&=-33);var m=Wm(n);sd(n,m,d);break;case 3:case 4:var v=c.stateNode.containerInfo,A=Wm(n);id(n,A,v);break;default:throw Error(t(161))}}catch(V){ot(n,n.return,V)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function w0(n,r,a){oe=n,Zm(n)}function Zm(n,r,a){for(var c=(n.mode&1)!==0;oe!==null;){var d=oe,m=d.child;if(d.tag===22&&c){var v=d.memoizedState!==null||Tu;if(!v){var A=d.alternate,V=A!==null&&A.memoizedState!==null||Ot;A=Tu;var z=Ot;if(Tu=v,(Ot=V)&&!z)for(oe=d;oe!==null;)v=oe,V=v.child,v.tag===22&&v.memoizedState!==null?ng(d):V!==null?(V.return=v,oe=V):ng(d);for(;m!==null;)oe=m,Zm(m),m=m.sibling;oe=d,Tu=A,Ot=z}eg(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,oe=m):eg(n)}}function eg(n){for(;oe!==null;){var r=oe;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ot||Su(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Ot)if(a===null)c.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:Bn(r.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=r.updateQueue;m!==null&&tm(r,m,c);break;case 3:var v=r.updateQueue;if(v!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}tm(r,v,a)}break;case 5:var A=r.stateNode;if(a===null&&r.flags&4){a=A;var V=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&a.focus();break;case"img":V.src&&(a.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var z=r.alternate;if(z!==null){var Q=z.memoizedState;if(Q!==null){var W=Q.dehydrated;W!==null&&Mn(W)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ot||r.flags&512&&rd(r)}catch(H){ot(r,r.return,H)}}if(r===n){oe=null;break}if(a=r.sibling,a!==null){a.return=r.return,oe=a;break}oe=r.return}}function tg(n){for(;oe!==null;){var r=oe;if(r===n){oe=null;break}var a=r.sibling;if(a!==null){a.return=r.return,oe=a;break}oe=r.return}}function ng(n){for(;oe!==null;){var r=oe;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Su(4,r)}catch(V){ot(r,a,V)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(V){ot(r,d,V)}}var m=r.return;try{rd(r)}catch(V){ot(r,m,V)}break;case 5:var v=r.return;try{rd(r)}catch(V){ot(r,v,V)}}}catch(V){ot(r,r.return,V)}if(r===n){oe=null;break}var A=r.sibling;if(A!==null){A.return=r.return,oe=A;break}oe=r.return}}var I0=Math.ceil,Au=ge.ReactCurrentDispatcher,od=ge.ReactCurrentOwner,Tn=ge.ReactCurrentBatchConfig,Me=0,St=null,ht=null,Vt=0,cn=0,oo=qr(0),_t=0,Na=null,ji=0,Ru=0,ad=0,ba=null,Zt=null,ld=0,ao=1/0,Ir=null,Pu=!1,ud=null,Yr=null,Cu=!1,Xr=null,xu=0,Ma=0,cd=null,Vu=-1,ku=0;function qt(){return(Me&6)!==0?He():Vu!==-1?Vu:Vu=He()}function Jr(n){return(n.mode&1)===0?1:(Me&2)!==0&&Vt!==0?Vt&-Vt:s0.transition!==null?(ku===0&&(ku=Vi()),ku):(n=Ve,n!==0||(n=window.event,n=n===void 0?16:ua(n.type)),n)}function jn(n,r,a,c){if(50<Ma)throw Ma=0,cd=null,Error(t(185));Or(n,a,c),((Me&2)===0||n!==St)&&(n===St&&((Me&2)===0&&(Ru|=a),_t===4&&Zr(n,Vt)),en(n,c),a===1&&Me===0&&(r.mode&1)===0&&(ao=He()+500,su&&Gr()))}function en(n,r){var a=n.callbackNode;cr(n,r);var c=xi(n,n===St?Vt:0);if(c===0)a!==null&&ia(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&ia(a),r===1)n.tag===0?i0(ig.bind(null,n)):$p(ig.bind(null,n)),e0(function(){(Me&6)===0&&Gr()}),a=null;else{switch(Fr(c)){case 1:a=Pi;break;case 4:a=Nr;break;case 16:a=gn;break;case 536870912:a=kl;break;default:a=gn}a=dg(a,rg.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function rg(n,r){if(Vu=-1,ku=0,(Me&6)!==0)throw Error(t(327));var a=n.callbackNode;if(lo()&&n.callbackNode!==a)return null;var c=xi(n,n===St?Vt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=Du(n,c);else{r=c;var d=Me;Me|=2;var m=og();(St!==n||Vt!==r)&&(Ir=null,ao=He()+500,qi(n,r));do try{A0();break}catch(A){sg(n,A)}while(!0);Ch(),Au.current=m,Me=d,ht!==null?r=0:(St=null,Vt=0,r=_t)}if(r!==0){if(r===2&&(d=sn(n),d!==0&&(c=d,r=hd(n,d))),r===1)throw a=Na,qi(n,0),Zr(n,c),en(n,He()),a;if(r===6)Zr(n,c);else{if(d=n.current.alternate,(c&30)===0&&!T0(d)&&(r=Du(n,c),r===2&&(m=sn(n),m!==0&&(c=m,r=hd(n,m))),r===1))throw a=Na,qi(n,0),Zr(n,c),en(n,He()),a;switch(n.finishedWork=d,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:Ki(n,Zt,Ir);break;case 3:if(Zr(n,c),(c&130023424)===c&&(r=ld+500-He(),10<r)){if(xi(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){qt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=yh(Ki.bind(null,n,Zt,Ir),r);break}Ki(n,Zt,Ir);break;case 4:if(Zr(n,c),(c&4194240)===c)break;for(r=n.eventTimes,d=-1;0<c;){var v=31-Ut(c);m=1<<v,v=r[v],v>d&&(d=v),c&=~m}if(c=d,c=He()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*I0(c/1960))-c,10<c){n.timeoutHandle=yh(Ki.bind(null,n,Zt,Ir),c);break}Ki(n,Zt,Ir);break;case 5:Ki(n,Zt,Ir);break;default:throw Error(t(329))}}}return en(n,He()),n.callbackNode===a?rg.bind(null,n):null}function hd(n,r){var a=ba;return n.current.memoizedState.isDehydrated&&(qi(n,r).flags|=256),n=Du(n,r),n!==2&&(r=Zt,Zt=a,r!==null&&dd(r)),n}function dd(n){Zt===null?Zt=n:Zt.push.apply(Zt,n)}function T0(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!Ln(m(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Zr(n,r){for(r&=~ad,r&=~Ru,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-Ut(r),c=1<<a;n[a]=-1,r&=~c}}function ig(n){if((Me&6)!==0)throw Error(t(327));lo();var r=xi(n,0);if((r&1)===0)return en(n,He()),null;var a=Du(n,r);if(n.tag!==0&&a===2){var c=sn(n);c!==0&&(r=c,a=hd(n,c))}if(a===1)throw a=Na,qi(n,0),Zr(n,r),en(n,He()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Ki(n,Zt,Ir),en(n,He()),null}function fd(n,r){var a=Me;Me|=1;try{return n(r)}finally{Me=a,Me===0&&(ao=He()+500,su&&Gr())}}function $i(n){Xr!==null&&Xr.tag===0&&(Me&6)===0&&lo();var r=Me;Me|=1;var a=Tn.transition,c=Ve;try{if(Tn.transition=null,Ve=1,n)return n()}finally{Ve=c,Tn.transition=a,Me=r,(Me&6)===0&&Gr()}}function pd(){cn=oo.current,Xe(oo)}function qi(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,ZE(a)),ht!==null)for(a=ht.return;a!==null;){var c=a;switch(Th(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ru();break;case 3:ro(),Xe(Yt),Xe(Nt),Oh();break;case 5:bh(c);break;case 4:ro();break;case 13:Xe(nt);break;case 19:Xe(nt);break;case 10:xh(c.type._context);break;case 22:case 23:pd()}a=a.return}if(St=n,ht=n=ei(n.current,null),Vt=cn=r,_t=0,Na=null,ad=Ru=ji=0,Zt=ba=null,Bi!==null){for(r=0;r<Bi.length;r++)if(a=Bi[r],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var v=m.next;m.next=d,c.next=v}a.pending=c}Bi=null}return n}function sg(n,r){do{var a=ht;try{if(Ch(),mu.current=vu,gu){for(var c=rt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}gu=!1}if(Ui=0,Tt=yt=rt=null,Pa=!1,Ca=0,od.current=null,a===null||a.return===null){_t=1,Na=r,ht=null;break}e:{var m=n,v=a.return,A=a,V=r;if(r=Vt,A.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var z=V,Q=A,W=Q.tag;if((Q.mode&1)===0&&(W===0||W===11||W===15)){var H=Q.alternate;H?(Q.updateQueue=H.updateQueue,Q.memoizedState=H.memoizedState,Q.lanes=H.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ie=Vm(v);if(ie!==null){ie.flags&=-257,km(ie,v,A,m,r),ie.mode&1&&xm(m,z,r),r=ie,V=z;var le=r.updateQueue;if(le===null){var ce=new Set;ce.add(V),r.updateQueue=ce}else le.add(V);break e}else{if((r&1)===0){xm(m,z,r),md();break e}V=Error(t(426))}}else if(Ze&&A.mode&1){var ut=Vm(v);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),km(ut,v,A,m,r),Rh(io(V,A));break e}}m=V=io(V,A),_t!==4&&(_t=2),ba===null?ba=[m]:ba.push(m),m=v;do{switch(m.tag){case 3:m.flags|=65536,r&=-r,m.lanes|=r;var L=Pm(m,V,r);em(m,L);break e;case 1:A=V;var D=m.type,F=m.stateNode;if((m.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Yr===null||!Yr.has(F)))){m.flags|=65536,r&=-r,m.lanes|=r;var X=Cm(m,A,r);em(m,X);break e}}m=m.return}while(m!==null)}lg(a)}catch(he){r=he,ht===a&&a!==null&&(ht=a=a.return);continue}break}while(!0)}function og(){var n=Au.current;return Au.current=vu,n===null?vu:n}function md(){(_t===0||_t===3||_t===2)&&(_t=4),St===null||(ji&268435455)===0&&(Ru&268435455)===0||Zr(St,Vt)}function Du(n,r){var a=Me;Me|=2;var c=og();(St!==n||Vt!==r)&&(Ir=null,qi(n,r));do try{S0();break}catch(d){sg(n,d)}while(!0);if(Ch(),Me=a,Au.current=c,ht!==null)throw Error(t(261));return St=null,Vt=0,_t}function S0(){for(;ht!==null;)ag(ht)}function A0(){for(;ht!==null&&!xl();)ag(ht)}function ag(n){var r=hg(n.alternate,n,cn);n.memoizedProps=n.pendingProps,r===null?lg(n):ht=r,od.current=null}function lg(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=y0(a,r,cn),a!==null){ht=a;return}}else{if(a=_0(a,r),a!==null){a.flags&=32767,ht=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_t=6,ht=null;return}}if(r=r.sibling,r!==null){ht=r;return}ht=r=n}while(r!==null);_t===0&&(_t=5)}function Ki(n,r,a){var c=Ve,d=Tn.transition;try{Tn.transition=null,Ve=1,R0(n,r,a,c)}finally{Tn.transition=d,Ve=c}return null}function R0(n,r,a,c){do lo();while(Xr!==null);if((Me&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(Ke(n,m),n===St&&(ht=St=null,Vt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Cu||(Cu=!0,dg(gn,function(){return lo(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=Tn.transition,Tn.transition=null;var v=Ve;Ve=1;var A=Me;Me|=4,od.current=null,E0(n,a),Jm(a,n),GE(mh),zr=!!ph,mh=ph=null,n.current=a,w0(a),Jc(),Me=A,Ve=v,Tn.transition=m}else n.current=a;if(Cu&&(Cu=!1,Xr=n,xu=d),m=n.pendingLanes,m===0&&(Yr=null),Dl(a.stateNode),en(n,He()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)d=r[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Pu)throw Pu=!1,n=ud,ud=null,n;return(xu&1)!==0&&n.tag!==0&&lo(),m=n.pendingLanes,(m&1)!==0?n===cd?Ma++:(Ma=0,cd=n):Ma=0,Gr(),null}function lo(){if(Xr!==null){var n=Fr(xu),r=Tn.transition,a=Ve;try{if(Tn.transition=null,Ve=16>n?16:n,Xr===null)var c=!1;else{if(n=Xr,Xr=null,xu=0,(Me&6)!==0)throw Error(t(331));var d=Me;for(Me|=4,oe=n.current;oe!==null;){var m=oe,v=m.child;if((oe.flags&16)!==0){var A=m.deletions;if(A!==null){for(var V=0;V<A.length;V++){var z=A[V];for(oe=z;oe!==null;){var Q=oe;switch(Q.tag){case 0:case 11:case 15:Da(8,Q,m)}var W=Q.child;if(W!==null)W.return=Q,oe=W;else for(;oe!==null;){Q=oe;var H=Q.sibling,ie=Q.return;if(Hm(Q),Q===z){oe=null;break}if(H!==null){H.return=ie,oe=H;break}oe=ie}}}var le=m.alternate;if(le!==null){var ce=le.child;if(ce!==null){le.child=null;do{var ut=ce.sibling;ce.sibling=null,ce=ut}while(ce!==null)}}oe=m}}if((m.subtreeFlags&2064)!==0&&v!==null)v.return=m,oe=v;else e:for(;oe!==null;){if(m=oe,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Da(9,m,m.return)}var L=m.sibling;if(L!==null){L.return=m.return,oe=L;break e}oe=m.return}}var D=n.current;for(oe=D;oe!==null;){v=oe;var F=v.child;if((v.subtreeFlags&2064)!==0&&F!==null)F.return=v,oe=F;else e:for(v=D;oe!==null;){if(A=oe,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Su(9,A)}}catch(he){ot(A,A.return,he)}if(A===v){oe=null;break e}var X=A.sibling;if(X!==null){X.return=A.return,oe=X;break e}oe=A.return}}if(Me=d,Gr(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Ci,n)}catch{}c=!0}return c}finally{Ve=a,Tn.transition=r}}return!1}function ug(n,r,a){r=io(a,r),r=Pm(n,r,1),n=Qr(n,r,1),r=qt(),n!==null&&(Or(n,1,r),en(n,r))}function ot(n,r,a){if(n.tag===3)ug(n,n,a);else for(;r!==null;){if(r.tag===3){ug(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Yr===null||!Yr.has(c))){n=io(a,n),n=Cm(r,n,1),r=Qr(r,n,1),n=qt(),r!==null&&(Or(r,1,n),en(r,n));break}}r=r.return}}function P0(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=qt(),n.pingedLanes|=n.suspendedLanes&a,St===n&&(Vt&a)===a&&(_t===4||_t===3&&(Vt&130023424)===Vt&&500>He()-ld?qi(n,0):ad|=a),en(n,r)}function cg(n,r){r===0&&((n.mode&1)===0?r=1:(r=ks,ks<<=1,(ks&130023424)===0&&(ks=4194304)));var a=qt();n=vr(n,r),n!==null&&(Or(n,r,a),en(n,a))}function C0(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),cg(n,a)}function x0(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),cg(n,a)}var hg;hg=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||Yt.current)Jt=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return Jt=!1,g0(n,r,a);Jt=(n.flags&131072)!==0}else Jt=!1,Ze&&(r.flags&1048576)!==0&&qp(r,au,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Iu(n,r),n=r.pendingProps;var d=Ys(r,Nt.current);no(r,a),d=Bh(null,r,c,n,d,a);var m=zh();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Xt(c)?(m=!0,iu(r)):m=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Dh(r),d.updater=Eu,r.stateNode=d,d._reactInternals=r,Gh(r,c,n,a),r=Yh(null,r,c,!0,m,a)):(r.tag=0,Ze&&m&&Ih(r),$t(null,r,d,a),r=r.child),r;case 16:c=r.elementType;e:{switch(Iu(n,r),n=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=k0(c),n=Bn(c,n),d){case 0:r=Wh(null,r,c,n,a);break e;case 1:r=Lm(null,r,c,n,a);break e;case 11:r=Dm(null,r,c,n,a);break e;case 14:r=Nm(null,r,c,Bn(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Bn(c,d),Wh(n,r,c,d,a);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Bn(c,d),Lm(n,r,c,d,a);case 3:e:{if(Fm(r),n===null)throw Error(t(387));c=r.pendingProps,m=r.memoizedState,d=m.element,Zp(n,r),fu(r,c,null,a);var v=r.memoizedState;if(c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){d=io(Error(t(423)),r),r=Bm(n,r,c,a,d);break e}else if(c!==d){d=io(Error(t(424)),r),r=Bm(n,r,c,a,d);break e}else for(un=$r(r.stateNode.containerInfo.firstChild),ln=r,Ze=!0,Fn=null,a=Xp(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Zs(),c===d){r=wr(n,r,a);break e}$t(n,r,c,a)}r=r.child}return r;case 5:return nm(r),n===null&&Ah(r),c=r.type,d=r.pendingProps,m=n!==null?n.memoizedProps:null,v=d.children,gh(c,d)?v=null:m!==null&&gh(c,m)&&(r.flags|=32),Om(n,r),$t(n,r,v,a),r.child;case 6:return n===null&&Ah(r),null;case 13:return zm(n,r,a);case 4:return Nh(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=eo(r,null,c,a):$t(n,r,c,a),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Bn(c,d),Dm(n,r,c,d,a);case 7:return $t(n,r,r.pendingProps,a),r.child;case 8:return $t(n,r,r.pendingProps.children,a),r.child;case 12:return $t(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,m=r.memoizedProps,v=d.value,Qe(cu,c._currentValue),c._currentValue=v,m!==null)if(Ln(m.value,v)){if(m.children===d.children&&!Yt.current){r=wr(n,r,a);break e}}else for(m=r.child,m!==null&&(m.return=r);m!==null;){var A=m.dependencies;if(A!==null){v=m.child;for(var V=A.firstContext;V!==null;){if(V.context===c){if(m.tag===1){V=Er(-1,a&-a),V.tag=2;var z=m.updateQueue;if(z!==null){z=z.shared;var Q=z.pending;Q===null?V.next=V:(V.next=Q.next,Q.next=V),z.pending=V}}m.lanes|=a,V=m.alternate,V!==null&&(V.lanes|=a),Vh(m.return,a,r),A.lanes|=a;break}V=V.next}}else if(m.tag===10)v=m.type===r.type?null:m.child;else if(m.tag===18){if(v=m.return,v===null)throw Error(t(341));v.lanes|=a,A=v.alternate,A!==null&&(A.lanes|=a),Vh(v,a,r),v=m.sibling}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===r){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}$t(n,r,d.children,a),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,no(r,a),d=wn(d),c=c(d),r.flags|=1,$t(n,r,c,a),r.child;case 14:return c=r.type,d=Bn(c,r.pendingProps),d=Bn(c.type,d),Nm(n,r,c,d,a);case 15:return bm(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Bn(c,d),Iu(n,r),r.tag=1,Xt(c)?(n=!0,iu(r)):n=!1,no(r,a),Am(r,c,d),Gh(r,c,d,a),Yh(null,r,c,!0,n,a);case 19:return jm(n,r,a);case 22:return Mm(n,r,a)}throw Error(t(156,r.tag))};function dg(n,r){return xs(n,r)}function V0(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(n,r,a,c){return new V0(n,r,a,c)}function gd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function k0(n){if(typeof n=="function")return gd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===N)return 11;if(n===Et)return 14}return 2}function ei(n,r){var a=n.alternate;return a===null?(a=Sn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Nu(n,r,a,c,d,m){var v=2;if(c=n,typeof n=="function")gd(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case S:return Gi(a.children,d,m,r);case I:v=8,d|=8;break;case R:return n=Sn(12,a,r,d|2),n.elementType=R,n.lanes=m,n;case P:return n=Sn(13,a,r,d),n.elementType=P,n.lanes=m,n;case Oe:return n=Sn(19,a,r,d),n.elementType=Oe,n.lanes=m,n;case qe:return bu(a,d,m,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:v=10;break e;case k:v=9;break e;case N:v=11;break e;case Et:v=14;break e;case We:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=Sn(v,a,r,d),r.elementType=n,r.type=c,r.lanes=m,r}function Gi(n,r,a,c){return n=Sn(7,n,c,r),n.lanes=a,n}function bu(n,r,a,c){return n=Sn(22,n,c,r),n.elementType=qe,n.lanes=a,n.stateNode={isHidden:!1},n}function yd(n,r,a){return n=Sn(6,n,null,r),n.lanes=a,n}function _d(n,r,a){return r=Sn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function D0(n,r,a,c,d){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mr(0),this.expirationTimes=Mr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function vd(n,r,a,c,d,m,v,A,V){return n=new D0(n,r,a,A,V),r===1?(r=1,m===!0&&(r|=8)):r=0,m=Sn(3,null,null,r),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dh(m),n}function N0(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ee,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function fg(n){if(!n)return Kr;n=n._reactInternals;e:{if(Vn(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Xt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Xt(a))return Up(n,a,r)}return r}function pg(n,r,a,c,d,m,v,A,V){return n=vd(a,c,!0,n,d,m,v,A,V),n.context=fg(null),a=n.current,c=qt(),d=Jr(a),m=Er(c,d),m.callback=r??null,Qr(a,m,d),n.current.lanes=d,Or(n,d,c),en(n,c),n}function Mu(n,r,a,c){var d=r.current,m=qt(),v=Jr(d);return a=fg(a),r.context===null?r.context=a:r.pendingContext=a,r=Er(m,v),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=Qr(d,r,v),n!==null&&(jn(n,d,v,m),du(n,d,v)),v}function Ou(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function mg(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Ed(n,r){mg(n,r),(n=n.alternate)&&mg(n,r)}function b0(){return null}var gg=typeof reportError=="function"?reportError:function(n){console.error(n)};function wd(n){this._internalRoot=n}Lu.prototype.render=wd.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));Mu(n,r,null,null)},Lu.prototype.unmount=wd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;$i(function(){Mu(null,n,null,null)}),r[mr]=null}};function Lu(n){this._internalRoot=n}Lu.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ll();n={blockedOn:null,target:n,priority:r};for(var a=0;a<Hn.length&&r!==0&&r<Hn[a].priority;a++);Hn.splice(a,0,n),a===0&&zl(n)}};function Id(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Fu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function yg(){}function M0(n,r,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var z=Ou(v);m.call(z)}}var v=pg(r,c,n,0,null,!1,!1,"",yg);return n._reactRootContainer=v,n[mr]=v.current,va(n.nodeType===8?n.parentNode:n),$i(),v}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var A=c;c=function(){var z=Ou(V);A.call(z)}}var V=vd(n,0,!1,null,null,!1,!1,"",yg);return n._reactRootContainer=V,n[mr]=V.current,va(n.nodeType===8?n.parentNode:n),$i(function(){Mu(r,V,a,c)}),V}function Bu(n,r,a,c,d){var m=a._reactRootContainer;if(m){var v=m;if(typeof d=="function"){var A=d;d=function(){var V=Ou(v);A.call(V)}}Mu(r,v,n,d)}else v=M0(a,r,n,d,c);return Ou(v)}Ml=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=br(r.pendingLanes);a!==0&&(Lr(r,a|1),en(r,He()),(Me&6)===0&&(ao=He()+500,Gr()))}break;case 13:$i(function(){var c=vr(n,1);if(c!==null){var d=qt();jn(c,n,1,d)}}),Ed(n,1)}},Ds=function(n){if(n.tag===13){var r=vr(n,134217728);if(r!==null){var a=qt();jn(r,n,134217728,a)}Ed(n,134217728)}},Ol=function(n){if(n.tag===13){var r=Jr(n),a=vr(n,r);if(a!==null){var c=qt();jn(a,n,r,c)}Ed(n,r)}},Ll=function(){return Ve},Fl=function(n,r){var a=Ve;try{return Ve=n,r()}finally{Ve=a}},Ts=function(n,r,a){switch(r){case"input":if(qo(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var d=nu(c);if(!d)throw Error(t(90));ys(c),qo(c,d)}}}break;case"textarea":ws(n,a);break;case"select":r=a.value,r!=null&&ar(n,!!a.multiple,r,!1)}},Ti=fd,ea=$i;var O0={usingClientEntryPoint:!1,Events:[Ia,Qs,nu,Kn,Zo,fd]},Oa={findFiberByHostInstance:Mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L0={bundleType:Oa.bundleType,version:Oa.version,rendererPackageName:Oa.rendererPackageName,rendererConfig:Oa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ge.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ra(n),n===null?null:n.stateNode},findFiberByHostInstance:Oa.findFiberByHostInstance||b0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zu.isDisabled&&zu.supportsFiber)try{Ci=zu.inject(L0),rn=zu}catch{}}return tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O0,tn.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Id(r))throw Error(t(200));return N0(n,r,null,a)},tn.createRoot=function(n,r){if(!Id(n))throw Error(t(299));var a=!1,c="",d=gg;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=vd(n,1,!1,null,null,a,!1,c,d),n[mr]=r.current,va(n.nodeType===8?n.parentNode:n),new wd(r)},tn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ra(r),n=n===null?null:n.stateNode,n},tn.flushSync=function(n){return $i(n)},tn.hydrate=function(n,r,a){if(!Fu(r))throw Error(t(200));return Bu(null,n,r,!0,a)},tn.hydrateRoot=function(n,r,a){if(!Id(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",v=gg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),r=pg(r,null,n,1,a??null,d,!1,m,v),n[mr]=r.current,va(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,d]:r.mutableSourceEagerHydrationData.push(a,d);return new Lu(r)},tn.render=function(n,r,a){if(!Fu(r))throw Error(t(200));return Bu(null,n,r,!1,a)},tn.unmountComponentAtNode=function(n){if(!Fu(n))throw Error(t(40));return n._reactRootContainer?($i(function(){Bu(null,null,n,!1,function(){n._reactRootContainer=null,n[mr]=null})}),!0):!1},tn.unstable_batchedUpdates=fd,tn.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!Fu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Bu(n,r,a,!1,c)},tn.version="18.3.1-next-f1338f8080-20240426",tn}var Tg;function $0(){if(Tg)return Sd.exports;Tg=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Sd.exports=j0(),Sd.exports}var Sg;function q0(){if(Sg)return Uu;Sg=1;var s=$0();return Uu.createRoot=s.createRoot,Uu.hydrateRoot=s.hydrateRoot,Uu}var K0=q0();const G0=s_(K0),H0=()=>{};var Ag={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Q0=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const o=s[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=s[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=s[t++],h=s[t++],f=s[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=s[t++],h=s[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},l_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const l=s[o],h=o+1<s.length,f=h?s[o+1]:0,g=o+2<s.length,_=g?s[o+2]:0,w=l>>2,T=(l&3)<<4|f>>4;let C=(f&15)<<2|_>>6,B=_&63;g||(B=64,h||(C=64)),i.push(t[w],t[T],t[C],t[B])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(a_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Q0(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const l=t[s.charAt(o++)],f=o<s.length?t[s.charAt(o)]:0;++o;const _=o<s.length?t[s.charAt(o)]:64;++o;const T=o<s.length?t[s.charAt(o)]:64;if(++o,l==null||f==null||_==null||T==null)throw new W0;const C=l<<2|f>>4;if(i.push(C),_!==64){const B=f<<4&240|_>>2;if(i.push(B),T!==64){const q=_<<6&192|T;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class W0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Y0=function(s){const e=a_(s);return l_.encodeByteArray(e,!0)},lc=function(s){return Y0(s).replace(/\./g,"")},X0=function(s){try{return l_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0=()=>u_().__FIREBASE_DEFAULTS__,Z0=()=>{if(typeof process>"u"||typeof Ag>"u")return;const s=Ag.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},ew=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&X0(s[1]);return e&&JSON.parse(e)},gf=()=>{try{return H0()||J0()||Z0()||ew()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},tw=s=>{var e,t;return(t=(e=gf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[s]},nw=s=>{const e=tw(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},c_=()=>{var s;return(s=gf())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(s){return s.endsWith(".cloudworkstations.dev")}async function iw(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s);return[lc(JSON.stringify(t)),lc(JSON.stringify(h)),""].join(".")}const Ha={};function ow(){const s={prod:[],emulator:[]};for(const e of Object.keys(Ha))Ha[e]?s.emulator.push(e):s.prod.push(e);return s}function aw(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Rg=!1;function lw(s,e){if(typeof window>"u"||typeof document>"u"||!yf(window.location.host)||Ha[s]===e||Ha[s]||Rg)return;Ha[s]=e;function t(C){return`__firebase__banner__${C}`}const i="__firebase__banner",l=ow().prod.length>0;function h(){const C=document.getElementById(i);C&&C.remove()}function f(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function g(C,B){C.setAttribute("width","24"),C.setAttribute("id",B),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function _(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Rg=!0,h()},C}function w(C,B){C.setAttribute("id",B),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function T(){const C=aw(i),B=t("text"),q=document.getElementById(B)||document.createElement("span"),G=t("learnmore"),$=document.getElementById(G)||document.createElement("a"),ve=t("preprendIcon"),ae=document.getElementById(ve)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const re=C.element;f(re),w($,G);const ge=_();g(ae,ve),re.append(ae,q,$,ge),document.body.appendChild(re)}l?(q.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function h_(){var s;const e=(s=gf())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function d_(){return!h_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function f_(){return!h_()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function p_(){try{return typeof indexedDB=="object"}catch{return!1}}function uw(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="FirebaseError";class Lo extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=cw,Object.setPrototypeOf(this,Lo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,m_.prototype.create)}}class m_{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?hw(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new Lo(o,f,i)}}function hw(s,e){return s.replace(dw,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const dw=/\{\$([^}]+)}/g;function cc(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=s[o],h=e[o];if(Pg(l)&&Pg(h)){if(!cc(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Pg(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(s){return s&&s._delegate?s._delegate:s}class nl{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new rw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mw(e))try{this.getOrInitializeService({instanceIdentifier:Qi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qi){return this.instances.has(e)}getOptions(e=Qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:pw(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Qi){return this.component?this.component.multipleInstances?e:Qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pw(s){return s===Qi?void 0:s}function mw(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(be||(be={}));const yw={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},_w=be.INFO,vw={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},Ew=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=vw[e];if(o)console[o](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class g_{constructor(e){this.name=e,this._logLevel=_w,this._logHandler=Ew,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const ww=(s,e)=>e.some(t=>s instanceof t);let Cg,xg;function Iw(){return Cg||(Cg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tw(){return xg||(xg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const y_=new WeakMap,Ld=new WeakMap,__=new WeakMap,Pd=new WeakMap,_f=new WeakMap;function Sw(s){const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("success",l),s.removeEventListener("error",h)},l=()=>{t(ai(s.result)),o()},h=()=>{i(s.error),o()};s.addEventListener("success",l),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&y_.set(t,s)}).catch(()=>{}),_f.set(e,s),e}function Aw(s){if(Ld.has(s))return;const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",h),s.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",l),s.addEventListener("error",h),s.addEventListener("abort",h)});Ld.set(s,e)}let Fd={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Ld.get(s);if(e==="objectStoreNames")return s.objectStoreNames||__.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ai(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Rw(s){Fd=s(Fd)}function Pw(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Cd(this),e,...t);return __.set(i,e.sort?e.sort():[e]),ai(i)}:Tw().includes(s)?function(...e){return s.apply(Cd(this),e),ai(y_.get(this))}:function(...e){return ai(s.apply(Cd(this),e))}}function Cw(s){return typeof s=="function"?Pw(s):(s instanceof IDBTransaction&&Aw(s),ww(s,Iw())?new Proxy(s,Fd):s)}function ai(s){if(s instanceof IDBRequest)return Sw(s);if(Pd.has(s))return Pd.get(s);const e=Cw(s);return e!==s&&(Pd.set(s,e),_f.set(e,s)),e}const Cd=s=>_f.get(s);function xw(s,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(s,e),f=ai(h);return i&&h.addEventListener("upgradeneeded",g=>{i(ai(h.result),g.oldVersion,g.newVersion,ai(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),f}const Vw=["get","getKey","getAll","getAllKeys","count"],kw=["put","add","delete","clear"],xd=new Map;function Vg(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(xd.get(e))return xd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=kw.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Vw.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return i&&(_=_.index(f.shift())),(await Promise.all([_[t](...f),o&&g.done]))[0]};return xd.set(e,l),l}Rw(s=>({...s,get:(e,t,i)=>Vg(e,t)||s.get(e,t,i),has:(e,t)=>!!Vg(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Nw(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Nw(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bd="@firebase/app",kg="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new g_("@firebase/app"),bw="@firebase/app-compat",Mw="@firebase/analytics-compat",Ow="@firebase/analytics",Lw="@firebase/app-check-compat",Fw="@firebase/app-check",Bw="@firebase/auth",zw="@firebase/auth-compat",Uw="@firebase/database",jw="@firebase/data-connect",$w="@firebase/database-compat",qw="@firebase/functions",Kw="@firebase/functions-compat",Gw="@firebase/installations",Hw="@firebase/installations-compat",Qw="@firebase/messaging",Ww="@firebase/messaging-compat",Yw="@firebase/performance",Xw="@firebase/performance-compat",Jw="@firebase/remote-config",Zw="@firebase/remote-config-compat",eI="@firebase/storage",tI="@firebase/storage-compat",nI="@firebase/firestore",rI="@firebase/ai",iI="@firebase/firestore-compat",sI="firebase",oI="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="[DEFAULT]",aI={[Bd]:"fire-core",[bw]:"fire-core-compat",[Ow]:"fire-analytics",[Mw]:"fire-analytics-compat",[Fw]:"fire-app-check",[Lw]:"fire-app-check-compat",[Bw]:"fire-auth",[zw]:"fire-auth-compat",[Uw]:"fire-rtdb",[jw]:"fire-data-connect",[$w]:"fire-rtdb-compat",[qw]:"fire-fn",[Kw]:"fire-fn-compat",[Gw]:"fire-iid",[Hw]:"fire-iid-compat",[Qw]:"fire-fcm",[Ww]:"fire-fcm-compat",[Yw]:"fire-perf",[Xw]:"fire-perf-compat",[Jw]:"fire-rc",[Zw]:"fire-rc-compat",[eI]:"fire-gcs",[tI]:"fire-gcs-compat",[nI]:"fire-fst",[iI]:"fire-fst-compat",[rI]:"fire-vertex","fire-js":"fire-js",[sI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Map,lI=new Map,Ud=new Map;function Dg(s,e){try{s.container.addComponent(e)}catch(t){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function dc(s){const e=s.name;if(Ud.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;Ud.set(e,s);for(const t of hc.values())Dg(t,s);for(const t of lI.values())Dg(t,s);return!0}function uI(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function cI(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},li=new m_("app","Firebase",hI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new nl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=oI;function v_(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:zd,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw li.create("bad-app-name",{appName:String(o)});if(t||(t=c_()),!t)throw li.create("no-options");const l=hc.get(o);if(l){if(cc(t,l.options)&&cc(i,l.config))return l;throw li.create("duplicate-app",{appName:o})}const h=new gw(o);for(const g of Ud.values())h.addComponent(g);const f=new dI(t,i,h);return hc.set(o,f),f}function pI(s=zd){const e=hc.get(s);if(!e&&s===zd&&c_())return v_();if(!e)throw li.create("no-app",{appName:s});return e}function wo(s,e,t){var i;let o=(i=aI[s])!==null&&i!==void 0?i:s;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(f.join(" "));return}dc(new nl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="firebase-heartbeat-database",gI=1,rl="firebase-heartbeat-store";let Vd=null;function E_(){return Vd||(Vd=xw(mI,gI,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(rl)}catch(t){console.warn(t)}}}}).catch(s=>{throw li.create("idb-open",{originalErrorMessage:s.message})})),Vd}async function yI(s){try{const t=(await E_()).transaction(rl),i=await t.objectStore(rl).get(w_(s));return await t.done,i}catch(e){if(e instanceof Lo)Rr.warn(e.message);else{const t=li.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rr.warn(t.message)}}}async function Ng(s,e){try{const i=(await E_()).transaction(rl,"readwrite");await i.objectStore(rl).put(e,w_(s)),await i.done}catch(t){if(t instanceof Lo)Rr.warn(t.message);else{const i=li.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Rr.warn(i.message)}}}function w_(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=1024,vI=30;class EI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new II(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=bg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>vI){const h=TI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Rr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=bg(),{heartbeatsToSend:i,unsentEntries:o}=wI(this._heartbeatsCache.heartbeats),l=lc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Rr.warn(t),""}}}function bg(){return new Date().toISOString().substring(0,10)}function wI(s,e=_I){const t=[];let i=s.slice();for(const o of s){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Mg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Mg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class II{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return p_()?uw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ng(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ng(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Mg(s){return lc(JSON.stringify({version:2,heartbeats:s})).length}function TI(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(s){dc(new nl("platform-logger",e=>new Dw(e),"PRIVATE")),dc(new nl("heartbeat",e=>new EI(e),"PRIVATE")),wo(Bd,kg,s),wo(Bd,kg,"esm2017"),wo("fire-js","")}SI("");var Og=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ui,I_;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,I){function R(){}R.prototype=I.prototype,S.D=I.prototype,S.prototype=new R,S.prototype.constructor=S,S.C=function(x,k,N){for(var P=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)P[Oe-2]=arguments[Oe];return I.prototype[k].apply(x,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(S,I,R){R||(R=0);var x=Array(16);if(typeof I=="string")for(var k=0;16>k;++k)x[k]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(k=0;16>k;++k)x[k]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=S.g[0],R=S.g[1],k=S.g[2];var N=S.g[3],P=I+(N^R&(k^N))+x[0]+3614090360&4294967295;I=R+(P<<7&4294967295|P>>>25),P=N+(k^I&(R^k))+x[1]+3905402710&4294967295,N=I+(P<<12&4294967295|P>>>20),P=k+(R^N&(I^R))+x[2]+606105819&4294967295,k=N+(P<<17&4294967295|P>>>15),P=R+(I^k&(N^I))+x[3]+3250441966&4294967295,R=k+(P<<22&4294967295|P>>>10),P=I+(N^R&(k^N))+x[4]+4118548399&4294967295,I=R+(P<<7&4294967295|P>>>25),P=N+(k^I&(R^k))+x[5]+1200080426&4294967295,N=I+(P<<12&4294967295|P>>>20),P=k+(R^N&(I^R))+x[6]+2821735955&4294967295,k=N+(P<<17&4294967295|P>>>15),P=R+(I^k&(N^I))+x[7]+4249261313&4294967295,R=k+(P<<22&4294967295|P>>>10),P=I+(N^R&(k^N))+x[8]+1770035416&4294967295,I=R+(P<<7&4294967295|P>>>25),P=N+(k^I&(R^k))+x[9]+2336552879&4294967295,N=I+(P<<12&4294967295|P>>>20),P=k+(R^N&(I^R))+x[10]+4294925233&4294967295,k=N+(P<<17&4294967295|P>>>15),P=R+(I^k&(N^I))+x[11]+2304563134&4294967295,R=k+(P<<22&4294967295|P>>>10),P=I+(N^R&(k^N))+x[12]+1804603682&4294967295,I=R+(P<<7&4294967295|P>>>25),P=N+(k^I&(R^k))+x[13]+4254626195&4294967295,N=I+(P<<12&4294967295|P>>>20),P=k+(R^N&(I^R))+x[14]+2792965006&4294967295,k=N+(P<<17&4294967295|P>>>15),P=R+(I^k&(N^I))+x[15]+1236535329&4294967295,R=k+(P<<22&4294967295|P>>>10),P=I+(k^N&(R^k))+x[1]+4129170786&4294967295,I=R+(P<<5&4294967295|P>>>27),P=N+(R^k&(I^R))+x[6]+3225465664&4294967295,N=I+(P<<9&4294967295|P>>>23),P=k+(I^R&(N^I))+x[11]+643717713&4294967295,k=N+(P<<14&4294967295|P>>>18),P=R+(N^I&(k^N))+x[0]+3921069994&4294967295,R=k+(P<<20&4294967295|P>>>12),P=I+(k^N&(R^k))+x[5]+3593408605&4294967295,I=R+(P<<5&4294967295|P>>>27),P=N+(R^k&(I^R))+x[10]+38016083&4294967295,N=I+(P<<9&4294967295|P>>>23),P=k+(I^R&(N^I))+x[15]+3634488961&4294967295,k=N+(P<<14&4294967295|P>>>18),P=R+(N^I&(k^N))+x[4]+3889429448&4294967295,R=k+(P<<20&4294967295|P>>>12),P=I+(k^N&(R^k))+x[9]+568446438&4294967295,I=R+(P<<5&4294967295|P>>>27),P=N+(R^k&(I^R))+x[14]+3275163606&4294967295,N=I+(P<<9&4294967295|P>>>23),P=k+(I^R&(N^I))+x[3]+4107603335&4294967295,k=N+(P<<14&4294967295|P>>>18),P=R+(N^I&(k^N))+x[8]+1163531501&4294967295,R=k+(P<<20&4294967295|P>>>12),P=I+(k^N&(R^k))+x[13]+2850285829&4294967295,I=R+(P<<5&4294967295|P>>>27),P=N+(R^k&(I^R))+x[2]+4243563512&4294967295,N=I+(P<<9&4294967295|P>>>23),P=k+(I^R&(N^I))+x[7]+1735328473&4294967295,k=N+(P<<14&4294967295|P>>>18),P=R+(N^I&(k^N))+x[12]+2368359562&4294967295,R=k+(P<<20&4294967295|P>>>12),P=I+(R^k^N)+x[5]+4294588738&4294967295,I=R+(P<<4&4294967295|P>>>28),P=N+(I^R^k)+x[8]+2272392833&4294967295,N=I+(P<<11&4294967295|P>>>21),P=k+(N^I^R)+x[11]+1839030562&4294967295,k=N+(P<<16&4294967295|P>>>16),P=R+(k^N^I)+x[14]+4259657740&4294967295,R=k+(P<<23&4294967295|P>>>9),P=I+(R^k^N)+x[1]+2763975236&4294967295,I=R+(P<<4&4294967295|P>>>28),P=N+(I^R^k)+x[4]+1272893353&4294967295,N=I+(P<<11&4294967295|P>>>21),P=k+(N^I^R)+x[7]+4139469664&4294967295,k=N+(P<<16&4294967295|P>>>16),P=R+(k^N^I)+x[10]+3200236656&4294967295,R=k+(P<<23&4294967295|P>>>9),P=I+(R^k^N)+x[13]+681279174&4294967295,I=R+(P<<4&4294967295|P>>>28),P=N+(I^R^k)+x[0]+3936430074&4294967295,N=I+(P<<11&4294967295|P>>>21),P=k+(N^I^R)+x[3]+3572445317&4294967295,k=N+(P<<16&4294967295|P>>>16),P=R+(k^N^I)+x[6]+76029189&4294967295,R=k+(P<<23&4294967295|P>>>9),P=I+(R^k^N)+x[9]+3654602809&4294967295,I=R+(P<<4&4294967295|P>>>28),P=N+(I^R^k)+x[12]+3873151461&4294967295,N=I+(P<<11&4294967295|P>>>21),P=k+(N^I^R)+x[15]+530742520&4294967295,k=N+(P<<16&4294967295|P>>>16),P=R+(k^N^I)+x[2]+3299628645&4294967295,R=k+(P<<23&4294967295|P>>>9),P=I+(k^(R|~N))+x[0]+4096336452&4294967295,I=R+(P<<6&4294967295|P>>>26),P=N+(R^(I|~k))+x[7]+1126891415&4294967295,N=I+(P<<10&4294967295|P>>>22),P=k+(I^(N|~R))+x[14]+2878612391&4294967295,k=N+(P<<15&4294967295|P>>>17),P=R+(N^(k|~I))+x[5]+4237533241&4294967295,R=k+(P<<21&4294967295|P>>>11),P=I+(k^(R|~N))+x[12]+1700485571&4294967295,I=R+(P<<6&4294967295|P>>>26),P=N+(R^(I|~k))+x[3]+2399980690&4294967295,N=I+(P<<10&4294967295|P>>>22),P=k+(I^(N|~R))+x[10]+4293915773&4294967295,k=N+(P<<15&4294967295|P>>>17),P=R+(N^(k|~I))+x[1]+2240044497&4294967295,R=k+(P<<21&4294967295|P>>>11),P=I+(k^(R|~N))+x[8]+1873313359&4294967295,I=R+(P<<6&4294967295|P>>>26),P=N+(R^(I|~k))+x[15]+4264355552&4294967295,N=I+(P<<10&4294967295|P>>>22),P=k+(I^(N|~R))+x[6]+2734768916&4294967295,k=N+(P<<15&4294967295|P>>>17),P=R+(N^(k|~I))+x[13]+1309151649&4294967295,R=k+(P<<21&4294967295|P>>>11),P=I+(k^(R|~N))+x[4]+4149444226&4294967295,I=R+(P<<6&4294967295|P>>>26),P=N+(R^(I|~k))+x[11]+3174756917&4294967295,N=I+(P<<10&4294967295|P>>>22),P=k+(I^(N|~R))+x[2]+718787259&4294967295,k=N+(P<<15&4294967295|P>>>17),P=R+(N^(k|~I))+x[9]+3951481745&4294967295,S.g[0]=S.g[0]+I&4294967295,S.g[1]=S.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+N&4294967295}i.prototype.u=function(S,I){I===void 0&&(I=S.length);for(var R=I-this.blockSize,x=this.B,k=this.h,N=0;N<I;){if(k==0)for(;N<=R;)o(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<I;)if(x[k++]=S.charCodeAt(N++),k==this.blockSize){o(this,x),k=0;break}}else for(;N<I;)if(x[k++]=S[N++],k==this.blockSize){o(this,x),k=0;break}}this.h=k,this.o+=I},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var I=1;I<S.length-8;++I)S[I]=0;var R=8*this.o;for(I=S.length-8;I<S.length;++I)S[I]=R&255,R/=256;for(this.u(S),S=Array(16),I=R=0;4>I;++I)for(var x=0;32>x;x+=8)S[R++]=this.g[I]>>>x&255;return S};function l(S,I){var R=f;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=I(S)}function h(S,I){this.h=I;for(var R=[],x=!0,k=S.length-1;0<=k;k--){var N=S[k]|0;x&&N==I||(R[k]=N,x=!1)}this.g=R}var f={};function g(S){return-128<=S&&128>S?l(S,function(I){return new h([I|0],0>I?-1:0)}):new h([S|0],0>S?-1:0)}function _(S){if(isNaN(S)||!isFinite(S))return T;if(0>S)return $(_(-S));for(var I=[],R=1,x=0;S>=R;x++)I[x]=S/R|0,R*=4294967296;return new h(I,0)}function w(S,I){if(S.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(S.charAt(0)=="-")return $(w(S.substring(1),I));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=_(Math.pow(I,8)),x=T,k=0;k<S.length;k+=8){var N=Math.min(8,S.length-k),P=parseInt(S.substring(k,k+N),I);8>N?(N=_(Math.pow(I,N)),x=x.j(N).add(_(P))):(x=x.j(R),x=x.add(_(P)))}return x}var T=g(0),C=g(1),B=g(16777216);s=h.prototype,s.m=function(){if(G(this))return-$(this).m();for(var S=0,I=1,R=0;R<this.g.length;R++){var x=this.i(R);S+=(0<=x?x:4294967296+x)*I,I*=4294967296}return S},s.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(q(this))return"0";if(G(this))return"-"+$(this).toString(S);for(var I=_(Math.pow(S,6)),R=this,x="";;){var k=ge(R,I).g;R=ve(R,k.j(I));var N=((0<R.g.length?R.g[0]:R.h)>>>0).toString(S);if(R=k,q(R))return N+x;for(;6>N.length;)N="0"+N;x=N+x}},s.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function q(S){if(S.h!=0)return!1;for(var I=0;I<S.g.length;I++)if(S.g[I]!=0)return!1;return!0}function G(S){return S.h==-1}s.l=function(S){return S=ve(this,S),G(S)?-1:q(S)?0:1};function $(S){for(var I=S.g.length,R=[],x=0;x<I;x++)R[x]=~S.g[x];return new h(R,~S.h).add(C)}s.abs=function(){return G(this)?$(this):this},s.add=function(S){for(var I=Math.max(this.g.length,S.g.length),R=[],x=0,k=0;k<=I;k++){var N=x+(this.i(k)&65535)+(S.i(k)&65535),P=(N>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);x=P>>>16,N&=65535,P&=65535,R[k]=P<<16|N}return new h(R,R[R.length-1]&-2147483648?-1:0)};function ve(S,I){return S.add($(I))}s.j=function(S){if(q(this)||q(S))return T;if(G(this))return G(S)?$(this).j($(S)):$($(this).j(S));if(G(S))return $(this.j($(S)));if(0>this.l(B)&&0>S.l(B))return _(this.m()*S.m());for(var I=this.g.length+S.g.length,R=[],x=0;x<2*I;x++)R[x]=0;for(x=0;x<this.g.length;x++)for(var k=0;k<S.g.length;k++){var N=this.i(x)>>>16,P=this.i(x)&65535,Oe=S.i(k)>>>16,Et=S.i(k)&65535;R[2*x+2*k]+=P*Et,ae(R,2*x+2*k),R[2*x+2*k+1]+=N*Et,ae(R,2*x+2*k+1),R[2*x+2*k+1]+=P*Oe,ae(R,2*x+2*k+1),R[2*x+2*k+2]+=N*Oe,ae(R,2*x+2*k+2)}for(x=0;x<I;x++)R[x]=R[2*x+1]<<16|R[2*x];for(x=I;x<2*I;x++)R[x]=0;return new h(R,0)};function ae(S,I){for(;(S[I]&65535)!=S[I];)S[I+1]+=S[I]>>>16,S[I]&=65535,I++}function re(S,I){this.g=S,this.h=I}function ge(S,I){if(q(I))throw Error("division by zero");if(q(S))return new re(T,T);if(G(S))return I=ge($(S),I),new re($(I.g),$(I.h));if(G(I))return I=ge(S,$(I)),new re($(I.g),I.h);if(30<S.g.length){if(G(S)||G(I))throw Error("slowDivide_ only works with positive integers.");for(var R=C,x=I;0>=x.l(S);)R=Se(R),x=Se(x);var k=Ee(R,1),N=Ee(x,1);for(x=Ee(x,2),R=Ee(R,2);!q(x);){var P=N.add(x);0>=P.l(S)&&(k=k.add(R),N=P),x=Ee(x,1),R=Ee(R,1)}return I=ve(S,k.j(I)),new re(k,I)}for(k=T;0<=S.l(I);){for(R=Math.max(1,Math.floor(S.m()/I.m())),x=Math.ceil(Math.log(R)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),N=_(R),P=N.j(I);G(P)||0<P.l(S);)R-=x,N=_(R),P=N.j(I);q(N)&&(N=C),k=k.add(N),S=ve(S,P)}return new re(k,S)}s.A=function(S){return ge(this,S).h},s.and=function(S){for(var I=Math.max(this.g.length,S.g.length),R=[],x=0;x<I;x++)R[x]=this.i(x)&S.i(x);return new h(R,this.h&S.h)},s.or=function(S){for(var I=Math.max(this.g.length,S.g.length),R=[],x=0;x<I;x++)R[x]=this.i(x)|S.i(x);return new h(R,this.h|S.h)},s.xor=function(S){for(var I=Math.max(this.g.length,S.g.length),R=[],x=0;x<I;x++)R[x]=this.i(x)^S.i(x);return new h(R,this.h^S.h)};function Se(S){for(var I=S.g.length+1,R=[],x=0;x<I;x++)R[x]=S.i(x)<<1|S.i(x-1)>>>31;return new h(R,S.h)}function Ee(S,I){var R=I>>5;I%=32;for(var x=S.g.length-R,k=[],N=0;N<x;N++)k[N]=0<I?S.i(N+R)>>>I|S.i(N+R+1)<<32-I:S.i(N+R);return new h(k,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,I_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=w,ui=h}).apply(typeof Og<"u"?Og:typeof self<"u"?self:typeof window<"u"?window:{});var ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T_,$a,S_,Yu,jd,A_,R_,P_;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,y){return u==Array.prototype||u==Object.prototype||(u[p]=y.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ju=="object"&&ju];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var y=i;u=u.split(".");for(var E=0;E<u.length-1;E++){var M=u[E];if(!(M in y))break e;y=y[M]}u=u[u.length-1],E=y[u],p=p(E),p!=E&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var y=0,E=!1,M={next:function(){if(!E&&y<u.length){var U=y++;return{value:p(U,u[U]),done:!1}}return E=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function g(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function _(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function w(u,p,y){return u.call.apply(u.bind,arguments)}function T(u,p,y){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,E),u.apply(p,M)}}return function(){return u.apply(p,arguments)}}function C(u,p,y){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:T,C.apply(null,arguments)}function B(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function q(u,p){function y(){}y.prototype=p.prototype,u.aa=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(E,M,U){for(var J=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)J[Ue-2]=arguments[Ue];return p.prototype[M].apply(E,J)}}function G(u){const p=u.length;if(0<p){const y=Array(p);for(let E=0;E<p;E++)y[E]=u[E];return y}return[]}function $(u,p){for(let y=1;y<arguments.length;y++){const E=arguments[y];if(g(E)){const M=u.length||0,U=E.length||0;u.length=M+U;for(let J=0;J<U;J++)u[M+J]=E[J]}else u.push(E)}}class ve{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ae(u){return/^[\s\xa0]*$/.test(u)}function re(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function ge(u){return ge[" "](u),u}ge[" "]=function(){};var Se=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function Ee(u,p,y){for(const E in u)p.call(y,u[E],E,u)}function S(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function I(u){const p={};for(const y in u)p[y]=u[y];return p}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,p){let y,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(y in E)u[y]=E[y];for(let U=0;U<R.length;U++)y=R[U],Object.prototype.hasOwnProperty.call(E,y)&&(u[y]=E[y])}}function k(u){var p=1;u=u.split(":");const y=[];for(;0<p&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function N(u){f.setTimeout(()=>{throw u},0)}function P(){var u=me;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Oe{constructor(){this.h=this.g=null}add(p,y){const E=Et.get();E.set(p,y),this.h?this.h.next=E:this.g=E,this.h=E}}var Et=new ve(()=>new We,u=>u.reset());class We{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let qe,Z=!1,me=new Oe,se=()=>{const u=f.Promise.resolve(void 0);qe=()=>{u.then(b)}};var b=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(y){N(y)}var p=Et;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}Z=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};f.addEventListener("test",y,p),f.removeEventListener("test",y,p)}catch{}return u}();function Pe(u,p){if(fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(Se){e:{try{ge(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement);this.relatedTarget=p,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ke[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Pe.aa.h.call(this)}}q(Pe,fe);var ke={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),Be=0;function Ge(u,p,y,E,M){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!E,this.ha=M,this.key=++Be,this.da=this.fa=!1}function wt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function sr(u){this.src=u,this.g={},this.h=0}sr.prototype.add=function(u,p,y,E,M){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var J=kr(u,p,E,M);return-1<J?(p=u[J],y||(p.fa=!1)):(p=new Ge(p,this.src,U,!!E,M),p.fa=y,u.push(p)),p};function ys(u,p){var y=p.type;if(y in u.g){var E=u.g[y],M=Array.prototype.indexOf.call(E,p,void 0),U;(U=0<=M)&&Array.prototype.splice.call(E,M,1),U&&(wt(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function kr(u,p,y,E){for(var M=0;M<u.length;++M){var U=u[M];if(!U.da&&U.listener==p&&U.capture==!!y&&U.ha==E)return M}return-1}var vi="closure_lm_"+(1e6*Math.random()|0),_s={};function $o(u,p,y,E,M){if(Array.isArray(p)){for(var U=0;U<p.length;U++)$o(u,p[U],y,E,M);return null}return y=Go(y),u&&u[Fe]?u.K(p,y,_(E)?!!E.capture:!1,M):qo(u,p,y,!1,E,M)}function qo(u,p,y,E,M,U){if(!p)throw Error("Invalid event type");var J=_(M)?!!M.capture:!!M,Ue=Es(u);if(Ue||(u[vi]=Ue=new sr(u)),y=Ue.add(p,y,E,J,U),y.proxy)return y;if(E=Rl(),y.proxy=E,E.src=u,E.listener=y,u.addEventListener)Ae||(M=J),M===void 0&&(M=!1),u.addEventListener(p.toString(),E,M);else if(u.attachEvent)u.attachEvent(ar(p.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Rl(){function u(y){return p.call(u.src,u.listener,y)}const p=Ko;return u}function vs(u,p,y,E,M){if(Array.isArray(p))for(var U=0;U<p.length;U++)vs(u,p[U],y,E,M);else E=_(E)?!!E.capture:!!E,y=Go(y),u&&u[Fe]?(u=u.i,p=String(p).toString(),p in u.g&&(U=u.g[p],y=kr(U,y,E,M),-1<y&&(wt(U[y]),Array.prototype.splice.call(U,y,1),U.length==0&&(delete u.g[p],u.h--)))):u&&(u=Es(u))&&(p=u.g[p.toString()],u=-1,p&&(u=kr(p,y,E,M)),(y=-1<u?p[u]:null)&&or(y))}function or(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Fe])ys(p.i,u);else{var y=u.type,E=u.proxy;p.removeEventListener?p.removeEventListener(y,E,u.capture):p.detachEvent?p.detachEvent(ar(y),E):p.addListener&&p.removeListener&&p.removeListener(E),(y=Es(p))?(ys(y,u),y.h==0&&(y.src=null,p[vi]=null)):wt(u)}}}function ar(u){return u in _s?_s[u]:_s[u]="on"+u}function Ko(u,p){if(u.da)u=!0;else{p=new Pe(p,this);var y=u.listener,E=u.ha||u.src;u.fa&&or(u),u=y.call(E,p)}return u}function Es(u){return u=u[vi],u instanceof sr?u:null}var ws="__closure_events_fn_"+(1e9*Math.random()>>>0);function Go(u){return typeof u=="function"?u:(u[ws]||(u[ws]=function(p){return u.handleEvent(p)}),u[ws])}function pt(){K.call(this),this.i=new sr(this),this.M=this,this.F=null}q(pt,K),pt.prototype[Fe]=!0,pt.prototype.removeEventListener=function(u,p,y,E){vs(this,u,p,y,E)};function mt(u,p){var y,E=u.F;if(E)for(y=[];E;E=E.F)y.push(E);if(u=u.M,E=p.type||p,typeof p=="string")p=new fe(p,u);else if(p instanceof fe)p.target=p.target||u;else{var M=p;p=new fe(E,u),x(p,M)}if(M=!0,y)for(var U=y.length-1;0<=U;U--){var J=p.g=y[U];M=lr(J,E,!0,p)&&M}if(J=p.g=u,M=lr(J,E,!0,p)&&M,M=lr(J,E,!1,p)&&M,y)for(U=0;U<y.length;U++)J=p.g=y[U],M=lr(J,E,!1,p)&&M}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var y=u.g[p],E=0;E<y.length;E++)wt(y[E]);delete u.g[p],u.h--}}this.F=null},pt.prototype.K=function(u,p,y,E){return this.i.add(String(u),p,!1,y,E)},pt.prototype.L=function(u,p,y,E){return this.i.add(String(u),p,!0,y,E)};function lr(u,p,y,E){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,U=0;U<p.length;++U){var J=p[U];if(J&&!J.da&&J.capture==y){var Ue=J.listener,gt=J.ha||J.src;J.fa&&ys(u.i,J),M=Ue.call(gt,E)!==!1&&M}}return M&&!E.defaultPrevented}function Ho(u,p,y){if(typeof u=="function")y&&(u=C(u,y));else if(u&&typeof u.handleEvent=="function")u=C(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function Dr(u){u.g=Ho(()=>{u.g=null,u.i&&(u.i=!1,Dr(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Ei extends K{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Dr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wi(u){K.call(this),this.h=u,this.g={}}q(wi,K);var Qo=[];function Wo(u){Ee(u.g,function(p,y){this.g.hasOwnProperty(y)&&or(p)},u),u.g={}}wi.prototype.N=function(){wi.aa.N.call(this),Wo(this)},wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yo=f.JSON.stringify,Xo=f.JSON.parse,Jo=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Ii(){}Ii.prototype.h=null;function Is(u){return u.h||(u.h=u.i())}function Ts(){}var mn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qn(){fe.call(this,"d")}q(qn,fe);function Ss(){fe.call(this,"c")}q(Ss,fe);var Kn={},Zo=null;function Ti(){return Zo=Zo||new pt}Kn.La="serverreachability";function ea(u){fe.call(this,Kn.La,u)}q(ea,fe);function ur(u){const p=Ti();mt(p,new ea(p))}Kn.STAT_EVENT="statevent";function ta(u,p){fe.call(this,Kn.STAT_EVENT,u),this.stat=p}q(ta,fe);function lt(u){const p=Ti();mt(p,new ta(p,u))}Kn.Ma="timingevent";function As(u,p){fe.call(this,Kn.Ma,u),this.size=p}q(As,fe);function Cn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function Si(){this.g=!0}Si.prototype.xa=function(){this.g=!1};function Ai(u,p,y,E,M,U){u.info(function(){if(u.g)if(U)for(var J="",Ue=U.split("&"),gt=0;gt<Ue.length;gt++){var De=Ue[gt].split("=");if(1<De.length){var It=De[0];De=De[1];var ct=It.split("_");J=2<=ct.length&&ct[1]=="type"?J+(It+"="+De+"&"):J+(It+"=redacted&")}}else J=null;else J=U;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+p+`
`+y+`
`+J})}function Rs(u,p,y,E,M,U,J){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+p+`
`+y+`
`+U+" "+J})}function xn(u,p,y,E){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Xc(u,y)+(E?" "+E:"")})}function na(u,p){u.info(function(){return"TIMEOUT: "+p})}Si.prototype.info=function(){};function Xc(u,p){if(!u.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var E=y[u];if(!(2>E.length)){var M=E[1];if(Array.isArray(M)&&!(1>M.length)){var U=M[0];if(U!="noop"&&U!="stop"&&U!="close")for(var J=1;J<M.length;J++)M[J]=""}}}}return Yo(y)}catch{return p}}var Ps={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vn;function Ri(){}q(Ri,Ii),Ri.prototype.g=function(){return new XMLHttpRequest},Ri.prototype.i=function(){return{}},Vn=new Ri;function kn(u,p,y,E){this.j=u,this.i=p,this.l=y,this.R=E||1,this.U=new wi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Cl}function Cl(){this.i=null,this.g="",this.h=!1}var ra={},Cs={};function xs(u,p,y){u.L=1,u.v=Lr(sn(p)),u.m=y,u.P=!0,ia(u,null)}function ia(u,p){u.F=Date.now(),He(u),u.A=sn(u.v);var y=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),Br(y.i,"t",E),u.C=0,y=u.j.J,u.h=new Cl,u.g=Gl(u.j,y?p:null,!u.m),0<u.O&&(u.M=new Ei(C(u.Y,u,u.g),u.O)),p=u.U,y=u.g,E=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(Qo[0]=M.toString()),M=Qo);for(var U=0;U<M.length;U++){var J=$o(y,M[U],E||p.handleEvent,!1,p.h||p);if(!J)break;p.g[J.key]=J}p=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),ur(),Ai(u.i,u.u,u.A,u.l,u.R,u.m)}kn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Wt(u)==3?p.j():this.Y(u)},kn.prototype.Y=function(u){try{if(u==this.g)e:{const ct=Wt(this.g);var p=this.g.Ba();const _n=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||ca(this.g)))){this.J||ct!=4||p==7||(p==8||0>=_n?ur(3):ur(2)),Pi(this);var y=this.g.Z();this.X=y;t:if(xl(this)){var E=ca(this.g);u="";var M=E.length,U=Wt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),Nr(this);var J="";break t}this.h.i=new f.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,u+=this.h.i.decode(E[p],{stream:!(U&&p==M-1)});E.length=0,this.h.g+=u,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=y==200,Rs(this.i,this.u,this.A,this.l,this.R,ct,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,gt=this.g;if((Ue=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(Ue)){var De=Ue;break t}}De=null}if(y=De)xn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sa(this,y);else{this.o=!1,this.s=3,lt(12),gn(this),Nr(this);break e}}if(this.P){y=!0;let an;for(;!this.J&&this.C<J.length;)if(an=Jc(this,J),an==Cs){ct==4&&(this.s=4,lt(14),y=!1),xn(this.i,this.l,null,"[Incomplete Response]");break}else if(an==ra){this.s=4,lt(15),xn(this.i,this.l,J,"[Invalid Chunk]"),y=!1;break}else xn(this.i,this.l,an,null),sa(this,an);if(xl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||J.length!=0||this.h.h||(this.s=1,lt(16),y=!1),this.o=this.o&&y,!y)xn(this.i,this.l,J,"[Invalid Chunked Response]"),gn(this),Nr(this);else if(0<J.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),da(It),It.M=!0,lt(11))}}else xn(this.i,this.l,J,null),sa(this,J);ct==4&&gn(this),this.o&&!this.J&&(ct==4?zs(this.j,this):(this.o=!1,He(this)))}else Ms(this.g),y==400&&0<J.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),gn(this),Nr(this)}}}catch{}finally{}};function xl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Jc(u,p){var y=u.C,E=p.indexOf(`
`,y);return E==-1?Cs:(y=Number(p.substring(y,E)),isNaN(y)?ra:(E+=1,E+y>p.length?Cs:(p=p.slice(E,E+y),u.C=E+y,p)))}kn.prototype.cancel=function(){this.J=!0,gn(this)};function He(u){u.S=Date.now()+u.I,Vl(u,u.I)}function Vl(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Cn(C(u.ba,u),p)}function Pi(u){u.B&&(f.clearTimeout(u.B),u.B=null)}kn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(na(this.i,this.A),this.L!=2&&(ur(),lt(17)),gn(this),this.s=2,Nr(this)):Vl(this,this.S-u)};function Nr(u){u.j.G==0||u.J||zs(u.j,u)}function gn(u){Pi(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Wo(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function sa(u,p){try{var y=u.j;if(y.G!=0&&(y.g==u||Ut(y.h,u))){if(!u.K&&Ut(y.h,u)&&y.G==3){try{var E=y.Da.g.parse(p)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)Bs(y),On(y);else break e;Fs(y),lt(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=Cn(C(y.Za,y),6e3));if(1>=Dl(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else pr(y,11)}else if((u.K||y.g==u)&&Bs(y),!ae(p))for(M=y.Da.g.parse(p),p=0;p<M.length;p++){let De=M[p];if(y.T=De[0],De=De[1],y.G==2)if(De[0]=="c"){y.K=De[1],y.ia=De[2];const It=De[3];It!=null&&(y.la=It,y.j.info("VER="+y.la));const ct=De[4];ct!=null&&(y.Aa=ct,y.j.info("SVER="+y.Aa));const _n=De[5];_n!=null&&typeof _n=="number"&&0<_n&&(E=1.5*_n,y.L=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const an=u.g;if(an){const bi=an.g?an.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bi){var U=E.h;U.g||bi.indexOf("spdy")==-1&&bi.indexOf("quic")==-1&&bi.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(oa(U,U.h),U.h=null))}if(E.D){const js=an.g?an.g.getResponseHeader("X-HTTP-Session-Id"):null;js&&(E.ya=js,Ke(E.I,E.D,js))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),E=y;var J=u;if(E.qa=Kl(E,E.J?E.ia:null,E.W),J.K){Nl(E.h,J);var Ue=J,gt=E.L;gt&&(Ue.I=gt),Ue.B&&(Pi(Ue),He(Ue)),E.g=J}else Ni(E);0<y.i.length&&Wn(y)}else De[0]!="stop"&&De[0]!="close"||pr(y,7);else y.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?pr(y,7):Ct(y):De[0]!="noop"&&y.l&&y.l.ta(De),y.v=0)}}ur(4)}catch{}}var kl=class{constructor(u,p){this.g=u,this.map=p}};function Ci(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Dl(u){return u.h?1:u.g?u.g.size:0}function Ut(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function oa(u,p){u.g?u.g.add(p):u.h=p}function Nl(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Ci.prototype.cancel=function(){if(this.i=bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function bl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.D);return p}return G(u.i)}function Vs(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var p=[],y=u.length,E=0;E<y;E++)p.push(u[E]);return p}p=[],y=0;for(E in u)p[y++]=u[E];return p}function ks(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var p=[];u=u.length;for(var y=0;y<u;y++)p.push(y);return p}p=[],y=0;for(const E in u)p[y++]=E;return p}}}function br(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var y=ks(u),E=Vs(u),M=E.length,U=0;U<M;U++)p.call(void 0,E[U],y&&y[U],u)}var xi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zc(u,p){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var E=u[y].indexOf("="),M=null;if(0<=E){var U=u[y].substring(0,E);M=u[y].substring(E+1)}else U=u[y];p(U,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function cr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof cr){this.h=u.h,Vi(this,u.j),this.o=u.o,this.g=u.g,Mr(this,u.s),this.l=u.l;var p=u.i,y=new Gn;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),Or(this,y),this.m=u.m}else u&&(p=String(u).match(xi))?(this.h=!1,Vi(this,p[1]||"",!0),this.o=Ve(p[2]||""),this.g=Ve(p[3]||"",!0),Mr(this,p[4]),this.l=Ve(p[5]||"",!0),Or(this,p[6]||"",!0),this.m=Ve(p[7]||"")):(this.h=!1,this.i=new Gn(null,this.h))}cr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Fr(p,Ds,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Fr(p,Ds,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Fr(y,y.charAt(0)=="/"?Ll:Ol,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Fr(y,aa)),u.join("")};function sn(u){return new cr(u)}function Vi(u,p,y){u.j=y?Ve(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Mr(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Or(u,p,y){p instanceof Gn?(u.i=p,Hn(u.i,u.h)):(y||(p=Fr(p,Fl)),u.i=new Gn(p,u.h))}function Ke(u,p,y){u.i.set(p,y)}function Lr(u){return Ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ve(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Fr(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,Ml),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ml(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ds=/[#\/\?@]/g,Ol=/[#\?:]/g,Ll=/[#\?]/g,Fl=/[#\?@]/g,aa=/#/g;function Gn(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Pt(u){u.g||(u.g=new Map,u.h=0,u.i&&Zc(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}s=Gn.prototype,s.add=function(u,p){Pt(this),this.i=null,u=yn(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function Dn(u,p){Pt(u),p=yn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Nn(u,p){return Pt(u),p=yn(u,p),u.g.has(p)}s.forEach=function(u,p){Pt(this),this.g.forEach(function(y,E){y.forEach(function(M){u.call(p,M,E,this)},this)},this)},s.na=function(){Pt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let E=0;E<p.length;E++){const M=u[E];for(let U=0;U<M.length;U++)y.push(p[E])}return y},s.V=function(u){Pt(this);let p=[];if(typeof u=="string")Nn(this,u)&&(p=p.concat(this.g.get(yn(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)p=p.concat(u[y])}return p},s.set=function(u,p){return Pt(this),this.i=null,u=yn(this,u),Nn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},s.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Br(u,p,y){Dn(u,p),0<y.length&&(u.i=null,u.g.set(yn(u,p),G(y)),u.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var E=p[y];const U=encodeURIComponent(String(E)),J=this.V(E);for(E=0;E<J.length;E++){var M=U;J[E]!==""&&(M+="="+encodeURIComponent(String(J[E]))),u.push(M)}}return this.i=u.join("&")};function yn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Hn(u,p){p&&!u.j&&(Pt(u),u.i=null,u.g.forEach(function(y,E){var M=E.toLowerCase();E!=M&&(Dn(this,E),Br(this,M,y))},u)),u.j=p}function eh(u,p){const y=new Si;if(f.Image){const E=new Image;E.onload=B(Qt,y,"TestLoadImage: loaded",!0,p,E),E.onerror=B(Qt,y,"TestLoadImage: error",!1,p,E),E.onabort=B(Qt,y,"TestLoadImage: abort",!1,p,E),E.ontimeout=B(Qt,y,"TestLoadImage: timeout",!1,p,E),f.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else p(!1)}function Bl(u,p){const y=new Si,E=new AbortController,M=setTimeout(()=>{E.abort(),Qt(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:E.signal}).then(U=>{clearTimeout(M),U.ok?Qt(y,"TestPingServer: ok",!0,p):Qt(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),Qt(y,"TestPingServer: error",!1,p)})}function Qt(u,p,y,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(y)}catch{}}function th(){this.g=new Jo}function zl(u,p,y){const E=y||"";try{br(u,function(M,U){let J=M;_(M)&&(J=Yo(M)),p.push(E+U+"="+encodeURIComponent(J))})}catch(M){throw p.push(E+"type="+encodeURIComponent("_badmap")),M}}function hr(u){this.l=u.Ub||null,this.j=u.eb||!1}q(hr,Ii),hr.prototype.g=function(){return new ki(this.l,this.j)},hr.prototype.i=function(u){return function(){return u}}({});function ki(u,p){pt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(ki,pt),s=ki.prototype,s.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Mn(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bn(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ul(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ul(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?bn(this):Mn(this),this.readyState==3&&Ul(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,bn(this))},s.Qa=function(u){this.g&&(this.response=u,bn(this))},s.ga=function(){this.g&&bn(this)};function bn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Mn(u)}s.setRequestHeader=function(u,p){this.u.append(u,p)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function Mn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function dr(u){let p="";return Ee(u,function(y,E){p+=E,p+=":",p+=y,p+=`\r
`}),p}function zr(u,p,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=dr(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Ke(u,p,y))}function Je(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(Je,pt);var nh=/^https?$/i,la=["POST","PUT"];s=Je.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,p,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vn.g(),this.v=this.o?Is(this.o):Is(Vn),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(U){Di(this,U);return}if(u=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)y.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const U of E.keys())y.set(U,E.get(U));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),M=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(la,p,void 0))||E||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,J]of y)this.g.setRequestHeader(U,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bs(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){Di(this,U)}};function Di(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Ns(u),on(u)}function Ns(u){u.A||(u.A=!0,mt(u,"complete"),mt(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,mt(this,"complete"),mt(this,"abort"),on(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),on(this,!0)),Je.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?ua(this):this.bb())},s.bb=function(){ua(this)};function ua(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Wt(u)!=4||u.Z()!=2)){if(u.u&&Wt(u)==4)Ho(u.Ea,0,u);else if(mt(u,"readystatechange"),Wt(u)==4){u.h=!1;try{const J=u.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var E;if(E=J===0){var M=String(u.D).match(xi)[1]||null;!M&&f.self&&f.self.location&&(M=f.self.location.protocol.slice(0,-1)),E=!nh.test(M?M.toLowerCase():"")}y=E}if(y)mt(u,"complete"),mt(u,"success");else{u.m=6;try{var U=2<Wt(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",Ns(u)}}finally{on(u)}}}}function on(u,p){if(u.g){bs(u);const y=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||mt(u,"ready");try{y.onreadystatechange=E}catch{}}}function bs(u){u.I&&(f.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function Wt(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Xo(p)}};function ca(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ms(u){const p={};u=(u.g&&2<=Wt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(ae(u[E]))continue;var y=k(u[E]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=p[M]||[];p[M]=U,U.push(y)}S(p,function(E){return E.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qn(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function ha(u){this.Aa=0,this.i=[],this.j=new Si,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qn("baseRetryDelayMs",5e3,u),this.cb=Qn("retryDelaySeedMs",1e4,u),this.Wa=Qn("forwardChannelMaxRetries",2,u),this.wa=Qn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ci(u&&u.concurrentRequestLimit),this.Da=new th,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ha.prototype,s.la=8,s.G=1,s.connect=function(u,p,y,E){lt(0),this.W=u,this.H=p||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.I=Kl(this,null,this.W),Wn(this)};function Ct(u){if(Os(u),u.G==3){var p=u.U++,y=sn(u.I);if(Ke(y,"SID",u.K),Ke(y,"RID",p),Ke(y,"TYPE","terminate"),fr(u,y),p=new kn(u,u.j,p),p.L=2,p.v=Lr(sn(y)),y=!1,f.navigator&&f.navigator.sendBeacon)try{y=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&f.Image&&(new Image().src=p.v,y=!0),y||(p.g=Gl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),He(p)}ql(u)}function On(u){u.g&&(da(u),u.g.cancel(),u.g=null)}function Os(u){On(u),u.u&&(f.clearTimeout(u.u),u.u=null),Bs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Wn(u){if(!rn(u.h)&&!u.s){u.s=!0;var p=u.Ga;qe||se(),Z||(qe(),Z=!0),me.add(p,u),u.B=0}}function rh(u,p){return Dl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Cn(C(u.Ga,u,p),$l(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new kn(this,this.j,u);let U=this.o;if(this.S&&(U?(U=I(U),x(U,this.S)):U=this.S),this.m!==null||this.O||(M.H=U,U=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(p+=E,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=Ur(this,M,p),y=sn(this.I),Ke(y,"RID",u),Ke(y,"CVER",22),this.D&&Ke(y,"X-HTTP-Session-Id",this.D),fr(this,y),U&&(this.O?p="headers="+encodeURIComponent(String(dr(U)))+"&"+p:this.m&&zr(y,this.m,U)),oa(this.h,M),this.Ua&&Ke(y,"TYPE","init"),this.P?(Ke(y,"$req",p),Ke(y,"SID","null"),M.T=!0,xs(M,y,null)):xs(M,y,p),this.G=2}}else this.G==3&&(u?Ls(this,u):this.i.length==0||rn(this.h)||Ls(this))};function Ls(u,p){var y;p?y=p.l:y=u.U++;const E=sn(u.I);Ke(E,"SID",u.K),Ke(E,"RID",y),Ke(E,"AID",u.T),fr(u,E),u.m&&u.o&&zr(E,u.m,u.o),y=new kn(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Ur(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),oa(u.h,y),xs(y,E,p)}function fr(u,p){u.H&&Ee(u.H,function(y,E){Ke(p,E,y)}),u.l&&br({},function(y,E){Ke(p,E,y)})}function Ur(u,p,y){y=Math.min(u.i.length,y);var E=u.l?C(u.l.Na,u.l,u):null;e:{var M=u.i;let U=-1;for(;;){const J=["count="+y];U==-1?0<y?(U=M[0].g,J.push("ofs="+U)):U=0:J.push("ofs="+U);let Ue=!0;for(let gt=0;gt<y;gt++){let De=M[gt].g;const It=M[gt].map;if(De-=U,0>De)U=Math.max(0,M[gt].g-100),Ue=!1;else try{zl(It,J,"req"+De+"_")}catch{E&&E(It)}}if(Ue){E=J.join("&");break e}}}return u=u.i.splice(0,y),p.D=u,E}function Ni(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;qe||se(),Z||(qe(),Z=!0),me.add(p,u),u.v=0}}function Fs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Cn(C(u.Fa,u),$l(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,jl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Cn(C(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),On(this),jl(this))};function da(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function jl(u){u.g=new kn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=sn(u.qa);Ke(p,"RID","rpc"),Ke(p,"SID",u.K),Ke(p,"AID",u.T),Ke(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ke(p,"TO",u.ja),Ke(p,"TYPE","xmlhttp"),fr(u,p),u.m&&u.o&&zr(p,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Lr(sn(p)),y.m=null,y.P=!0,ia(y,u)}s.Za=function(){this.C!=null&&(this.C=null,On(this),Fs(this),lt(19))};function Bs(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function zs(u,p){var y=null;if(u.g==p){Bs(u),da(u),u.g=null;var E=2}else if(Ut(u.h,p))y=p.D,Nl(u.h,p),E=1;else return;if(u.G!=0){if(p.o)if(E==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var M=u.B;E=Ti(),mt(E,new As(E,y)),Wn(u)}else Ni(u);else if(M=p.s,M==3||M==0&&0<p.X||!(E==1&&rh(u,p)||E==2&&Fs(u)))switch(y&&0<y.length&&(p=u.h,p.i=p.i.concat(y)),M){case 1:pr(u,5);break;case 4:pr(u,10);break;case 3:pr(u,6);break;default:pr(u,2)}}}function $l(u,p){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*p}function pr(u,p){if(u.j.info("Error code "+p),p==2){var y=C(u.fb,u),E=u.Xa;const M=!E;E=new cr(E||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Vi(E,"https"),Lr(E),M?eh(E.toString(),y):Bl(E.toString(),y)}else lt(2);u.G=0,u.l&&u.l.sa(p),ql(u),Os(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function ql(u){if(u.G=0,u.ka=[],u.l){const p=bl(u.h);(p.length!=0||u.i.length!=0)&&($(u.ka,p),$(u.ka,u.i),u.h.i.length=0,G(u.i),u.i.length=0),u.l.ra()}}function Kl(u,p,y){var E=y instanceof cr?sn(y):new cr(y);if(E.g!="")p&&(E.g=p+"."+E.g),Mr(E,E.s);else{var M=f.location;E=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var U=new cr(null);E&&Vi(U,E),p&&(U.g=p),M&&Mr(U,M),y&&(U.l=y),E=U}return y=u.D,p=u.ya,y&&p&&Ke(E,y,p),Ke(E,"VER",u.la),fr(u,E),E}function Gl(u,p,y){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Je(new hr({eb:y})):new Je(u.pa),p.Ha(u.J),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function fa(){}s=fa.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Us(){}Us.prototype.g=function(u,p){return new jt(u,p)};function jt(u,p){pt.call(this),this.g=new ha(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!ae(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ae(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Yn(this)}q(jt,pt),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){Ct(this.g)},jt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=Yo(u),u=y);p.i.push(new kl(p.Ya++,u)),p.G==3&&Wn(p)},jt.prototype.N=function(){this.g.l=null,delete this.j,Ct(this.g),delete this.g,jt.aa.N.call(this)};function Hl(u){qn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}q(Hl,qn);function Ql(){Ss.call(this),this.status=1}q(Ql,Ss);function Yn(u){this.g=u}q(Yn,fa),Yn.prototype.ua=function(){mt(this.g,"a")},Yn.prototype.ta=function(u){mt(this.g,new Hl(u))},Yn.prototype.sa=function(u){mt(this.g,new Ql)},Yn.prototype.ra=function(){mt(this.g,"b")},Us.prototype.createWebChannel=Us.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,P_=function(){return new Us},R_=function(){return Ti()},A_=Kn,jd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ps.NO_ERROR=0,Ps.TIMEOUT=8,Ps.HTTP_ERROR=6,Yu=Ps,Pl.COMPLETE="complete",S_=Pl,Ts.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",pt.prototype.listen=pt.prototype.K,$a=Ts,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,T_=Je}).apply(typeof ju<"u"?ju:typeof self<"u"?self:typeof window<"u"?window:{});const Lg="@firebase/firestore",Fg="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new g_("@firebase/firestore");function go(){return os.logLevel}function Y(s,...e){if(os.logLevel<=be.DEBUG){const t=e.map(vf);os.debug(`Firestore (${Fo}): ${s}`,...t)}}function Kt(s,...e){if(os.logLevel<=be.ERROR){const t=e.map(vf);os.error(`Firestore (${Fo}): ${s}`,...t)}}function as(s,...e){if(os.logLevel<=be.WARN){const t=e.map(vf);os.warn(`Firestore (${Fo}): ${s}`,...t)}}function vf(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,C_(s,i,t)}function C_(s,e,t){let i=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Kt(i),new Error(i)}function de(s,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,s||C_(e,o,i)}function Te(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Lo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kt.UNAUTHENTICATED))}shutdown(){}}class RI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class PI{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){de(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Sr,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},f=g=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>f(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Sr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(de(typeof i.accessToken=="string",31837,{l:i}),new x_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new kt(e)}}class CI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new CI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){de(this.o===void 0,3512);const i=l=>{l.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,Y("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Bg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(de(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Bg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=kI(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function we(s,e){return s<e?-1:s>e?1:0}function $d(s,e){let t=0;for(;t<s.length&&t<e.length;){const i=s.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return we(i,o);{const l=V_(),h=DI(l.encode(zg(s,t)),l.encode(zg(e,t)));return h!==0?h:we(i,o)}}t+=i>65535?2:1}return we(s.length,e.length)}function zg(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function DI(s,e){for(let t=0;t<s.length&&t<e.length;++t)if(s[t]!==e[t])return we(s[t],e[t]);return we(s.length,e.length)}function To(s,e,t){return s.length===e.length&&s.every((i,o)=>t(i,e[o]))}function D_(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=-62135596800,jg=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*jg);return new st(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ee(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ee(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ug)throw new ee(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jg}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Ug;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{static fromTimestamp(e){return new pe(e)}static min(){return new pe(new st(0,0))}static max(){return new pe(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="__name__";class tr{constructor(e,t,i){t===void 0?t=0:t>e.length&&ue(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ue(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=tr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return we(e.length,t.length)}static compareSegments(e,t){const i=tr.isNumericId(e),o=tr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?tr.extractNumericId(e).compare(tr.extractNumericId(t)):$d(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ui.fromString(e.substring(4,e.length-2))}}class ze extends tr{construct(e,t,i){return new ze(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ee(j.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new ze(t)}static emptyPath(){return new ze([])}}const NI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends tr{construct(e,t,i){return new it(e,t,i)}static isValidIdentifier(e){return NI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$g}static keyField(){return new it([$g])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ee(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ee(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ee(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new ee(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(t)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(ze.fromString(e))}static fromName(e){return new te(ze.fromString(e).popFirst(5))}static empty(){return new te(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new ze(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=-1;class fc{constructor(e,t,i,o){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=o}}function qd(s){return s.fields.find(e=>e.kind===2)}function Wi(s){return s.fields.filter(e=>e.kind!==2)}fc.UNKNOWN_ID=-1;class Xu{constructor(e,t){this.fieldPath=e,this.kind=t}}class sl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sl(0,pn.min())}}function bI(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=pe.fromTimestamp(i===1e9?new st(t+1,0):new st(t,i));return new pn(o,te.empty(),e)}function N_(s){return new pn(s.readTime,s.key,il)}class pn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new pn(pe.min(),te.empty(),il)}static max(){return new pn(pe.max(),te.empty(),il)}}function Ef(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=te.comparator(s.documentKey,e.documentKey),t!==0?t:we(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ps(s){if(s.code!==j.FAILED_PRECONDITION||s.message!==b_)throw s;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new O((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof O?t:O.resolve(t)}catch(t){return O.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):O.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):O.reject(t)}static resolve(e){return new O((t,i)=>{t(e)})}static reject(e){return new O((t,i)=>{i(e)})}static waitFor(e){return new O((t,i)=>{let o=0,l=0,h=!1;e.forEach(f=>{++o,f.next(()=>{++l,h&&l===o&&t()},g=>i(g))}),h=!0,l===o&&t()})}static or(e){let t=O.resolve(!1);for(const i of e)t=t.next(o=>o?O.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new O((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const _=g;t(e[_]).next(w=>{h[_]=w,++f,f===l&&i(h)},w=>o(w))}})}static doWhile(e,t){return new O((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="SimpleDb";class Vc{static open(e,t,i,o){try{return new Vc(t,e.transaction(o,i))}catch(l){throw new Qa(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Sr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Qa(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const o=wf(i.target.error);this.S.reject(new Qa(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Y(hn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new OI(t)}}class ci{static delete(e){return Y(hn,"Removing database:",e),Xi(u_().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!p_())return!1;if(ci.F())return!0;const e=uc(),t=ci.M(e),i=0<t&&t<10,o=O_(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.B=i,this.L=null,ci.M(uc())===12.2&&Kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(Y(hn,"Opening database:",this.name),this.db=await new Promise((t,i)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=l=>{const h=l.target.result;t(h)},o.onblocked=()=>{i(new Qa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const h=l.target.error;h.name==="VersionError"?i(new ee(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):h.name==="InvalidStateError"?i(new ee(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h)):i(new Qa(e,h))},o.onupgradeneeded=l=>{Y(hn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const h=l.target.result;if(this.L!==null&&this.L!==l.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${l.oldVersion}, event.newVersion=${l.newVersion}, db.version=${h.version}`);this.B.q(h,o.transaction,l.oldVersion,this.version).next(()=>{Y(hn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{const i=t.target;this.L=i.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,o){const l=t==="readonly";let h=0;for(;;){++h;try{this.db=await this.k(e);const f=Vc.open(this.db,e,l?"readonly":"readwrite",i),g=o(f).next(_=>(f.v(),_)).catch(_=>(f.abort(_),O.reject(_))).toPromise();return g.catch(()=>{}),await f.D,g}catch(f){const g=f,_=g.name!=="FirebaseError"&&h<3;if(Y(hn,"Transaction failed with error:",g.message,"Retrying:",_),this.close(),!_)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function O_(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class MI{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return Xi(this.K.delete())}}class Qa extends ee{constructor(e,t){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yi(s){return s.name==="IndexedDbTransactionError"}class OI{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(Y(hn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(Y(hn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Xi(i)}add(e){return Y(hn,"ADD",this.store.name,e,e),Xi(this.store.add(e))}get(e){return Xi(this.store.get(e)).next(t=>(t===void 0&&(t=null),Y(hn,"GET",this.store.name,e,t),t))}delete(e){return Y(hn,"DELETE",this.store.name,e),Xi(this.store.delete(e))}count(){return Y(hn,"COUNT",this.store.name),Xi(this.store.count())}J(e,t){const i=this.options(e,t),o=i.index?this.store.index(i.index):this.store;if(typeof o.getAll=="function"){const l=o.getAll(i.range);return new O((h,f)=>{l.onerror=g=>{f(g.target.error)},l.onsuccess=g=>{h(g.target.result)}})}{const l=this.cursor(i),h=[];return this.Y(l,(f,g)=>{h.push(g)}).next(()=>h)}}Z(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new O((o,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{o(h.target.result)}})}X(e,t){Y(hn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.ee=!1;const o=this.cursor(i);return this.Y(o,(l,h,f)=>f.delete())}te(e,t){let i;t?i=e:(i={},t=e);const o=this.cursor(i);return this.Y(o,t)}ne(e){const t=this.cursor({});return new O((i,o)=>{t.onerror=l=>{const h=wf(l.target.error);o(h)},t.onsuccess=l=>{const h=l.target.result;h?e(h.primaryKey,h.value).next(f=>{f?h.continue():i()}):i()}})}Y(e,t){const i=[];return new O((o,l)=>{e.onerror=h=>{l(h.target.error)},e.onsuccess=h=>{const f=h.target.result;if(!f)return void o();const g=new MI(f),_=t(f.primaryKey,f.value,g);if(_ instanceof O){const w=_.catch(T=>(g.done(),O.reject(T)));i.push(w)}g.isDone?o():g.j===null?f.continue():f.continue(g.j)}}).next(()=>O.waitFor(i))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.ee?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Xi(s){return new O((e,t)=>{s.onsuccess=i=>{const o=i.target.result;e(o)},s.onerror=i=>{const o=wf(i.target.error);t(o)}})}let qg=!1;function wf(s){const e=ci.M(uc());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const i=new ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qg||(qg=!0,setTimeout(()=>{throw i},0)),i}}return s}const Wa="IndexBackfiller";class LI{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){Y(Wa,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.re.se();Y(Wa,`Documents written: ${t}`)}catch(t){yi(t)?Y(Wa,"Ignoring IndexedDB error during index backfill: ",t):await ps(t)}await this.ie(6e4)})}}class FI{constructor(e,t){this.localStore=e,this.persistence=t}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))}oe(e,t){const i=new Set;let o=t,l=!0;return O.doWhile(()=>l===!0&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(h=>{if(h!==null&&!i.has(h))return Y(Wa,`Processing collection: ${h}`),this._e(e,h,o).next(f=>{o-=f,i.add(h)});l=!1})).next(()=>t-o)}_e(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,i).next(l=>{const h=l.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next(()=>this.ae(o,l)).next(f=>(Y(Wa,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>h.size)}))}ae(e,t){let i=e;return t.changes.forEach((o,l)=>{const h=N_(l);Ef(h,i)>0&&(i=h)}),new pn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>t.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Rn.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=-1;function kc(s){return s==null}function ol(s){return s===0&&1/s==-1/0}function BI(s){return typeof s=="number"&&Number.isInteger(s)&&!ol(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc="";function zt(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=Kg(e)),e=zI(s.get(t),e);return Kg(e)}function zI(s,e){let t=e;const i=s.length;for(let o=0;o<i;o++){const l=s.charAt(o);switch(l){case"\0":t+="";break;case pc:t+="";break;default:t+=l}}return t}function Kg(s){return s+pc+""}function nr(s){const e=s.length;if(de(e>=2,64408,{path:s}),e===2)return de(s.charAt(0)===pc&&s.charAt(1)==="",56145,{path:s}),ze.emptyPath();const t=e-2,i=[];let o="";for(let l=0;l<e;){const h=s.indexOf(pc,l);switch((h<0||h>t)&&ue(50515,{path:s}),s.charAt(h+1)){case"":const f=s.substring(l,h);let g;o.length===0?g=f:(o+=f,g=o,o=""),i.push(g);break;case"":o+=s.substring(l,h),o+="\0";break;case"":o+=s.substring(l,h+1);break;default:ue(61167,{path:s})}l=h+2}return new ze(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="remoteDocuments",_l="owner",uo="owner",al="mutationQueues",UI="userId",$n="mutations",Gg="batchId",ts="userMutationsIndex",Hg=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(s,e){return[s,zt(e)]}function L_(s,e,t){return[s,zt(e),t]}const jI={},So="documentMutations",mc="remoteDocumentsV14",$I=["prefixPath","collectionGroup","readTime","documentId"],Zu="documentKeyIndex",qI=["prefixPath","collectionGroup","documentId"],F_="collectionGroupIndex",KI=["collectionGroup","readTime","prefixPath","documentId"],ll="remoteDocumentGlobal",Kd="remoteDocumentGlobalKey",Ao="targets",B_="queryTargetsIndex",GI=["canonicalId","targetId"],Ro="targetDocuments",HI=["targetId","path"],If="documentTargetsIndex",QI=["path","targetId"],gc="targetGlobalKey",is="targetGlobal",ul="collectionParents",WI=["collectionId","parent"],Po="clientMetadata",YI="clientId",Dc="bundles",XI="bundleId",Nc="namedQueries",JI="name",Tf="indexConfiguration",ZI="indexId",Gd="collectionGroupIndex",eT="collectionGroup",Ya="indexState",tT=["indexId","uid"],z_="sequenceNumberIndex",nT=["uid","sequenceNumber"],Xa="indexEntries",rT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],U_="documentKeyIndex",iT=["indexId","uid","orderedDocumentKey"],bc="documentOverlays",sT=["userId","collectionPath","documentId"],Hd="collectionPathOverlayIndex",oT=["userId","collectionPath","largestBatchId"],j_="collectionGroupOverlayIndex",aT=["userId","collectionGroup","largestBatchId"],Sf="globals",lT="name",$_=[al,$n,So,Yi,Ao,_l,is,Ro,Po,ll,ul,Dc,Nc],uT=[...$_,bc],q_=[al,$n,So,mc,Ao,_l,is,Ro,Po,ll,ul,Dc,Nc,bc],K_=q_,Af=[...K_,Tf,Ya,Xa],cT=Af,G_=[...Af,Sf],hT=G_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd extends M_{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function vt(s,e){const t=Te(s);return ci.N(t.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function _i(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function H_(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,t){this.comparator=e,this.root=t||Dt.EMPTY}insert(e,t){return new tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $u(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $u(this.root,e,this.comparator,!1)}getReverseIterator(){return new $u(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $u(this.root,e,this.comparator,!0)}}class $u{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Dt.RED,this.left=o??Dt.EMPTY,this.right=l??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Dt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wg(this.data.getIterator())}getIteratorFrom(e){return new Wg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof $e)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $e(this.comparator);return t.data=e,t}}class Wg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function co(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new nn([])}unionWith(e){let t=new $e(it.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new nn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Q_("Invalid base64 string: "+l):l}}(e);return new ft(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new ft(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const dT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(s){if(de(!!s,39018),typeof s=="string"){let e=0;const t=dT.exec(s);if(de(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:et(s.seconds),nanos:et(s.nanos)}}function et(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Cr(s){return typeof s=="string"?ft.fromBase64String(s):ft.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="server_timestamp",Y_="__type__",X_="__previous_value__",J_="__local_write_time__";function Rf(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Y_])===null||t===void 0?void 0:t.stringValue)===W_}function Mc(s){const e=s.mapValue.fields[X_];return Rf(e)?Mc(e):e}function cl(s){const e=Pr(s.mapValue.fields[J_].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,t,i,o,l,h,f,g,_,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=w}}const yc="(default)";class ls{constructor(e,t){this.projectId=e,this.database=t||yc}static empty(){return new ls("","")}get isDefaultDatabase(){return this.database===yc}isEqual(e){return e instanceof ls&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="__type__",Z_="__max__",oi={mapValue:{fields:{__type__:{stringValue:Z_}}}},Cf="__vector__",Co="value",ec={nullValue:"NULL_VALUE"};function di(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Rf(s)?4:ev(s)?9007199254740991:Oc(s)?10:11:ue(28295,{value:s})}function ir(s,e){if(s===e)return!0;const t=di(s);if(t!==di(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return cl(s).isEqual(cl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Pr(o.timestampValue),f=Pr(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,l){return Cr(o.bytesValue).isEqual(Cr(l.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,l){return et(o.geoPointValue.latitude)===et(l.geoPointValue.latitude)&&et(o.geoPointValue.longitude)===et(l.geoPointValue.longitude)}(s,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return et(o.integerValue)===et(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=et(o.doubleValue),f=et(l.doubleValue);return h===f?ol(h)===ol(f):isNaN(h)&&isNaN(f)}return!1}(s,e);case 9:return To(s.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Qg(h)!==Qg(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!ir(h[g],f[g])))return!1;return!0}(s,e);default:return ue(52216,{left:s})}}function hl(s,e){return(s.values||[]).find(t=>ir(t,e))!==void 0}function fi(s,e){if(s===e)return 0;const t=di(s),i=di(e);if(t!==i)return we(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return we(s.booleanValue,e.booleanValue);case 2:return function(l,h){const f=et(l.integerValue||l.doubleValue),g=et(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1}(s,e);case 3:return Yg(s.timestampValue,e.timestampValue);case 4:return Yg(cl(s),cl(e));case 5:return $d(s.stringValue,e.stringValue);case 6:return function(l,h){const f=Cr(l),g=Cr(h);return f.compareTo(g)}(s.bytesValue,e.bytesValue);case 7:return function(l,h){const f=l.split("/"),g=h.split("/");for(let _=0;_<f.length&&_<g.length;_++){const w=we(f[_],g[_]);if(w!==0)return w}return we(f.length,g.length)}(s.referenceValue,e.referenceValue);case 8:return function(l,h){const f=we(et(l.latitude),et(h.latitude));return f!==0?f:we(et(l.longitude),et(h.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return Xg(s.arrayValue,e.arrayValue);case 10:return function(l,h){var f,g,_,w;const T=l.fields||{},C=h.fields||{},B=(f=T[Co])===null||f===void 0?void 0:f.arrayValue,q=(g=C[Co])===null||g===void 0?void 0:g.arrayValue,G=we(((_=B==null?void 0:B.values)===null||_===void 0?void 0:_.length)||0,((w=q==null?void 0:q.values)===null||w===void 0?void 0:w.length)||0);return G!==0?G:Xg(B,q)}(s.mapValue,e.mapValue);case 11:return function(l,h){if(l===oi.mapValue&&h===oi.mapValue)return 0;if(l===oi.mapValue)return 1;if(h===oi.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),_=h.fields||{},w=Object.keys(_);g.sort(),w.sort();for(let T=0;T<g.length&&T<w.length;++T){const C=$d(g[T],w[T]);if(C!==0)return C;const B=fi(f[g[T]],_[w[T]]);if(B!==0)return B}return we(g.length,w.length)}(s.mapValue,e.mapValue);default:throw ue(23264,{Pe:t})}}function Yg(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return we(s,e);const t=Pr(s),i=Pr(e),o=we(t.seconds,i.seconds);return o!==0?o:we(t.nanos,i.nanos)}function Xg(s,e){const t=s.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=fi(t[o],i[o]);if(l)return l}return we(t.length,i.length)}function xo(s){return Wd(s)}function Wd(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const i=Pr(t);return`time(${i.seconds},${i.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return Cr(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return te.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Wd(l);return i+"]"}(s.arrayValue):"mapValue"in s?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Wd(t.fields[h])}`;return o+"}"}(s.mapValue):ue(61005,{value:s})}function tc(s){switch(di(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mc(s);return e?16+tc(e):16;case 5:return 2*s.stringValue.length;case 6:return Cr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+tc(l),0)}(s.arrayValue);case 10:case 11:return function(i){let o=0;return _i(i.fields,(l,h)=>{o+=l.length+tc(h)}),o}(s.mapValue);default:throw ue(13486,{value:s})}}function dl(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Yd(s){return!!s&&"integerValue"in s}function fl(s){return!!s&&"arrayValue"in s}function Jg(s){return!!s&&"nullValue"in s}function Zg(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function nc(s){return!!s&&"mapValue"in s}function Oc(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Pf])===null||t===void 0?void 0:t.stringValue)===Cf}function Ja(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return _i(s.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ja(i)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ja(s.arrayValue.values[t]);return e}return Object.assign({},s)}function ev(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Z_}const tv={mapValue:{fields:{[Pf]:{stringValue:Cf},[Co]:{arrayValue:{}}}}};function pT(s){return"nullValue"in s?ec:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?dl(ls.empty(),te.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Oc(s)?tv:{mapValue:{}}:ue(35942,{value:s})}function mT(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?dl(ls.empty(),te.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?tv:"mapValue"in s?Oc(s)?{mapValue:{}}:oi:ue(61959,{value:s})}function ey(s,e){const t=fi(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function ty(s,e){const t=fi(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!nc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ja(t)}setAll(e){let t=it.emptyPath(),i={},o=[];e.forEach((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=Ja(h):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());nc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];nc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){_i(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new Bt(Ja(this.value))}}function nv(s){const e=[];return _i(s.fields,(t,i)=>{const o=new it([t]);if(nc(i)){const l=nv(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new at(e,0,pe.min(),pe.min(),pe.min(),Bt.empty(),0)}static newFoundDocument(e,t,i,o){return new at(e,1,t,pe.min(),i,o,0)}static newNoDocument(e,t){return new at(e,2,t,pe.min(),pe.min(),Bt.empty(),0)}static newUnknownDocument(e,t){return new at(e,3,t,pe.min(),pe.min(),Bt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t){this.position=e,this.inclusive=t}}function ny(s,e,t){let i=0;for(let o=0;o<s.position.length;o++){const l=e[o],h=s.position[o];if(l.field.isKeyField()?i=te.comparator(te.fromName(h.referenceValue),t.key):i=fi(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function ry(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!ir(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,t="asc"){this.field=e,this.dir=t}}function gT(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{}class xe extends rv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new yT(e,t,i):t==="array-contains"?new ET(e,i):t==="in"?new uv(e,i):t==="not-in"?new wT(e,i):t==="array-contains-any"?new IT(e,i):new xe(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new _T(e,i):new vT(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fi(t,this.value)):t!==null&&di(this.value)===di(t)&&this.matchesComparison(fi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class je extends rv{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new je(e,t)}matches(e){return ko(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ko(s){return s.op==="and"}function Xd(s){return s.op==="or"}function xf(s){return iv(s)&&ko(s)}function iv(s){for(const e of s.filters)if(e instanceof je)return!1;return!0}function Jd(s){if(s instanceof xe)return s.field.canonicalString()+s.op.toString()+xo(s.value);if(xf(s))return s.filters.map(e=>Jd(e)).join(",");{const e=s.filters.map(t=>Jd(t)).join(",");return`${s.op}(${e})`}}function sv(s,e){return s instanceof xe?function(i,o){return o instanceof xe&&i.op===o.op&&i.field.isEqual(o.field)&&ir(i.value,o.value)}(s,e):s instanceof je?function(i,o){return o instanceof je&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,h,f)=>l&&sv(h,o.filters[f]),!0):!1}(s,e):void ue(19439)}function ov(s,e){const t=s.filters.concat(e);return je.create(t,s.op)}function av(s){return s instanceof xe?function(t){return`${t.field.canonicalString()} ${t.op} ${xo(t.value)}`}(s):s instanceof je?function(t){return t.op.toString()+" {"+t.getFilters().map(av).join(" ,")+"}"}(s):"Filter"}class yT extends xe{constructor(e,t,i){super(e,t,i),this.key=te.fromName(i.referenceValue)}matches(e){const t=te.comparator(e.key,this.key);return this.matchesComparison(t)}}class _T extends xe{constructor(e,t){super(e,"in",t),this.keys=lv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vT extends xe{constructor(e,t){super(e,"not-in",t),this.keys=lv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lv(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>te.fromName(i.referenceValue))}class ET extends xe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fl(t)&&hl(t.arrayValue,this.value)}}class uv extends xe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hl(this.value.arrayValue,t)}}class wT extends xe{constructor(e,t){super(e,"not-in",t)}matches(e){if(hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hl(this.value.arrayValue,t)}}class IT extends xe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>hl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Ie=null}}function Zd(s,e=null,t=[],i=[],o=null,l=null,h=null){return new TT(s,e,t,i,o,l,h)}function us(s){const e=Te(s);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Jd(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),kc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>xo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>xo(i)).join(",")),e.Ie=t}return e.Ie}function vl(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!gT(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!sv(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!ry(s.startAt,e.startAt)&&ry(s.endAt,e.endAt)}function _c(s){return te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function vc(s,e){return s.filters.filter(t=>t instanceof xe&&t.field.isEqual(e))}function iy(s,e,t){let i=ec,o=!0;for(const l of vc(s,e)){let h=ec,f=!0;switch(l.op){case"<":case"<=":h=pT(l.value);break;case"==":case"in":case">=":h=l.value;break;case">":h=l.value,f=!1;break;case"!=":case"not-in":h=ec}ey({value:i,inclusive:o},{value:h,inclusive:f})<0&&(i=h,o=f)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const h=t.position[l];ey({value:i,inclusive:o},{value:h,inclusive:t.inclusive})<0&&(i=h,o=t.inclusive);break}}return{value:i,inclusive:o}}function sy(s,e,t){let i=oi,o=!0;for(const l of vc(s,e)){let h=oi,f=!0;switch(l.op){case">=":case">":h=mT(l.value),f=!1;break;case"==":case"in":case"<=":h=l.value;break;case"<":h=l.value,f=!1;break;case"!=":case"not-in":h=oi}ty({value:i,inclusive:o},{value:h,inclusive:f})>0&&(i=h,o=f)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const h=t.position[l];ty({value:i,inclusive:o},{value:h,inclusive:t.inclusive})>0&&(i=h,o=t.inclusive);break}}return{value:i,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function ST(s,e,t,i,o,l,h,f){return new Bo(s,e,t,i,o,l,h,f)}function Vf(s){return new Bo(s)}function oy(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function cv(s){return s.collectionGroup!==null}function Za(s){const e=Te(s);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new $e(it.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(f=f.add(_.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new pl(l,i))}),t.has(it.keyField().canonicalString())||e.Ee.push(new pl(it.keyField(),i))}return e.Ee}function Pn(s){const e=Te(s);return e.de||(e.de=AT(e,Za(s))),e.de}function AT(s,e){if(s.limitType==="F")return Zd(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new pl(o.field,l)});const t=s.endAt?new Vo(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Vo(s.startAt.position,s.startAt.inclusive):null;return Zd(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function ef(s,e){const t=s.filters.concat([e]);return new Bo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function tf(s,e,t){return new Bo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Lc(s,e){return vl(Pn(s),Pn(e))&&s.limitType===e.limitType}function hv(s){return`${us(Pn(s))}|lt:${s.limitType}`}function yo(s){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>av(o)).join(", ")}]`),kc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>xo(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>xo(o)).join(",")),`Target(${i})`}(Pn(s))}; limitType=${s.limitType})`}function El(s,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):te.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(s,e)&&function(i,o){for(const l of Za(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(s,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(s,e)&&function(i,o){return!(i.startAt&&!function(h,f,g){const _=ny(h,f,g);return h.inclusive?_<=0:_<0}(i.startAt,Za(i),o)||i.endAt&&!function(h,f,g){const _=ny(h,f,g);return h.inclusive?_>=0:_>0}(i.endAt,Za(i),o))}(s,e)}function RT(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function dv(s){return(e,t)=>{let i=!1;for(const o of Za(s)){const l=PT(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function PT(s,e,t){const i=s.field.isKeyField()?te.comparator(e.key,t.key):function(l,h,f){const g=h.data.field(l),_=f.data.field(l);return g!==null&&_!==null?fi(g,_):ue(42886)}(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return ue(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){_i(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return H_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=new tt(te.comparator);function dn(){return CT}const fv=new tt(te.comparator);function qa(...s){let e=fv;for(const t of s)e=e.insert(t.key,t);return e}function pv(s){let e=fv;return s.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function rr(){return el()}function mv(){return el()}function el(){return new xr(s=>s.toString(),(s,e)=>s.isEqual(e))}const xT=new tt(te.comparator),VT=new $e(te.comparator);function Re(...s){let e=VT;for(const t of s)e=e.add(t);return e}const kT=new $e(we);function DT(){return kT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ol(e)?"-0":e}}function gv(s){return{integerValue:""+s}}function NT(s,e){return BI(e)?gv(e):kf(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(){this._=void 0}}function bT(s,e,t){return s instanceof ml?function(o,l){const h={fields:{[Y_]:{stringValue:W_},[J_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Rf(l)&&(l=Mc(l)),l&&(h.fields[X_]=l),{mapValue:h}}(t,e):s instanceof Do?_v(s,e):s instanceof No?vv(s,e):function(o,l){const h=yv(o,l),f=ay(h)+ay(o.Re);return Yd(h)&&Yd(o.Re)?gv(f):kf(o.serializer,f)}(s,e)}function MT(s,e,t){return s instanceof Do?_v(s,e):s instanceof No?vv(s,e):t}function yv(s,e){return s instanceof gl?function(i){return Yd(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class ml extends Fc{}class Do extends Fc{constructor(e){super(),this.elements=e}}function _v(s,e){const t=Ev(e);for(const i of s.elements)t.some(o=>ir(o,i))||t.push(i);return{arrayValue:{values:t}}}class No extends Fc{constructor(e){super(),this.elements=e}}function vv(s,e){let t=Ev(e);for(const i of s.elements)t=t.filter(o=>!ir(o,i));return{arrayValue:{values:t}}}class gl extends Fc{constructor(e,t){super(),this.serializer=e,this.Re=t}}function ay(s){return et(s.integerValue||s.doubleValue)}function Ev(s){return fl(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,t){this.field=e,this.transform=t}}function LT(s,e){return s.field.isEqual(e.field)&&function(i,o){return i instanceof Do&&o instanceof Do||i instanceof No&&o instanceof No?To(i.elements,o.elements,ir):i instanceof gl&&o instanceof gl?ir(i.Re,o.Re):i instanceof ml&&o instanceof ml}(s.transform,e.transform)}class FT{constructor(e,t){this.version=e,this.transformResults=t}}class Gt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rc(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Bc{}function wv(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new zc(s.key,Gt.none()):new zo(s.key,s.data,Gt.none());{const t=s.data,i=Bt.empty();let o=new $e(it.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Vr(s.key,i,new nn(o.toArray()),Gt.none())}}function BT(s,e,t){s instanceof zo?function(o,l,h){const f=o.value.clone(),g=uy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()}(s,e,t):s instanceof Vr?function(o,l,h){if(!rc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=uy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(Iv(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(s,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function tl(s,e,t,i){return s instanceof zo?function(l,h,f,g){if(!rc(l.precondition,h))return f;const _=l.value.clone(),w=cy(l.fieldTransforms,g,h);return _.setAll(w),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null}(s,e,t,i):s instanceof Vr?function(l,h,f,g){if(!rc(l.precondition,h))return f;const _=cy(l.fieldTransforms,g,h),w=h.data;return w.setAll(Iv(l)),w.setAll(_),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(s,e,t,i):function(l,h,f){return rc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f}(s,e,t)}function zT(s,e){let t=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),l=yv(i.transform,o||null);l!=null&&(t===null&&(t=Bt.empty()),t.set(i.field,l))}return t||null}function ly(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&To(i,o,(l,h)=>LT(l,h))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class zo extends Bc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Vr extends Bc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Iv(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}}),e}function uy(s,e,t){const i=new Map;de(s.length===t.length,32656,{Ve:t.length,me:s.length});for(let o=0;o<t.length;o++){const l=s[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,MT(h,f,t[o]))}return i}function cy(s,e,t){const i=new Map;for(const o of s){const l=o.transform,h=t.data.field(o.field);i.set(o.field,bT(l,h,e))}return i}class zc extends Bc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tv extends Bc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&BT(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=tl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=tl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=mv();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=wv(h,f);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(pe.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Re())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,(t,i)=>ly(t,i))&&To(this.baseMutations,e.baseMutations,(t,i)=>ly(t,i))}}class Nf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){de(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let o=function(){return xT}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Nf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,Ne;function jT(s){switch(s){case j.OK:return ue(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return ue(15467,{code:s})}}function Sv(s){if(s===void 0)return Kt("GRPC error has no .code"),j.UNKNOWN;switch(s){case dt.OK:return j.OK;case dt.CANCELLED:return j.CANCELLED;case dt.UNKNOWN:return j.UNKNOWN;case dt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case dt.INTERNAL:return j.INTERNAL;case dt.UNAVAILABLE:return j.UNAVAILABLE;case dt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case dt.NOT_FOUND:return j.NOT_FOUND;case dt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case dt.ABORTED:return j.ABORTED;case dt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case dt.DATA_LOSS:return j.DATA_LOSS;default:return ue(39323,{code:s})}}(Ne=dt||(dt={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=new ui([4294967295,4294967295],0);function hy(s){const e=V_().encode(s),t=new I_;return t.update(e),new Uint8Array(t.digest())}function dy(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ui([t,i],0),new ui([o,l],0)]}class Mf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ka(`Invalid padding: ${t}`);if(i<0)throw new Ka(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ka(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ka(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=ui.fromNumber(this.pe)}we(e,t,i){let o=e.add(t.multiply(ui.fromNumber(i)));return o.compare($T)===1&&(o=new ui([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=hy(e),[i,o]=dy(t);for(let l=0;l<this.hashCount;l++){const h=this.we(i,o,l);if(!this.be(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Mf(l,o,t);return i.forEach(f=>h.insert(f)),h}insert(e){if(this.pe===0)return;const t=hy(e),[i,o]=dy(t);for(let l=0;l<this.hashCount;l++){const h=this.we(i,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Uc(pe.min(),o,new tt(we),dn(),Re())}}class wl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new wl(i,t,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t,i,o){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=o}}class Av{constructor(e,t){this.targetId=e,this.Ce=t}}class Rv{constructor(e,t,i=ft.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class fy{constructor(){this.Fe=0,this.Me=py(),this.xe=ft.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Re(),t=Re(),i=Re();return this.Me.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:ue(38017,{changeType:l})}}),new wl(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=py()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,de(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class qT{constructor(e){this.ze=e,this.je=new Map,this.He=dn(),this.Je=qu(),this.Ye=qu(),this.Ze=new tt(we)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,i=e.Ce.count,o=this._t(t);if(o){const l=o.target;if(_c(l))if(i===0){const h=new te(l.path);this.tt(t,h,at.newNoDocument(h,pe.min()))}else de(i===1,20013,{expectedCount:i});else{const h=this.ut(t);if(h!==i){const f=this.ct(e),g=f?this.lt(f,e,h):1;if(g!==0){this.st(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,_)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Cr(i).toUint8Array()}catch(g){if(g instanceof Q_)return as("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Mf(h,o,l)}catch(g){return as(g instanceof Ka?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.pe===0?null:f}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){const i=this.ze.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const h=this.ze.Pt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.tt(t,l,null),o++)}),o}It(e){const t=new Map;this.je.forEach((l,h)=>{const f=this._t(h);if(f){if(l.current&&_c(f.target)){const g=new te(f.target.path);this.Et(g).has(h)||this.dt(h,g)||this.tt(h,g,at.newNoDocument(g,e))}l.Le&&(t.set(h,l.qe()),l.Qe())}});let i=Re();this.Ye.forEach((l,h)=>{let f=!0;h.forEachWhile(g=>{const _=this._t(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(l))}),this.He.forEach((l,h)=>h.setReadTime(e));const o=new Uc(e,t,this.Ze,this.He,i);return this.He=dn(),this.Je=qu(),this.Ye=qu(),this.Ze=new tt(we),o}et(e,t){if(!this.it(e))return;const i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new fy,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new $e(we),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new $e(we),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Y("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new fy),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function qu(){return new tt(te.comparator)}function py(){return new tt(te.comparator)}const KT={asc:"ASCENDING",desc:"DESCENDING"},GT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HT={and:"AND",or:"OR"};class QT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nf(s,e){return s.useProto3Json||kc(e)?e:{value:e}}function bo(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pv(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function WT(s,e){return bo(s,e.toTimestamp())}function Ht(s){return de(!!s,49232),pe.fromTimestamp(function(t){const i=Pr(t);return new st(i.seconds,i.nanos)}(s))}function Of(s,e){return rf(s,e).canonicalString()}function rf(s,e){const t=function(o){return new ze(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?t:t.child(e)}function Cv(s){const e=ze.fromString(s);return de(Lv(e),10190,{key:e.toString()}),e}function Ec(s,e){return Of(s.databaseId,e.path)}function ss(s,e){const t=Cv(e);if(t.get(1)!==s.databaseId.projectId)throw new ee(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ee(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new te(kv(t))}function xv(s,e){return Of(s.databaseId,e)}function Vv(s){const e=Cv(s);return e.length===4?ze.emptyPath():kv(e)}function sf(s){return new ze(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function kv(s){return de(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function my(s,e,t){return{name:Ec(s,e),fields:t.value.mapValue.fields}}function YT(s,e,t){const i=ss(s,e.name),o=Ht(e.updateTime),l=e.createTime?Ht(e.createTime):pe.min(),h=new Bt({mapValue:{fields:e.fields}}),f=at.newFoundDocument(i,o,l,h);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function XT(s,e){let t;if("targetChange"in e){e.targetChange;const i=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:ue(39313,{state:_})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(_,w){return _.useProto3Json?(de(w===void 0||typeof w=="string",58123),ft.fromBase64String(w||"")):(de(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),ft.fromUint8Array(w||new Uint8Array))}(s,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&function(_){const w=_.code===void 0?j.UNKNOWN:Sv(_.code);return new ee(w,_.message||"")}(h);t=new Rv(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=ss(s,i.document.name),l=Ht(i.document.updateTime),h=i.document.createTime?Ht(i.document.createTime):pe.min(),f=new Bt({mapValue:{fields:i.document.fields}}),g=at.newFoundDocument(o,l,h,f),_=i.targetIds||[],w=i.removedTargetIds||[];t=new ic(_,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=ss(s,i.document),l=i.readTime?Ht(i.readTime):pe.min(),h=at.newNoDocument(o,l),f=i.removedTargetIds||[];t=new ic([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=ss(s,i.document),l=i.removedTargetIds||[];t=new ic([],l,o,null)}else{if(!("filter"in e))return ue(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new UT(o,l),f=i.targetId;t=new Av(f,h)}}return t}function wc(s,e){let t;if(e instanceof zo)t={update:my(s,e.key,e.value)};else if(e instanceof zc)t={delete:Ec(s,e.key)};else if(e instanceof Vr)t={update:my(s,e.key,e.data),updateMask:r1(e.fieldMask)};else{if(!(e instanceof Tv))return ue(16599,{ft:e.type});t={verify:Ec(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,h){const f=h.transform;if(f instanceof ml)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Do)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof No)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof gl)return{fieldPath:h.field.canonicalString(),increment:f.Re};throw ue(20930,{transform:h.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:WT(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ue(27497)}(s,e.precondition)),t}function of(s,e){const t=e.currentDocument?function(l){return l.updateTime!==void 0?Gt.updateTime(Ht(l.updateTime)):l.exists!==void 0?Gt.exists(l.exists):Gt.none()}(e.currentDocument):Gt.none(),i=e.updateTransforms?e.updateTransforms.map(o=>function(h,f){let g=null;if("setToServerValue"in f)de(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),g=new ml;else if("appendMissingElements"in f){const w=f.appendMissingElements.values||[];g=new Do(w)}else if("removeAllFromArray"in f){const w=f.removeAllFromArray.values||[];g=new No(w)}else"increment"in f?g=new gl(h,f.increment):ue(16584,{proto:f});const _=it.fromServerFormat(f.fieldPath);return new OT(_,g)}(s,o)):[];if(e.update){e.update.name;const o=ss(s,e.update.name),l=new Bt({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=function(g){const _=g.fieldPaths||[];return new nn(_.map(w=>it.fromServerFormat(w)))}(e.updateMask);return new Vr(o,l,h,t,i)}return new zo(o,l,t,i)}if(e.delete){const o=ss(s,e.delete);return new zc(o,t)}if(e.verify){const o=ss(s,e.verify);return new Tv(o,t)}return ue(1463,{proto:e})}function JT(s,e){return s&&s.length>0?(de(e!==void 0,14353),s.map(t=>function(o,l){let h=o.updateTime?Ht(o.updateTime):Ht(l);return h.isEqual(pe.min())&&(h=Ht(l)),new FT(h,o.transformResults||[])}(t,e))):[]}function Dv(s,e){return{documents:[xv(s,e.path)]}}function Nv(s,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=xv(s,o);const l=function(_){if(_.length!==0)return Ov(je.create(_,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(_){if(_.length!==0)return _.map(w=>function(C){return{field:_o(C.field),direction:e1(C.dir)}}(w))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=nf(s,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{gt:t,parent:o}}function bv(s){let e=Vv(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){de(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=function(T){const C=Mv(T);return C instanceof je&&xf(C)?C.getFilters():[C]}(t.where));let h=[];t.orderBy&&(h=function(T){return T.map(C=>function(q){return new pl(vo(q.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(q.direction))}(C))}(t.orderBy));let f=null;t.limit&&(f=function(T){let C;return C=typeof T=="object"?T.value:T,kc(C)?null:C}(t.limit));let g=null;t.startAt&&(g=function(T){const C=!!T.before,B=T.values||[];return new Vo(B,C)}(t.startAt));let _=null;return t.endAt&&(_=function(T){const C=!T.before,B=T.values||[];return new Vo(B,C)}(t.endAt)),ST(e,o,h,l,f,"F",g,_)}function ZT(s,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Mv(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=vo(t.unaryFilter.field);return xe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=vo(t.unaryFilter.field);return xe.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=vo(t.unaryFilter.field);return xe.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=vo(t.unaryFilter.field);return xe.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}}(s):s.fieldFilter!==void 0?function(t){return xe.create(vo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return je.create(t.compositeFilter.filters.map(i=>Mv(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ue(1026)}}(t.compositeFilter.op))}(s):ue(30097,{filter:s})}function e1(s){return KT[s]}function t1(s){return GT[s]}function n1(s){return HT[s]}function _o(s){return{fieldPath:s.canonicalString()}}function vo(s){return it.fromServerFormat(s.fieldPath)}function Ov(s){return s instanceof xe?function(t){if(t.op==="=="){if(Zg(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NAN"}};if(Jg(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Zg(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NAN"}};if(Jg(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(t.field),op:t1(t.op),value:t.value}}}(s):s instanceof je?function(t){const i=t.getFilters().map(o=>Ov(o));return i.length===1?i[0]:{compositeFilter:{op:n1(t.op),filters:i}}}(s):ue(54877,{filter:s})}function r1(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Lv(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t,i,o,l=pe.min(),h=pe.min(),f=ft.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e){this.wt=e}}function i1(s,e){let t;if(e.document)t=YT(s.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=te.fromSegments(e.noDocument.path),o=hs(e.noDocument.readTime);t=at.newNoDocument(i,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ue(56709);{const i=te.fromSegments(e.unknownDocument.path),o=hs(e.unknownDocument.version);t=at.newUnknownDocument(i,o)}}return e.readTime&&t.setReadTime(function(o){const l=new st(o[0],o[1]);return pe.fromTimestamp(l)}(e.readTime)),t}function gy(s,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ic(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(l,h){return{name:Ec(l,h.key),fields:h.data.value.mapValue.fields,updateTime:bo(l,h.version.toTimestamp()),createTime:bo(l,h.createTime.toTimestamp())}}(s.wt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:cs(e.version)};else{if(!e.isUnknownDocument())return ue(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:cs(e.version)}}return i}function Ic(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function cs(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hs(s){const e=new st(s.seconds,s.nanoseconds);return pe.fromTimestamp(e)}function Ji(s,e){const t=(e.baseMutations||[]).map(l=>of(s.wt,l));for(let l=0;l<e.mutations.length-1;++l){const h=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const f=e.mutations[l+1];h.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map(l=>of(s.wt,l)),o=st.fromMillis(e.localWriteTimeMs);return new Df(e.batchId,o,t,i)}function Ga(s){const e=hs(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?hs(s.lastLimboFreeSnapshotVersion):pe.min();let i;return i=function(l){return l.documents!==void 0}(s.query)?function(l){const h=l.documents.length;return de(h===1,1966,{count:h}),Pn(Vf(Vv(l.documents[0])))}(s.query):function(l){return Pn(bv(l))}(s.query),new Tr(i,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,ft.fromBase64String(s.resumeToken))}function Bv(s,e){const t=cs(e.snapshotVersion),i=cs(e.lastLimboFreeSnapshotVersion);let o;o=_c(e.target)?Dv(s.wt,e.target):Nv(s.wt,e.target).gt;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:us(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:o}}function zv(s){const e=bv({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?tf(e,e.limit,"L"):e}function kd(s,e){return new bf(e.largestBatchId,of(s.wt,e.overlayMutation))}function yy(s,e){const t=e.path.lastSegment();return[s,zt(e.path.popLast()),t]}function _y(s,e,t,i){return{indexId:s,uid:e,sequenceNumber:t,readTime:cs(i.readTime),documentKey:zt(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{getBundleMetadata(e,t){return vy(e).get(t).next(i=>{if(i)return function(l){return{id:l.bundleId,createTime:hs(l.createTime),version:l.version}}(i)})}saveBundleMetadata(e,t){return vy(e).put(function(o){return{bundleId:o.id,createTime:cs(Ht(o.createTime)),version:o.version}}(t))}getNamedQuery(e,t){return Ey(e).get(t).next(i=>{if(i)return function(l){return{name:l.name,query:zv(l.bundledQuery),readTime:hs(l.readTime)}}(i)})}saveNamedQuery(e,t){return Ey(e).put(function(o){return{name:o.name,readTime:cs(Ht(o.readTime)),bundledQuery:o.bundledQuery}}(t))}}function vy(s){return vt(s,Dc)}function Ey(s){return vt(s,Nc)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){const i=t.uid||"";return new jc(e,i)}getOverlay(e,t){return La(e).get(yy(this.userId,t)).next(i=>i?kd(this.serializer,i):null)}getOverlays(e,t){const i=rr();return O.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){const o=[];return i.forEach((l,h)=>{const f=new bf(t,h);o.push(this.St(e,f))}),O.waitFor(o)}removeOverlaysForBatchId(e,t,i){const o=new Set;t.forEach(h=>o.add(zt(h.getCollectionPath())));const l=[];return o.forEach(h=>{const f=IDBKeyRange.bound([this.userId,h,i],[this.userId,h,i+1],!1,!0);l.push(La(e).X(Hd,f))}),O.waitFor(l)}getOverlaysForCollection(e,t,i){const o=rr(),l=zt(t),h=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return La(e).J(Hd,h).next(f=>{for(const g of f){const _=kd(this.serializer,g);o.set(_.getKey(),_)}return o})}getOverlaysForCollectionGroup(e,t,i,o){const l=rr();let h;const f=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return La(e).te({index:j_,range:f},(g,_,w)=>{const T=kd(this.serializer,_);l.size()<o||T.largestBatchId===h?(l.set(T.getKey(),T),h=T.largestBatchId):w.done()}).next(()=>l)}St(e,t){return La(e).put(function(o,l,h){const[f,g,_]=yy(l,h.mutation.key);return{userId:l,collectionPath:g,documentId:_,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:wc(o.wt,h.mutation)}}(this.serializer,this.userId,t))}}function La(s){return vt(s,bc)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{Dt(e){return vt(e,Sf)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{const i=t==null?void 0:t.value;return i?ft.fromUint8Array(i):ft.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(et(e.integerValue));else if("doubleValue"in e){const i=et(e.doubleValue);isNaN(i)?this.Mt(t,13):(this.Mt(t,15),ol(i)?t.xt(0):t.xt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Mt(t,20),typeof i=="string"&&(i=Pr(i)),t.Ot(`${i.seconds||""}`),t.xt(i.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Cr(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Mt(t,45),t.xt(i.latitude||0),t.xt(i.longitude||0)}else"mapValue"in e?ev(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Oc(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):ue(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const i=e.fields||{};this.Mt(t,55);for(const o of Object.keys(i))this.Nt(o,t),this.Ct(i[o],t)}qt(e,t){var i,o;const l=e.fields||{};this.Mt(t,53);const h=Co,f=((o=(i=l[h].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.length)||0;this.Mt(t,15),t.xt(et(f)),this.Nt(h,t),this.Ct(l[h],t)}$t(e,t){const i=e.values||[];this.Mt(t,50);for(const o of i)this.Ct(o,t)}kt(e,t){this.Mt(t,37),te.fromName(e).path.forEach(i=>{this.Mt(t,60),this.Kt(i,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}Zi.Wt=new Zi;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=255;function a1(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function wy(s){const e=64-function(i){let o=0;for(let l=0;l<8;++l){const h=a1(255&i[l]);if(o+=h,h!==8)break}return o}(s);return Math.ceil(e/8)}class l1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.zt(i.value),i=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Yt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.zt(i);else if(i<2048)this.zt(960|i>>>6),this.zt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|i>>>12),this.zt(128|63&i>>>6),this.zt(128|63&i);else{const o=t.codePointAt(0);this.zt(240|o>>>18),this.zt(128|63&o>>>12),this.zt(128|63&o>>>6),this.zt(128|63&o)}}this.jt()}Xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Yt()}en(e){const t=this.tn(e),i=wy(t);this.nn(1+i),this.buffer[this.position++]=255&i;for(let o=t.length-i;o<t.length;++o)this.buffer[this.position++]=255&t[o]}rn(e){const t=this.tn(e),i=wy(t);this.nn(1+i),this.buffer[this.position++]=~(255&i);for(let o=t.length-i;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}sn(){this._n(ho),this._n(255)}an(){this.un(ho),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(l){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,l,!1),new Uint8Array(h.buffer)}(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let o=1;o<t.length;++o)t[o]^=i?255:0;return t}zt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===ho?(this._n(ho),this._n(0)):this._n(t)}Jt(e){const t=255&e;t===0?(this.un(0),this.un(255)):t===ho?(this.un(ho),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const o=new Uint8Array(i);o.set(this.buffer),this.buffer=o}}class u1{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class c1{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class Fa{constructor(){this.ln=new l1,this.hn=new u1(this.ln),this.Pn=new c1(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t,i,o){this.In=e,this.En=t,this.dn=i,this.An=o}Rn(){const e=this.An.length,t=e===0||this.An[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.An,0),t!==e?i.set([0],this.An.length):++i[i.length-1],new es(this.In,this.En,this.dn,i)}Vn(e,t,i){return{indexId:this.In,uid:e,arrayValue:sc(this.dn),directionalValue:sc(this.An),orderedDocumentKey:sc(t),documentKey:i.path.toArray()}}mn(e,t,i){const o=this.Vn(e,t,i);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function ni(s,e){let t=s.In-e.In;return t!==0?t:(t=Iy(s.dn,e.dn),t!==0?t:(t=Iy(s.An,e.An),t!==0?t:te.comparator(s.En,e.En)))}function Iy(s,e){for(let t=0;t<s.length&&t<e.length;++t){const i=s[t]-e[t];if(i!==0)return i}return s.length-e.length}function sc(s){return f_()?function(t){let i="";for(let o=0;o<t.length;o++)i+=String.fromCharCode(t[o]);return i}(s):s}function Ty(s){return typeof s!="string"?s:function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(s)}class Sy{constructor(e){this.fn=new $e((t,i)=>it.comparator(t.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const t of e.filters){const i=t;i.isInequality()?this.fn=this.fn.add(i):this.pn.push(i)}}get yn(){return this.fn.size>1}wn(e){if(de(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const t=qd(e);if(t!==void 0&&!this.bn(t))return!1;const i=Wi(e);let o=new Set,l=0,h=0;for(;l<i.length&&this.bn(i[l]);++l)o=o.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.fn.size>0){const f=this.fn.getIterator().getNext();if(!o.has(f.field.canonicalString())){const g=i[l];if(!this.Sn(f,g)||!this.Dn(this.gn[h++],g))return!1}++l}for(;l<i.length;++l){const f=i[l];if(h>=this.gn.length||!this.Dn(this.gn[h++],f))return!1}return!0}vn(){if(this.yn)return null;let e=new $e(it.comparator);const t=[];for(const i of this.pn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Xu(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Xu(i.field,0))}for(const i of this.gn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Xu(i.field,i.dir==="asc"?0:1)));return new fc(fc.UNKNOWN_ID,this.collectionId,t,sl.empty())}bn(e){for(const t of this.pn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}Dn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(s){var e,t;if(de(s instanceof xe||s instanceof je,20012),s instanceof xe){if(s instanceof uv){const o=((t=(e=s.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(l=>xe.create(s.field,"==",l)))||[];return je.create(o,"or")}return s}const i=s.filters.map(o=>Uv(o));return je.create(i,s.op)}function h1(s){if(s.getFilters().length===0)return[];const e=uf(Uv(s));return de(jv(e),7391),af(e)||lf(e)?[e]:e.getFilters()}function af(s){return s instanceof xe}function lf(s){return s instanceof je&&xf(s)}function jv(s){return af(s)||lf(s)||function(t){if(t instanceof je&&Xd(t)){for(const i of t.getFilters())if(!af(i)&&!lf(i))return!1;return!0}return!1}(s)}function uf(s){if(de(s instanceof xe||s instanceof je,34018),s instanceof xe)return s;if(s.filters.length===1)return uf(s.filters[0]);const e=s.filters.map(i=>uf(i));let t=je.create(e,s.op);return t=Tc(t),jv(t)?t:(de(t instanceof je,64498),de(ko(t),40251),de(t.filters.length>1,57927),t.filters.reduce((i,o)=>Lf(i,o)))}function Lf(s,e){let t;return de(s instanceof xe||s instanceof je,38388),de(e instanceof xe||e instanceof je,25473),t=s instanceof xe?e instanceof xe?function(o,l){return je.create([o,l],"and")}(s,e):Ay(s,e):e instanceof xe?Ay(e,s):function(o,l){if(de(o.filters.length>0&&l.filters.length>0,48005),ko(o)&&ko(l))return ov(o,l.getFilters());const h=Xd(o)?o:l,f=Xd(o)?l:o,g=h.filters.map(_=>Lf(_,f));return je.create(g,"or")}(s,e),Tc(t)}function Ay(s,e){if(ko(e))return ov(e,s.getFilters());{const t=e.filters.map(i=>Lf(s,i));return je.create(t,"or")}}function Tc(s){if(de(s instanceof xe||s instanceof je,11850),s instanceof xe)return s;const e=s.getFilters();if(e.length===1)return Tc(e[0]);if(iv(s))return s;const t=e.map(o=>Tc(o)),i=[];return t.forEach(o=>{o instanceof xe?i.push(o):o instanceof je&&(o.op===s.op?i.push(...o.filters):i.push(o))}),i.length===1?i[0]:je.create(i,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(){this.Cn=new Ff}addToCollectionParentIndex(e,t){return this.Cn.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(pn.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(pn.min())}updateCollectionGroup(e,t,i){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}}class Ff{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new $e(ze.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new $e(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="IndexedDbIndexManager",Ku=new Uint8Array(0);class f1{constructor(e,t){this.databaseId=t,this.Fn=new Ff,this.Mn=new xr(i=>us(i),(i,o)=>vl(i,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Fn.has(t)){const i=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Fn.add(t)});const l={collectionId:i,parent:zt(o)};return Py(e).put(l)}return O.resolve()}getCollectionParents(e,t){const i=[],o=IDBKeyRange.bound([t,""],[D_(t),""],!1,!0);return Py(e).J(o).next(l=>{for(const h of l){if(h.collectionId!==t)break;i.push(nr(h.parent))}return i})}addFieldIndex(e,t){const i=Ba(e),o=function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])}}(t);delete o.indexId;const l=i.add(o);if(t.indexState){const h=po(e);return l.next(f=>{h.put(_y(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const i=Ba(e),o=po(e),l=fo(e);return i.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ba(e),i=fo(e),o=po(e);return t.X().next(()=>i.X()).next(()=>o.X())}createTargetIndexes(e,t){return O.forEach(this.xn(t),i=>this.getIndexType(e,i).next(o=>{if(o===0||o===1){const l=new Sy(i).vn();if(l!=null)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const i=fo(e);let o=!0;const l=new Map;return O.forEach(this.xn(t),h=>this.On(e,h).next(f=>{o&&(o=!!f),l.set(h,f)})).next(()=>{if(o){let h=Re();const f=[];return O.forEach(l,(g,_)=>{Y(Ry,`Using index ${function(re){return`id=${re.indexId}|cg=${re.collectionGroup}|f=${re.fields.map(ge=>`${ge.fieldPath}:${ge.kind}`).join(",")}`}(g)} to execute ${us(t)}`);const w=function(re,ge){const Se=qd(ge);if(Se===void 0)return null;for(const Ee of vc(re,Se.fieldPath))switch(Ee.op){case"array-contains-any":return Ee.value.arrayValue.values||[];case"array-contains":return[Ee.value]}return null}(_,g),T=function(re,ge){const Se=new Map;for(const Ee of Wi(ge))for(const S of vc(re,Ee.fieldPath))switch(S.op){case"==":case"in":Se.set(Ee.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return Se.set(Ee.fieldPath.canonicalString(),S.value),Array.from(Se.values())}return null}(_,g),C=function(re,ge){const Se=[];let Ee=!0;for(const S of Wi(ge)){const I=S.kind===0?iy(re,S.fieldPath,re.startAt):sy(re,S.fieldPath,re.startAt);Se.push(I.value),Ee&&(Ee=I.inclusive)}return new Vo(Se,Ee)}(_,g),B=function(re,ge){const Se=[];let Ee=!0;for(const S of Wi(ge)){const I=S.kind===0?sy(re,S.fieldPath,re.endAt):iy(re,S.fieldPath,re.endAt);Se.push(I.value),Ee&&(Ee=I.inclusive)}return new Vo(Se,Ee)}(_,g),q=this.Nn(g,_,C),G=this.Nn(g,_,B),$=this.Bn(g,_,T),ve=this.Ln(g.indexId,w,q,C.inclusive,G,B.inclusive,$);return O.forEach(ve,ae=>i.Z(ae,t.limit).next(re=>{re.forEach(ge=>{const Se=te.fromSegments(ge.documentKey);h.has(Se)||(h=h.add(Se),f.push(Se))})}))}).next(()=>f)}return O.resolve(null)})}xn(e){let t=this.Mn.get(e);return t||(e.filters.length===0?t=[e]:t=h1(je.create(e.filters,"and")).map(i=>Zd(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,t),t)}Ln(e,t,i,o,l,h,f){const g=(t!=null?t.length:1)*Math.max(i.length,l.length),_=g/(t!=null?t.length:1),w=[];for(let T=0;T<g;++T){const C=t?this.kn(t[T/_]):Ku,B=this.qn(e,C,i[T%_],o),q=this.Qn(e,C,l[T%_],h),G=f.map($=>this.qn(e,C,$,!0));w.push(...this.createRange(B,q,G))}return w}qn(e,t,i,o){const l=new es(e,te.empty(),t,i);return o?l:l.Rn()}Qn(e,t,i,o){const l=new es(e,te.empty(),t,i);return o?l.Rn():l}On(e,t){const i=new Sy(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(l=>{let h=null;for(const f of l)i.wn(f)&&(!h||f.fields.length>h.fields.length)&&(h=f);return h})}getIndexType(e,t){let i=2;const o=this.xn(t);return O.forEach(o,l=>this.On(e,l).next(h=>{h?i!==0&&h.fields.length<function(g){let _=new $e(it.comparator),w=!1;for(const T of g.filters)for(const C of T.getFlattenedFilters())C.field.isKeyField()||(C.op==="array-contains"||C.op==="array-contains-any"?w=!0:_=_.add(C.field));for(const T of g.orderBy)T.field.isKeyField()||(_=_.add(T.field));return _.size+(w?1:0)}(l)&&(i=1):i=0})).next(()=>function(h){return h.limit!==null}(t)&&o.length>1&&i===2?1:i)}$n(e,t){const i=new Fa;for(const o of Wi(e)){const l=t.data.field(o.fieldPath);if(l==null)return null;const h=i.Tn(o.kind);Zi.Wt.vt(l,h)}return i.cn()}kn(e){const t=new Fa;return Zi.Wt.vt(e,t.Tn(0)),t.cn()}Un(e,t){const i=new Fa;return Zi.Wt.vt(dl(this.databaseId,t),i.Tn(function(l){const h=Wi(l);return h.length===0?0:h[h.length-1].kind}(e))),i.cn()}Bn(e,t,i){if(i===null)return[];let o=[];o.push(new Fa);let l=0;for(const h of Wi(e)){const f=i[l++];for(const g of o)if(this.Kn(t,h.fieldPath)&&fl(f))o=this.Wn(o,h,f);else{const _=g.Tn(h.kind);Zi.Wt.vt(f,_)}}return this.Gn(o)}Nn(e,t,i){return this.Bn(e,t,i.position)}Gn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].cn();return t}Wn(e,t,i){const o=[...e],l=[];for(const h of i.arrayValue.values||[])for(const f of o){const g=new Fa;g.seed(f.cn()),Zi.Wt.vt(h,g.Tn(t.kind)),l.push(g)}return l}Kn(e,t){return!!e.filters.find(i=>i instanceof xe&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,t){const i=Ba(e),o=po(e);return(t?i.J(Gd,IDBKeyRange.bound(t,t)):i.J()).next(l=>{const h=[];return O.forEach(l,f=>o.get([f.indexId,this.uid]).next(g=>{h.push(function(w,T){const C=T?new sl(T.sequenceNumber,new pn(hs(T.readTime),new te(nr(T.documentKey)),T.largestBatchId)):sl.empty(),B=w.fields.map(([q,G])=>new Xu(it.fromServerFormat(q),G));return new fc(w.indexId,w.collectionGroup,B,C)}(f,g))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((i,o)=>{const l=i.indexState.sequenceNumber-o.indexState.sequenceNumber;return l!==0?l:we(i.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const o=Ba(e),l=po(e);return this.zn(e).next(h=>o.J(Gd,IDBKeyRange.bound(t,t)).next(f=>O.forEach(f,g=>l.put(_y(g.indexId,this.uid,h,i)))))}updateIndexEntries(e,t){const i=new Map;return O.forEach(t,(o,l)=>{const h=i.get(o.collectionGroup);return(h?O.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next(f=>(i.set(o.collectionGroup,f),O.forEach(f,g=>this.jn(e,o,g).next(_=>{const w=this.Hn(l,g);return _.isEqual(w)?O.resolve():this.Jn(e,l,g,_,w)}))))})}Yn(e,t,i,o){return fo(e).put(o.Vn(this.uid,this.Un(i,t.key),t.key))}Zn(e,t,i,o){return fo(e).delete(o.mn(this.uid,this.Un(i,t.key),t.key))}jn(e,t,i){const o=fo(e);let l=new $e(ni);return o.te({index:U_,range:IDBKeyRange.only([i.indexId,this.uid,sc(this.Un(i,t))])},(h,f)=>{l=l.add(new es(i.indexId,t,Ty(f.arrayValue),Ty(f.directionalValue)))}).next(()=>l)}Hn(e,t){let i=new $e(ni);const o=this.$n(t,e);if(o==null)return i;const l=qd(t);if(l!=null){const h=e.data.field(l.fieldPath);if(fl(h))for(const f of h.arrayValue.values||[])i=i.add(new es(t.indexId,e.key,this.kn(f),o))}else i=i.add(new es(t.indexId,e.key,Ku,o));return i}Jn(e,t,i,o,l){Y(Ry,"Updating index entries for document '%s'",t.key);const h=[];return function(g,_,w,T,C){const B=g.getIterator(),q=_.getIterator();let G=co(B),$=co(q);for(;G||$;){let ve=!1,ae=!1;if(G&&$){const re=w(G,$);re<0?ae=!0:re>0&&(ve=!0)}else G!=null?ae=!0:ve=!0;ve?(T($),$=co(q)):ae?(C(G),G=co(B)):(G=co(B),$=co(q))}}(o,l,ni,f=>{h.push(this.Yn(e,t,i,f))},f=>{h.push(this.Zn(e,t,i,f))}),O.waitFor(h)}zn(e){let t=1;return po(e).te({index:z_,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,o,l)=>{l.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((h,f)=>ni(h,f)).filter((h,f,g)=>!f||ni(h,g[f-1])!==0);const o=[];o.push(e);for(const h of i){const f=ni(h,e),g=ni(h,t);if(f===0)o[0]=e.Rn();else if(f>0&&g<0)o.push(h),o.push(h.Rn());else if(g>0)break}o.push(t);const l=[];for(let h=0;h<o.length;h+=2){if(this.Xn(o[h],o[h+1]))return[];const f=o[h].mn(this.uid,Ku,te.empty()),g=o[h+1].mn(this.uid,Ku,te.empty());l.push(IDBKeyRange.bound(f,g))}return l}Xn(e,t){return ni(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Cy)}getMinOffset(e,t){return O.mapArray(this.xn(t),i=>this.On(e,i).next(o=>o||ue(44426))).next(Cy)}}function Py(s){return vt(s,ul)}function fo(s){return vt(s,Xa)}function Ba(s){return vt(s,Tf)}function po(s){return vt(s,Ya)}function Cy(s){de(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<s.length;i++){const o=s[i].indexState.offset;Ef(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new pn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$v=41943040;class Ft{static withCacheSize(e){return new Ft(e,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(s,e,t){const i=s.store($n),o=s.store(So),l=[],h=IDBKeyRange.only(t.batchId);let f=0;const g=i.te({range:h},(w,T,C)=>(f++,C.delete()));l.push(g.next(()=>{de(f===1,47070,{batchId:t.batchId})}));const _=[];for(const w of t.mutations){const T=L_(e,w.key.path,t.batchId);l.push(o.delete(T)),_.push(w.key)}return O.waitFor(l).next(()=>_)}function Sc(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw ue(14731);e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft($v,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);class $c{constructor(e,t,i,o){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=o,this.er={}}static bt(e,t,i,o){de(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new $c(l,t,i,o)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ri(e).te({index:ts,range:i},(o,l,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,i,o){const l=Eo(e),h=ri(e);return h.add({}).next(f=>{de(typeof f=="number",49019);const g=new Df(f,t,i,o),_=function(B,q,G){const $=G.baseMutations.map(ae=>wc(B.wt,ae)),ve=G.mutations.map(ae=>wc(B.wt,ae));return{userId:q,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:$,mutations:ve}}(this.serializer,this.userId,g),w=[];let T=new $e((C,B)=>we(C.canonicalString(),B.canonicalString()));for(const C of o){const B=L_(this.userId,C.key.path,f);T=T.add(C.key.path.popLast()),w.push(h.put(_)),w.push(l.put(B,jI))}return T.forEach(C=>{w.push(this.indexManager.addToCollectionParentIndex(e,C))}),e.addOnCommittedListener(()=>{this.er[f]=g.keys()}),O.waitFor(w).next(()=>g)})}lookupMutationBatch(e,t){return ri(e).get(t).next(i=>i?(de(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),Ji(this.serializer,i)):null)}tr(e,t){return this.er[t]?O.resolve(this.er[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const o=i.keys();return this.er[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return ri(e).te({index:ts,range:o},(h,f,g)=>{f.userId===this.userId&&(de(f.batchId>=i,47524,{nr:i}),l=Ji(this.serializer,f)),g.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=rs;return ri(e).te({index:ts,range:t,reverse:!0},(o,l,h)=>{i=l.batchId,h.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,rs],[this.userId,Number.POSITIVE_INFINITY]);return ri(e).J(ts,t).next(i=>i.map(o=>Ji(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Ju(this.userId,t.path),o=IDBKeyRange.lowerBound(i),l=[];return Eo(e).te({range:o},(h,f,g)=>{const[_,w,T]=h,C=nr(w);if(_===this.userId&&t.path.isEqual(C))return ri(e).get(T).next(B=>{if(!B)throw ue(61480,{rr:h,batchId:T});de(B.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:B.userId,batchId:T}),l.push(Ji(this.serializer,B))});g.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new $e(we);const o=[];return t.forEach(l=>{const h=Ju(this.userId,l.path),f=IDBKeyRange.lowerBound(h),g=Eo(e).te({range:f},(_,w,T)=>{const[C,B,q]=_,G=nr(B);C===this.userId&&l.path.isEqual(G)?i=i.add(q):T.done()});o.push(g)}),O.waitFor(o).next(()=>this.ir(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1,l=Ju(this.userId,i),h=IDBKeyRange.lowerBound(l);let f=new $e(we);return Eo(e).te({range:h},(g,_,w)=>{const[T,C,B]=g,q=nr(C);T===this.userId&&i.isPrefixOf(q)?q.length===o&&(f=f.add(B)):w.done()}).next(()=>this.ir(e,f))}ir(e,t){const i=[],o=[];return t.forEach(l=>{o.push(ri(e).get(l).next(h=>{if(h===null)throw ue(35274,{batchId:l});de(h.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:h.userId,batchId:l}),i.push(Ji(this.serializer,h))}))}),O.waitFor(o).next(()=>i)}removeMutationBatch(e,t){return qv(e.he,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.sr(t.batchId)}),O.forEach(i,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return O.resolve();const i=IDBKeyRange.lowerBound(function(h){return[h]}(this.userId)),o=[];return Eo(e).te({range:i},(l,h,f)=>{if(l[0]===this.userId){const g=nr(l[1]);o.push(g)}else f.done()}).next(()=>{de(o.length===0,56720,{_r:o.map(l=>l.canonicalString())})})})}containsKey(e,t){return Kv(e,this.userId,t)}ar(e){return Gv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:rs,lastStreamToken:""})}}function Kv(s,e,t){const i=Ju(e,t.path),o=i[1],l=IDBKeyRange.lowerBound(i);let h=!1;return Eo(s).te({range:l,ee:!0},(f,g,_)=>{const[w,T,C]=f;w===e&&T===o&&(h=!0),_.done()}).next(()=>h)}function ri(s){return vt(s,$n)}function Eo(s){return vt(s,So)}function Gv(s){return vt(s,al)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new ds(0)}static lr(){return new ds(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.hr(e).next(t=>{const i=new ds(t.highestTargetId);return t.highestTargetId=i.next(),this.Pr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(t=>pe.fromTimestamp(new st(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.hr(e).next(o=>(o.highestListenSequenceNumber=t,i&&(o.lastRemoteSnapshotVersion=i.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Pr(e,o)))}addTargetData(e,t){return this.Tr(e,t).next(()=>this.hr(e).next(i=>(i.targetCount+=1,this.Ir(t,i),this.Pr(e,i))))}updateTargetData(e,t){return this.Tr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>mo(e).delete(t.targetId)).next(()=>this.hr(e)).next(i=>(de(i.targetCount>0,8065),i.targetCount-=1,this.Pr(e,i)))}removeTargets(e,t,i){let o=0;const l=[];return mo(e).te((h,f)=>{const g=Ga(f);g.sequenceNumber<=t&&i.get(g.targetId)===null&&(o++,l.push(this.removeTargetData(e,g)))}).next(()=>O.waitFor(l)).next(()=>o)}forEachTarget(e,t){return mo(e).te((i,o)=>{const l=Ga(o);t(l)})}hr(e){return Vy(e).get(gc).next(t=>(de(t!==null,2888),t))}Pr(e,t){return Vy(e).put(gc,t)}Tr(e,t){return mo(e).put(Bv(this.serializer,t))}Ir(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.hr(e).next(t=>t.targetCount)}getTargetData(e,t){const i=us(t),o=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return mo(e).te({range:o,index:B_},(h,f,g)=>{const _=Ga(f);vl(t,_.target)&&(l=_,g.done())}).next(()=>l)}addMatchingKeys(e,t,i){const o=[],l=si(e);return t.forEach(h=>{const f=zt(h.path);o.push(l.put({targetId:i,path:f})),o.push(this.referenceDelegate.addReference(e,i,h))}),O.waitFor(o)}removeMatchingKeys(e,t,i){const o=si(e);return O.forEach(t,l=>{const h=zt(l.path);return O.waitFor([o.delete([i,h]),this.referenceDelegate.removeReference(e,i,l)])})}removeMatchingKeysForTargetId(e,t){const i=si(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(o)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),o=si(e);let l=Re();return o.te({range:i,ee:!0},(h,f,g)=>{const _=nr(h[1]),w=new te(_);l=l.add(w)}).next(()=>l)}containsKey(e,t){const i=zt(t.path),o=IDBKeyRange.bound([i],[D_(i)],!1,!0);let l=0;return si(e).te({index:If,ee:!0,range:o},([h,f],g,_)=>{h!==0&&(l++,_.done())}).next(()=>l>0)}Rt(e,t){return mo(e).get(t).next(i=>i?Ga(i):null)}}function mo(s){return vt(s,Ao)}function Vy(s){return vt(s,is)}function si(s){return vt(s,Ro)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="LruGarbageCollector",m1=1048576;function Dy([s,e],[t,i]){const o=we(s,t);return o===0?we(e,i):o}class g1{constructor(e){this.Er=e,this.buffer=new $e(Dy),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Dy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Hv{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Y(ky,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){yi(t)?Y(ky,"Ignoring IndexedDB error during garbage collection: ",t):await ps(t)}await this.mr(3e5)})}}class y1{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return O.resolve(Rn.le);const i=new g1(t);return this.gr.forEachTarget(e,o=>i.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>i.Rr(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.gr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(xy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xy):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let i,o,l,h,f,g,_;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(i=T,f=Date.now(),this.removeTargets(e,i,t))).next(T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(_=Date.now(),go()<=be.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${T} documents in `+(_-g)+`ms
Total Duration: ${_-w}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T})))}}function Qv(s,e){return new y1(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,t){this.db=e,this.garbageCollector=Qv(this,t)}pr(e){const t=this.br(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}br(e){let t=0;return this.yr(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}yr(e,t){return this.Sr(e,(i,o)=>t(o))}addReference(e,t,i){return Gu(e,i)}removeReference(e,t,i){return Gu(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Gu(e,t)}Dr(e,t){return function(o,l){let h=!1;return Gv(o).ne(f=>Kv(o,f,l).next(g=>(g&&(h=!0),O.resolve(!g)))).next(()=>h)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.Sr(e,(h,f)=>{if(f<=t){const g=this.Dr(e,h).next(_=>{if(!_)return l++,i.getEntry(e,h).next(()=>(i.removeEntry(h,pe.min()),si(e).delete(function(T){return[0,zt(T.path)]}(h))))});o.push(g)}}).next(()=>O.waitFor(o)).next(()=>i.apply(e)).next(()=>l)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Gu(e,t)}Sr(e,t){const i=si(e);let o,l=Rn.le;return i.te({index:If},([h,f],{path:g,sequenceNumber:_})=>{h===0?(l!==Rn.le&&t(new te(nr(o)),l),l=_,o=g):l=Rn.le}).next(()=>{l!==Rn.le&&t(new te(nr(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gu(s,e){return si(s).put(function(i,o){return{targetId:0,path:zt(i.path),sequenceNumber:o}}(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(){this.changes=new xr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?O.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Hi(e).put(i)}removeEntry(e,t,i){return Hi(e).delete(function(l,h){const f=l.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Ic(h),f[f.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.vr(e,i)))}getEntry(e,t){let i=at.newInvalidDocument(t);return Hi(e).te({index:Zu,range:IDBKeyRange.only(za(t))},(o,l)=>{i=this.Cr(t,l)}).next(()=>i)}Fr(e,t){let i={size:0,document:at.newInvalidDocument(t)};return Hi(e).te({index:Zu,range:IDBKeyRange.only(za(t))},(o,l)=>{i={document:this.Cr(t,l),size:Sc(l)}}).next(()=>i)}getEntries(e,t){let i=dn();return this.Mr(e,t,(o,l)=>{const h=this.Cr(o,l);i=i.insert(o,h)}).next(()=>i)}Or(e,t){let i=dn(),o=new tt(te.comparator);return this.Mr(e,t,(l,h)=>{const f=this.Cr(l,h);i=i.insert(l,f),o=o.insert(l,Sc(h))}).next(()=>({documents:i,Nr:o}))}Mr(e,t,i){if(t.isEmpty())return O.resolve();let o=new $e(My);t.forEach(g=>o=o.add(g));const l=IDBKeyRange.bound(za(o.first()),za(o.last())),h=o.getIterator();let f=h.getNext();return Hi(e).te({index:Zu,range:l},(g,_,w)=>{const T=te.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;f&&My(f,T)<0;)i(f,null),f=h.getNext();f&&f.isEqual(T)&&(i(f,_),f=h.hasNext()?h.getNext():null),f?w.H(za(f)):w.done()}).next(()=>{for(;f;)i(f,null),f=h.hasNext()?h.getNext():null})}getDocumentsMatchingQuery(e,t,i,o,l){const h=t.path,f=[h.popLast().toArray(),h.lastSegment(),Ic(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],g=[h.popLast().toArray(),h.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hi(e).J(IDBKeyRange.bound(f,g,!0)).next(_=>{l==null||l.incrementDocumentReadCount(_.length);let w=dn();for(const T of _){const C=this.Cr(te.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);C.isFoundDocument()&&(El(t,C)||o.has(C.key))&&(w=w.insert(C.key,C))}return w})}getAllFromCollectionGroup(e,t,i,o){let l=dn();const h=by(t,i),f=by(t,pn.max());return Hi(e).te({index:F_,range:IDBKeyRange.bound(h,f,!0)},(g,_,w)=>{const T=this.Cr(te.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);l=l.insert(T.key,T),l.size===o&&w.done()}).next(()=>l)}newChangeBuffer(e){return new E1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ny(e).get(Kd).next(t=>(de(!!t,20021),t))}vr(e,t){return Ny(e).put(Kd,t)}Cr(e,t){if(t){const i=i1(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(pe.min())))return i}return at.newInvalidDocument(e)}}function Yv(s){return new v1(s)}class E1 extends Wv{constructor(e,t){super(),this.Br=e,this.trackRemovals=t,this.Lr=new xr(i=>i.toString(),(i,o)=>i.isEqual(o))}applyChanges(e){const t=[];let i=0,o=new $e((l,h)=>we(l.canonicalString(),h.canonicalString()));return this.changes.forEach((l,h)=>{const f=this.Lr.get(l);if(t.push(this.Br.removeEntry(e,l,f.readTime)),h.isValidDocument()){const g=gy(this.Br.serializer,h);o=o.add(l.path.popLast());const _=Sc(g);i+=_-f.size,t.push(this.Br.addEntry(e,l,g))}else if(i-=f.size,this.trackRemovals){const g=gy(this.Br.serializer,h.convertToNoDocument(pe.min()));t.push(this.Br.addEntry(e,l,g))}}),o.forEach(l=>{t.push(this.Br.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Br.updateMetadata(e,i)),O.waitFor(t)}getFromCache(e,t){return this.Br.Fr(e,t).next(i=>(this.Lr.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Br.Or(e,t).next(({documents:i,Nr:o})=>(o.forEach((l,h)=>{this.Lr.set(l,{size:h,readTime:i.get(l).readTime})}),i))}}function Ny(s){return vt(s,ll)}function Hi(s){return vt(s,mc)}function za(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function by(s,e){const t=e.documentKey.path.toArray();return[s,Ic(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function My(s,e){const t=s.path.toArray(),i=e.path.toArray();let o=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(o=we(t[l],i[l]),o)return o;return o=we(t.length,i.length),o||(o=we(t[t.length-2],i[i.length-2]),o||we(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&tl(i.mutation,o,nn.empty(),st.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Re()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Re()){const o=rr();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let h=qa();return l.forEach((f,g)=>{h=h.insert(f,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=rr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Re()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,f)=>{t.set(h,f)})})}computeViews(e,t,i,o){let l=dn();const h=el(),f=function(){return el()}();return t.forEach((g,_)=>{const w=i.get(_.key);o.has(_.key)&&(w===void 0||w.mutation instanceof Vr)?l=l.insert(_.key,_):w!==void 0?(h.set(_.key,w.mutation.getFieldMask()),tl(w.mutation,_,w.mutation.getFieldMask(),st.now())):h.set(_.key,nn.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((_,w)=>h.set(_,w)),t.forEach((_,w)=>{var T;return f.set(_,new w1(w,(T=h.get(_))!==null&&T!==void 0?T:null))}),f))}recalculateAndSaveOverlays(e,t){const i=el();let o=new tt((h,f)=>h-f),l=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const f of h)f.keys().forEach(g=>{const _=t.get(g);if(_===null)return;let w=i.get(g)||nn.empty();w=f.applyToLocalView(_,w),i.set(g,w);const T=(o.get(f.batchId)||Re()).add(g);o=o.insert(f.batchId,T)})}).next(()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),_=g.key,w=g.value,T=mv();w.forEach(C=>{if(!l.has(C)){const B=wv(t.get(C),i.get(C));B!==null&&T.set(C,B),l=l.add(C)}}),h.push(this.documentOverlayCache.saveOverlays(e,_,T))}return O.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(h){return te.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):O.resolve(rr());let f=il,g=l;return h.next(_=>O.forEach(_,(w,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(w)?O.resolve():this.remoteDocumentCache.getEntry(e,w).next(C=>{g=g.insert(w,C)}))).next(()=>this.populateOverlays(e,_,l)).next(()=>this.computeViews(e,g,_,Re())).next(w=>({batchId:f,changes:pv(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new te(t)).next(i=>{let o=qa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=qa();return this.indexManager.getCollectionParents(e,l).next(f=>O.forEach(f,g=>{const _=function(T,C){return new Bo(C,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next(w=>{w.forEach((T,C)=>{h=h.insert(T,C)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(h=>{l.forEach((g,_)=>{const w=_.getKey();h.get(w)===null&&(h=h.insert(w,at.newInvalidDocument(w)))});let f=qa();return h.forEach((g,_)=>{const w=l.get(g);w!==void 0&&tl(w.mutation,_,nn.empty(),st.now()),El(t,_)&&(f=f.insert(g,_))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return O.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Ht(o.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:zv(o.bundledQuery),readTime:Ht(o.readTime)}}(t)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(){this.overlays=new tt(te.comparator),this.Qr=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){const i=rr();return O.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.St(e,t,l)}),O.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Qr.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(i)),O.resolve()}getOverlaysForCollection(e,t,i){const o=rr(),l=t.length+1,h=new te(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return O.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new tt((_,w)=>_-w);const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let w=l.get(_.largestBatchId);w===null&&(w=rr(),l=l.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const f=rr(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,w)=>f.set(_,w)),!(f.size()>=o)););return O.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Qr.get(o.largestBatchId).delete(i.key);this.Qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new bf(t,i));let l=this.Qr.get(t);l===void 0&&(l=Re(),this.Qr.set(t,l)),this.Qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(){this.$r=new $e(Rt.Ur),this.Kr=new $e(Rt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const i=new Rt(e,t);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.zr(new Rt(e,t))}jr(e,t){e.forEach(i=>this.removeReference(i,t))}Hr(e){const t=new te(new ze([])),i=new Rt(t,e),o=new Rt(t,e+1),l=[];return this.Kr.forEachInRange([i,o],h=>{this.zr(h),l.push(h.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new te(new ze([])),i=new Rt(t,e),o=new Rt(t,e+1);let l=Re();return this.Kr.forEachInRange([i,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new Rt(e,0),i=this.$r.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Rt{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return te.comparator(e.key,t.key)||we(e.Zr,t.Zr)}static Wr(e,t){return we(e.Zr,t.Zr)||te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new $e(Rt.Ur)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new Df(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Xr=this.Xr.add(new Rt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return O.resolve(h)}lookupMutationBatch(e,t){return O.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ti(i),l=o<0?0:o;return O.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?rs:this.nr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Rt(t,0),o=new Rt(t,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([i,o],h=>{const f=this.ei(h.Zr);l.push(f)}),O.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new $e(we);return t.forEach(o=>{const l=new Rt(o,0),h=new Rt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,h],f=>{i=i.add(f.Zr)})}),O.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;te.isDocumentKey(l)||(l=l.child(""));const h=new Rt(new te(l),0);let f=new $e(we);return this.Xr.forEachWhile(g=>{const _=g.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(f=f.add(g.Zr)),!0)},h),O.resolve(this.ni(f))}ni(e){const t=[];return e.forEach(i=>{const o=this.ei(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){de(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return O.forEach(t.mutations,o=>{const l=new Rt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,t){const i=new Rt(t,0),o=this.Xr.firstAfterOrEqual(i);return O.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.ii=e,this.docs=function(){return new tt(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ii(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return O.resolve(i?i.document.mutableCopy():at.newInvalidDocument(t))}getEntries(e,t){let i=dn();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():at.newInvalidDocument(o))}),O.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=dn();const h=t.path,f=new te(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:_,value:{document:w}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||Ef(N_(w),i)<=0||(o.has(w.key)||El(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return O.resolve(l)}getAllFromCollectionGroup(e,t,i,o){ue(9500)}si(e,t){return O.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new P1(this)}getSize(e){return O.resolve(this.size)}}class P1 extends Wv{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(i)}),O.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.persistence=e,this.oi=new xr(t=>us(t),vl),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this._i=0,this.ai=new Bf,this.targetCount=0,this.ui=ds.cr()}forEachTarget(e,t){return this.oi.forEach((i,o)=>t(o)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this._i&&(this._i=t),O.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new ds(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Tr(t),O.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.oi.forEach((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.oi.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),O.waitFor(l).next(()=>o)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){const i=this.oi.get(t)||null;return O.resolve(i)}addMatchingKeys(e,t,i){return this.ai.Gr(t,i),O.resolve()}removeMatchingKeys(e,t,i){this.ai.jr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),O.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),O.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ai.Yr(t);return O.resolve(i)}containsKey(e,t){return O.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t){this.ci={},this.overlays={},this.li=new Rn(0),this.hi=!1,this.hi=!0,this.Pi=new S1,this.referenceDelegate=e(this),this.Ti=new C1(this),this.indexManager=new d1,this.remoteDocumentCache=function(o){return new R1(o)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new Fv(t),this.Ei=new I1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new T1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ci[e.toKey()];return i||(i=new A1(t,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,i){Y("MemoryPersistence","Starting transaction:",e);const o=new x1(this.li.next());return this.referenceDelegate.di(),i(o).next(l=>this.referenceDelegate.Ai(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ri(e,t){return O.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,t)))}}class x1 extends M_{constructor(e){super(),this.currentSequenceNumber=e}}class qc{constructor(e){this.persistence=e,this.Vi=new Bf,this.mi=null}static fi(e){return new qc(e)}get gi(){if(this.mi)return this.mi;throw ue(60996)}addReference(e,t,i){return this.Vi.addReference(i,t),this.gi.delete(i.toString()),O.resolve()}removeReference(e,t,i){return this.Vi.removeReference(i,t),this.gi.add(i.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),O.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.gi.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.gi,i=>{const o=te.fromPath(i);return this.pi(e,o).next(l=>{l||t.removeEntry(o,pe.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(i=>{i?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return O.or([()=>O.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Ac{constructor(e,t){this.persistence=e,this.yi=new xr(i=>zt(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=Qv(this,t)}static fi(e,t){return new Ac(e,t)}di(){}Ai(e){return O.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}br(e){let t=0;return this.yr(e,i=>{t++}).next(()=>t)}yr(e,t){return O.forEach(this.yi,(i,o)=>this.Dr(e,i,o).next(l=>l?O.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.si(e,h=>this.Dr(e,h,t).next(f=>{f||(i++,l.removeEntry(h,pe.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),O.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),O.resolve()}removeReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),O.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tc(e.data.value)),t}Dr(e,t,i){return O.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return O.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.serializer=e}q(e,t,i,o){const l=new Vc("createOrUpgrade",t);i<1&&o>=1&&(function(g){g.createObjectStore(_l)}(e),function(g){g.createObjectStore(al,{keyPath:UI}),g.createObjectStore($n,{keyPath:Gg,autoIncrement:!0}).createIndex(ts,Hg,{unique:!0}),g.createObjectStore(So)}(e),Oy(e),function(g){g.createObjectStore(Yi)}(e));let h=O.resolve();return i<3&&o>=3&&(i!==0&&(function(g){g.deleteObjectStore(Ro),g.deleteObjectStore(Ao),g.deleteObjectStore(is)}(e),Oy(e)),h=h.next(()=>function(g){const _=g.store(is),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pe.min().toTimestamp(),targetCount:0};return _.put(gc,w)}(l))),i<4&&o>=4&&(i!==0&&(h=h.next(()=>function(g,_){return _.store($n).J().next(T=>{g.deleteObjectStore($n),g.createObjectStore($n,{keyPath:Gg,autoIncrement:!0}).createIndex(ts,Hg,{unique:!0});const C=_.store($n),B=T.map(q=>C.put(q));return O.waitFor(B)})}(e,l))),h=h.next(()=>{(function(g){g.createObjectStore(Po,{keyPath:YI})})(e)})),i<5&&o>=5&&(h=h.next(()=>this.wi(l))),i<6&&o>=6&&(h=h.next(()=>(function(g){g.createObjectStore(ll)}(e),this.bi(l)))),i<7&&o>=7&&(h=h.next(()=>this.Si(l))),i<8&&o>=8&&(h=h.next(()=>this.Di(e,l))),i<9&&o>=9&&(h=h.next(()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&o>=10&&(h=h.next(()=>this.Ci(l))),i<11&&o>=11&&(h=h.next(()=>{(function(g){g.createObjectStore(Dc,{keyPath:XI})})(e),function(g){g.createObjectStore(Nc,{keyPath:JI})}(e)})),i<12&&o>=12&&(h=h.next(()=>{(function(g){const _=g.createObjectStore(bc,{keyPath:sT});_.createIndex(Hd,oT,{unique:!1}),_.createIndex(j_,aT,{unique:!1})})(e)})),i<13&&o>=13&&(h=h.next(()=>function(g){const _=g.createObjectStore(mc,{keyPath:$I});_.createIndex(Zu,qI),_.createIndex(F_,KI)}(e)).next(()=>this.Fi(e,l)).next(()=>e.deleteObjectStore(Yi))),i<14&&o>=14&&(h=h.next(()=>this.Mi(e,l))),i<15&&o>=15&&(h=h.next(()=>function(g){g.createObjectStore(Tf,{keyPath:ZI,autoIncrement:!0}).createIndex(Gd,eT,{unique:!1}),g.createObjectStore(Ya,{keyPath:tT}).createIndex(z_,nT,{unique:!1}),g.createObjectStore(Xa,{keyPath:rT}).createIndex(U_,iT,{unique:!1})}(e))),i<16&&o>=16&&(h=h.next(()=>{t.objectStore(Ya).clear()}).next(()=>{t.objectStore(Xa).clear()})),i<17&&o>=17&&(h=h.next(()=>{(function(g){g.createObjectStore(Sf,{keyPath:lT})})(e)})),i<18&&o>=18&&f_()&&(h=h.next(()=>{t.objectStore(Ya).clear()}).next(()=>{t.objectStore(Xa).clear()})),h}bi(e){let t=0;return e.store(Yi).te((i,o)=>{t+=Sc(o)}).next(()=>{const i={byteSize:t};return e.store(ll).put(Kd,i)})}wi(e){const t=e.store(al),i=e.store($n);return t.J().next(o=>O.forEach(o,l=>{const h=IDBKeyRange.bound([l.userId,rs],[l.userId,l.lastAcknowledgedBatchId]);return i.J(ts,h).next(f=>O.forEach(f,g=>{de(g.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const _=Ji(this.serializer,g);return qv(e,l.userId,_).next(()=>{})}))}))}Si(e){const t=e.store(Ro),i=e.store(Yi);return e.store(is).get(gc).next(o=>{const l=[];return i.te((h,f)=>{const g=new ze(h),_=function(T){return[0,zt(T)]}(g);l.push(t.get(_).next(w=>w?O.resolve():(T=>t.put({targetId:0,path:zt(T),sequenceNumber:o.highestListenSequenceNumber}))(g)))}).next(()=>O.waitFor(l))})}Di(e,t){e.createObjectStore(ul,{keyPath:WI});const i=t.store(ul),o=new Ff,l=h=>{if(o.add(h)){const f=h.lastSegment(),g=h.popLast();return i.put({collectionId:f,parent:zt(g)})}};return t.store(Yi).te({ee:!0},(h,f)=>{const g=new ze(h);return l(g.popLast())}).next(()=>t.store(So).te({ee:!0},([h,f,g],_)=>{const w=nr(f);return l(w.popLast())}))}Ci(e){const t=e.store(Ao);return t.te((i,o)=>{const l=Ga(o),h=Bv(this.serializer,l);return t.put(h)})}Fi(e,t){const i=t.store(Yi),o=[];return i.te((l,h)=>{const f=t.store(mc),g=function(T){return T.document?new te(ze.fromString(T.document.name).popFirst(5)):T.noDocument?te.fromSegments(T.noDocument.path):T.unknownDocument?te.fromSegments(T.unknownDocument.path):ue(36783)}(h).path.toArray(),_={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(f.put(_))}).next(()=>O.waitFor(o))}Mi(e,t){const i=t.store($n),o=Yv(this.serializer),l=new zf(qc.fi,this.serializer.wt);return i.J().next(h=>{const f=new Map;return h.forEach(g=>{var _;let w=(_=f.get(g.userId))!==null&&_!==void 0?_:Re();Ji(this.serializer,g).keys().forEach(T=>w=w.add(T)),f.set(g.userId,w)}),O.forEach(f,(g,_)=>{const w=new kt(_),T=jc.bt(this.serializer,w),C=l.getIndexManager(w),B=$c.bt(w,this.serializer,C,l.referenceDelegate);return new Xv(o,B,T,C).recalculateAndSaveOverlaysForDocumentKeys(new Qd(t,Rn.le),g).next()})})}}function Oy(s){s.createObjectStore(Ro,{keyPath:HI}).createIndex(If,QI,{unique:!0}),s.createObjectStore(Ao,{keyPath:"targetId"}).createIndex(B_,GI,{unique:!0}),s.createObjectStore(is)}const ii="IndexedDbPersistence",Dd=18e5,Nd=5e3,bd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",k1="main";class Uf{constructor(e,t,i,o,l,h,f,g,_,w,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.xi=l,this.window=h,this.document=f,this.Oi=_,this.Ni=w,this.Bi=T,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=C=>Promise.resolve(),!Uf.C())throw new ee(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _1(this,o),this.Ui=t+k1,this.serializer=new Fv(g),this.Ki=new ci(this.Ui,this.Bi,new V1(this.serializer)),this.Pi=new o1,this.Ti=new p1(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Yv(this.serializer),this.Ei=new s1,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,w===!1&&Kt(ii,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ee(j.FAILED_PRECONDITION,bd);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new Rn(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Hu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(t=>{t||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(t=>this.isPrimary&&!t?this.Xi(e).next(()=>!1):!!t&&this.es(e).next(()=>!0))).catch(e=>{if(yi(e))return Y(ii,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Y(ii,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return Ua(e).get(uo).next(t=>O.resolve(this.ts(t)))}ns(e){return Hu(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,Dd)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const i=vt(t,Po);return i.J().next(o=>{const l=this._s(o,Dd),h=o.filter(f=>l.indexOf(f)===-1);return O.forEach(h,f=>i.delete(f.clientId)).next(()=>h)})}).catch(()=>[]);if(this.Wi)for(const t of e)this.Wi.removeItem(this.us(t.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?O.resolve(!0):Ua(e).get(uo).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,Nd)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new ee(j.FAILED_PRECONDITION,bd);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hu(e).J().next(i=>this._s(i,Nd).find(o=>{if(this.clientId!==o.clientId){const l=!this.networkEnabled&&o.networkEnabled,h=!this.inForeground&&o.inForeground,f=this.networkEnabled===o.networkEnabled;if(l||h&&f)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Y(ii,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[_l,Po],e=>{const t=new Qd(e,Rn.le);return this.Xi(t).next(()=>this.ns(t))}),this.Ki.close(),this.Ts()}_s(e,t){return e.filter(i=>this.ss(i.updateTimeMs,t)&&!this.cs(i.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>Hu(e).J().next(t=>this._s(t,Dd).map(i=>i.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,t){return $c.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new f1(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return jc.bt(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,t,i){Y(ii,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",l=function(g){return g===18?hT:g===17?G_:g===16?cT:g===15?Af:g===14?K_:g===13?q_:g===12?uT:g===11?$_:void ue(60245)}(this.Bi);let h;return this.Ki.runTransaction(e,o,l,f=>(h=new Qd(f,this.li?this.li.next():Rn.le),t==="readwrite-primary"?this.Yi(h).next(g=>!!g||this.Zi(h)).next(g=>{if(!g)throw Kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new ee(j.FAILED_PRECONDITION,b_);return i(h)}).next(g=>this.es(h).next(()=>g)):this.Es(h).next(()=>i(h)))).then(f=>(h.raiseOnCommittedEvent(),f))}Es(e){return Ua(e).get(uo).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,Nd)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Ni||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ee(j.FAILED_PRECONDITION,bd)})}es(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ua(e).put(uo,t)}static C(){return ci.C()}Xi(e){const t=Ua(e);return t.get(uo).next(i=>this.ts(i)?(Y(ii,"Releasing primary lease."),t.delete(uo)):O.resolve())}ss(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Kt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}zi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground=this.document.visibilityState==="visible")}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Li=()=>{this.ls();const t=/(?:Version|Mobile)\/1[456]/;d_()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var t;try{const i=((t=this.Wi)===null||t===void 0?void 0:t.getItem(this.us(e)))!==null;return Y(ii,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Kt(ii,"Failed to get zombied client id.",i),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(e){Kt("Failed to set zombie client id.",e)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch{}}us(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ua(s){return vt(s,_l)}function Hu(s){return vt(s,Po)}function D1(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.ds=i,this.As=o}static Rs(e,t){let i=Re(),o=Re();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new jf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return d_()?8:O_(uc())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ws(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.bs(e,t,o,i).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new N1;return this.Ss(e,t,h).next(f=>{if(l.result=f,this.fs)return this.Ds(e,t,h,f.size)})}).next(()=>l.result)}Ds(e,t,i,o){return i.documentReadCount<this.gs?(go()<=be.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",yo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),O.resolve()):(go()<=be.DEBUG&&Y("QueryEngine","Query:",yo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ps*o?(go()<=be.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",yo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(t))):O.resolve())}ws(e,t){if(oy(t))return O.resolve(null);let i=Pn(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=tf(t,null,"F"),i=Pn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const h=Re(...l);return this.ys.getDocuments(e,h).next(f=>this.indexManager.getMinOffset(e,i).next(g=>{const _=this.vs(t,f);return this.Cs(t,_,h,g.readTime)?this.ws(e,tf(t,null,"F")):this.Fs(e,_,t,g)}))})))}bs(e,t,i,o){return oy(t)||o.isEqual(pe.min())?O.resolve(null):this.ys.getDocuments(e,i).next(l=>{const h=this.vs(t,l);return this.Cs(t,h,i,o)?O.resolve(null):(go()<=be.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),yo(t)),this.Fs(e,h,t,bI(o,il)).next(f=>f))})}vs(e,t){let i=new $e(dv(e));return t.forEach((o,l)=>{El(e,l)&&(i=i.add(l))}),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return go()<=be.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",yo(t)),this.ys.getDocumentsMatchingQuery(e,t,pn.min(),i)}Fs(e,t,i,o){return this.ys.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="LocalStore",b1=3e8;class M1{constructor(e,t,i,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new tt(we),this.Os=new xr(l=>us(l),vl),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xv(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function Zv(s,e,t,i){return new M1(s,e,t,i)}async function eE(s,e){const t=Te(s);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.Ls(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const h=[],f=[];let g=Re();for(const _ of o){h.push(_.batchId);for(const w of _.mutations)g=g.add(w.key)}for(const _ of l){f.push(_.batchId);for(const w of _.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(i,g).next(_=>({ks:_,removedBatchIds:h,addedBatchIds:f}))})})}function O1(s,e){const t=Te(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.Bs.newChangeBuffer({trackRemovals:!0});return function(f,g,_,w){const T=_.batch,C=T.keys();let B=O.resolve();return C.forEach(q=>{B=B.next(()=>w.getEntry(g,q)).next(G=>{const $=_.docVersions.get(q);de($!==null,48541),G.version.compareTo($)<0&&(T.applyToRemoteDocument(G,_),G.isValidDocument()&&(G.setReadTime(_.commitVersion),w.addEntry(G)))})}),B.next(()=>f.mutationQueue.removeMutationBatch(g,T))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let g=Re();for(let _=0;_<f.mutationResults.length;++_)f.mutationResults[_].transformResults.length>0&&(g=g.add(f.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function tE(s){const e=Te(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function L1(s,e){const t=Te(s),i=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const f=[];e.targetChanges.forEach((w,T)=>{const C=o.get(T);if(!C)return;f.push(t.Ti.removeMatchingKeys(l,w.removedDocuments,T).next(()=>t.Ti.addMatchingKeys(l,w.addedDocuments,T)));let B=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?B=B.withResumeToken(ft.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):w.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(w.resumeToken,i)),o=o.insert(T,B),function(G,$,ve){return G.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=b1?!0:ve.addedDocuments.size+ve.modifiedDocuments.size+ve.removedDocuments.size>0}(C,B,w)&&f.push(t.Ti.updateTargetData(l,B))});let g=dn(),_=Re();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))}),f.push(F1(l,h,e.documentUpdates).next(w=>{g=w.qs,_=w.Qs})),!i.isEqual(pe.min())){const w=t.Ti.getLastRemoteSnapshotVersion(l).next(T=>t.Ti.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(w)}return O.waitFor(f).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,_)).next(()=>g)}).then(l=>(t.xs=o,l))}function F1(s,e,t){let i=Re(),o=Re();return t.forEach(l=>i=i.add(l)),e.getEntries(s,i).next(l=>{let h=dn();return t.forEach((f,g)=>{const _=l.get(f);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(pe.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):Y($f,"Ignoring outdated watch update for ",f,". Current version:",_.version," Watch version:",g.version)}),{qs:h,Qs:o}})}function B1(s,e){const t=Te(s);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=rs),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function z1(s,e){const t=Te(s);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Ti.getTargetData(i,e).next(l=>l?(o=l,O.resolve(o)):t.Ti.allocateTargetId(i).next(h=>(o=new Tr(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Ti.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.xs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(i.targetId,i),t.Os.set(e,i.targetId)),i})}async function cf(s,e,t){const i=Te(s),o=i.xs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,h=>i.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!yi(h))throw h;Y($f,`Failed to update sequence numbers for target ${e}: ${h}`)}i.xs=i.xs.remove(e),i.Os.delete(o.target)}function Ly(s,e,t){const i=Te(s);let o=pe.min(),l=Re();return i.persistence.runTransaction("Execute query","readwrite",h=>function(g,_,w){const T=Te(g),C=T.Os.get(w);return C!==void 0?O.resolve(T.xs.get(C)):T.Ti.getTargetData(_,w)}(i,h,Pn(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(h,f.targetId).next(g=>{l=g})}).next(()=>i.Ms.getDocumentsMatchingQuery(h,e,t?o:pe.min(),t?l:Re())).next(f=>(U1(i,RT(e),f),{documents:f,$s:l})))}function U1(s,e,t){let i=s.Ns.get(e)||pe.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),s.Ns.set(e,i)}class Fy{constructor(){this.activeTargetIds=DT()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nE{constructor(){this.xo=new Fy,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,i){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Fy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="ConnectivityMonitor";class zy{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Y(By,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Y(By,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu=null;function hf(){return Qu===null?Qu=function(){return 268435456+Math.round(2147483648*Math.random())}():Qu++,"0x"+Qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="RestConnection",$1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class q1{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${i}/databases/${o}`,this.Go=this.databaseId.database===yc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}zo(e,t,i,o,l){const h=hf(),f=this.jo(e,t.toUriEncodedString());Y(Md,`Sending RPC '${e}' ${h}:`,f,i);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,o,l);const{host:_}=new URL(f),w=yf(_);return this.Jo(e,f,g,i,w).then(T=>(Y(Md,`Received RPC '${e}' ${h}: `,T),T),T=>{throw as(Md,`RPC '${e}' ${h} failed with error: `,T,"url: ",f,"request:",i),T})}Yo(e,t,i,o,l,h){return this.zo(e,t,i,o,l)}Ho(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),i&&i.headers.forEach((o,l)=>e[l]=o)}jo(e,t){const i=$1[e];return`${this.Ko}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class G1 extends q1{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const h=hf();return new Promise((f,g)=>{const _=new T_;_.setWithCredentials(!0),_.listenOnce(S_.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Yu.NO_ERROR:const T=_.getResponseJson();Y(Lt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),f(T);break;case Yu.TIMEOUT:Y(Lt,`RPC '${e}' ${h} timed out`),g(new ee(j.DEADLINE_EXCEEDED,"Request time out"));break;case Yu.HTTP_ERROR:const C=_.getStatus();if(Y(Lt,`RPC '${e}' ${h} failed with status:`,C,"response text:",_.getResponseText()),C>0){let B=_.getResponseJson();Array.isArray(B)&&(B=B[0]);const q=B==null?void 0:B.error;if(q&&q.status&&q.message){const G=function(ve){const ae=ve.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(ae)>=0?ae:j.UNKNOWN}(q.status);g(new ee(G,q.message))}else g(new ee(j.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new ee(j.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{h_:e,streamId:h,P_:_.getLastErrorCode(),T_:_.getLastError()})}}finally{Y(Lt,`RPC '${e}' ${h} completed.`)}});const w=JSON.stringify(o);Y(Lt,`RPC '${e}' ${h} sending request:`,o),_.send(t,"POST",w,i,15)})}I_(e,t,i){const o=hf(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=P_(),f=R_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const w=l.join("");Y(Lt,`Creating RPC '${e}' stream ${o}: ${w}`,g);const T=h.createWebChannel(w,g);this.E_(T);let C=!1,B=!1;const q=new K1({Zo:$=>{B?Y(Lt,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(C||(Y(Lt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),C=!0),Y(Lt,`RPC '${e}' stream ${o} sending:`,$),T.send($))},Xo:()=>T.close()}),G=($,ve,ae)=>{$.listen(ve,re=>{try{ae(re)}catch(ge){setTimeout(()=>{throw ge},0)}})};return G(T,$a.EventType.OPEN,()=>{B||(Y(Lt,`RPC '${e}' stream ${o} transport opened.`),q.__())}),G(T,$a.EventType.CLOSE,()=>{B||(B=!0,Y(Lt,`RPC '${e}' stream ${o} transport closed`),q.u_(),this.d_(T))}),G(T,$a.EventType.ERROR,$=>{B||(B=!0,as(Lt,`RPC '${e}' stream ${o} transport errored. Name:`,$.name,"Message:",$.message),q.u_(new ee(j.UNAVAILABLE,"The operation could not be completed")))}),G(T,$a.EventType.MESSAGE,$=>{var ve;if(!B){const ae=$.data[0];de(!!ae,16349);const re=ae,ge=(re==null?void 0:re.error)||((ve=re[0])===null||ve===void 0?void 0:ve.error);if(ge){Y(Lt,`RPC '${e}' stream ${o} received error:`,ge);const Se=ge.status;let Ee=function(R){const x=dt[R];if(x!==void 0)return Sv(x)}(Se),S=ge.message;Ee===void 0&&(Ee=j.INTERNAL,S="Unknown error status: "+Se+" with message "+ge.message),B=!0,q.u_(new ee(Ee,S)),T.close()}else Y(Lt,`RPC '${e}' stream ${o} received:`,ae),q.c_(ae)}}),G(f,A_.STAT_EVENT,$=>{$.stat===jd.PROXY?Y(Lt,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===jd.NOPROXY&&Y(Lt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{q.a_()},0),q}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(){return typeof window<"u"?window:null}function oc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(s){return new QT(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,t,i=1e3,o=1.5,l=6e4){this.xi=e,this.timerId=t,this.A_=i,this.R_=o,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),o=Math.max(0,t-i);o>0&&Y("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="PersistentStream";class iE{constructor(e,t,i,o,l,h,f,g){this.xi=e,this.S_=i,this.D_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new rE(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===j.RESOURCE_EXHAUSTED?(Kt(t.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.v_===t&&this.z_(i,o)},i=>{e(()=>{const o=new ee(j.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(o)})})}z_(e,t){const i=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{i(()=>this.j_(o))}),this.stream.onMessage(o=>{i(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Y(Uy,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(Y(Uy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Q1 extends iE{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=XT(this.serializer,e),i=function(l){if(!("targetChange"in l))return pe.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?pe.min():h.readTime?Ht(h.readTime):pe.min()}(e);return this.listener.Y_(t,i)}Z_(e){const t={};t.database=sf(this.serializer),t.addTarget=function(l,h){let f;const g=h.target;if(f=_c(g)?{documents:Dv(l,g)}:{query:Nv(l,g).gt},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=Pv(l,h.resumeToken);const _=nf(l,h.expectedCount);_!==null&&(f.expectedCount=_)}else if(h.snapshotVersion.compareTo(pe.min())>0){f.readTime=bo(l,h.snapshotVersion.toTimestamp());const _=nf(l,h.expectedCount);_!==null&&(f.expectedCount=_)}return f}(this.serializer,e);const i=ZT(this.serializer,e);i&&(t.labels=i),this.Q_(t)}X_(e){const t={};t.database=sf(this.serializer),t.removeTarget=e,this.Q_(t)}}class W1 extends iE{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=JT(e.writeResults,e.commitTime),i=Ht(e.commitTime);return this.listener.ra(i,t)}ia(){const e={};e.database=sf(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>wc(this.serializer,i))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{}class X1 extends Y1{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new ee(j.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.zo(e,rf(t,i),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ee(j.UNKNOWN,l.toString())})}Yo(e,t,i,o,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,f])=>this.connection.Yo(e,rf(t,i),o,h,f,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ee(j.UNKNOWN,h.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class J1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Kt(t),this.ua=!1):Y("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="RemoteStore";class Z1{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(h=>{i.enqueueAndForget(async()=>{ms(this)&&(Y(fs,"Restarting streams for network reachability change."),await async function(g){const _=Te(g);_.da.add(4),await Il(_),_.Va.set("Unknown"),_.da.delete(4),await Gc(_)}(this))})}),this.Va=new J1(i,o)}}async function Gc(s){if(ms(s))for(const e of s.Aa)await e(!0)}async function Il(s){for(const e of s.Aa)await e(!1)}function sE(s,e){const t=Te(s);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),Hf(t)?Gf(t):Uo(t).N_()&&Kf(t,e))}function qf(s,e){const t=Te(s),i=Uo(t);t.Ea.delete(e),i.N_()&&oE(t,e),t.Ea.size===0&&(i.N_()?i.k_():ms(t)&&t.Va.set("Unknown"))}function Kf(s,e){if(s.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Uo(s).Z_(e)}function oE(s,e){s.ma.Ke(e),Uo(s).X_(e)}function Gf(s){s.ma=new qT({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>s.Ea.get(e)||null,Pt:()=>s.datastore.serializer.databaseId}),Uo(s).start(),s.Va.ca()}function Hf(s){return ms(s)&&!Uo(s).O_()&&s.Ea.size>0}function ms(s){return Te(s).da.size===0}function aE(s){s.ma=void 0}async function eS(s){s.Va.set("Online")}async function tS(s){s.Ea.forEach((e,t)=>{Kf(s,e)})}async function nS(s,e){aE(s),Hf(s)?(s.Va.Pa(e),Gf(s)):s.Va.set("Unknown")}async function rS(s,e,t){if(s.Va.set("Online"),e instanceof Rv&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ea.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ea.delete(f),o.ma.removeTarget(f))}(s,e)}catch(i){Y(fs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Rc(s,i)}else if(e instanceof ic?s.ma.Xe(e):e instanceof Av?s.ma.ot(e):s.ma.nt(e),!t.isEqual(pe.min()))try{const i=await tE(s.localStore);t.compareTo(i)>=0&&await function(l,h){const f=l.ma.It(h);return f.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const w=l.Ea.get(_);w&&l.Ea.set(_,w.withResumeToken(g.resumeToken,h))}}),f.targetMismatches.forEach((g,_)=>{const w=l.Ea.get(g);if(!w)return;l.Ea.set(g,w.withResumeToken(ft.EMPTY_BYTE_STRING,w.snapshotVersion)),oE(l,g);const T=new Tr(w.target,g,_,w.sequenceNumber);Kf(l,T)}),l.remoteSyncer.applyRemoteEvent(f)}(s,t)}catch(i){Y(fs,"Failed to raise snapshot:",i),await Rc(s,i)}}async function Rc(s,e,t){if(!yi(e))throw e;s.da.add(1),await Il(s),s.Va.set("Offline"),t||(t=()=>tE(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{Y(fs,"Retrying IndexedDB access"),await t(),s.da.delete(1),await Gc(s)})}function lE(s,e){return e().catch(t=>Rc(s,t,e))}async function Tl(s){const e=Te(s),t=pi(e);let i=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:rs;for(;iS(e);)try{const o=await B1(e.localStore,i);if(o===null){e.Ia.length===0&&t.k_();break}i=o.batchId,sS(e,o)}catch(o){await Rc(e,o)}uE(e)&&cE(e)}function iS(s){return ms(s)&&s.Ia.length<10}function sS(s,e){s.Ia.push(e);const t=pi(s);t.N_()&&t.ea&&t.ta(e.mutations)}function uE(s){return ms(s)&&!pi(s).O_()&&s.Ia.length>0}function cE(s){pi(s).start()}async function oS(s){pi(s).ia()}async function aS(s){const e=pi(s);for(const t of s.Ia)e.ta(t.mutations)}async function lS(s,e,t){const i=s.Ia.shift(),o=Nf.from(i,e,t);await lE(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await Tl(s)}async function uS(s,e){e&&pi(s).ea&&await async function(i,o){if(function(h){return jT(h)&&h!==j.ABORTED}(o.code)){const l=i.Ia.shift();pi(i).L_(),await lE(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Tl(i)}}(s,e),uE(s)&&cE(s)}async function jy(s,e){const t=Te(s);t.asyncQueue.verifyOperationInProgress(),Y(fs,"RemoteStore received new credentials");const i=ms(t);t.da.add(3),await Il(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await Gc(t)}async function cS(s,e){const t=Te(s);e?(t.da.delete(2),await Gc(t)):e||(t.da.add(2),await Il(t),t.Va.set("Unknown"))}function Uo(s){return s.fa||(s.fa=function(t,i,o){const l=Te(t);return l.oa(),new Q1(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(s.datastore,s.asyncQueue,{e_:eS.bind(null,s),n_:tS.bind(null,s),i_:nS.bind(null,s),Y_:rS.bind(null,s)}),s.Aa.push(async e=>{e?(s.fa.L_(),Hf(s)?Gf(s):s.Va.set("Unknown")):(await s.fa.stop(),aE(s))})),s.fa}function pi(s){return s.ga||(s.ga=function(t,i,o){const l=Te(t);return l.oa(),new W1(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(s.datastore,s.asyncQueue,{e_:()=>Promise.resolve(),n_:oS.bind(null,s),i_:uS.bind(null,s),na:aS.bind(null,s),ra:lS.bind(null,s)}),s.Aa.push(async e=>{e?(s.ga.L_(),await Tl(s)):(await s.ga.stop(),s.Ia.length>0&&(Y(fs,`Stopping write stream with ${s.Ia.length} pending writes`),s.Ia=[]))})),s.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new Qf(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wf(s,e){if(Kt("AsyncQueue",`${e}: ${s}`),yi(s))return new ee(j.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{static emptySet(e){return new Io(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||te.comparator(t.key,i.key):(t,i)=>te.comparator(t.key,i.key),this.keyedMap=qa(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Io;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(){this.pa=new tt(te.comparator)}track(e){const t=e.doc.key,i=this.pa.get(t);i?e.type!==0&&i.type===3?this.pa=this.pa.insert(t,e):e.type===3&&i.type!==1?this.pa=this.pa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pa=this.pa.remove(t):e.type===1&&i.type===2?this.pa=this.pa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):ue(63341,{Vt:e,ya:i}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,i)=>{e.push(i)}),e}}class Mo{constructor(e,t,i,o,l,h,f,g,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach(f=>{h.push({type:0,doc:f})}),new Mo(e,t,Io.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class dS{constructor(){this.queries=qy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Te(t),l=o.queries;o.queries=qy(),l.forEach((h,f)=>{for(const g of f.Sa)g.onError(i)})})(this,new ee(j.ABORTED,"Firestore shutting down"))}}function qy(){return new xr(s=>hv(s),Lc)}async function fS(s,e){const t=Te(s);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Da()&&e.va()&&(i=2):(l=new hS,i=e.va()?0:1);try{switch(i){case 0:l.ba=await t.onListen(o,!0);break;case 1:l.ba=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=Wf(h,`Initialization of query '${yo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.Fa(t.onlineState),l.ba&&e.Ma(l.ba)&&Yf(t)}async function pS(s,e){const t=Te(s),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.va()?0:1:!l.Da()&&e.va()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function mS(s,e){const t=Te(s);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Ma(o)&&(i=!0);h.ba=o}}i&&Yf(t)}function gS(s,e,t){const i=Te(s),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function Yf(s){s.Ca.forEach(e=>{e.next()})}var df,Ky;(Ky=df||(df={})).xa="default",Ky.Cache="cache";class yS{constructor(e,t,i){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Mo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const i=t!=="Offline";return(!this.options.Qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==df.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.key=e}}class dE{constructor(e){this.key=e}}class _S{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Re(),this.mutatedKeys=Re(),this.Za=dv(e),this.Xa=new Io(this.Za)}get eu(){return this.Ha}tu(e,t){const i=t?t.nu:new $y,o=t?t.Xa:this.Xa;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((w,T)=>{const C=o.get(w),B=El(this.query,T)?T:null,q=!!C&&this.mutatedKeys.has(C.key),G=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let $=!1;C&&B?C.data.isEqual(B.data)?q!==G&&(i.track({type:3,doc:B}),$=!0):this.ru(C,B)||(i.track({type:2,doc:B}),$=!0,(g&&this.Za(B,g)>0||_&&this.Za(B,_)<0)&&(f=!0)):!C&&B?(i.track({type:0,doc:B}),$=!0):C&&!B&&(i.track({type:1,doc:C}),$=!0,(g||_)&&(f=!0)),$&&(B?(h=h.add(B),l=G?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),i.track({type:1,doc:w})}return{Xa:h,nu:i,Cs:f,mutatedKeys:l}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const h=e.nu.wa();h.sort((w,T)=>function(B,q){const G=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Vt:$})}};return G(B)-G(q)}(w.type,T.type)||this.Za(w.doc,T.doc)),this.iu(i),o=o!=null&&o;const f=t&&!o?this.su():[],g=this.Ya.size===0&&this.current&&!o?1:0,_=g!==this.Ja;return this.Ja=g,h.length!==0||_?{snapshot:new Mo(this.query,e.Xa,l,h,e.mutatedKeys,g===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:f}:{ou:f}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new $y,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Re(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const t=[];return e.forEach(i=>{this.Ya.has(i)||t.push(new dE(i))}),this.Ya.forEach(i=>{e.has(i)||t.push(new hE(i))}),t}au(e){this.Ha=e.$s,this.Ya=Re();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Mo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Xf="SyncEngine";class vS{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class ES{constructor(e){this.key=e,this.cu=!1}}class wS{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.lu={},this.hu=new xr(f=>hv(f),Lc),this.Pu=new Map,this.Tu=new Set,this.Iu=new tt(te.comparator),this.Eu=new Map,this.du=new Bf,this.Au={},this.Ru=new Map,this.Vu=ds.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function IS(s,e,t=!0){const i=_E(s);let o;const l=i.hu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.uu()):o=await fE(i,e,t,!0),o}async function TS(s,e){const t=_E(s);await fE(t,e,!0,!1)}async function fE(s,e,t,i){const o=await z1(s.localStore,Pn(e)),l=o.targetId,h=s.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await SS(s,e,l,h==="current",o.resumeToken)),s.isPrimaryClient&&t&&sE(s.remoteStore,o),f}async function SS(s,e,t,i,o){s.fu=(T,C,B)=>async function(G,$,ve,ae){let re=$.view.tu(ve);re.Cs&&(re=await Ly(G.localStore,$.query,!1).then(({documents:S})=>$.view.tu(S,re)));const ge=ae&&ae.targetChanges.get($.targetId),Se=ae&&ae.targetMismatches.get($.targetId)!=null,Ee=$.view.applyChanges(re,G.isPrimaryClient,ge,Se);return Hy(G,$.targetId,Ee.ou),Ee.snapshot}(s,T,C,B);const l=await Ly(s.localStore,e,!0),h=new _S(e,l.$s),f=h.tu(l.documents),g=wl.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",o),_=h.applyChanges(f,s.isPrimaryClient,g);Hy(s,t,_.ou);const w=new vS(e,t,h);return s.hu.set(e,w),s.Pu.has(t)?s.Pu.get(t).push(e):s.Pu.set(t,[e]),_.snapshot}async function AS(s,e,t){const i=Te(s),o=i.hu.get(e),l=i.Pu.get(o.targetId);if(l.length>1)return i.Pu.set(o.targetId,l.filter(h=>!Lc(h,e))),void i.hu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await cf(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&qf(i.remoteStore,o.targetId),ff(i,o.targetId)}).catch(ps)):(ff(i,o.targetId),await cf(i.localStore,o.targetId,!0))}async function RS(s,e){const t=Te(s),i=t.hu.get(e),o=t.Pu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),qf(t.remoteStore,i.targetId))}async function PS(s,e,t){const i=vE(s);try{const o=await function(h,f){const g=Te(h),_=st.now(),w=f.reduce((B,q)=>B.add(q.key),Re());let T,C;return g.persistence.runTransaction("Locally write mutations","readwrite",B=>{let q=dn(),G=Re();return g.Bs.getEntries(B,w).next($=>{q=$,q.forEach((ve,ae)=>{ae.isValidDocument()||(G=G.add(ve))})}).next(()=>g.localDocuments.getOverlayedDocuments(B,q)).next($=>{T=$;const ve=[];for(const ae of f){const re=zT(ae,T.get(ae.key).overlayedDocument);re!=null&&ve.push(new Vr(ae.key,re,nv(re.value.mapValue),Gt.exists(!0)))}return g.mutationQueue.addMutationBatch(B,_,ve,f)}).next($=>{C=$;const ve=$.applyToLocalDocumentSet(T,G);return g.documentOverlayCache.saveOverlays(B,$.batchId,ve)})}).then(()=>({batchId:C.batchId,changes:pv(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(h,f,g){let _=h.Au[h.currentUser.toKey()];_||(_=new tt(we)),_=_.insert(f,g),h.Au[h.currentUser.toKey()]=_}(i,o.batchId,t),await Sl(i,o.changes),await Tl(i.remoteStore)}catch(o){const l=Wf(o,"Failed to persist write");t.reject(l)}}async function pE(s,e){const t=Te(s);try{const i=await L1(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Eu.get(l);h&&(de(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.cu=!0:o.modifiedDocuments.size>0?de(h.cu,14607):o.removedDocuments.size>0&&(de(h.cu,42227),h.cu=!1))}),await Sl(t,i,e)}catch(i){await ps(i)}}function Gy(s,e,t){const i=Te(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.hu.forEach((l,h)=>{const f=h.view.Fa(e);f.snapshot&&o.push(f.snapshot)}),function(h,f){const g=Te(h);g.onlineState=f;let _=!1;g.queries.forEach((w,T)=>{for(const C of T.Sa)C.Fa(f)&&(_=!0)}),_&&Yf(g)}(i.eventManager,e),o.length&&i.lu.Y_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function CS(s,e,t){const i=Te(s);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let h=new tt(te.comparator);h=h.insert(l,at.newNoDocument(l,pe.min()));const f=Re().add(l),g=new Uc(pe.min(),new Map,new tt(we),h,f);await pE(i,g),i.Iu=i.Iu.remove(l),i.Eu.delete(e),Jf(i)}else await cf(i.localStore,e,!1).then(()=>ff(i,e,t)).catch(ps)}async function xS(s,e){const t=Te(s),i=e.batch.batchId;try{const o=await O1(t.localStore,e);gE(t,i,null),mE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Sl(t,o)}catch(o){await ps(o)}}async function VS(s,e,t){const i=Te(s);try{const o=await function(h,f){const g=Te(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return g.mutationQueue.lookupMutationBatch(_,f).next(T=>(de(T!==null,37113),w=T.keys(),g.mutationQueue.removeMutationBatch(_,T))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,w,f)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>g.localDocuments.getDocuments(_,w))})}(i.localStore,e);gE(i,e,t),mE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Sl(i,o)}catch(o){await ps(o)}}function mE(s,e){(s.Ru.get(e)||[]).forEach(t=>{t.resolve()}),s.Ru.delete(e)}function gE(s,e,t){const i=Te(s);let o=i.Au[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Au[i.currentUser.toKey()]=o}}function ff(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Pu.get(e))s.hu.delete(i),t&&s.lu.gu(i,t);s.Pu.delete(e),s.isPrimaryClient&&s.du.Hr(e).forEach(i=>{s.du.containsKey(i)||yE(s,i)})}function yE(s,e){s.Tu.delete(e.path.canonicalString());const t=s.Iu.get(e);t!==null&&(qf(s.remoteStore,t),s.Iu=s.Iu.remove(e),s.Eu.delete(t),Jf(s))}function Hy(s,e,t){for(const i of t)i instanceof hE?(s.du.addReference(i.key,e),kS(s,i)):i instanceof dE?(Y(Xf,"Document no longer in limbo: "+i.key),s.du.removeReference(i.key,e),s.du.containsKey(i.key)||yE(s,i.key)):ue(19791,{pu:i})}function kS(s,e){const t=e.key,i=t.path.canonicalString();s.Iu.get(t)||s.Tu.has(i)||(Y(Xf,"New document in limbo: "+t),s.Tu.add(i),Jf(s))}function Jf(s){for(;s.Tu.size>0&&s.Iu.size<s.maxConcurrentLimboResolutions;){const e=s.Tu.values().next().value;s.Tu.delete(e);const t=new te(ze.fromString(e)),i=s.Vu.next();s.Eu.set(i,new ES(t)),s.Iu=s.Iu.insert(t,i),sE(s.remoteStore,new Tr(Pn(Vf(t.path)),i,"TargetPurposeLimboResolution",Rn.le))}}async function Sl(s,e,t){const i=Te(s),o=[],l=[],h=[];i.hu.isEmpty()||(i.hu.forEach((f,g)=>{h.push(i.fu(g,e,t).then(_=>{var w;if((_||t)&&i.isPrimaryClient){const T=_?!_.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))===null||w===void 0?void 0:w.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(_){o.push(_);const T=jf.Rs(g.targetId,_);l.push(T)}}))}),await Promise.all(h),i.lu.Y_(o),await async function(g,_){const w=Te(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>O.forEach(_,C=>O.forEach(C.ds,B=>w.persistence.referenceDelegate.addReference(T,C.targetId,B)).next(()=>O.forEach(C.As,B=>w.persistence.referenceDelegate.removeReference(T,C.targetId,B)))))}catch(T){if(!yi(T))throw T;Y($f,"Failed to update sequence numbers: "+T)}for(const T of _){const C=T.targetId;if(!T.fromCache){const B=w.xs.get(C),q=B.snapshotVersion,G=B.withLastLimboFreeSnapshotVersion(q);w.xs=w.xs.insert(C,G)}}}(i.localStore,l))}async function DS(s,e){const t=Te(s);if(!t.currentUser.isEqual(e)){Y(Xf,"User change. New user:",e.toKey());const i=await eE(t.localStore,e);t.currentUser=e,function(l,h){l.Ru.forEach(f=>{f.forEach(g=>{g.reject(new ee(j.CANCELLED,h))})}),l.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Sl(t,i.ks)}}function NS(s,e){const t=Te(s),i=t.Eu.get(e);if(i&&i.cu)return Re().add(i.key);{let o=Re();const l=t.Pu.get(e);if(!l)return o;for(const h of l){const f=t.hu.get(h);o=o.unionWith(f.view.eu)}return o}}function _E(s){const e=Te(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=pE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CS.bind(null,e),e.lu.Y_=mS.bind(null,e.eventManager),e.lu.gu=gS.bind(null,e.eventManager),e}function vE(s){const e=Te(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VS.bind(null,e),e}class yl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return Zv(this.persistence,new Jv,e.initialUser,this.serializer)}Su(e){return new zf(qc.fi,this.serializer)}bu(e){return new nE}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yl.provider={build:()=>new yl};class bS extends yl{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){de(this.persistence.referenceDelegate instanceof Ac,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Hv(i,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?Ft.withCacheSize(this.cacheSizeBytes):Ft.DEFAULT;return new zf(i=>Ac.fi(i,t),this.serializer)}}class MS extends yl{constructor(e,t,i){super(),this.Fu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Fu.initialize(this,e),await vE(this.Fu.syncEngine),await Tl(this.Fu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Du(e){return Zv(this.persistence,new Jv,e.initialUser,this.serializer)}vu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new Hv(i,e.asyncQueue,t)}Cu(e,t){const i=new FI(t,this.persistence);return new LI(e.asyncQueue,i)}Su(e){const t=D1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Ft.withCacheSize(this.cacheSizeBytes):Ft.DEFAULT;return new Uf(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,H1(),oc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new nE}}class Pc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Gy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=DS.bind(null,this.syncEngine),await cS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dS}()}createDatastore(e){const t=Kc(e.databaseInfo.databaseId),i=function(l){return new G1(l)}(e.databaseInfo);return function(l,h,f,g){return new X1(l,h,f,g)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,h,f){return new Z1(i,o,l,h,f)}(this.localStore,this.datastore,e.asyncQueue,t=>Gy(this.syncEngine,t,0),function(){return zy.C()?new zy:new j1}())}createSyncEngine(e,t){return function(o,l,h,f,g,_,w){const T=new wS(o,l,h,f,g,_);return w&&(T.mu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Te(o);Y(fs,"RemoteStore shutting down."),l.da.add(5),await Il(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Pc.provider={build:()=>new Pc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Kt("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="FirestoreClient";class LS{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=kt.UNAUTHENTICATED,this.clientId=k_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async h=>{Y(mi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(i,h=>(Y(mi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Wf(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Od(s,e){s.asyncQueue.verifyOperationInProgress(),Y(mi,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener(async o=>{i.isEqual(o)||(await eE(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function Qy(s,e){s.asyncQueue.verifyOperationInProgress();const t=await FS(s);Y(mi,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(i=>jy(e.remoteStore,i)),s.setAppCheckTokenChangeListener((i,o)=>jy(e.remoteStore,o)),s._onlineComponents=e}async function FS(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Y(mi,"Using user provided OfflineComponentProvider");try{await Od(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===j.FAILED_PRECONDITION||o.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;as("Error using user provided cache. Falling back to memory cache: "+t),await Od(s,new yl)}}else Y(mi,"Using default OfflineComponentProvider"),await Od(s,new bS(void 0));return s._offlineComponents}async function EE(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Y(mi,"Using user provided OnlineComponentProvider"),await Qy(s,s._uninitializedComponentsProvider._online)):(Y(mi,"Using default OnlineComponentProvider"),await Qy(s,new Pc))),s._onlineComponents}function BS(s){return EE(s).then(e=>e.syncEngine)}async function zS(s){const e=await EE(s),t=e.eventManager;return t.onListen=IS.bind(null,e.syncEngine),t.onUnlisten=AS.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=TS.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=RS.bind(null,e.syncEngine),t}function US(s,e,t={}){const i=new Sr;return s.asyncQueue.enqueueAndForget(async()=>function(l,h,f,g,_){const w=new OS({next:C=>{w.xu(),h.enqueueAndForget(()=>pS(l,T)),C.fromCache&&g.source==="server"?_.reject(new ee(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(C)},error:C=>_.reject(C)}),T=new yS(f,w,{includeMetadataChanges:!0,Qa:!0});return fS(l,T)}(await zS(s),s.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(s,e,t){if(!t)throw new ee(j.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function jS(s,e,t,i){if(e===!0&&i===!0)throw new ee(j.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function Yy(s){if(!te.isDocumentKey(s))throw new ee(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Xy(s){if(te.isDocumentKey(s))throw new ee(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Hc(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ue(12329,{type:typeof s})}function gi(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ee(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hc(s);throw new ee(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="firestore.googleapis.com",Jy=!0;class Zy{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TE,this.ssl=Jy}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Jy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$v;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<m1)throw new ee(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ee(j.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ee(j.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ee(j.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new AI;switch(i.type){case"firstParty":return new xI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ee(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Wy.get(t);i&&(Y("ComponentProvider","Removing Datastore"),Wy.delete(t),i.terminate())}(this),Promise.resolve()}}function $S(s,e,t,i={}){var o;s=gi(s,Qc);const l=yf(e),h=s._getSettings(),f=Object.assign(Object.assign({},h),{emulatorOptions:s._getEmulatorOptions()}),g=`${e}:${t}`;l&&(iw(`https://${g}`),lw("Firestore",!0)),h.host!==TE&&h.host!==g&&as("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _=Object.assign(Object.assign({},h),{host:g,ssl:l,emulatorOptions:i});if(!cc(_,f)&&(s._setSettings(_),i.mockUserToken)){let w,T;if(typeof i.mockUserToken=="string")w=i.mockUserToken,T=kt.MOCK_USER;else{w=sw(i.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const C=i.mockUserToken.sub||i.mockUserToken.user_id;if(!C)throw new ee(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new kt(C)}s._authCredentials=new RI(new x_(w,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new gs(this.firestore,e,this._query)}}class fn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fn(this.firestore,e,this._key)}}class hi extends gs{constructor(e,t,i){super(e,t,Vf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fn(this.firestore,null,new te(e))}withConverter(e){return new hi(this.firestore,e,this._path)}}function Cc(s,e,...t){if(s=Ar(s),IE("collection","path",e),s instanceof Qc){const i=ze.fromString(e,...t);return Xy(i),new hi(s,null,i)}{if(!(s instanceof fn||s instanceof hi))throw new ee(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(ze.fromString(e,...t));return Xy(i),new hi(s.firestore,null,i)}}function pf(s,e,...t){if(s=Ar(s),arguments.length===1&&(e=k_.newId()),IE("doc","path",e),s instanceof Qc){const i=ze.fromString(e,...t);return Yy(i),new fn(s,null,new te(i))}{if(!(s instanceof fn||s instanceof hi))throw new ee(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(ze.fromString(e,...t));return Yy(i),new fn(s.firestore,s instanceof hi?s.converter:null,new te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="AsyncQueue";class t_{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new rE(this,"async_queue_retry"),this.rc=()=>{const i=oc();i&&Y(e_,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=e;const t=oc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=oc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Sr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!yi(e))throw e;Y(e_,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(i=>{throw this.Xu=i,this.ec=!1,Kt("INTERNAL UNHANDLED ERROR: ",n_(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=t,t}enqueueAfterDelay(e,t,i){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const o=Qf.createAndSchedule(this,e,t,i,l=>this.uc(l));return this.Zu.push(o),o}oc(){this.Xu&&ue(47125,{cc:n_(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function n_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class jo extends Qc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new t_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new t_(e),this._firestoreClient=void 0,await e}}}function qS(s,e){const t=typeof s=="object"?s:pI(),i=typeof s=="string"?s:yc,o=uI(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=nw("firestore");l&&$S(o,...l)}return o}function SE(s){if(s._terminated)throw new ee(j.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||AE(s),s._firestoreClient}function AE(s){var e,t,i;const o=s._freezeSettings(),l=function(f,g,_,w){return new fT(f,g,_,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,wE(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new LS(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}}(s._componentsProvider))}function KS(s,e){as("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return GS(s,Pc.provider,{build:i=>new MS(i,t.cacheSizeBytes,void 0)}),Promise.resolve()}function GS(s,e,t){if((s=gi(s,jo))._firestoreClient||s._terminated)throw new ee(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new ee(j.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},AE(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oo(ft.fromBase64String(e))}catch(t){throw new ee(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Oo(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ee(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ee(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ee(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=/^__.*__$/;class QS{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Vr(e,this.data,this.fieldMask,t,this.fieldTransforms):new zo(e,this.data,t,this.fieldTransforms)}}class RE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Vr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function PE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ic:s})}}class np{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new np(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:i,Rc:!1});return o.Vc(e),o}mc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:i,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return xc(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(PE(this.Ic)&&HS.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class WS{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Kc(e)}bc(e,t,i,o=!1){return new np({Ic:e,methodName:t,wc:i,path:it.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rp(s){const e=s._freezeSettings(),t=Kc(s._databaseId);return new WS(s._databaseId,!!e.ignoreUndefinedProperties,t)}function YS(s,e,t,i,o,l={}){const h=s.bc(l.merge||l.mergeFields?2:0,e,t,o);ip("Data must be an object, but it was:",h,i);const f=CE(i,h);let g,_;if(l.merge)g=new nn(h.fieldMask),_=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const T of l.mergeFields){const C=mf(e,T,t);if(!h.contains(C))throw new ee(j.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);VE(w,C)||w.push(C)}g=new nn(w),_=h.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,_=h.fieldTransforms;return new QS(new Bt(f),g,_)}class Yc extends Zf{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yc}}function XS(s,e,t,i){const o=s.bc(1,e,t);ip("Data must be an object, but it was:",o,i);const l=[],h=Bt.empty();_i(i,(g,_)=>{const w=sp(e,g,t);_=Ar(_);const T=o.mc(w);if(_ instanceof Yc)l.push(w);else{const C=Al(_,T);C!=null&&(l.push(w),h.set(w,C))}});const f=new nn(l);return new RE(h,f,o.fieldTransforms)}function JS(s,e,t,i,o,l){const h=s.bc(1,e,t),f=[mf(e,i,t)],g=[o];if(l.length%2!=0)throw new ee(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<l.length;C+=2)f.push(mf(e,l[C])),g.push(l[C+1]);const _=[],w=Bt.empty();for(let C=f.length-1;C>=0;--C)if(!VE(_,f[C])){const B=f[C];let q=g[C];q=Ar(q);const G=h.mc(B);if(q instanceof Yc)_.push(B);else{const $=Al(q,G);$!=null&&(_.push(B),w.set(B,$))}}const T=new nn(_);return new RE(w,T,h.fieldTransforms)}function ZS(s,e,t,i=!1){return Al(t,s.bc(i?4:3,e))}function Al(s,e){if(xE(s=Ar(s)))return ip("Unsupported field value:",e,s),CE(s,e);if(s instanceof Zf)return function(i,o){if(!PE(o.Ic))throw o.gc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(i,o){const l=[];let h=0;for(const f of i){let g=Al(f,o.fc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}}(s,e)}return function(i,o){if((i=Ar(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return NT(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=st.fromDate(i);return{timestampValue:bo(o.serializer,l)}}if(i instanceof st){const l=new st(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:bo(o.serializer,l)}}if(i instanceof ep)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Oo)return{bytesValue:Pv(o.serializer,i._byteString)};if(i instanceof fn){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.gc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Of(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof tp)return function(h,f){return{mapValue:{fields:{[Pf]:{stringValue:Cf},[Co]:{arrayValue:{values:h.toArray().map(_=>{if(typeof _!="number")throw f.gc("VectorValues must only contain numeric values.");return kf(f.serializer,_)})}}}}}}(i,o);throw o.gc(`Unsupported field value: ${Hc(i)}`)}(s,e)}function CE(s,e){const t={};return H_(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_i(s,(i,o)=>{const l=Al(o,e.Ac(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function xE(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof st||s instanceof ep||s instanceof Oo||s instanceof fn||s instanceof Zf||s instanceof tp)}function ip(s,e,t){if(!xE(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=Hc(t);throw i==="an object"?e.gc(s+" a custom object"):e.gc(s+" "+i)}}function mf(s,e,t){if((e=Ar(e))instanceof Wc)return e._internalPath;if(typeof e=="string")return sp(s,e);throw xc("Field path arguments must be of type string or ",s,!1,void 0,t)}const eA=new RegExp("[~\\*/\\[\\]]");function sp(s,e,t){if(e.search(eA)>=0)throw xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Wc(...e.split("."))._internalPath}catch{throw xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function xc(s,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new ee(j.INVALID_ARGUMENT,f+s+g)}function VE(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(op("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tA extends kE{data(){return super.data()}}function op(s,e){return typeof e=="string"?sp(s,e):e instanceof Wc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ee(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ap{}class DE extends ap{}function rA(s,e,...t){let i=[];e instanceof ap&&i.push(e),i=i.concat(t),function(l){const h=l.filter(g=>g instanceof up).length,f=l.filter(g=>g instanceof lp).length;if(h>1||h>0&&f>0)throw new ee(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)s=o._apply(s);return s}class lp extends DE{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new lp(e,t,i)}_apply(e){const t=this._parse(e);return NE(e._query,t),new gs(e.firestore,e.converter,ef(e._query,t))}_parse(e){const t=rp(e.firestore);return function(l,h,f,g,_,w,T){let C;if(_.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new ee(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){i_(T,w);const q=[];for(const G of T)q.push(r_(g,l,G));C={arrayValue:{values:q}}}else C=r_(g,l,T)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||i_(T,w),C=ZS(f,h,T,w==="in"||w==="not-in");return xe.create(_,w,C)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class up extends ap{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new up(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:je.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let h=o;const f=l.getFlattenedFilters();for(const g of f)NE(h,g),h=ef(h,g)}(e._query,t),new gs(e.firestore,e.converter,ef(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cp extends DE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cp(e,t)}_apply(e){const t=function(o,l,h){if(o.startAt!==null)throw new ee(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ee(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pl(l,h)}(e._query,this._field,this._direction);return new gs(e.firestore,e.converter,function(o,l){const h=o.explicitOrderBy.concat([l]);return new Bo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function iA(s,e="asc"){const t=e,i=op("orderBy",s);return cp._create(i,t)}function r_(s,e,t){if(typeof(t=Ar(t))=="string"){if(t==="")throw new ee(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cv(e)&&t.indexOf("/")!==-1)throw new ee(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ze.fromString(t));if(!te.isDocumentKey(i))throw new ee(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return dl(s,new te(i))}if(t instanceof fn)return dl(s,t._key);throw new ee(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hc(t)}.`)}function i_(s,e){if(!Array.isArray(s)||s.length===0)throw new ee(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NE(s,e){const t=function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ee(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class sA{convertValue(e,t="none"){switch(di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return _i(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Co].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(h=>et(h.doubleValue));return new tp(l)}convertGeoPoint(e){return new ep(et(e.latitude),et(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Mc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(cl(e));default:return null}}convertTimestamp(e){const t=Pr(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ze.fromString(e);de(Lv(i),9688,{name:e});const o=new ls(i.get(1),i.get(3)),l=new te(i.popFirst(5));return o.isEqual(t)||Kt(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(s,e,t){let i;return i=s?s.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class aA extends kE{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(op("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class ac extends aA{data(e={}){return super.data(e)}}class lA{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Wu(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new ac(this._firestore,this._userDataWriter,i.key,i,new Wu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ee(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(f=>{const g=new ac(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Wu(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const g=new ac(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Wu(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,w=-1;return f.type!==0&&(_=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),w=h.indexOf(f.doc.key)),{type:uA(f.type),doc:g,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function uA(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:s})}}class cA extends sA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,t)}}function bE(s){s=gi(s,gs);const e=gi(s.firestore,jo),t=SE(e),i=new cA(e);return nA(s._query),US(t,s._query).then(o=>new lA(e,i,s,o))}function hA(s,e,t,...i){s=gi(s,fn);const o=gi(s.firestore,jo),l=rp(o);let h;return h=typeof(e=Ar(e))=="string"||e instanceof Wc?JS(l,"updateDoc",s._key,e,t,i):XS(l,"updateDoc",s._key,e),hp(o,[h.toMutation(s._key,Gt.exists(!0))])}function dA(s){return hp(gi(s.firestore,jo),[new zc(s._key,Gt.none())])}function ME(s,e){const t=gi(s.firestore,jo),i=pf(s),o=oA(s.converter,e);return hp(t,[YS(rp(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,Gt.exists(!1))]).then(()=>i)}function hp(s,e){return function(i,o){const l=new Sr;return i.asyncQueue.enqueueAndForget(async()=>PS(await BS(i),o,l)),l.promise}(SE(s),e)}(function(e,t=!0){(function(o){Fo=o})(fI),dc(new nl("firestore",(i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new jo(new PI(i.getProvider("auth-internal")),new VI(h,i.getProvider("app-check-internal")),function(_,w){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ee(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ls(_.options.projectId,w)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),wo(Lg,Fg,e),wo(Lg,Fg,"esm2017")})();var fA="firebase",pA="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wo(fA,pA,"app");const mA={apiKey:"AIzaSyBuxTa1BC-QdKY4DtMWKzNNorjHfkbEXik",authDomain:"food-tracker-19c9d.firebaseapp.com",projectId:"food-tracker-19c9d",storageBucket:"food-tracker-19c9d.appspot.com",messagingSenderId:"961928172022",appId:"1:961928172022:web:9a85ac5ae45a10de35b7d7"},gA=v_(mA),ns=qS(gA);KS(ns).catch(s=>{s.code==="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):s.code==="unimplemented"&&console.warn("The current browser does not support persistence.")});function yA(){const[s,e]=An.useState([]),[t,i]=An.useState(null),[o,l]=An.useState(!0);return An.useEffect(()=>{(async()=>{try{console.log("Fetching food library...");const f=await bE(Cc(ns,"foods"));if(console.log("Query snapshot:",f),f.empty){console.log("No food items found in the database");const g=[{label:"Whey protein ",calories:120,fat:1,carbs:3,protein:25,fiber:0},{label:"Sauted chicken",calories:220,fat:10,carbs:0,protein:26,fiber:0},{label:"3 Fried Eggs",calories:255,fat:18,carbs:2,protein:18,fiber:0}];for(const _ of g)await ME(Cc(ns,"foods"),_);e(g)}else{const g=f.docs.map(_=>({id:_.id,..._.data()}));console.log("Fetched foods:",g),e(g)}}catch(f){console.error("Error fetching food library:",f),i(f.message)}finally{l(!1)}})()},[]),o?[]:t?(console.error("FoodLibrary error:",t),[]):s}const ja={calories:2300,fat:65,carbs:280,protein:180,fiber:32};function _A(){const[s,e]=An.useState([]),[t,i]=An.useState(!1),[o,l]=An.useState({label:"",calories:"",fat:"",carbs:"",protein:"",fiber:""}),[h,f]=An.useState(!0),[g,_]=An.useState([]),w=An.useRef(!1),T=yA();An.useEffect(()=>{(async()=>{if(!w.current)try{const I=rA(Cc(ns,"foodLog"),iA("timestamp","desc")),x=(await bE(I)).docs.map(k=>({id:k.id,...k.data()}));e(x),w.current=!0}catch(I){console.error("Error fetching food logs:",I)}finally{f(!1)}})()},[]);const C=S=>T.find(I=>I.id===S),B=async S=>{const I=new Date().toISOString(),R=T.find(k=>k.label===S.label);if(!R)return;const x={foodId:R.id,timestamp:I,serving:R.serving||1,units:R.units||"serving"};try{const k=await ME(Cc(ns,"foodLog"),x);e([{id:k.id,...x},...s])}catch(k){console.error("Error adding food log:",k)}},q=async(S,I,R)=>{try{const x=pf(ns,"foodLog",S),k=s.find(P=>P.id===S);let N={};if(I==="date"||I==="time"){const P=new Date(k.timestamp);if(I==="date"){const Oe=P.toTimeString().slice(0,5);N.timestamp=new Date(`${R}T${Oe}`).toISOString()}else{const Oe=P.toISOString().slice(0,10);N.timestamp=new Date(`${Oe}T${R}`).toISOString()}}else{const P=I==="serving"?parseFloat(R)||1:R;N[I]=P}await hA(x,N),e(s.map(P=>P.id===S?{...P,...N}:P))}catch(x){console.error("Error updating food log:",x)}},G=async S=>{try{await dA(pf(ns,"foodLog",S)),e(s.filter(I=>I.id!==S))}catch(I){console.error("Error deleting food log:",I)}},$=new Date().toDateString(),ve=s.filter(S=>new Date(S.timestamp).toDateString()===$),ae=ve.reduce((S,I)=>{const R=new Date(I.timestamp).toDateString();return S[R]=S[R]||[],S[R].push(I),S},{}),re=S=>S.reduce((I,R)=>{const x=C(R.foodId);if(x){const k=R.serving/(x.serving||1);Object.keys(ja).forEach(N=>{I[N]+=(x[N]||0)*k})}return I},{calories:0,fat:0,carbs:0,protein:0,fiber:0}),ge=(S,I,R)=>{const x=Math.min(I/R*100,100);return ne.createElement("div",{key:S,className:"space-y-1"},ne.createElement("p",{className:"text-sm font-medium"},S),ne.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},ne.createElement("div",{className:"bg-blue-600 h-3 rounded-full",style:{width:`${x}%`}})),ne.createElement("p",{className:"text-xs text-gray-600"},Math.round(I)," / ",R," (",x.toFixed(1),"%)"))},Se=S=>{_([...g,S])},Ee=()=>{_([])};return ne.createElement("div",{className:"max-w-4xl mx-auto p-4 space-y-4"},h?ne.createElement("div",{className:"text-center py-4"},"Loading..."):ne.createElement(ne.Fragment,null,ne.createElement("div",{className:"bg-white rounded-lg shadow p-4 space-y-4"},ne.createElement("div",{className:"flex justify-end mb-2"},ne.createElement("button",{className:"text-blue-600 text-sm flex items-center gap-1 hover:underline",onClick:Ee,title:"Show all foods"},ne.createElement("span",{style:{fontSize:"1.2em"}},"")," Show All")),ne.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2"},T&&T.length>0?ne.createElement(ne.Fragment,null,T.filter(S=>!g.includes(S.id||S.label)).map(S=>ne.createElement("div",{key:S.id||S.label,className:"relative"},ne.createElement("button",{onClick:()=>B(S),className:"bg-gray-100 border hover:bg-blue-100 rounded p-2 text-sm flex flex-col w-full"},ne.createElement("span",null,S.label),ne.createElement("span",{className:"text-xs text-gray-500"},S.serving,S.units,"  ",S.calories,"c ",S.fat,"f ",S.carbs,"c ",S.protein,"p")),ne.createElement("button",{className:"absolute top-1 right-1 text-red-500 hover:text-red-700 text-lg font-bold bg-white rounded-full w-6 h-6 flex items-center justify-center border border-gray-300",onClick:I=>{I.stopPropagation(),Se(S.id||S.label)},title:"Hide food",style:{lineHeight:1}},""))),ne.createElement("div",{className:"relative"},ne.createElement("button",{className:"bg-green-500 hover:bg-green-600 text-white rounded p-2 flex flex-col items-center justify-center w-full h-full min-h-[60px] border-2 border-green-700 text-3xl",style:{minHeight:"60px"},onClick:()=>i(!0),title:"Add New Food"},ne.createElement("span",null,"+")))):ne.createElement("div",{className:"col-span-full text-center py-4"},"No food items available. Add some using the form below.")),t&&ne.createElement("div",{className:"bg-white border rounded-lg p-4 mt-4 flex flex-col gap-2"},ne.createElement("div",{className:"grid grid-cols-2 gap-2"},ne.createElement("input",{className:"border rounded px-2 py-1",placeholder:"Food name",value:o.label,onChange:S=>l({...o,label:S.target.value})}),ne.createElement("input",{className:"border rounded px-2 py-1",placeholder:"Calories",type:"number",value:o.calories,onChange:S=>l({...o,calories:S.target.value})}),ne.createElement("input",{className:"border rounded px-2 py-1",placeholder:"Fat",type:"number",value:o.fat,onChange:S=>l({...o,fat:S.target.value})}),ne.createElement("input",{className:"border rounded px-2 py-1",placeholder:"Carbs",type:"number",value:o.carbs,onChange:S=>l({...o,carbs:S.target.value})}),ne.createElement("input",{className:"border rounded px-2 py-1",placeholder:"Protein",type:"number",value:o.protein,onChange:S=>l({...o,protein:S.target.value})}),ne.createElement("input",{className:"border rounded px-2 py-1",placeholder:"Fiber",type:"number",value:o.fiber,onChange:S=>l({...o,fiber:S.target.value})}),ne.createElement("input",{className:"border rounded px-2 py-1",placeholder:"Serving Size",type:"number",value:o.serving,onChange:S=>l({...o,serving:S.target.value})}),ne.createElement("input",{className:"border rounded px-2 py-1",placeholder:"Units (e.g. g, bowl)",value:o.units,onChange:S=>l({...o,units:S.target.value})})),ne.createElement("div",{className:"flex gap-2 mt-2"},ne.createElement("button",{className:"bg-green-500 hover:bg-green-600 text-white rounded p-2 flex items-center justify-center text-xl",title:"Save",onClick:()=>{B(o),i(!1),l({label:"",calories:"",fat:"",carbs:"",protein:"",fiber:"",serving:"",units:""})}},ne.createElement("span",{role:"img","aria-label":"Save"},"")),ne.createElement("button",{className:"bg-red-500 hover:bg-red-600 text-white rounded p-2 flex items-center justify-center text-xl",title:"Cancel",onClick:()=>{i(!1),l({label:"",calories:"",fat:"",carbs:"",protein:"",fiber:"",serving:"",units:""})}},ne.createElement("span",{role:"img","aria-label":"Cancel"},""))))),ne.createElement("div",{className:"bg-white rounded-lg shadow p-4"},ne.createElement("h2",{className:"text-lg font-semibold mb-2"},"Daily Summary"),ne.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"},Object.keys(ja).map(S=>ge(S,re(ve)[S],ja[S])))),ne.createElement("div",{className:"bg-white rounded-lg shadow p-4 overflow-auto"},ne.createElement("table",{className:"min-w-full text-sm text-left"},ne.createElement("thead",null,ne.createElement("tr",{className:"border-b"},ne.createElement("th",{className:"px-2 py-1"},"Date & Time"),ne.createElement("th",{className:"px-2 py-1"},"Food"),ne.createElement("th",{className:"px-2 py-1"},"Amount"),ne.createElement("th",{className:"px-2 py-1"},"Unit"),Object.keys(ja).map(S=>ne.createElement("th",{key:S,className:"px-2 py-1"},S)),ne.createElement("th",{className:"px-2 py-1"},""))),ne.createElement("tbody",null,Object.entries(ae).map(([S,I])=>{const R=re(I);return ne.createElement(ne.Fragment,{key:S},ne.createElement("tr",{className:"bg-gray-100 font-semibold"},ne.createElement("td",{colSpan:9},S,"  ",Object.entries(R).map(([x,k])=>`${x}: ${Math.round(k)}`).join(", "))),I.map(x=>{const k=new Date(x.timestamp),N=k.toISOString().slice(0,10),P=k.toTimeString().slice(0,5),Oe=C(x.foodId),Et=Oe?x.serving/(Oe.serving||1):1;return ne.createElement("tr",{key:x.id,className:"border-t"},ne.createElement("td",{className:"px-2 py-1"},ne.createElement("div",{className:"flex flex-col text-xs gap-1"},ne.createElement("input",{type:"date",className:"border rounded px-1",value:N,onChange:We=>q(x.id,"date",We.target.value)}),ne.createElement("input",{type:"time",className:"border rounded px-1",value:P,onChange:We=>q(x.id,"time",We.target.value)}))),ne.createElement("td",{className:"px-2 py-1"},Oe?Oe.label:x.foodId),ne.createElement("td",{className:"px-2 py-1"},ne.createElement("input",{type:"number",step:"0.1",value:x.serving,className:"w-16 border rounded px-1",onChange:We=>q(x.id,"serving",We.target.value)})),ne.createElement("td",{className:"px-2 py-1"},x.units),Object.keys(ja).map(We=>ne.createElement("td",{key:We,className:"px-2 py-1"},Oe?Math.round((Oe[We]||0)*Et):"")),ne.createElement("td",{className:"px-2 py-1"},ne.createElement("button",{onClick:()=>G(x.id),className:"text-red-600"},"")))}))}))))))}G0.createRoot(document.getElementById("root")).render(ne.createElement(ne.StrictMode,null,ne.createElement(_A,null)));
