(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function Bv(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Af={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function cT(){if(My)return je;My=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.iterator;function S(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,K={};function q(V,Q,Te){this.props=V,this.context=Q,this.refs=K,this.updater=Te||O}q.prototype.isReactComponent={},q.prototype.setState=function(V,Q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Q,"setState")},q.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function G(){}G.prototype=q.prototype;function J(V,Q,Te){this.props=V,this.context=Q,this.refs=K,this.updater=Te||O}var oe=J.prototype=new G;oe.constructor=J,j(oe,q.prototype),oe.isPureReactComponent=!0;var me=Array.isArray,ke=Object.prototype.hasOwnProperty,ue={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function A(V,Q,Te){var Ue,Be={},Y=null,ne=null;if(Q!=null)for(Ue in Q.ref!==void 0&&(ne=Q.ref),Q.key!==void 0&&(Y=""+Q.key),Q)ke.call(Q,Ue)&&!k.hasOwnProperty(Ue)&&(Be[Ue]=Q[Ue]);var fe=arguments.length-2;if(fe===1)Be.children=Te;else if(1<fe){for(var ve=Array(fe),Ve=0;Ve<fe;Ve++)ve[Ve]=arguments[Ve+2];Be.children=ve}if(V&&V.defaultProps)for(Ue in fe=V.defaultProps,fe)Be[Ue]===void 0&&(Be[Ue]=fe[Ue]);return{$$typeof:i,type:V,key:Y,ref:ne,props:Be,_owner:ue.current}}function R(V,Q){return{$$typeof:i,type:V.type,key:Q,ref:V.ref,props:V.props,_owner:V._owner}}function b(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function D(V){var Q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Te){return Q[Te]})}var M=/\/+/g;function P(V,Q){return typeof V=="object"&&V!==null&&V.key!=null?D(""+V.key):Q.toString(36)}function ct(V,Q,Te,Ue,Be){var Y=typeof V;(Y==="undefined"||Y==="boolean")&&(V=null);var ne=!1;if(V===null)ne=!0;else switch(Y){case"string":case"number":ne=!0;break;case"object":switch(V.$$typeof){case i:case e:ne=!0}}if(ne)return ne=V,Be=Be(ne),V=Ue===""?"."+P(ne,0):Ue,me(Be)?(Te="",V!=null&&(Te=V.replace(M,"$&/")+"/"),ct(Be,Q,Te,"",function(Ve){return Ve})):Be!=null&&(b(Be)&&(Be=R(Be,Te+(!Be.key||ne&&ne.key===Be.key?"":(""+Be.key).replace(M,"$&/")+"/")+V)),Q.push(Be)),1;if(ne=0,Ue=Ue===""?".":Ue+":",me(V))for(var fe=0;fe<V.length;fe++){Y=V[fe];var ve=Ue+P(Y,fe);ne+=ct(Y,Q,Te,ve,Be)}else if(ve=S(V),typeof ve=="function")for(V=ve.call(V),fe=0;!(Y=V.next()).done;)Y=Y.value,ve=Ue+P(Y,fe++),ne+=ct(Y,Q,Te,ve,Be);else if(Y==="object")throw Q=String(V),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return ne}function mt(V,Q,Te){if(V==null)return V;var Ue=[],Be=0;return ct(V,Ue,"","",function(Y){return Q.call(Te,Y,Be++)}),Ue}function Ce(V){if(V._status===-1){var Q=V._result;Q=Q(),Q.then(function(Te){(V._status===0||V._status===-1)&&(V._status=1,V._result=Te)},function(Te){(V._status===0||V._status===-1)&&(V._status=2,V._result=Te)}),V._status===-1&&(V._status=0,V._result=Q)}if(V._status===1)return V._result.default;throw V._result}var Xe={current:null},se={transition:null},Pe={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:se,ReactCurrentOwner:ue};function de(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:mt,forEach:function(V,Q,Te){mt(V,function(){Q.apply(this,arguments)},Te)},count:function(V){var Q=0;return mt(V,function(){Q++}),Q},toArray:function(V){return mt(V,function(Q){return Q})||[]},only:function(V){if(!b(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},je.Component=q,je.Fragment=t,je.Profiler=o,je.PureComponent=J,je.StrictMode=r,je.Suspense=p,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pe,je.act=de,je.cloneElement=function(V,Q,Te){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Ue=j({},V.props),Be=V.key,Y=V.ref,ne=V._owner;if(Q!=null){if(Q.ref!==void 0&&(Y=Q.ref,ne=ue.current),Q.key!==void 0&&(Be=""+Q.key),V.type&&V.type.defaultProps)var fe=V.type.defaultProps;for(ve in Q)ke.call(Q,ve)&&!k.hasOwnProperty(ve)&&(Ue[ve]=Q[ve]===void 0&&fe!==void 0?fe[ve]:Q[ve])}var ve=arguments.length-2;if(ve===1)Ue.children=Te;else if(1<ve){fe=Array(ve);for(var Ve=0;Ve<ve;Ve++)fe[Ve]=arguments[Ve+2];Ue.children=fe}return{$$typeof:i,type:V.type,key:Be,ref:Y,props:Ue,_owner:ne}},je.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:a,_context:V},V.Consumer=V},je.createElement=A,je.createFactory=function(V){var Q=A.bind(null,V);return Q.type=V,Q},je.createRef=function(){return{current:null}},je.forwardRef=function(V){return{$$typeof:d,render:V}},je.isValidElement=b,je.lazy=function(V){return{$$typeof:E,_payload:{_status:-1,_result:V},_init:Ce}},je.memo=function(V,Q){return{$$typeof:y,type:V,compare:Q===void 0?null:Q}},je.startTransition=function(V){var Q=se.transition;se.transition={};try{V()}finally{se.transition=Q}},je.unstable_act=de,je.useCallback=function(V,Q){return Xe.current.useCallback(V,Q)},je.useContext=function(V){return Xe.current.useContext(V)},je.useDebugValue=function(){},je.useDeferredValue=function(V){return Xe.current.useDeferredValue(V)},je.useEffect=function(V,Q){return Xe.current.useEffect(V,Q)},je.useId=function(){return Xe.current.useId()},je.useImperativeHandle=function(V,Q,Te){return Xe.current.useImperativeHandle(V,Q,Te)},je.useInsertionEffect=function(V,Q){return Xe.current.useInsertionEffect(V,Q)},je.useLayoutEffect=function(V,Q){return Xe.current.useLayoutEffect(V,Q)},je.useMemo=function(V,Q){return Xe.current.useMemo(V,Q)},je.useReducer=function(V,Q,Te){return Xe.current.useReducer(V,Q,Te)},je.useRef=function(V){return Xe.current.useRef(V)},je.useState=function(V){return Xe.current.useState(V)},je.useSyncExternalStore=function(V,Q,Te){return Xe.current.useSyncExternalStore(V,Q,Te)},je.useTransition=function(){return Xe.current.useTransition()},je.version="18.3.1",je}var Ly;function zv(){return Ly||(Ly=1,Af.exports=cT()),Af.exports}var Me=zv();const w=Bv(Me);var Cc={},Cf={exports:{}},wn={},Pf={exports:{}},Rf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy;function hT(){return Fy||(Fy=1,function(i){function e(se,Pe){var de=se.length;se.push(Pe);e:for(;0<de;){var V=de-1>>>1,Q=se[V];if(0<o(Q,Pe))se[V]=Pe,se[de]=Q,de=V;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var Pe=se[0],de=se.pop();if(de!==Pe){se[0]=de;e:for(var V=0,Q=se.length,Te=Q>>>1;V<Te;){var Ue=2*(V+1)-1,Be=se[Ue],Y=Ue+1,ne=se[Y];if(0>o(Be,de))Y<Q&&0>o(ne,Be)?(se[V]=ne,se[Y]=de,V=Y):(se[V]=Be,se[Ue]=de,V=Ue);else if(Y<Q&&0>o(ne,de))se[V]=ne,se[Y]=de,V=Y;else break e}}return Pe}function o(se,Pe){var de=se.sortIndex-Pe.sortIndex;return de!==0?de:se.id-Pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();i.unstable_now=function(){return u.now()-d}}var p=[],y=[],E=1,T=null,S=3,O=!1,j=!1,K=!1,q=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(se){for(var Pe=t(y);Pe!==null;){if(Pe.callback===null)r(y);else if(Pe.startTime<=se)r(y),Pe.sortIndex=Pe.expirationTime,e(p,Pe);else break;Pe=t(y)}}function me(se){if(K=!1,oe(se),!j)if(t(p)!==null)j=!0,Ce(ke);else{var Pe=t(y);Pe!==null&&Xe(me,Pe.startTime-se)}}function ke(se,Pe){j=!1,K&&(K=!1,G(A),A=-1),O=!0;var de=S;try{for(oe(Pe),T=t(p);T!==null&&(!(T.expirationTime>Pe)||se&&!D());){var V=T.callback;if(typeof V=="function"){T.callback=null,S=T.priorityLevel;var Q=V(T.expirationTime<=Pe);Pe=i.unstable_now(),typeof Q=="function"?T.callback=Q:T===t(p)&&r(p),oe(Pe)}else r(p);T=t(p)}if(T!==null)var Te=!0;else{var Ue=t(y);Ue!==null&&Xe(me,Ue.startTime-Pe),Te=!1}return Te}finally{T=null,S=de,O=!1}}var ue=!1,k=null,A=-1,R=5,b=-1;function D(){return!(i.unstable_now()-b<R)}function M(){if(k!==null){var se=i.unstable_now();b=se;var Pe=!0;try{Pe=k(!0,se)}finally{Pe?P():(ue=!1,k=null)}}else ue=!1}var P;if(typeof J=="function")P=function(){J(M)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,mt=ct.port2;ct.port1.onmessage=M,P=function(){mt.postMessage(null)}}else P=function(){q(M,0)};function Ce(se){k=se,ue||(ue=!0,P())}function Xe(se,Pe){A=q(function(){se(i.unstable_now())},Pe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(se){se.callback=null},i.unstable_continueExecution=function(){j||O||(j=!0,Ce(ke))},i.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<se?Math.floor(1e3/se):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_getFirstCallbackNode=function(){return t(p)},i.unstable_next=function(se){switch(S){case 1:case 2:case 3:var Pe=3;break;default:Pe=S}var de=S;S=Pe;try{return se()}finally{S=de}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(se,Pe){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var de=S;S=se;try{return Pe()}finally{S=de}},i.unstable_scheduleCallback=function(se,Pe,de){var V=i.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?V+de:V):de=V,se){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=de+Q,se={id:E++,callback:Pe,priorityLevel:se,startTime:de,expirationTime:Q,sortIndex:-1},de>V?(se.sortIndex=de,e(y,se),t(p)===null&&se===t(y)&&(K?(G(A),A=-1):K=!0,Xe(me,de-V))):(se.sortIndex=Q,e(p,se),j||O||(j=!0,Ce(ke))),se},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(se){var Pe=S;return function(){var de=S;S=Pe;try{return se.apply(this,arguments)}finally{S=de}}}}(Rf)),Rf}var Uy;function dT(){return Uy||(Uy=1,Pf.exports=hT()),Pf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var By;function fT(){if(By)return wn;By=1;var i=zv(),e=dT();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(n,s){u(n,s),u(n+"Capture",s)}function u(n,s){for(o[n]=s,n=0;n<s.length;n++)r.add(s[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},T={};function S(n){return p.call(T,n)?!0:p.call(E,n)?!1:y.test(n)?T[n]=!0:(E[n]=!0,!1)}function O(n,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function j(n,s,l,h){if(s===null||typeof s>"u"||O(n,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function K(n,s,l,h,f,g,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=v}var q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){q[n]=new K(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];q[s]=new K(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){q[n]=new K(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){q[n]=new K(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){q[n]=new K(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){q[n]=new K(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){q[n]=new K(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){q[n]=new K(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){q[n]=new K(n,5,!1,n.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function J(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(G,J);q[s]=new K(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(G,J);q[s]=new K(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(G,J);q[s]=new K(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){q[n]=new K(n,1,!1,n.toLowerCase(),null,!1,!1)}),q.xlinkHref=new K("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){q[n]=new K(n,1,!1,n.toLowerCase(),null,!0,!0)});function oe(n,s,l,h){var f=q.hasOwnProperty(s)?q[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(j(s,l,f,h)&&(l=null),h||f===null?S(s)&&(l===null?n.removeAttribute(s):n.setAttribute(s,""+l)):f.mustUseProperty?n[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,h=f.attributeNamespace,l===null?n.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?n.setAttributeNS(h,s,l):n.setAttribute(s,l))))}var me=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ke=Symbol.for("react.element"),ue=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),D=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),ct=Symbol.for("react.suspense_list"),mt=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),Xe=Symbol.for("react.offscreen"),se=Symbol.iterator;function Pe(n){return n===null||typeof n!="object"?null:(n=se&&n[se]||n["@@iterator"],typeof n=="function"?n:null)}var de=Object.assign,V;function Q(n){if(V===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);V=s&&s[1]||""}return`
`+V+n}var Te=!1;function Ue(n,s){if(!n||Te)return"";Te=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var h=$}Reflect.construct(n,[],s)}else{try{s.call()}catch($){h=$}n.call(s.prototype)}else{try{throw Error()}catch($){h=$}n()}}catch($){if($&&h&&typeof $.stack=="string"){for(var f=$.stack.split(`
`),g=h.stack.split(`
`),v=f.length-1,C=g.length-1;1<=v&&0<=C&&f[v]!==g[C];)C--;for(;1<=v&&0<=C;v--,C--)if(f[v]!==g[C]){if(v!==1||C!==1)do if(v--,C--,0>C||f[v]!==g[C]){var x=`
`+f[v].replace(" at new "," at ");return n.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",n.displayName)),x}while(1<=v&&0<=C);break}}}finally{Te=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?Q(n):""}function Be(n){switch(n.tag){case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return n=Ue(n.type,!1),n;case 11:return n=Ue(n.type.render,!1),n;case 1:return n=Ue(n.type,!0),n;default:return""}}function Y(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case ue:return"Portal";case R:return"Profiler";case A:return"StrictMode";case P:return"Suspense";case ct:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case b:return(n._context.displayName||"Context")+".Provider";case M:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case mt:return s=n.displayName||null,s!==null?s:Y(n.type)||"Memo";case Ce:s=n._payload,n=n._init;try{return Y(n(s))}catch{}}return null}function ne(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Y(s);case 8:return s===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ve(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ve(n){var s=ve(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,g=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){h=""+v,g.call(this,v)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(v){h=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function it(n){n._valueTracker||(n._valueTracker=Ve(n))}function gt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return n&&(h=ve(n)?n.checked?"true":"false":n.value),n=h,n!==l?(s.setValue(n),!0):!1}function at(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function fn(n,s){var l=s.checked;return de({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function pr(n,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=fe(s.value!=null?s.value:l),n._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Or(n,s){s=s.checked,s!=null&&oe(n,"checked",s,!1)}function mr(n,s){Or(n,s);var l=fe(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?ai(n,s.type,l):s.hasOwnProperty("defaultValue")&&ai(n,s.type,fe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function ns(n,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,l||s===n.value||(n.value=s),n.defaultValue=s}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function ai(n,s,l){(s!=="number"||at(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Tn=Array.isArray;function Wn(n,s,l,h){if(n=n.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<n.length;l++)f=s.hasOwnProperty("$"+n[l].value),n[l].selected!==f&&(n[l].selected=f),f&&h&&(n[l].defaultSelected=!0)}else{for(l=""+fe(l),s=null,f=0;f<n.length;f++){if(n[f].value===l){n[f].selected=!0,h&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function rs(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return de({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function li(n,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(Tn(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}n._wrapperState={initialValue:fe(l)}}function ui(n,s){var l=fe(s.value),h=fe(s.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),s.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),h!=null&&(n.defaultValue=""+h)}function ci(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function wt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?wt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var B,X=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,f){MSApp.execUnsafeLocalFunction(function(){return n(s,l,h,f)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(B=B||document.createElement("div"),B.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=B.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function ae(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Re=["Webkit","ms","Moz","O"];Object.keys(pe).forEach(function(n){Re.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),pe[s]=pe[n]})});function Qe(n,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||pe.hasOwnProperty(n)&&pe[n]?(""+s).trim():s+"px"}function ye(n,s){n=n.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=Qe(l,s[l],h);l==="float"&&(l="cssFloat"),h?n.setProperty(l,f):n[l]=f}}var He=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sn(n,s){if(s){if(He[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Sn(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var is=null;function ro(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var io=null,On=null,gr=null;function so(n){if(n=Za(n)){if(typeof io!="function")throw Error(t(280));var s=n.stateNode;s&&(s=zu(s),io(n.stateNode,n.type,s))}}function yr(n){On?gr?gr.push(n):gr=[n]:On=n}function ka(){if(On){var n=On,s=gr;if(gr=On=null,so(n),s)for(n=0;n<s.length;n++)so(s[n])}}function ss(n,s){return n(s)}function ba(){}var Mr=!1;function Na(n,s,l){if(Mr)return n(s,l);Mr=!0;try{return ss(n,s,l)}finally{Mr=!1,(On!==null||gr!==null)&&(ba(),ka())}}function At(n,s){var l=n.stateNode;if(l===null)return null;var h=zu(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var oo=!1;if(d)try{var Qn={};Object.defineProperty(Qn,"passive",{get:function(){oo=!0}}),window.addEventListener("test",Qn,Qn),window.removeEventListener("test",Qn,Qn)}catch{oo=!1}function os(n,s,l,h,f,g,v,C,x){var $=Array.prototype.slice.call(arguments,3);try{s.apply(l,$)}catch(ee){this.onError(ee)}}var as=!1,ao=null,Yn=!1,Da=null,Jh={onError:function(n){as=!0,ao=n}};function lo(n,s,l,h,f,g,v,C,x){as=!1,ao=null,os.apply(Jh,arguments)}function du(n,s,l,h,f,g,v,C,x){if(lo.apply(this,arguments),as){if(as){var $=ao;as=!1,ao=null}else throw Error(t(198));Yn||(Yn=!0,Da=$)}}function Xn(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function ls(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Jn(n){if(Xn(n)!==n)throw Error(t(188))}function fu(n){var s=n.alternate;if(!s){if(s=Xn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var l=n,h=s;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return Jn(f),n;if(g===h)return Jn(f),s;g=g.sibling}throw Error(t(188))}if(l.return!==h.return)l=f,h=g;else{for(var v=!1,C=f.child;C;){if(C===l){v=!0,l=f,h=g;break}if(C===h){v=!0,h=f,l=g;break}C=C.sibling}if(!v){for(C=g.child;C;){if(C===l){v=!0,l=g,h=f;break}if(C===h){v=!0,h=g,l=f;break}C=C.sibling}if(!v)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?n:s}function Va(n){return n=fu(n),n!==null?uo(n):null}function uo(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=uo(n);if(s!==null)return s;n=n.sibling}return null}var co=e.unstable_scheduleCallback,Oa=e.unstable_cancelCallback,pu=e.unstable_shouldYield,Zh=e.unstable_requestPaint,st=e.unstable_now,mu=e.unstable_getCurrentPriorityLevel,us=e.unstable_ImmediatePriority,hi=e.unstable_UserBlockingPriority,Mn=e.unstable_NormalPriority,Ma=e.unstable_LowPriority,gu=e.unstable_IdlePriority,cs=null,An=null;function yu(n){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(cs,n,void 0,(n.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:vu,La=Math.log,_u=Math.LN2;function vu(n){return n>>>=0,n===0?32:31-(La(n)/_u|0)|0}var ho=64,fo=4194304;function di(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function hs(n,s){var l=n.pendingLanes;if(l===0)return 0;var h=0,f=n.suspendedLanes,g=n.pingedLanes,v=l&268435455;if(v!==0){var C=v&~f;C!==0?h=di(C):(g&=v,g!==0&&(h=di(g)))}else v=l&~f,v!==0?h=di(v):g!==0&&(h=di(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)l=31-on(s),f=1<<l,h|=n[l],s&=~f;return h}function ed(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lr(n,s){for(var l=n.suspendedLanes,h=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var v=31-on(g),C=1<<v,x=f[v];x===-1?((C&l)===0||(C&h)!==0)&&(f[v]=ed(C,s)):x<=s&&(n.expiredLanes|=C),g&=~C}}function Cn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ds(){var n=ho;return ho<<=1,(ho&4194240)===0&&(ho=64),n}function fi(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function pi(n,s,l){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-on(s),n[s]=l}function rt(n,s){var l=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<l;){var f=31-on(l),g=1<<f;s[f]=0,h[f]=-1,n[f]=-1,l&=~g}}function mi(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var h=31-on(l),f=1<<h;f&s|n[h]&s&&(n[h]|=s),l&=~f}}var Ke=0;function gi(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Eu,po,wu,Iu,Tu,Fa=!1,_r=[],zt=null,Zn=null,er=null,yi=new Map,Ln=new Map,vr=[],td="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Su(n,s){switch(n){case"focusin":case"focusout":zt=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":yi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ln.delete(s.pointerId)}}function pn(n,s,l,h,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Za(s),s!==null&&po(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function nd(n,s,l,h,f){switch(s){case"focusin":return zt=pn(zt,n,s,l,h,f),!0;case"dragenter":return Zn=pn(Zn,n,s,l,h,f),!0;case"mouseover":return er=pn(er,n,s,l,h,f),!0;case"pointerover":var g=f.pointerId;return yi.set(g,pn(yi.get(g)||null,n,s,l,h,f)),!0;case"gotpointercapture":return g=f.pointerId,Ln.set(g,pn(Ln.get(g)||null,n,s,l,h,f)),!0}return!1}function Au(n){var s=ys(n.target);if(s!==null){var l=Xn(s);if(l!==null){if(s=l.tag,s===13){if(s=ls(l),s!==null){n.blockedOn=s,Tu(n.priority,function(){wu(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Fr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=mo(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);is=h,l.target.dispatchEvent(h),is=null}else return s=Za(l),s!==null&&po(s),n.blockedOn=l,!1;s.shift()}return!0}function fs(n,s,l){Fr(n)&&l.delete(s)}function Cu(){Fa=!1,zt!==null&&Fr(zt)&&(zt=null),Zn!==null&&Fr(Zn)&&(Zn=null),er!==null&&Fr(er)&&(er=null),yi.forEach(fs),Ln.forEach(fs)}function tr(n,s){n.blockedOn===s&&(n.blockedOn=null,Fa||(Fa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Cu)))}function nr(n){function s(f){return tr(f,n)}if(0<_r.length){tr(_r[0],n);for(var l=1;l<_r.length;l++){var h=_r[l];h.blockedOn===n&&(h.blockedOn=null)}}for(zt!==null&&tr(zt,n),Zn!==null&&tr(Zn,n),er!==null&&tr(er,n),yi.forEach(s),Ln.forEach(s),l=0;l<vr.length;l++)h=vr[l],h.blockedOn===n&&(h.blockedOn=null);for(;0<vr.length&&(l=vr[0],l.blockedOn===null);)Au(l),l.blockedOn===null&&vr.shift()}var Ur=me.ReactCurrentBatchConfig,_i=!0;function ht(n,s,l,h){var f=Ke,g=Ur.transition;Ur.transition=null;try{Ke=1,Ua(n,s,l,h)}finally{Ke=f,Ur.transition=g}}function rd(n,s,l,h){var f=Ke,g=Ur.transition;Ur.transition=null;try{Ke=4,Ua(n,s,l,h)}finally{Ke=f,Ur.transition=g}}function Ua(n,s,l,h){if(_i){var f=mo(n,s,l,h);if(f===null)pd(n,s,h,ps,l),Su(n,h);else if(nd(f,n,s,l,h))h.stopPropagation();else if(Su(n,h),s&4&&-1<td.indexOf(n)){for(;f!==null;){var g=Za(f);if(g!==null&&Eu(g),g=mo(n,s,l,h),g===null&&pd(n,s,h,ps,l),g===f)break;f=g}f!==null&&h.stopPropagation()}else pd(n,s,h,null,l)}}var ps=null;function mo(n,s,l,h){if(ps=null,n=ro(h),n=ys(n),n!==null)if(s=Xn(n),s===null)n=null;else if(l=s.tag,l===13){if(n=ls(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return ps=n,null}function Ba(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mu()){case us:return 1;case hi:return 4;case Mn:case Ma:return 16;case gu:return 536870912;default:return 16}default:return 16}}var Pn=null,go=null,mn=null;function za(){if(mn)return mn;var n,s=go,l=s.length,h,f="value"in Pn?Pn.value:Pn.textContent,g=f.length;for(n=0;n<l&&s[n]===f[n];n++);var v=l-n;for(h=1;h<=v&&s[l-h]===f[g-h];h++);return mn=f.slice(n,1<h?1-h:void 0)}function yo(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Er(){return!0}function ja(){return!1}function jt(n){function s(l,h,f,g,v){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(l=n[C],this[C]=l?l(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Er:ja,this.isPropagationStopped=ja,this}return de(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Er)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Er)},persist:function(){},isPersistent:Er}),s}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_o=jt(rr),wr=de({},rr,{view:0,detail:0}),id=jt(wr),vo,Br,vi,ms=de({},wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ir,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==vi&&(vi&&n.type==="mousemove"?(vo=n.screenX-vi.screenX,Br=n.screenY-vi.screenY):Br=vo=0,vi=n),vo)},movementY:function(n){return"movementY"in n?n.movementY:Br}}),Eo=jt(ms),$a=de({},ms,{dataTransfer:0}),Pu=jt($a),wo=de({},wr,{relatedTarget:0}),Io=jt(wo),Ru=de({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),zr=jt(Ru),xu=de({},rr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ku=jt(xu),bu=de({},rr,{data:0}),qa=jt(bu),To={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},an={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Du(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Nu[n])?!!s[n]:!1}function Ir(){return Du}var c=de({},wr,{key:function(n){if(n.key){var s=To[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=yo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?an[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ir,charCode:function(n){return n.type==="keypress"?yo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?yo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=jt(c),_=de({},ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=jt(_),L=de({},wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ir}),H=jt(L),le=de({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),et=jt(le),bt=de({},ms,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ge=jt(bt),Mt=[9,13,27,32],Pt=d&&"CompositionEvent"in window,Fn=null;d&&"documentMode"in document&&(Fn=document.documentMode);var Rn=d&&"TextEvent"in window&&!Fn,gs=d&&(!Pt||Fn&&8<Fn&&11>=Fn),So=" ",km=!1;function bm(n,s){switch(n){case"keyup":return Mt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ao=!1;function aI(n,s){switch(n){case"compositionend":return Nm(s);case"keypress":return s.which!==32?null:(km=!0,So);case"textInput":return n=s.data,n===So&&km?null:n;default:return null}}function lI(n,s){if(Ao)return n==="compositionend"||!Pt&&bm(n,s)?(n=za(),mn=go=Pn=null,Ao=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return gs&&s.locale!=="ko"?null:s.data;default:return null}}var uI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!uI[n.type]:s==="textarea"}function Vm(n,s,l,h){yr(h),s=Fu(s,"onChange"),0<s.length&&(l=new _o("onChange","change",null,l,h),n.push({event:l,listeners:s}))}var Ha=null,Ka=null;function cI(n){Jm(n,0)}function Vu(n){var s=ko(n);if(gt(s))return n}function hI(n,s){if(n==="change")return s}var Om=!1;if(d){var sd;if(d){var od="oninput"in document;if(!od){var Mm=document.createElement("div");Mm.setAttribute("oninput","return;"),od=typeof Mm.oninput=="function"}sd=od}else sd=!1;Om=sd&&(!document.documentMode||9<document.documentMode)}function Lm(){Ha&&(Ha.detachEvent("onpropertychange",Fm),Ka=Ha=null)}function Fm(n){if(n.propertyName==="value"&&Vu(Ka)){var s=[];Vm(s,Ka,n,ro(n)),Na(cI,s)}}function dI(n,s,l){n==="focusin"?(Lm(),Ha=s,Ka=l,Ha.attachEvent("onpropertychange",Fm)):n==="focusout"&&Lm()}function fI(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Vu(Ka)}function pI(n,s){if(n==="click")return Vu(s)}function mI(n,s){if(n==="input"||n==="change")return Vu(s)}function gI(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var ir=typeof Object.is=="function"?Object.is:gI;function Ga(n,s){if(ir(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!p.call(s,f)||!ir(n[f],s[f]))return!1}return!0}function Um(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Bm(n,s){var l=Um(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=s&&h>=s)return{node:l,offset:s-n};n=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Um(l)}}function zm(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?zm(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function jm(){for(var n=window,s=at();s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=at(n.document)}return s}function ad(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function yI(n){var s=jm(),l=n.focusedElem,h=n.selectionRange;if(s!==l&&l&&l.ownerDocument&&zm(l.ownerDocument.documentElement,l)){if(h!==null&&ad(l)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(n,l.value.length);else if(n=(s=l.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=l.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!n.extend&&g>h&&(f=h,h=g,g=f),f=Bm(l,g);var v=Bm(l,h);f&&v&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>h?(n.addRange(s),n.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),n.addRange(s)))}}for(s=[],n=l;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)n=s[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var _I=d&&"documentMode"in document&&11>=document.documentMode,Co=null,ld=null,Wa=null,ud=!1;function $m(n,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ud||Co==null||Co!==at(h)||(h=Co,"selectionStart"in h&&ad(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Wa&&Ga(Wa,h)||(Wa=h,h=Fu(ld,"onSelect"),0<h.length&&(s=new _o("onSelect","select",null,s,l),n.push({event:s,listeners:h}),s.target=Co)))}function Ou(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var Po={animationend:Ou("Animation","AnimationEnd"),animationiteration:Ou("Animation","AnimationIteration"),animationstart:Ou("Animation","AnimationStart"),transitionend:Ou("Transition","TransitionEnd")},cd={},qm={};d&&(qm=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function Mu(n){if(cd[n])return cd[n];if(!Po[n])return n;var s=Po[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in qm)return cd[n]=s[l];return n}var Hm=Mu("animationend"),Km=Mu("animationiteration"),Gm=Mu("animationstart"),Wm=Mu("transitionend"),Qm=new Map,Ym="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(n,s){Qm.set(n,s),a(s,[n])}for(var hd=0;hd<Ym.length;hd++){var dd=Ym[hd],vI=dd.toLowerCase(),EI=dd[0].toUpperCase()+dd.slice(1);Ei(vI,"on"+EI)}Ei(Hm,"onAnimationEnd"),Ei(Km,"onAnimationIteration"),Ei(Gm,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(Wm,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qa));function Xm(n,s,l){var h=n.type||"unknown-event";n.currentTarget=l,du(h,s,void 0,n),n.currentTarget=null}function Jm(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var v=h.length-1;0<=v;v--){var C=h[v],x=C.instance,$=C.currentTarget;if(C=C.listener,x!==g&&f.isPropagationStopped())break e;Xm(f,C,$),g=x}else for(v=0;v<h.length;v++){if(C=h[v],x=C.instance,$=C.currentTarget,C=C.listener,x!==g&&f.isPropagationStopped())break e;Xm(f,C,$),g=x}}}if(Yn)throw n=Da,Yn=!1,Da=null,n}function lt(n,s){var l=s[Ed];l===void 0&&(l=s[Ed]=new Set);var h=n+"__bubble";l.has(h)||(Zm(s,n,2,!1),l.add(h))}function fd(n,s,l){var h=0;s&&(h|=4),Zm(l,n,h,s)}var Lu="_reactListening"+Math.random().toString(36).slice(2);function Ya(n){if(!n[Lu]){n[Lu]=!0,r.forEach(function(l){l!=="selectionchange"&&(wI.has(l)||fd(l,!1,n),fd(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Lu]||(s[Lu]=!0,fd("selectionchange",!1,s))}}function Zm(n,s,l,h){switch(Ba(s)){case 1:var f=ht;break;case 4:f=rd;break;default:f=Ua}l=f.bind(null,s,l,n),f=void 0,!oo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?n.addEventListener(s,l,{capture:!0,passive:f}):n.addEventListener(s,l,!0):f!==void 0?n.addEventListener(s,l,{passive:f}):n.addEventListener(s,l,!1)}function pd(n,s,l,h,f){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var v=h.tag;if(v===3||v===4){var C=h.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(v===4)for(v=h.return;v!==null;){var x=v.tag;if((x===3||x===4)&&(x=v.stateNode.containerInfo,x===f||x.nodeType===8&&x.parentNode===f))return;v=v.return}for(;C!==null;){if(v=ys(C),v===null)return;if(x=v.tag,x===5||x===6){h=g=v;continue e}C=C.parentNode}}h=h.return}Na(function(){var $=g,ee=ro(l),te=[];e:{var Z=Qm.get(n);if(Z!==void 0){var ge=_o,Ee=n;switch(n){case"keypress":if(yo(l)===0)break e;case"keydown":case"keyup":ge=m;break;case"focusin":Ee="focus",ge=Io;break;case"focusout":Ee="blur",ge=Io;break;case"beforeblur":case"afterblur":ge=Io;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Pu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=H;break;case Hm:case Km:case Gm:ge=zr;break;case Wm:ge=et;break;case"scroll":ge=id;break;case"wheel":ge=Ge;break;case"copy":case"cut":case"paste":ge=ku;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=I}var Ie=(s&4)!==0,Ct=!Ie&&n==="scroll",U=Ie?Z!==null?Z+"Capture":null:Z;Ie=[];for(var N=$,z;N!==null;){z=N;var ie=z.stateNode;if(z.tag===5&&ie!==null&&(z=ie,U!==null&&(ie=At(N,U),ie!=null&&Ie.push(Xa(N,ie,z)))),Ct)break;N=N.return}0<Ie.length&&(Z=new ge(Z,Ee,null,l,ee),te.push({event:Z,listeners:Ie}))}}if((s&7)===0){e:{if(Z=n==="mouseover"||n==="pointerover",ge=n==="mouseout"||n==="pointerout",Z&&l!==is&&(Ee=l.relatedTarget||l.fromElement)&&(ys(Ee)||Ee[jr]))break e;if((ge||Z)&&(Z=ee.window===ee?ee:(Z=ee.ownerDocument)?Z.defaultView||Z.parentWindow:window,ge?(Ee=l.relatedTarget||l.toElement,ge=$,Ee=Ee?ys(Ee):null,Ee!==null&&(Ct=Xn(Ee),Ee!==Ct||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(ge=null,Ee=$),ge!==Ee)){if(Ie=Eo,ie="onMouseLeave",U="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(Ie=I,ie="onPointerLeave",U="onPointerEnter",N="pointer"),Ct=ge==null?Z:ko(ge),z=Ee==null?Z:ko(Ee),Z=new Ie(ie,N+"leave",ge,l,ee),Z.target=Ct,Z.relatedTarget=z,ie=null,ys(ee)===$&&(Ie=new Ie(U,N+"enter",Ee,l,ee),Ie.target=z,Ie.relatedTarget=Ct,ie=Ie),Ct=ie,ge&&Ee)t:{for(Ie=ge,U=Ee,N=0,z=Ie;z;z=Ro(z))N++;for(z=0,ie=U;ie;ie=Ro(ie))z++;for(;0<N-z;)Ie=Ro(Ie),N--;for(;0<z-N;)U=Ro(U),z--;for(;N--;){if(Ie===U||U!==null&&Ie===U.alternate)break t;Ie=Ro(Ie),U=Ro(U)}Ie=null}else Ie=null;ge!==null&&eg(te,Z,ge,Ie,!1),Ee!==null&&Ct!==null&&eg(te,Ct,Ee,Ie,!0)}}e:{if(Z=$?ko($):window,ge=Z.nodeName&&Z.nodeName.toLowerCase(),ge==="select"||ge==="input"&&Z.type==="file")var Se=hI;else if(Dm(Z))if(Om)Se=mI;else{Se=fI;var be=dI}else(ge=Z.nodeName)&&ge.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(Se=pI);if(Se&&(Se=Se(n,$))){Vm(te,Se,l,ee);break e}be&&be(n,Z,$),n==="focusout"&&(be=Z._wrapperState)&&be.controlled&&Z.type==="number"&&ai(Z,"number",Z.value)}switch(be=$?ko($):window,n){case"focusin":(Dm(be)||be.contentEditable==="true")&&(Co=be,ld=$,Wa=null);break;case"focusout":Wa=ld=Co=null;break;case"mousedown":ud=!0;break;case"contextmenu":case"mouseup":case"dragend":ud=!1,$m(te,l,ee);break;case"selectionchange":if(_I)break;case"keydown":case"keyup":$m(te,l,ee)}var Ne;if(Pt)e:{switch(n){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Ao?bm(n,l)&&(Oe="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Oe="onCompositionStart");Oe&&(gs&&l.locale!=="ko"&&(Ao||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Ao&&(Ne=za()):(Pn=ee,go="value"in Pn?Pn.value:Pn.textContent,Ao=!0)),be=Fu($,Oe),0<be.length&&(Oe=new qa(Oe,n,null,l,ee),te.push({event:Oe,listeners:be}),Ne?Oe.data=Ne:(Ne=Nm(l),Ne!==null&&(Oe.data=Ne)))),(Ne=Rn?aI(n,l):lI(n,l))&&($=Fu($,"onBeforeInput"),0<$.length&&(ee=new qa("onBeforeInput","beforeinput",null,l,ee),te.push({event:ee,listeners:$}),ee.data=Ne))}Jm(te,s)})}function Xa(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Fu(n,s){for(var l=s+"Capture",h=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=At(n,l),g!=null&&h.unshift(Xa(n,g,f)),g=At(n,s),g!=null&&h.push(Xa(n,g,f))),n=n.return}return h}function Ro(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function eg(n,s,l,h,f){for(var g=s._reactName,v=[];l!==null&&l!==h;){var C=l,x=C.alternate,$=C.stateNode;if(x!==null&&x===h)break;C.tag===5&&$!==null&&(C=$,f?(x=At(l,g),x!=null&&v.unshift(Xa(l,x,C))):f||(x=At(l,g),x!=null&&v.push(Xa(l,x,C)))),l=l.return}v.length!==0&&n.push({event:s,listeners:v})}var II=/\r\n?/g,TI=/\u0000|\uFFFD/g;function tg(n){return(typeof n=="string"?n:""+n).replace(II,`
`).replace(TI,"")}function Uu(n,s,l){if(s=tg(s),tg(n)!==s&&l)throw Error(t(425))}function Bu(){}var md=null,gd=null;function yd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var _d=typeof setTimeout=="function"?setTimeout:void 0,SI=typeof clearTimeout=="function"?clearTimeout:void 0,ng=typeof Promise=="function"?Promise:void 0,AI=typeof queueMicrotask=="function"?queueMicrotask:typeof ng<"u"?function(n){return ng.resolve(null).then(n).catch(CI)}:_d;function CI(n){setTimeout(function(){throw n})}function vd(n,s){var l=s,h=0;do{var f=l.nextSibling;if(n.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){n.removeChild(f),nr(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);nr(s)}function wi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function rg(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}var xo=Math.random().toString(36).slice(2),Tr="__reactFiber$"+xo,Ja="__reactProps$"+xo,jr="__reactContainer$"+xo,Ed="__reactEvents$"+xo,PI="__reactListeners$"+xo,RI="__reactHandles$"+xo;function ys(n){var s=n[Tr];if(s)return s;for(var l=n.parentNode;l;){if(s=l[jr]||l[Tr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=rg(n);n!==null;){if(l=n[Tr])return l;n=rg(n)}return s}n=l,l=n.parentNode}return null}function Za(n){return n=n[Tr]||n[jr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ko(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function zu(n){return n[Ja]||null}var wd=[],bo=-1;function Ii(n){return{current:n}}function ut(n){0>bo||(n.current=wd[bo],wd[bo]=null,bo--)}function ot(n,s){bo++,wd[bo]=n.current,n.current=s}var Ti={},Gt=Ii(Ti),gn=Ii(!1),_s=Ti;function No(n,s){var l=n.type.contextTypes;if(!l)return Ti;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in l)f[g]=s[g];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function yn(n){return n=n.childContextTypes,n!=null}function ju(){ut(gn),ut(Gt)}function ig(n,s,l){if(Gt.current!==Ti)throw Error(t(168));ot(Gt,s),ot(gn,l)}function sg(n,s,l){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,ne(n)||"Unknown",f));return de({},l,h)}function $u(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ti,_s=Gt.current,ot(Gt,n),ot(gn,gn.current),!0}function og(n,s,l){var h=n.stateNode;if(!h)throw Error(t(169));l?(n=sg(n,s,_s),h.__reactInternalMemoizedMergedChildContext=n,ut(gn),ut(Gt),ot(Gt,n)):ut(gn),ot(gn,l)}var $r=null,qu=!1,Id=!1;function ag(n){$r===null?$r=[n]:$r.push(n)}function xI(n){qu=!0,ag(n)}function Si(){if(!Id&&$r!==null){Id=!0;var n=0,s=Ke;try{var l=$r;for(Ke=1;n<l.length;n++){var h=l[n];do h=h(!0);while(h!==null)}$r=null,qu=!1}catch(f){throw $r!==null&&($r=$r.slice(n+1)),co(us,Si),f}finally{Ke=s,Id=!1}}return null}var Do=[],Vo=0,Hu=null,Ku=0,Un=[],Bn=0,vs=null,qr=1,Hr="";function Es(n,s){Do[Vo++]=Ku,Do[Vo++]=Hu,Hu=n,Ku=s}function lg(n,s,l){Un[Bn++]=qr,Un[Bn++]=Hr,Un[Bn++]=vs,vs=n;var h=qr;n=Hr;var f=32-on(h)-1;h&=~(1<<f),l+=1;var g=32-on(s)+f;if(30<g){var v=f-f%5;g=(h&(1<<v)-1).toString(32),h>>=v,f-=v,qr=1<<32-on(s)+f|l<<f|h,Hr=g+n}else qr=1<<g|l<<f|h,Hr=n}function Td(n){n.return!==null&&(Es(n,1),lg(n,1,0))}function Sd(n){for(;n===Hu;)Hu=Do[--Vo],Do[Vo]=null,Ku=Do[--Vo],Do[Vo]=null;for(;n===vs;)vs=Un[--Bn],Un[Bn]=null,Hr=Un[--Bn],Un[Bn]=null,qr=Un[--Bn],Un[Bn]=null}var xn=null,kn=null,dt=!1,sr=null;function ug(n,s){var l=qn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=n,s=n.deletions,s===null?(n.deletions=[l],n.flags|=16):s.push(l)}function cg(n,s){switch(n.tag){case 5:var l=n.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,xn=n,kn=wi(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,xn=n,kn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=vs!==null?{id:qr,overflow:Hr}:null,n.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=qn(18,null,null,0),l.stateNode=s,l.return=n,n.child=l,xn=n,kn=null,!0):!1;default:return!1}}function Ad(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Cd(n){if(dt){var s=kn;if(s){var l=s;if(!cg(n,s)){if(Ad(n))throw Error(t(418));s=wi(l.nextSibling);var h=xn;s&&cg(n,s)?ug(h,l):(n.flags=n.flags&-4097|2,dt=!1,xn=n)}}else{if(Ad(n))throw Error(t(418));n.flags=n.flags&-4097|2,dt=!1,xn=n}}}function hg(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;xn=n}function Gu(n){if(n!==xn)return!1;if(!dt)return hg(n),dt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!yd(n.type,n.memoizedProps)),s&&(s=kn)){if(Ad(n))throw dg(),Error(t(418));for(;s;)ug(n,s),s=wi(s.nextSibling)}if(hg(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(s===0){kn=wi(n.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}n=n.nextSibling}kn=null}}else kn=xn?wi(n.stateNode.nextSibling):null;return!0}function dg(){for(var n=kn;n;)n=wi(n.nextSibling)}function Oo(){kn=xn=null,dt=!1}function Pd(n){sr===null?sr=[n]:sr.push(n)}var kI=me.ReactCurrentBatchConfig;function el(n,s,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,n));var f=h,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(v){var C=f.refs;v===null?delete C[g]:C[g]=v},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,n))}return n}function Wu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function fg(n){var s=n._init;return s(n._payload)}function pg(n){function s(U,N){if(n){var z=U.deletions;z===null?(U.deletions=[N],U.flags|=16):z.push(N)}}function l(U,N){if(!n)return null;for(;N!==null;)s(U,N),N=N.sibling;return null}function h(U,N){for(U=new Map;N!==null;)N.key!==null?U.set(N.key,N):U.set(N.index,N),N=N.sibling;return U}function f(U,N){return U=Ni(U,N),U.index=0,U.sibling=null,U}function g(U,N,z){return U.index=z,n?(z=U.alternate,z!==null?(z=z.index,z<N?(U.flags|=2,N):z):(U.flags|=2,N)):(U.flags|=1048576,N)}function v(U){return n&&U.alternate===null&&(U.flags|=2),U}function C(U,N,z,ie){return N===null||N.tag!==6?(N=vf(z,U.mode,ie),N.return=U,N):(N=f(N,z),N.return=U,N)}function x(U,N,z,ie){var Se=z.type;return Se===k?ee(U,N,z.props.children,ie,z.key):N!==null&&(N.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Ce&&fg(Se)===N.type)?(ie=f(N,z.props),ie.ref=el(U,N,z),ie.return=U,ie):(ie=_c(z.type,z.key,z.props,null,U.mode,ie),ie.ref=el(U,N,z),ie.return=U,ie)}function $(U,N,z,ie){return N===null||N.tag!==4||N.stateNode.containerInfo!==z.containerInfo||N.stateNode.implementation!==z.implementation?(N=Ef(z,U.mode,ie),N.return=U,N):(N=f(N,z.children||[]),N.return=U,N)}function ee(U,N,z,ie,Se){return N===null||N.tag!==7?(N=Rs(z,U.mode,ie,Se),N.return=U,N):(N=f(N,z),N.return=U,N)}function te(U,N,z){if(typeof N=="string"&&N!==""||typeof N=="number")return N=vf(""+N,U.mode,z),N.return=U,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ke:return z=_c(N.type,N.key,N.props,null,U.mode,z),z.ref=el(U,null,N),z.return=U,z;case ue:return N=Ef(N,U.mode,z),N.return=U,N;case Ce:var ie=N._init;return te(U,ie(N._payload),z)}if(Tn(N)||Pe(N))return N=Rs(N,U.mode,z,null),N.return=U,N;Wu(U,N)}return null}function Z(U,N,z,ie){var Se=N!==null?N.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return Se!==null?null:C(U,N,""+z,ie);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case ke:return z.key===Se?x(U,N,z,ie):null;case ue:return z.key===Se?$(U,N,z,ie):null;case Ce:return Se=z._init,Z(U,N,Se(z._payload),ie)}if(Tn(z)||Pe(z))return Se!==null?null:ee(U,N,z,ie,null);Wu(U,z)}return null}function ge(U,N,z,ie,Se){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return U=U.get(z)||null,C(N,U,""+ie,Se);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case ke:return U=U.get(ie.key===null?z:ie.key)||null,x(N,U,ie,Se);case ue:return U=U.get(ie.key===null?z:ie.key)||null,$(N,U,ie,Se);case Ce:var be=ie._init;return ge(U,N,z,be(ie._payload),Se)}if(Tn(ie)||Pe(ie))return U=U.get(z)||null,ee(N,U,ie,Se,null);Wu(N,ie)}return null}function Ee(U,N,z,ie){for(var Se=null,be=null,Ne=N,Oe=N=0,Ut=null;Ne!==null&&Oe<z.length;Oe++){Ne.index>Oe?(Ut=Ne,Ne=null):Ut=Ne.sibling;var Je=Z(U,Ne,z[Oe],ie);if(Je===null){Ne===null&&(Ne=Ut);break}n&&Ne&&Je.alternate===null&&s(U,Ne),N=g(Je,N,Oe),be===null?Se=Je:be.sibling=Je,be=Je,Ne=Ut}if(Oe===z.length)return l(U,Ne),dt&&Es(U,Oe),Se;if(Ne===null){for(;Oe<z.length;Oe++)Ne=te(U,z[Oe],ie),Ne!==null&&(N=g(Ne,N,Oe),be===null?Se=Ne:be.sibling=Ne,be=Ne);return dt&&Es(U,Oe),Se}for(Ne=h(U,Ne);Oe<z.length;Oe++)Ut=ge(Ne,U,Oe,z[Oe],ie),Ut!==null&&(n&&Ut.alternate!==null&&Ne.delete(Ut.key===null?Oe:Ut.key),N=g(Ut,N,Oe),be===null?Se=Ut:be.sibling=Ut,be=Ut);return n&&Ne.forEach(function(Di){return s(U,Di)}),dt&&Es(U,Oe),Se}function Ie(U,N,z,ie){var Se=Pe(z);if(typeof Se!="function")throw Error(t(150));if(z=Se.call(z),z==null)throw Error(t(151));for(var be=Se=null,Ne=N,Oe=N=0,Ut=null,Je=z.next();Ne!==null&&!Je.done;Oe++,Je=z.next()){Ne.index>Oe?(Ut=Ne,Ne=null):Ut=Ne.sibling;var Di=Z(U,Ne,Je.value,ie);if(Di===null){Ne===null&&(Ne=Ut);break}n&&Ne&&Di.alternate===null&&s(U,Ne),N=g(Di,N,Oe),be===null?Se=Di:be.sibling=Di,be=Di,Ne=Ut}if(Je.done)return l(U,Ne),dt&&Es(U,Oe),Se;if(Ne===null){for(;!Je.done;Oe++,Je=z.next())Je=te(U,Je.value,ie),Je!==null&&(N=g(Je,N,Oe),be===null?Se=Je:be.sibling=Je,be=Je);return dt&&Es(U,Oe),Se}for(Ne=h(U,Ne);!Je.done;Oe++,Je=z.next())Je=ge(Ne,U,Oe,Je.value,ie),Je!==null&&(n&&Je.alternate!==null&&Ne.delete(Je.key===null?Oe:Je.key),N=g(Je,N,Oe),be===null?Se=Je:be.sibling=Je,be=Je);return n&&Ne.forEach(function(uT){return s(U,uT)}),dt&&Es(U,Oe),Se}function Ct(U,N,z,ie){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case ke:e:{for(var Se=z.key,be=N;be!==null;){if(be.key===Se){if(Se=z.type,Se===k){if(be.tag===7){l(U,be.sibling),N=f(be,z.props.children),N.return=U,U=N;break e}}else if(be.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Ce&&fg(Se)===be.type){l(U,be.sibling),N=f(be,z.props),N.ref=el(U,be,z),N.return=U,U=N;break e}l(U,be);break}else s(U,be);be=be.sibling}z.type===k?(N=Rs(z.props.children,U.mode,ie,z.key),N.return=U,U=N):(ie=_c(z.type,z.key,z.props,null,U.mode,ie),ie.ref=el(U,N,z),ie.return=U,U=ie)}return v(U);case ue:e:{for(be=z.key;N!==null;){if(N.key===be)if(N.tag===4&&N.stateNode.containerInfo===z.containerInfo&&N.stateNode.implementation===z.implementation){l(U,N.sibling),N=f(N,z.children||[]),N.return=U,U=N;break e}else{l(U,N);break}else s(U,N);N=N.sibling}N=Ef(z,U.mode,ie),N.return=U,U=N}return v(U);case Ce:return be=z._init,Ct(U,N,be(z._payload),ie)}if(Tn(z))return Ee(U,N,z,ie);if(Pe(z))return Ie(U,N,z,ie);Wu(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,N!==null&&N.tag===6?(l(U,N.sibling),N=f(N,z),N.return=U,U=N):(l(U,N),N=vf(z,U.mode,ie),N.return=U,U=N),v(U)):l(U,N)}return Ct}var Mo=pg(!0),mg=pg(!1),Qu=Ii(null),Yu=null,Lo=null,Rd=null;function xd(){Rd=Lo=Yu=null}function kd(n){var s=Qu.current;ut(Qu),n._currentValue=s}function bd(n,s,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===l)break;n=n.return}}function Fo(n,s){Yu=n,Rd=Lo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(_n=!0),n.firstContext=null)}function zn(n){var s=n._currentValue;if(Rd!==n)if(n={context:n,memoizedValue:s,next:null},Lo===null){if(Yu===null)throw Error(t(308));Lo=n,Yu.dependencies={lanes:0,firstContext:n}}else Lo=Lo.next=n;return s}var ws=null;function Nd(n){ws===null?ws=[n]:ws.push(n)}function gg(n,s,l,h){var f=s.interleaved;return f===null?(l.next=l,Nd(s)):(l.next=f.next,f.next=l),s.interleaved=l,Kr(n,h)}function Kr(n,s){n.lanes|=s;var l=n.alternate;for(l!==null&&(l.lanes|=s),l=n,n=n.return;n!==null;)n.childLanes|=s,l=n.alternate,l!==null&&(l.childLanes|=s),l=n,n=n.return;return l.tag===3?l.stateNode:null}var Ai=!1;function Dd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yg(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Gr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Ci(n,s,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Ye&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Kr(n,l)}return f=h.interleaved,f===null?(s.next=s,Nd(h)):(s.next=f.next,f.next=s),h.interleaved=s,Kr(n,l)}function Xu(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,mi(n,l)}}function _g(n,s){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var v={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};g===null?f=g=v:g=g.next=v,l=l.next}while(l!==null);g===null?f=g=s:g=g.next=s}else f=g=s;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}function Ju(n,s,l,h){var f=n.updateQueue;Ai=!1;var g=f.firstBaseUpdate,v=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var x=C,$=x.next;x.next=null,v===null?g=$:v.next=$,v=x;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,C=ee.lastBaseUpdate,C!==v&&(C===null?ee.firstBaseUpdate=$:C.next=$,ee.lastBaseUpdate=x))}if(g!==null){var te=f.baseState;v=0,ee=$=x=null,C=g;do{var Z=C.lane,ge=C.eventTime;if((h&Z)===Z){ee!==null&&(ee=ee.next={eventTime:ge,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var Ee=n,Ie=C;switch(Z=s,ge=l,Ie.tag){case 1:if(Ee=Ie.payload,typeof Ee=="function"){te=Ee.call(ge,te,Z);break e}te=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Ie.payload,Z=typeof Ee=="function"?Ee.call(ge,te,Z):Ee,Z==null)break e;te=de({},te,Z);break e;case 2:Ai=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,Z=f.effects,Z===null?f.effects=[C]:Z.push(C))}else ge={eventTime:ge,lane:Z,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ee===null?($=ee=ge,x=te):ee=ee.next=ge,v|=Z;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);if(ee===null&&(x=te),f.baseState=x,f.firstBaseUpdate=$,f.lastBaseUpdate=ee,s=f.shared.interleaved,s!==null){f=s;do v|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);Ss|=v,n.lanes=v,n.memoizedState=te}}function vg(n,s,l){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var tl={},Sr=Ii(tl),nl=Ii(tl),rl=Ii(tl);function Is(n){if(n===tl)throw Error(t(174));return n}function Vd(n,s){switch(ot(rl,s),ot(nl,n),ot(Sr,tl),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:It(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=It(s,n)}ut(Sr),ot(Sr,s)}function Uo(){ut(Sr),ut(nl),ut(rl)}function Eg(n){Is(rl.current);var s=Is(Sr.current),l=It(s,n.type);s!==l&&(ot(nl,n),ot(Sr,l))}function Od(n){nl.current===n&&(ut(Sr),ut(nl))}var yt=Ii(0);function Zu(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Md=[];function Ld(){for(var n=0;n<Md.length;n++)Md[n]._workInProgressVersionPrimary=null;Md.length=0}var ec=me.ReactCurrentDispatcher,Fd=me.ReactCurrentBatchConfig,Ts=0,_t=null,Nt=null,Lt=null,tc=!1,il=!1,sl=0,bI=0;function Wt(){throw Error(t(321))}function Ud(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!ir(n[l],s[l]))return!1;return!0}function Bd(n,s,l,h,f,g){if(Ts=g,_t=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ec.current=n===null||n.memoizedState===null?OI:MI,n=l(h,f),il){g=0;do{if(il=!1,sl=0,25<=g)throw Error(t(301));g+=1,Lt=Nt=null,s.updateQueue=null,ec.current=LI,n=l(h,f)}while(il)}if(ec.current=ic,s=Nt!==null&&Nt.next!==null,Ts=0,Lt=Nt=_t=null,tc=!1,s)throw Error(t(300));return n}function zd(){var n=sl!==0;return sl=0,n}function Ar(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?_t.memoizedState=Lt=n:Lt=Lt.next=n,Lt}function jn(){if(Nt===null){var n=_t.alternate;n=n!==null?n.memoizedState:null}else n=Nt.next;var s=Lt===null?_t.memoizedState:Lt.next;if(s!==null)Lt=s,Nt=n;else{if(n===null)throw Error(t(310));Nt=n,n={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Lt===null?_t.memoizedState=Lt=n:Lt=Lt.next=n}return Lt}function ol(n,s){return typeof s=="function"?s(n):s}function jd(n){var s=jn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var h=Nt,f=h.baseQueue,g=l.pending;if(g!==null){if(f!==null){var v=f.next;f.next=g.next,g.next=v}h.baseQueue=f=g,l.pending=null}if(f!==null){g=f.next,h=h.baseState;var C=v=null,x=null,$=g;do{var ee=$.lane;if((Ts&ee)===ee)x!==null&&(x=x.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:n(h,$.action);else{var te={lane:ee,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};x===null?(C=x=te,v=h):x=x.next=te,_t.lanes|=ee,Ss|=ee}$=$.next}while($!==null&&$!==g);x===null?v=h:x.next=C,ir(h,s.memoizedState)||(_n=!0),s.memoizedState=h,s.baseState=v,s.baseQueue=x,l.lastRenderedState=h}if(n=l.interleaved,n!==null){f=n;do g=f.lane,_t.lanes|=g,Ss|=g,f=f.next;while(f!==n)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function $d(n){var s=jn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var h=l.dispatch,f=l.pending,g=s.memoizedState;if(f!==null){l.pending=null;var v=f=f.next;do g=n(g,v.action),v=v.next;while(v!==f);ir(g,s.memoizedState)||(_n=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,h]}function wg(){}function Ig(n,s){var l=_t,h=jn(),f=s(),g=!ir(h.memoizedState,f);if(g&&(h.memoizedState=f,_n=!0),h=h.queue,qd(Ag.bind(null,l,h,n),[n]),h.getSnapshot!==s||g||Lt!==null&&Lt.memoizedState.tag&1){if(l.flags|=2048,al(9,Sg.bind(null,l,h,f,s),void 0,null),Ft===null)throw Error(t(349));(Ts&30)!==0||Tg(l,s,f)}return f}function Tg(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=_t.updateQueue,s===null?(s={lastEffect:null,stores:null},_t.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function Sg(n,s,l,h){s.value=l,s.getSnapshot=h,Cg(s)&&Pg(n)}function Ag(n,s,l){return l(function(){Cg(s)&&Pg(n)})}function Cg(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!ir(n,l)}catch{return!0}}function Pg(n){var s=Kr(n,1);s!==null&&ur(s,n,1,-1)}function Rg(n){var s=Ar();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:n},s.queue=n,n=n.dispatch=VI.bind(null,_t,n),[s.memoizedState,n]}function al(n,s,l,h){return n={tag:n,create:s,destroy:l,deps:h,next:null},s=_t.updateQueue,s===null?(s={lastEffect:null,stores:null},_t.updateQueue=s,s.lastEffect=n.next=n):(l=s.lastEffect,l===null?s.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,s.lastEffect=n)),n}function xg(){return jn().memoizedState}function nc(n,s,l,h){var f=Ar();_t.flags|=n,f.memoizedState=al(1|s,l,void 0,h===void 0?null:h)}function rc(n,s,l,h){var f=jn();h=h===void 0?null:h;var g=void 0;if(Nt!==null){var v=Nt.memoizedState;if(g=v.destroy,h!==null&&Ud(h,v.deps)){f.memoizedState=al(s,l,g,h);return}}_t.flags|=n,f.memoizedState=al(1|s,l,g,h)}function kg(n,s){return nc(8390656,8,n,s)}function qd(n,s){return rc(2048,8,n,s)}function bg(n,s){return rc(4,2,n,s)}function Ng(n,s){return rc(4,4,n,s)}function Dg(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Vg(n,s,l){return l=l!=null?l.concat([n]):null,rc(4,4,Dg.bind(null,s,n),l)}function Hd(){}function Og(n,s){var l=jn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Ud(s,h[1])?h[0]:(l.memoizedState=[n,s],n)}function Mg(n,s){var l=jn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Ud(s,h[1])?h[0]:(n=n(),l.memoizedState=[n,s],n)}function Lg(n,s,l){return(Ts&21)===0?(n.baseState&&(n.baseState=!1,_n=!0),n.memoizedState=l):(ir(l,s)||(l=ds(),_t.lanes|=l,Ss|=l,n.baseState=!0),s)}function NI(n,s){var l=Ke;Ke=l!==0&&4>l?l:4,n(!0);var h=Fd.transition;Fd.transition={};try{n(!1),s()}finally{Ke=l,Fd.transition=h}}function Fg(){return jn().memoizedState}function DI(n,s,l){var h=ki(n);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Ug(n))Bg(s,l);else if(l=gg(n,s,l,h),l!==null){var f=un();ur(l,n,h,f),zg(l,s,h)}}function VI(n,s,l){var h=ki(n),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ug(n))Bg(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var v=s.lastRenderedState,C=g(v,l);if(f.hasEagerState=!0,f.eagerState=C,ir(C,v)){var x=s.interleaved;x===null?(f.next=f,Nd(s)):(f.next=x.next,x.next=f),s.interleaved=f;return}}catch{}finally{}l=gg(n,s,f,h),l!==null&&(f=un(),ur(l,n,h,f),zg(l,s,h))}}function Ug(n){var s=n.alternate;return n===_t||s!==null&&s===_t}function Bg(n,s){il=tc=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function zg(n,s,l){if((l&4194240)!==0){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,mi(n,l)}}var ic={readContext:zn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},OI={readContext:zn,useCallback:function(n,s){return Ar().memoizedState=[n,s===void 0?null:s],n},useContext:zn,useEffect:kg,useImperativeHandle:function(n,s,l){return l=l!=null?l.concat([n]):null,nc(4194308,4,Dg.bind(null,s,n),l)},useLayoutEffect:function(n,s){return nc(4194308,4,n,s)},useInsertionEffect:function(n,s){return nc(4,2,n,s)},useMemo:function(n,s){var l=Ar();return s=s===void 0?null:s,n=n(),l.memoizedState=[n,s],n},useReducer:function(n,s,l){var h=Ar();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=DI.bind(null,_t,n),[h.memoizedState,n]},useRef:function(n){var s=Ar();return n={current:n},s.memoizedState=n},useState:Rg,useDebugValue:Hd,useDeferredValue:function(n){return Ar().memoizedState=n},useTransition:function(){var n=Rg(!1),s=n[0];return n=NI.bind(null,n[1]),Ar().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,l){var h=_t,f=Ar();if(dt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),Ft===null)throw Error(t(349));(Ts&30)!==0||Tg(h,s,l)}f.memoizedState=l;var g={value:l,getSnapshot:s};return f.queue=g,kg(Ag.bind(null,h,g,n),[n]),h.flags|=2048,al(9,Sg.bind(null,h,g,l,s),void 0,null),l},useId:function(){var n=Ar(),s=Ft.identifierPrefix;if(dt){var l=Hr,h=qr;l=(h&~(1<<32-on(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=sl++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=bI++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},MI={readContext:zn,useCallback:Og,useContext:zn,useEffect:qd,useImperativeHandle:Vg,useInsertionEffect:bg,useLayoutEffect:Ng,useMemo:Mg,useReducer:jd,useRef:xg,useState:function(){return jd(ol)},useDebugValue:Hd,useDeferredValue:function(n){var s=jn();return Lg(s,Nt.memoizedState,n)},useTransition:function(){var n=jd(ol)[0],s=jn().memoizedState;return[n,s]},useMutableSource:wg,useSyncExternalStore:Ig,useId:Fg,unstable_isNewReconciler:!1},LI={readContext:zn,useCallback:Og,useContext:zn,useEffect:qd,useImperativeHandle:Vg,useInsertionEffect:bg,useLayoutEffect:Ng,useMemo:Mg,useReducer:$d,useRef:xg,useState:function(){return $d(ol)},useDebugValue:Hd,useDeferredValue:function(n){var s=jn();return Nt===null?s.memoizedState=n:Lg(s,Nt.memoizedState,n)},useTransition:function(){var n=$d(ol)[0],s=jn().memoizedState;return[n,s]},useMutableSource:wg,useSyncExternalStore:Ig,useId:Fg,unstable_isNewReconciler:!1};function or(n,s){if(n&&n.defaultProps){s=de({},s),n=n.defaultProps;for(var l in n)s[l]===void 0&&(s[l]=n[l]);return s}return s}function Kd(n,s,l,h){s=n.memoizedState,l=l(h,s),l=l==null?s:de({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var sc={isMounted:function(n){return(n=n._reactInternals)?Xn(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var h=un(),f=ki(n),g=Gr(h,f);g.payload=s,l!=null&&(g.callback=l),s=Ci(n,g,f),s!==null&&(ur(s,n,f,h),Xu(s,n,f))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var h=un(),f=ki(n),g=Gr(h,f);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=Ci(n,g,f),s!==null&&(ur(s,n,f,h),Xu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=un(),h=ki(n),f=Gr(l,h);f.tag=2,s!=null&&(f.callback=s),s=Ci(n,f,h),s!==null&&(ur(s,n,h,l),Xu(s,n,h))}};function jg(n,s,l,h,f,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,g,v):s.prototype&&s.prototype.isPureReactComponent?!Ga(l,h)||!Ga(f,g):!0}function $g(n,s,l){var h=!1,f=Ti,g=s.contextType;return typeof g=="object"&&g!==null?g=zn(g):(f=yn(s)?_s:Gt.current,h=s.contextTypes,g=(h=h!=null)?No(n,f):Ti),s=new s(l,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=sc,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function qg(n,s,l,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==n&&sc.enqueueReplaceState(s,s.state,null)}function Gd(n,s,l,h){var f=n.stateNode;f.props=l,f.state=n.memoizedState,f.refs={},Dd(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=zn(g):(g=yn(s)?_s:Gt.current,f.context=No(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Kd(n,s,g,l),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&sc.enqueueReplaceState(f,f.state,null),Ju(n,l,f,h),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Bo(n,s){try{var l="",h=s;do l+=Be(h),h=h.return;while(h);var f=l}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function Wd(n,s,l){return{value:n,source:null,stack:l??null,digest:s??null}}function Qd(n,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var FI=typeof WeakMap=="function"?WeakMap:Map;function Hg(n,s,l){l=Gr(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){dc||(dc=!0,hf=h),Qd(n,s)},l}function Kg(n,s,l){l=Gr(-1,l),l.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;l.payload=function(){return h(f)},l.callback=function(){Qd(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(l.callback=function(){Qd(n,s),typeof h!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),l}function Gg(n,s,l){var h=n.pingCache;if(h===null){h=n.pingCache=new FI;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(l)||(f.add(l),n=JI.bind(null,n,s,l),s.then(n,n))}function Wg(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Qg(n,s,l,h,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Gr(-1,1),s.tag=2,Ci(l,s,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var UI=me.ReactCurrentOwner,_n=!1;function ln(n,s,l,h){s.child=n===null?mg(s,null,l,h):Mo(s,n.child,l,h)}function Yg(n,s,l,h,f){l=l.render;var g=s.ref;return Fo(s,f),h=Bd(n,s,l,h,g,f),l=zd(),n!==null&&!_n?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Wr(n,s,f)):(dt&&l&&Td(s),s.flags|=1,ln(n,s,h,f),s.child)}function Xg(n,s,l,h,f){if(n===null){var g=l.type;return typeof g=="function"&&!_f(g)&&g.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=g,Jg(n,s,g,h,f)):(n=_c(l.type,null,h,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,(n.lanes&f)===0){var v=g.memoizedProps;if(l=l.compare,l=l!==null?l:Ga,l(v,h)&&n.ref===s.ref)return Wr(n,s,f)}return s.flags|=1,n=Ni(g,h),n.ref=s.ref,n.return=s,s.child=n}function Jg(n,s,l,h,f){if(n!==null){var g=n.memoizedProps;if(Ga(g,h)&&n.ref===s.ref)if(_n=!1,s.pendingProps=h=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(_n=!0);else return s.lanes=n.lanes,Wr(n,s,f)}return Yd(n,s,l,h,f)}function Zg(n,s,l){var h=s.pendingProps,f=h.children,g=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(jo,bn),bn|=l;else{if((l&1073741824)===0)return n=g!==null?g.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,ot(jo,bn),bn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:l,ot(jo,bn),bn|=h}else g!==null?(h=g.baseLanes|l,s.memoizedState=null):h=l,ot(jo,bn),bn|=h;return ln(n,s,f,l),s.child}function ey(n,s){var l=s.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Yd(n,s,l,h,f){var g=yn(l)?_s:Gt.current;return g=No(s,g),Fo(s,f),l=Bd(n,s,l,h,g,f),h=zd(),n!==null&&!_n?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Wr(n,s,f)):(dt&&h&&Td(s),s.flags|=1,ln(n,s,l,f),s.child)}function ty(n,s,l,h,f){if(yn(l)){var g=!0;$u(s)}else g=!1;if(Fo(s,f),s.stateNode===null)ac(n,s),$g(s,l,h),Gd(s,l,h,f),h=!0;else if(n===null){var v=s.stateNode,C=s.memoizedProps;v.props=C;var x=v.context,$=l.contextType;typeof $=="object"&&$!==null?$=zn($):($=yn(l)?_s:Gt.current,$=No(s,$));var ee=l.getDerivedStateFromProps,te=typeof ee=="function"||typeof v.getSnapshotBeforeUpdate=="function";te||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==h||x!==$)&&qg(s,v,h,$),Ai=!1;var Z=s.memoizedState;v.state=Z,Ju(s,h,v,f),x=s.memoizedState,C!==h||Z!==x||gn.current||Ai?(typeof ee=="function"&&(Kd(s,l,ee,h),x=s.memoizedState),(C=Ai||jg(s,l,C,h,Z,x,$))?(te||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=x),v.props=h,v.state=x,v.context=$,h=C):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{v=s.stateNode,yg(n,s),C=s.memoizedProps,$=s.type===s.elementType?C:or(s.type,C),v.props=$,te=s.pendingProps,Z=v.context,x=l.contextType,typeof x=="object"&&x!==null?x=zn(x):(x=yn(l)?_s:Gt.current,x=No(s,x));var ge=l.getDerivedStateFromProps;(ee=typeof ge=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==te||Z!==x)&&qg(s,v,h,x),Ai=!1,Z=s.memoizedState,v.state=Z,Ju(s,h,v,f);var Ee=s.memoizedState;C!==te||Z!==Ee||gn.current||Ai?(typeof ge=="function"&&(Kd(s,l,ge,h),Ee=s.memoizedState),($=Ai||jg(s,l,$,h,Z,Ee,x)||!1)?(ee||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,Ee,x),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,Ee,x)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=Ee),v.props=h,v.state=Ee,v.context=x,h=$):(typeof v.componentDidUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(s.flags|=1024),h=!1)}return Xd(n,s,l,h,g,f)}function Xd(n,s,l,h,f,g){ey(n,s);var v=(s.flags&128)!==0;if(!h&&!v)return f&&og(s,l,!1),Wr(n,s,g);h=s.stateNode,UI.current=s;var C=v&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&v?(s.child=Mo(s,n.child,null,g),s.child=Mo(s,null,C,g)):ln(n,s,C,g),s.memoizedState=h.state,f&&og(s,l,!0),s.child}function ny(n){var s=n.stateNode;s.pendingContext?ig(n,s.pendingContext,s.pendingContext!==s.context):s.context&&ig(n,s.context,!1),Vd(n,s.containerInfo)}function ry(n,s,l,h,f){return Oo(),Pd(f),s.flags|=256,ln(n,s,l,h),s.child}var Jd={dehydrated:null,treeContext:null,retryLane:0};function Zd(n){return{baseLanes:n,cachePool:null,transitions:null}}function iy(n,s,l){var h=s.pendingProps,f=yt.current,g=!1,v=(s.flags&128)!==0,C;if((C=v)||(C=n!==null&&n.memoizedState===null?!1:(f&2)!==0),C?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),ot(yt,f&1),n===null)return Cd(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(v=h.children,n=h.fallback,g?(h=s.mode,g=s.child,v={mode:"hidden",children:v},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=v):g=vc(v,h,0,null),n=Rs(n,h,l,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=Zd(l),s.memoizedState=Jd,n):ef(s,v));if(f=n.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return BI(n,s,v,h,C,f,l);if(g){g=h.fallback,v=s.mode,f=n.child,C=f.sibling;var x={mode:"hidden",children:h.children};return(v&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=x,s.deletions=null):(h=Ni(f,x),h.subtreeFlags=f.subtreeFlags&14680064),C!==null?g=Ni(C,g):(g=Rs(g,v,l,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,v=n.child.memoizedState,v=v===null?Zd(l):{baseLanes:v.baseLanes|l,cachePool:null,transitions:v.transitions},g.memoizedState=v,g.childLanes=n.childLanes&~l,s.memoizedState=Jd,h}return g=n.child,n=g.sibling,h=Ni(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,n!==null&&(l=s.deletions,l===null?(s.deletions=[n],s.flags|=16):l.push(n)),s.child=h,s.memoizedState=null,h}function ef(n,s){return s=vc({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function oc(n,s,l,h){return h!==null&&Pd(h),Mo(s,n.child,null,l),n=ef(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function BI(n,s,l,h,f,g,v){if(l)return s.flags&256?(s.flags&=-257,h=Wd(Error(t(422))),oc(n,s,v,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=vc({mode:"visible",children:h.children},f,0,null),g=Rs(g,f,v,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&Mo(s,n.child,null,v),s.child.memoizedState=Zd(v),s.memoizedState=Jd,g);if((s.mode&1)===0)return oc(n,s,v,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var C=h.dgst;return h=C,g=Error(t(419)),h=Wd(g,h,void 0),oc(n,s,v,h)}if(C=(v&n.childLanes)!==0,_n||C){if(h=Ft,h!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|v))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Kr(n,f),ur(h,n,f,-1))}return yf(),h=Wd(Error(t(421))),oc(n,s,v,h)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=ZI.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,kn=wi(f.nextSibling),xn=s,dt=!0,sr=null,n!==null&&(Un[Bn++]=qr,Un[Bn++]=Hr,Un[Bn++]=vs,qr=n.id,Hr=n.overflow,vs=s),s=ef(s,h.children),s.flags|=4096,s)}function sy(n,s,l){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),bd(n.return,s,l)}function tf(n,s,l,h,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=l,g.tailMode=f)}function oy(n,s,l){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(ln(n,s,h.children,l),h=yt.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sy(n,l,s);else if(n.tag===19)sy(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(ot(yt,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)n=l.alternate,n!==null&&Zu(n)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),tf(s,!1,f,l,g);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Zu(n)===null){s.child=f;break}n=f.sibling,f.sibling=l,l=f,f=n}tf(s,!0,l,null,g);break;case"together":tf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ac(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Wr(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),Ss|=s.lanes,(l&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,l=Ni(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=Ni(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function zI(n,s,l){switch(s.tag){case 3:ny(s),Oo();break;case 5:Eg(s);break;case 1:yn(s.type)&&$u(s);break;case 4:Vd(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;ot(Qu,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(ot(yt,yt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?iy(n,s,l):(ot(yt,yt.current&1),n=Wr(n,s,l),n!==null?n.sibling:null);ot(yt,yt.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(n.flags&128)!==0){if(h)return oy(n,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ot(yt,yt.current),h)break;return null;case 22:case 23:return s.lanes=0,Zg(n,s,l)}return Wr(n,s,l)}var ay,nf,ly,uy;ay=function(n,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},nf=function(){},ly=function(n,s,l,h){var f=n.memoizedProps;if(f!==h){n=s.stateNode,Is(Sr.current);var g=null;switch(l){case"input":f=fn(n,f),h=fn(n,h),g=[];break;case"select":f=de({},f,{value:void 0}),h=de({},h,{value:void 0}),g=[];break;case"textarea":f=rs(n,f),h=rs(n,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Bu)}sn(l,h);var v;l=null;for($ in f)if(!h.hasOwnProperty($)&&f.hasOwnProperty($)&&f[$]!=null)if($==="style"){var C=f[$];for(v in C)C.hasOwnProperty(v)&&(l||(l={}),l[v]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in h){var x=h[$];if(C=f!=null?f[$]:void 0,h.hasOwnProperty($)&&x!==C&&(x!=null||C!=null))if($==="style")if(C){for(v in C)!C.hasOwnProperty(v)||x&&x.hasOwnProperty(v)||(l||(l={}),l[v]="");for(v in x)x.hasOwnProperty(v)&&C[v]!==x[v]&&(l||(l={}),l[v]=x[v])}else l||(g||(g=[]),g.push($,l)),l=x;else $==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,C=C?C.__html:void 0,x!=null&&C!==x&&(g=g||[]).push($,x)):$==="children"?typeof x!="string"&&typeof x!="number"||(g=g||[]).push($,""+x):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(x!=null&&$==="onScroll"&&lt("scroll",n),g||C===x||(g=[])):(g=g||[]).push($,x))}l&&(g=g||[]).push("style",l);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},uy=function(n,s,l,h){l!==h&&(s.flags|=4)};function ll(n,s){if(!dt)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Qt(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(s)for(var f=n.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=h,n.childLanes=l,s}function jI(n,s,l){var h=s.pendingProps;switch(Sd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(s),null;case 1:return yn(s.type)&&ju(),Qt(s),null;case 3:return h=s.stateNode,Uo(),ut(gn),ut(Gt),Ld(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Gu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,sr!==null&&(pf(sr),sr=null))),nf(n,s),Qt(s),null;case 5:Od(s);var f=Is(rl.current);if(l=s.type,n!==null&&s.stateNode!=null)ly(n,s,l,h,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Qt(s),null}if(n=Is(Sr.current),Gu(s)){h=s.stateNode,l=s.type;var g=s.memoizedProps;switch(h[Tr]=s,h[Ja]=g,n=(s.mode&1)!==0,l){case"dialog":lt("cancel",h),lt("close",h);break;case"iframe":case"object":case"embed":lt("load",h);break;case"video":case"audio":for(f=0;f<Qa.length;f++)lt(Qa[f],h);break;case"source":lt("error",h);break;case"img":case"image":case"link":lt("error",h),lt("load",h);break;case"details":lt("toggle",h);break;case"input":pr(h,g),lt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},lt("invalid",h);break;case"textarea":li(h,g),lt("invalid",h)}sn(l,g),f=null;for(var v in g)if(g.hasOwnProperty(v)){var C=g[v];v==="children"?typeof C=="string"?h.textContent!==C&&(g.suppressHydrationWarning!==!0&&Uu(h.textContent,C,n),f=["children",C]):typeof C=="number"&&h.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&Uu(h.textContent,C,n),f=["children",""+C]):o.hasOwnProperty(v)&&C!=null&&v==="onScroll"&&lt("scroll",h)}switch(l){case"input":it(h),ns(h,g,!0);break;case"textarea":it(h),ci(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Bu)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=wt(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=v.createElement(l,{is:h.is}):(n=v.createElement(l),l==="select"&&(v=n,h.multiple?v.multiple=!0:h.size&&(v.size=h.size))):n=v.createElementNS(n,l),n[Tr]=s,n[Ja]=h,ay(n,s,!1,!1),s.stateNode=n;e:{switch(v=Sn(l,h),l){case"dialog":lt("cancel",n),lt("close",n),f=h;break;case"iframe":case"object":case"embed":lt("load",n),f=h;break;case"video":case"audio":for(f=0;f<Qa.length;f++)lt(Qa[f],n);f=h;break;case"source":lt("error",n),f=h;break;case"img":case"image":case"link":lt("error",n),lt("load",n),f=h;break;case"details":lt("toggle",n),f=h;break;case"input":pr(n,h),f=fn(n,h),lt("invalid",n);break;case"option":f=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},f=de({},h,{value:void 0}),lt("invalid",n);break;case"textarea":li(n,h),f=rs(n,h),lt("invalid",n);break;default:f=h}sn(l,f),C=f;for(g in C)if(C.hasOwnProperty(g)){var x=C[g];g==="style"?ye(n,x):g==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&X(n,x)):g==="children"?typeof x=="string"?(l!=="textarea"||x!=="")&&ae(n,x):typeof x=="number"&&ae(n,""+x):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?x!=null&&g==="onScroll"&&lt("scroll",n):x!=null&&oe(n,g,x,v))}switch(l){case"input":it(n),ns(n,h,!1);break;case"textarea":it(n),ci(n);break;case"option":h.value!=null&&n.setAttribute("value",""+fe(h.value));break;case"select":n.multiple=!!h.multiple,g=h.value,g!=null?Wn(n,!!h.multiple,g,!1):h.defaultValue!=null&&Wn(n,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Bu)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Qt(s),null;case 6:if(n&&s.stateNode!=null)uy(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=Is(rl.current),Is(Sr.current),Gu(s)){if(h=s.stateNode,l=s.memoizedProps,h[Tr]=s,(g=h.nodeValue!==l)&&(n=xn,n!==null))switch(n.tag){case 3:Uu(h.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Uu(h.nodeValue,l,(n.mode&1)!==0)}g&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Tr]=s,s.stateNode=h}return Qt(s),null;case 13:if(ut(yt),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(dt&&kn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)dg(),Oo(),s.flags|=98560,g=!1;else if(g=Gu(s),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Tr]=s}else Oo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qt(s),g=!1}else sr!==null&&(pf(sr),sr=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(yt.current&1)!==0?Dt===0&&(Dt=3):yf())),s.updateQueue!==null&&(s.flags|=4),Qt(s),null);case 4:return Uo(),nf(n,s),n===null&&Ya(s.stateNode.containerInfo),Qt(s),null;case 10:return kd(s.type._context),Qt(s),null;case 17:return yn(s.type)&&ju(),Qt(s),null;case 19:if(ut(yt),g=s.memoizedState,g===null)return Qt(s),null;if(h=(s.flags&128)!==0,v=g.rendering,v===null)if(h)ll(g,!1);else{if(Dt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=Zu(n),v!==null){for(s.flags|=128,ll(g,!1),h=v.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)g=l,n=h,g.flags&=14680066,v=g.alternate,v===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=v.childLanes,g.lanes=v.lanes,g.child=v.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=v.memoizedProps,g.memoizedState=v.memoizedState,g.updateQueue=v.updateQueue,g.type=v.type,n=v.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return ot(yt,yt.current&1|2),s.child}n=n.sibling}g.tail!==null&&st()>$o&&(s.flags|=128,h=!0,ll(g,!1),s.lanes=4194304)}else{if(!h)if(n=Zu(v),n!==null){if(s.flags|=128,h=!0,l=n.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),ll(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!dt)return Qt(s),null}else 2*st()-g.renderingStartTime>$o&&l!==1073741824&&(s.flags|=128,h=!0,ll(g,!1),s.lanes=4194304);g.isBackwards?(v.sibling=s.child,s.child=v):(l=g.last,l!==null?l.sibling=v:s.child=v,g.last=v)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=st(),s.sibling=null,l=yt.current,ot(yt,h?l&1|2:l&1),s):(Qt(s),null);case 22:case 23:return gf(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(bn&1073741824)!==0&&(Qt(s),s.subtreeFlags&6&&(s.flags|=8192)):Qt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function $I(n,s){switch(Sd(s),s.tag){case 1:return yn(s.type)&&ju(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Uo(),ut(gn),ut(Gt),Ld(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Od(s),null;case 13:if(ut(yt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Oo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ut(yt),null;case 4:return Uo(),null;case 10:return kd(s.type._context),null;case 22:case 23:return gf(),null;case 24:return null;default:return null}}var lc=!1,Yt=!1,qI=typeof WeakSet=="function"?WeakSet:Set,_e=null;function zo(n,s){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){Tt(n,s,h)}else l.current=null}function rf(n,s,l){try{l()}catch(h){Tt(n,s,h)}}var cy=!1;function HI(n,s){if(md=_i,n=jm(),ad(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var v=0,C=-1,x=-1,$=0,ee=0,te=n,Z=null;t:for(;;){for(var ge;te!==l||f!==0&&te.nodeType!==3||(C=v+f),te!==g||h!==0&&te.nodeType!==3||(x=v+h),te.nodeType===3&&(v+=te.nodeValue.length),(ge=te.firstChild)!==null;)Z=te,te=ge;for(;;){if(te===n)break t;if(Z===l&&++$===f&&(C=v),Z===g&&++ee===h&&(x=v),(ge=te.nextSibling)!==null)break;te=Z,Z=te.parentNode}te=ge}l=C===-1||x===-1?null:{start:C,end:x}}else l=null}l=l||{start:0,end:0}}else l=null;for(gd={focusedElem:n,selectionRange:l},_i=!1,_e=s;_e!==null;)if(s=_e,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,_e=n;else for(;_e!==null;){s=_e;try{var Ee=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var Ie=Ee.memoizedProps,Ct=Ee.memoizedState,U=s.stateNode,N=U.getSnapshotBeforeUpdate(s.elementType===s.type?Ie:or(s.type,Ie),Ct);U.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){Tt(s,s.return,ie)}if(n=s.sibling,n!==null){n.return=s.return,_e=n;break}_e=s.return}return Ee=cy,cy=!1,Ee}function ul(n,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&rf(s,l,g)}f=f.next}while(f!==h)}}function uc(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&n)===n){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function sf(n){var s=n.ref;if(s!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof s=="function"?s(n):s.current=n}}function hy(n){var s=n.alternate;s!==null&&(n.alternate=null,hy(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Tr],delete s[Ja],delete s[Ed],delete s[PI],delete s[RI])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function dy(n){return n.tag===5||n.tag===3||n.tag===4}function fy(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||dy(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function of(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Bu));else if(h!==4&&(n=n.child,n!==null))for(of(n,s,l),n=n.sibling;n!==null;)of(n,s,l),n=n.sibling}function af(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(af(n,s,l),n=n.sibling;n!==null;)af(n,s,l),n=n.sibling}var $t=null,ar=!1;function Pi(n,s,l){for(l=l.child;l!==null;)py(n,s,l),l=l.sibling}function py(n,s,l){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(cs,l)}catch{}switch(l.tag){case 5:Yt||zo(l,s);case 6:var h=$t,f=ar;$t=null,Pi(n,s,l),$t=h,ar=f,$t!==null&&(ar?(n=$t,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):$t.removeChild(l.stateNode));break;case 18:$t!==null&&(ar?(n=$t,l=l.stateNode,n.nodeType===8?vd(n.parentNode,l):n.nodeType===1&&vd(n,l),nr(n)):vd($t,l.stateNode));break;case 4:h=$t,f=ar,$t=l.stateNode.containerInfo,ar=!0,Pi(n,s,l),$t=h,ar=f;break;case 0:case 11:case 14:case 15:if(!Yt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,v=g.destroy;g=g.tag,v!==void 0&&((g&2)!==0||(g&4)!==0)&&rf(l,s,v),f=f.next}while(f!==h)}Pi(n,s,l);break;case 1:if(!Yt&&(zo(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(C){Tt(l,s,C)}Pi(n,s,l);break;case 21:Pi(n,s,l);break;case 22:l.mode&1?(Yt=(h=Yt)||l.memoizedState!==null,Pi(n,s,l),Yt=h):Pi(n,s,l);break;default:Pi(n,s,l)}}function my(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new qI),s.forEach(function(h){var f=eT.bind(null,n,h);l.has(h)||(l.add(h),h.then(f,f))})}}function lr(n,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var g=n,v=s,C=v;e:for(;C!==null;){switch(C.tag){case 5:$t=C.stateNode,ar=!1;break e;case 3:$t=C.stateNode.containerInfo,ar=!0;break e;case 4:$t=C.stateNode.containerInfo,ar=!0;break e}C=C.return}if($t===null)throw Error(t(160));py(g,v,f),$t=null,ar=!1;var x=f.alternate;x!==null&&(x.return=null),f.return=null}catch($){Tt(f,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)gy(s,n),s=s.sibling}function gy(n,s){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(lr(s,n),Cr(n),h&4){try{ul(3,n,n.return),uc(3,n)}catch(Ie){Tt(n,n.return,Ie)}try{ul(5,n,n.return)}catch(Ie){Tt(n,n.return,Ie)}}break;case 1:lr(s,n),Cr(n),h&512&&l!==null&&zo(l,l.return);break;case 5:if(lr(s,n),Cr(n),h&512&&l!==null&&zo(l,l.return),n.flags&32){var f=n.stateNode;try{ae(f,"")}catch(Ie){Tt(n,n.return,Ie)}}if(h&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,v=l!==null?l.memoizedProps:g,C=n.type,x=n.updateQueue;if(n.updateQueue=null,x!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&Or(f,g),Sn(C,v);var $=Sn(C,g);for(v=0;v<x.length;v+=2){var ee=x[v],te=x[v+1];ee==="style"?ye(f,te):ee==="dangerouslySetInnerHTML"?X(f,te):ee==="children"?ae(f,te):oe(f,ee,te,$)}switch(C){case"input":mr(f,g);break;case"textarea":ui(f,g);break;case"select":var Z=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ge=g.value;ge!=null?Wn(f,!!g.multiple,ge,!1):Z!==!!g.multiple&&(g.defaultValue!=null?Wn(f,!!g.multiple,g.defaultValue,!0):Wn(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ja]=g}catch(Ie){Tt(n,n.return,Ie)}}break;case 6:if(lr(s,n),Cr(n),h&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(Ie){Tt(n,n.return,Ie)}}break;case 3:if(lr(s,n),Cr(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{nr(s.containerInfo)}catch(Ie){Tt(n,n.return,Ie)}break;case 4:lr(s,n),Cr(n);break;case 13:lr(s,n),Cr(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(cf=st())),h&4&&my(n);break;case 22:if(ee=l!==null&&l.memoizedState!==null,n.mode&1?(Yt=($=Yt)||ee,lr(s,n),Yt=$):lr(s,n),Cr(n),h&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!ee&&(n.mode&1)!==0)for(_e=n,ee=n.child;ee!==null;){for(te=_e=ee;_e!==null;){switch(Z=_e,ge=Z.child,Z.tag){case 0:case 11:case 14:case 15:ul(4,Z,Z.return);break;case 1:zo(Z,Z.return);var Ee=Z.stateNode;if(typeof Ee.componentWillUnmount=="function"){h=Z,l=Z.return;try{s=h,Ee.props=s.memoizedProps,Ee.state=s.memoizedState,Ee.componentWillUnmount()}catch(Ie){Tt(h,l,Ie)}}break;case 5:zo(Z,Z.return);break;case 22:if(Z.memoizedState!==null){vy(te);continue}}ge!==null?(ge.return=Z,_e=ge):vy(te)}ee=ee.sibling}e:for(ee=null,te=n;;){if(te.tag===5){if(ee===null){ee=te;try{f=te.stateNode,$?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=te.stateNode,x=te.memoizedProps.style,v=x!=null&&x.hasOwnProperty("display")?x.display:null,C.style.display=Qe("display",v))}catch(Ie){Tt(n,n.return,Ie)}}}else if(te.tag===6){if(ee===null)try{te.stateNode.nodeValue=$?"":te.memoizedProps}catch(Ie){Tt(n,n.return,Ie)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===n)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===n)break e;for(;te.sibling===null;){if(te.return===null||te.return===n)break e;ee===te&&(ee=null),te=te.return}ee===te&&(ee=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:lr(s,n),Cr(n),h&4&&my(n);break;case 21:break;default:lr(s,n),Cr(n)}}function Cr(n){var s=n.flags;if(s&2){try{e:{for(var l=n.return;l!==null;){if(dy(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(ae(f,""),h.flags&=-33);var g=fy(n);af(n,g,f);break;case 3:case 4:var v=h.stateNode.containerInfo,C=fy(n);of(n,C,v);break;default:throw Error(t(161))}}catch(x){Tt(n,n.return,x)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function KI(n,s,l){_e=n,yy(n)}function yy(n,s,l){for(var h=(n.mode&1)!==0;_e!==null;){var f=_e,g=f.child;if(f.tag===22&&h){var v=f.memoizedState!==null||lc;if(!v){var C=f.alternate,x=C!==null&&C.memoizedState!==null||Yt;C=lc;var $=Yt;if(lc=v,(Yt=x)&&!$)for(_e=f;_e!==null;)v=_e,x=v.child,v.tag===22&&v.memoizedState!==null?Ey(f):x!==null?(x.return=v,_e=x):Ey(f);for(;g!==null;)_e=g,yy(g),g=g.sibling;_e=f,lc=C,Yt=$}_y(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,_e=g):_y(n)}}function _y(n){for(;_e!==null;){var s=_e;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Yt||uc(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Yt)if(l===null)h.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:or(s.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&vg(s,g,h);break;case 3:var v=s.updateQueue;if(v!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}vg(s,v,l)}break;case 5:var C=s.stateNode;if(l===null&&s.flags&4){l=C;var x=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&l.focus();break;case"img":x.src&&(l.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var ee=$.memoizedState;if(ee!==null){var te=ee.dehydrated;te!==null&&nr(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Yt||s.flags&512&&sf(s)}catch(Z){Tt(s,s.return,Z)}}if(s===n){_e=null;break}if(l=s.sibling,l!==null){l.return=s.return,_e=l;break}_e=s.return}}function vy(n){for(;_e!==null;){var s=_e;if(s===n){_e=null;break}var l=s.sibling;if(l!==null){l.return=s.return,_e=l;break}_e=s.return}}function Ey(n){for(;_e!==null;){var s=_e;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{uc(4,s)}catch(x){Tt(s,l,x)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(x){Tt(s,f,x)}}var g=s.return;try{sf(s)}catch(x){Tt(s,g,x)}break;case 5:var v=s.return;try{sf(s)}catch(x){Tt(s,v,x)}}}catch(x){Tt(s,s.return,x)}if(s===n){_e=null;break}var C=s.sibling;if(C!==null){C.return=s.return,_e=C;break}_e=s.return}}var GI=Math.ceil,cc=me.ReactCurrentDispatcher,lf=me.ReactCurrentOwner,$n=me.ReactCurrentBatchConfig,Ye=0,Ft=null,Rt=null,qt=0,bn=0,jo=Ii(0),Dt=0,cl=null,Ss=0,hc=0,uf=0,hl=null,vn=null,cf=0,$o=1/0,Qr=null,dc=!1,hf=null,Ri=null,fc=!1,xi=null,pc=0,dl=0,df=null,mc=-1,gc=0;function un(){return(Ye&6)!==0?st():mc!==-1?mc:mc=st()}function ki(n){return(n.mode&1)===0?1:(Ye&2)!==0&&qt!==0?qt&-qt:kI.transition!==null?(gc===0&&(gc=ds()),gc):(n=Ke,n!==0||(n=window.event,n=n===void 0?16:Ba(n.type)),n)}function ur(n,s,l,h){if(50<dl)throw dl=0,df=null,Error(t(185));pi(n,l,h),((Ye&2)===0||n!==Ft)&&(n===Ft&&((Ye&2)===0&&(hc|=l),Dt===4&&bi(n,qt)),En(n,h),l===1&&Ye===0&&(s.mode&1)===0&&($o=st()+500,qu&&Si()))}function En(n,s){var l=n.callbackNode;Lr(n,s);var h=hs(n,n===Ft?qt:0);if(h===0)l!==null&&Oa(l),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(l!=null&&Oa(l),s===1)n.tag===0?xI(Iy.bind(null,n)):ag(Iy.bind(null,n)),AI(function(){(Ye&6)===0&&Si()}),l=null;else{switch(gi(h)){case 1:l=us;break;case 4:l=hi;break;case 16:l=Mn;break;case 536870912:l=gu;break;default:l=Mn}l=ky(l,wy.bind(null,n))}n.callbackPriority=s,n.callbackNode=l}}function wy(n,s){if(mc=-1,gc=0,(Ye&6)!==0)throw Error(t(327));var l=n.callbackNode;if(qo()&&n.callbackNode!==l)return null;var h=hs(n,n===Ft?qt:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||s)s=yc(n,h);else{s=h;var f=Ye;Ye|=2;var g=Sy();(Ft!==n||qt!==s)&&(Qr=null,$o=st()+500,Cs(n,s));do try{YI();break}catch(C){Ty(n,C)}while(!0);xd(),cc.current=g,Ye=f,Rt!==null?s=0:(Ft=null,qt=0,s=Dt)}if(s!==0){if(s===2&&(f=Cn(n),f!==0&&(h=f,s=ff(n,f))),s===1)throw l=cl,Cs(n,0),bi(n,h),En(n,st()),l;if(s===6)bi(n,h);else{if(f=n.current.alternate,(h&30)===0&&!WI(f)&&(s=yc(n,h),s===2&&(g=Cn(n),g!==0&&(h=g,s=ff(n,g))),s===1))throw l=cl,Cs(n,0),bi(n,h),En(n,st()),l;switch(n.finishedWork=f,n.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:Ps(n,vn,Qr);break;case 3:if(bi(n,h),(h&130023424)===h&&(s=cf+500-st(),10<s)){if(hs(n,0)!==0)break;if(f=n.suspendedLanes,(f&h)!==h){un(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=_d(Ps.bind(null,n,vn,Qr),s);break}Ps(n,vn,Qr);break;case 4:if(bi(n,h),(h&4194240)===h)break;for(s=n.eventTimes,f=-1;0<h;){var v=31-on(h);g=1<<v,v=s[v],v>f&&(f=v),h&=~g}if(h=f,h=st()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*GI(h/1960))-h,10<h){n.timeoutHandle=_d(Ps.bind(null,n,vn,Qr),h);break}Ps(n,vn,Qr);break;case 5:Ps(n,vn,Qr);break;default:throw Error(t(329))}}}return En(n,st()),n.callbackNode===l?wy.bind(null,n):null}function ff(n,s){var l=hl;return n.current.memoizedState.isDehydrated&&(Cs(n,s).flags|=256),n=yc(n,s),n!==2&&(s=vn,vn=l,s!==null&&pf(s)),n}function pf(n){vn===null?vn=n:vn.push.apply(vn,n)}function WI(n){for(var s=n;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],g=f.getSnapshot;f=f.value;try{if(!ir(g(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function bi(n,s){for(s&=~uf,s&=~hc,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var l=31-on(s),h=1<<l;n[l]=-1,s&=~h}}function Iy(n){if((Ye&6)!==0)throw Error(t(327));qo();var s=hs(n,0);if((s&1)===0)return En(n,st()),null;var l=yc(n,s);if(n.tag!==0&&l===2){var h=Cn(n);h!==0&&(s=h,l=ff(n,h))}if(l===1)throw l=cl,Cs(n,0),bi(n,s),En(n,st()),l;if(l===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Ps(n,vn,Qr),En(n,st()),null}function mf(n,s){var l=Ye;Ye|=1;try{return n(s)}finally{Ye=l,Ye===0&&($o=st()+500,qu&&Si())}}function As(n){xi!==null&&xi.tag===0&&(Ye&6)===0&&qo();var s=Ye;Ye|=1;var l=$n.transition,h=Ke;try{if($n.transition=null,Ke=1,n)return n()}finally{Ke=h,$n.transition=l,Ye=s,(Ye&6)===0&&Si()}}function gf(){bn=jo.current,ut(jo)}function Cs(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,SI(l)),Rt!==null)for(l=Rt.return;l!==null;){var h=l;switch(Sd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ju();break;case 3:Uo(),ut(gn),ut(Gt),Ld();break;case 5:Od(h);break;case 4:Uo();break;case 13:ut(yt);break;case 19:ut(yt);break;case 10:kd(h.type._context);break;case 22:case 23:gf()}l=l.return}if(Ft=n,Rt=n=Ni(n.current,null),qt=bn=s,Dt=0,cl=null,uf=hc=Ss=0,vn=hl=null,ws!==null){for(s=0;s<ws.length;s++)if(l=ws[s],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,g=l.pending;if(g!==null){var v=g.next;g.next=f,h.next=v}l.pending=h}ws=null}return n}function Ty(n,s){do{var l=Rt;try{if(xd(),ec.current=ic,tc){for(var h=_t.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}tc=!1}if(Ts=0,Lt=Nt=_t=null,il=!1,sl=0,lf.current=null,l===null||l.return===null){Dt=1,cl=s,Rt=null;break}e:{var g=n,v=l.return,C=l,x=s;if(s=qt,C.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var $=x,ee=C,te=ee.tag;if((ee.mode&1)===0&&(te===0||te===11||te===15)){var Z=ee.alternate;Z?(ee.updateQueue=Z.updateQueue,ee.memoizedState=Z.memoizedState,ee.lanes=Z.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var ge=Wg(v);if(ge!==null){ge.flags&=-257,Qg(ge,v,C,g,s),ge.mode&1&&Gg(g,$,s),s=ge,x=$;var Ee=s.updateQueue;if(Ee===null){var Ie=new Set;Ie.add(x),s.updateQueue=Ie}else Ee.add(x);break e}else{if((s&1)===0){Gg(g,$,s),yf();break e}x=Error(t(426))}}else if(dt&&C.mode&1){var Ct=Wg(v);if(Ct!==null){(Ct.flags&65536)===0&&(Ct.flags|=256),Qg(Ct,v,C,g,s),Pd(Bo(x,C));break e}}g=x=Bo(x,C),Dt!==4&&(Dt=2),hl===null?hl=[g]:hl.push(g),g=v;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var U=Hg(g,x,s);_g(g,U);break e;case 1:C=x;var N=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Ri===null||!Ri.has(z)))){g.flags|=65536,s&=-s,g.lanes|=s;var ie=Kg(g,C,s);_g(g,ie);break e}}g=g.return}while(g!==null)}Cy(l)}catch(Se){s=Se,Rt===l&&l!==null&&(Rt=l=l.return);continue}break}while(!0)}function Sy(){var n=cc.current;return cc.current=ic,n===null?ic:n}function yf(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),Ft===null||(Ss&268435455)===0&&(hc&268435455)===0||bi(Ft,qt)}function yc(n,s){var l=Ye;Ye|=2;var h=Sy();(Ft!==n||qt!==s)&&(Qr=null,Cs(n,s));do try{QI();break}catch(f){Ty(n,f)}while(!0);if(xd(),Ye=l,cc.current=h,Rt!==null)throw Error(t(261));return Ft=null,qt=0,Dt}function QI(){for(;Rt!==null;)Ay(Rt)}function YI(){for(;Rt!==null&&!pu();)Ay(Rt)}function Ay(n){var s=xy(n.alternate,n,bn);n.memoizedProps=n.pendingProps,s===null?Cy(n):Rt=s,lf.current=null}function Cy(n){var s=n;do{var l=s.alternate;if(n=s.return,(s.flags&32768)===0){if(l=jI(l,s,bn),l!==null){Rt=l;return}}else{if(l=$I(l,s),l!==null){l.flags&=32767,Rt=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Dt=6,Rt=null;return}}if(s=s.sibling,s!==null){Rt=s;return}Rt=s=n}while(s!==null);Dt===0&&(Dt=5)}function Ps(n,s,l){var h=Ke,f=$n.transition;try{$n.transition=null,Ke=1,XI(n,s,l,h)}finally{$n.transition=f,Ke=h}return null}function XI(n,s,l,h){do qo();while(xi!==null);if((Ye&6)!==0)throw Error(t(327));l=n.finishedWork;var f=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=l.lanes|l.childLanes;if(rt(n,g),n===Ft&&(Rt=Ft=null,qt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||fc||(fc=!0,ky(Mn,function(){return qo(),null})),g=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||g){g=$n.transition,$n.transition=null;var v=Ke;Ke=1;var C=Ye;Ye|=4,lf.current=null,HI(n,l),gy(l,n),yI(gd),_i=!!md,gd=md=null,n.current=l,KI(l),Zh(),Ye=C,Ke=v,$n.transition=g}else n.current=l;if(fc&&(fc=!1,xi=n,pc=f),g=n.pendingLanes,g===0&&(Ri=null),yu(l.stateNode),En(n,st()),s!==null)for(h=n.onRecoverableError,l=0;l<s.length;l++)f=s[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(dc)throw dc=!1,n=hf,hf=null,n;return(pc&1)!==0&&n.tag!==0&&qo(),g=n.pendingLanes,(g&1)!==0?n===df?dl++:(dl=0,df=n):dl=0,Si(),null}function qo(){if(xi!==null){var n=gi(pc),s=$n.transition,l=Ke;try{if($n.transition=null,Ke=16>n?16:n,xi===null)var h=!1;else{if(n=xi,xi=null,pc=0,(Ye&6)!==0)throw Error(t(331));var f=Ye;for(Ye|=4,_e=n.current;_e!==null;){var g=_e,v=g.child;if((_e.flags&16)!==0){var C=g.deletions;if(C!==null){for(var x=0;x<C.length;x++){var $=C[x];for(_e=$;_e!==null;){var ee=_e;switch(ee.tag){case 0:case 11:case 15:ul(8,ee,g)}var te=ee.child;if(te!==null)te.return=ee,_e=te;else for(;_e!==null;){ee=_e;var Z=ee.sibling,ge=ee.return;if(hy(ee),ee===$){_e=null;break}if(Z!==null){Z.return=ge,_e=Z;break}_e=ge}}}var Ee=g.alternate;if(Ee!==null){var Ie=Ee.child;if(Ie!==null){Ee.child=null;do{var Ct=Ie.sibling;Ie.sibling=null,Ie=Ct}while(Ie!==null)}}_e=g}}if((g.subtreeFlags&2064)!==0&&v!==null)v.return=g,_e=v;else e:for(;_e!==null;){if(g=_e,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:ul(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,_e=U;break e}_e=g.return}}var N=n.current;for(_e=N;_e!==null;){v=_e;var z=v.child;if((v.subtreeFlags&2064)!==0&&z!==null)z.return=v,_e=z;else e:for(v=N;_e!==null;){if(C=_e,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:uc(9,C)}}catch(Se){Tt(C,C.return,Se)}if(C===v){_e=null;break e}var ie=C.sibling;if(ie!==null){ie.return=C.return,_e=ie;break e}_e=C.return}}if(Ye=f,Si(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(cs,n)}catch{}h=!0}return h}finally{Ke=l,$n.transition=s}}return!1}function Py(n,s,l){s=Bo(l,s),s=Hg(n,s,1),n=Ci(n,s,1),s=un(),n!==null&&(pi(n,1,s),En(n,s))}function Tt(n,s,l){if(n.tag===3)Py(n,n,l);else for(;s!==null;){if(s.tag===3){Py(s,n,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ri===null||!Ri.has(h))){n=Bo(l,n),n=Kg(s,n,1),s=Ci(s,n,1),n=un(),s!==null&&(pi(s,1,n),En(s,n));break}}s=s.return}}function JI(n,s,l){var h=n.pingCache;h!==null&&h.delete(s),s=un(),n.pingedLanes|=n.suspendedLanes&l,Ft===n&&(qt&l)===l&&(Dt===4||Dt===3&&(qt&130023424)===qt&&500>st()-cf?Cs(n,0):uf|=l),En(n,s)}function Ry(n,s){s===0&&((n.mode&1)===0?s=1:(s=fo,fo<<=1,(fo&130023424)===0&&(fo=4194304)));var l=un();n=Kr(n,s),n!==null&&(pi(n,s,l),En(n,l))}function ZI(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),Ry(n,l)}function eT(n,s){var l=0;switch(n.tag){case 13:var h=n.stateNode,f=n.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Ry(n,l)}var xy;xy=function(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps||gn.current)_n=!0;else{if((n.lanes&l)===0&&(s.flags&128)===0)return _n=!1,zI(n,s,l);_n=(n.flags&131072)!==0}else _n=!1,dt&&(s.flags&1048576)!==0&&lg(s,Ku,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;ac(n,s),n=s.pendingProps;var f=No(s,Gt.current);Fo(s,l),f=Bd(null,s,h,n,f,l);var g=zd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,yn(h)?(g=!0,$u(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Dd(s),f.updater=sc,s.stateNode=f,f._reactInternals=s,Gd(s,h,n,l),s=Xd(null,s,h,!0,g,l)):(s.tag=0,dt&&g&&Td(s),ln(null,s,f,l),s=s.child),s;case 16:h=s.elementType;e:{switch(ac(n,s),n=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=nT(h),n=or(h,n),f){case 0:s=Yd(null,s,h,n,l);break e;case 1:s=ty(null,s,h,n,l);break e;case 11:s=Yg(null,s,h,n,l);break e;case 14:s=Xg(null,s,h,or(h.type,n),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:or(h,f),Yd(n,s,h,f,l);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:or(h,f),ty(n,s,h,f,l);case 3:e:{if(ny(s),n===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,yg(n,s),Ju(s,h,null,l);var v=s.memoizedState;if(h=v.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=Bo(Error(t(423)),s),s=ry(n,s,h,l,f);break e}else if(h!==f){f=Bo(Error(t(424)),s),s=ry(n,s,h,l,f);break e}else for(kn=wi(s.stateNode.containerInfo.firstChild),xn=s,dt=!0,sr=null,l=mg(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Oo(),h===f){s=Wr(n,s,l);break e}ln(n,s,h,l)}s=s.child}return s;case 5:return Eg(s),n===null&&Cd(s),h=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,v=f.children,yd(h,f)?v=null:g!==null&&yd(h,g)&&(s.flags|=32),ey(n,s),ln(n,s,v,l),s.child;case 6:return n===null&&Cd(s),null;case 13:return iy(n,s,l);case 4:return Vd(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=Mo(s,null,h,l):ln(n,s,h,l),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:or(h,f),Yg(n,s,h,f,l);case 7:return ln(n,s,s.pendingProps,l),s.child;case 8:return ln(n,s,s.pendingProps.children,l),s.child;case 12:return ln(n,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,v=f.value,ot(Qu,h._currentValue),h._currentValue=v,g!==null)if(ir(g.value,v)){if(g.children===f.children&&!gn.current){s=Wr(n,s,l);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var C=g.dependencies;if(C!==null){v=g.child;for(var x=C.firstContext;x!==null;){if(x.context===h){if(g.tag===1){x=Gr(-1,l&-l),x.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var ee=$.pending;ee===null?x.next=x:(x.next=ee.next,ee.next=x),$.pending=x}}g.lanes|=l,x=g.alternate,x!==null&&(x.lanes|=l),bd(g.return,l,s),C.lanes|=l;break}x=x.next}}else if(g.tag===10)v=g.type===s.type?null:g.child;else if(g.tag===18){if(v=g.return,v===null)throw Error(t(341));v.lanes|=l,C=v.alternate,C!==null&&(C.lanes|=l),bd(v,l,s),v=g.sibling}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===s){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}ln(n,s,f.children,l),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,Fo(s,l),f=zn(f),h=h(f),s.flags|=1,ln(n,s,h,l),s.child;case 14:return h=s.type,f=or(h,s.pendingProps),f=or(h.type,f),Xg(n,s,h,f,l);case 15:return Jg(n,s,s.type,s.pendingProps,l);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:or(h,f),ac(n,s),s.tag=1,yn(h)?(n=!0,$u(s)):n=!1,Fo(s,l),$g(s,h,f),Gd(s,h,f,l),Xd(null,s,h,!0,n,l);case 19:return oy(n,s,l);case 22:return Zg(n,s,l)}throw Error(t(156,s.tag))};function ky(n,s){return co(n,s)}function tT(n,s,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(n,s,l,h){return new tT(n,s,l,h)}function _f(n){return n=n.prototype,!(!n||!n.isReactComponent)}function nT(n){if(typeof n=="function")return _f(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M)return 11;if(n===mt)return 14}return 2}function Ni(n,s){var l=n.alternate;return l===null?(l=qn(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function _c(n,s,l,h,f,g){var v=2;if(h=n,typeof n=="function")_f(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case k:return Rs(l.children,f,g,s);case A:v=8,f|=8;break;case R:return n=qn(12,l,s,f|2),n.elementType=R,n.lanes=g,n;case P:return n=qn(13,l,s,f),n.elementType=P,n.lanes=g,n;case ct:return n=qn(19,l,s,f),n.elementType=ct,n.lanes=g,n;case Xe:return vc(l,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case b:v=10;break e;case D:v=9;break e;case M:v=11;break e;case mt:v=14;break e;case Ce:v=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=qn(v,l,s,f),s.elementType=n,s.type=h,s.lanes=g,s}function Rs(n,s,l,h){return n=qn(7,n,h,s),n.lanes=l,n}function vc(n,s,l,h){return n=qn(22,n,h,s),n.elementType=Xe,n.lanes=l,n.stateNode={isHidden:!1},n}function vf(n,s,l){return n=qn(6,n,null,s),n.lanes=l,n}function Ef(n,s,l){return s=qn(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function rT(n,s,l,h,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fi(0),this.expirationTimes=fi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function wf(n,s,l,h,f,g,v,C,x){return n=new rT(n,s,l,C,x),s===1?(s=1,g===!0&&(s|=8)):s=0,g=qn(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dd(g),n}function iT(n,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:h==null?null:""+h,children:n,containerInfo:s,implementation:l}}function by(n){if(!n)return Ti;n=n._reactInternals;e:{if(Xn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(yn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var l=n.type;if(yn(l))return sg(n,l,s)}return s}function Ny(n,s,l,h,f,g,v,C,x){return n=wf(l,h,!0,n,f,g,v,C,x),n.context=by(null),l=n.current,h=un(),f=ki(l),g=Gr(h,f),g.callback=s??null,Ci(l,g,f),n.current.lanes=f,pi(n,f,h),En(n,h),n}function Ec(n,s,l,h){var f=s.current,g=un(),v=ki(f);return l=by(l),s.context===null?s.context=l:s.pendingContext=l,s=Gr(g,v),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=Ci(f,s,v),n!==null&&(ur(n,f,v,g),Xu(n,f,v)),v}function wc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Dy(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function If(n,s){Dy(n,s),(n=n.alternate)&&Dy(n,s)}function sT(){return null}var Vy=typeof reportError=="function"?reportError:function(n){console.error(n)};function Tf(n){this._internalRoot=n}Ic.prototype.render=Tf.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Ec(n,s,null,null)},Ic.prototype.unmount=Tf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;As(function(){Ec(null,n,null,null)}),s[jr]=null}};function Ic(n){this._internalRoot=n}Ic.prototype.unstable_scheduleHydration=function(n){if(n){var s=Iu();n={blockedOn:null,target:n,priority:s};for(var l=0;l<vr.length&&s!==0&&s<vr[l].priority;l++);vr.splice(l,0,n),l===0&&Au(n)}};function Sf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Tc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Oy(){}function oT(n,s,l,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var $=wc(v);g.call($)}}var v=Ny(s,h,n,0,null,!1,!1,"",Oy);return n._reactRootContainer=v,n[jr]=v.current,Ya(n.nodeType===8?n.parentNode:n),As(),v}for(;f=n.lastChild;)n.removeChild(f);if(typeof h=="function"){var C=h;h=function(){var $=wc(x);C.call($)}}var x=wf(n,0,!1,null,null,!1,!1,"",Oy);return n._reactRootContainer=x,n[jr]=x.current,Ya(n.nodeType===8?n.parentNode:n),As(function(){Ec(s,x,l,h)}),x}function Sc(n,s,l,h,f){var g=l._reactRootContainer;if(g){var v=g;if(typeof f=="function"){var C=f;f=function(){var x=wc(v);C.call(x)}}Ec(s,v,n,f)}else v=oT(l,s,n,f,h);return wc(v)}Eu=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var l=di(s.pendingLanes);l!==0&&(mi(s,l|1),En(s,st()),(Ye&6)===0&&($o=st()+500,Si()))}break;case 13:As(function(){var h=Kr(n,1);if(h!==null){var f=un();ur(h,n,1,f)}}),If(n,1)}},po=function(n){if(n.tag===13){var s=Kr(n,134217728);if(s!==null){var l=un();ur(s,n,134217728,l)}If(n,134217728)}},wu=function(n){if(n.tag===13){var s=ki(n),l=Kr(n,s);if(l!==null){var h=un();ur(l,n,s,h)}If(n,s)}},Iu=function(){return Ke},Tu=function(n,s){var l=Ke;try{return Ke=n,s()}finally{Ke=l}},io=function(n,s,l){switch(s){case"input":if(mr(n,l),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==n&&h.form===n.form){var f=zu(h);if(!f)throw Error(t(90));gt(h),mr(h,f)}}}break;case"textarea":ui(n,l);break;case"select":s=l.value,s!=null&&Wn(n,!!l.multiple,s,!1)}},ss=mf,ba=As;var aT={usingClientEntryPoint:!1,Events:[Za,ko,zu,yr,ka,mf]},fl={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lT={bundleType:fl.bundleType,version:fl.version,rendererPackageName:fl.rendererPackageName,rendererConfig:fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:me.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Va(n),n===null?null:n.stateNode},findFiberByHostInstance:fl.findFiberByHostInstance||sT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ac.isDisabled&&Ac.supportsFiber)try{cs=Ac.inject(lT),An=Ac}catch{}}return wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aT,wn.createPortal=function(n,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sf(s))throw Error(t(200));return iT(n,s,null,l)},wn.createRoot=function(n,s){if(!Sf(n))throw Error(t(299));var l=!1,h="",f=Vy;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=wf(n,1,!1,null,null,l,!1,h,f),n[jr]=s.current,Ya(n.nodeType===8?n.parentNode:n),new Tf(s)},wn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Va(s),n=n===null?null:n.stateNode,n},wn.flushSync=function(n){return As(n)},wn.hydrate=function(n,s,l){if(!Tc(s))throw Error(t(200));return Sc(null,n,s,!0,l)},wn.hydrateRoot=function(n,s,l){if(!Sf(n))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,f=!1,g="",v=Vy;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),s=Ny(s,null,n,1,l??null,f,!1,g,v),n[jr]=s.current,Ya(n),h)for(n=0;n<h.length;n++)l=h[n],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new Ic(s)},wn.render=function(n,s,l){if(!Tc(s))throw Error(t(200));return Sc(null,n,s,!1,l)},wn.unmountComponentAtNode=function(n){if(!Tc(n))throw Error(t(40));return n._reactRootContainer?(As(function(){Sc(null,null,n,!1,function(){n._reactRootContainer=null,n[jr]=null})}),!0):!1},wn.unstable_batchedUpdates=mf,wn.unstable_renderSubtreeIntoContainer=function(n,s,l,h){if(!Tc(l))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Sc(n,s,l,!1,h)},wn.version="18.3.1-next-f1338f8080-20240426",wn}var zy;function pT(){if(zy)return Cf.exports;zy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Cf.exports=fT(),Cf.exports}var jy;function mT(){if(jy)return Cc;jy=1;var i=pT();return Cc.createRoot=i.createRoot,Cc.hydrateRoot=i.hydrateRoot,Cc}var gT=mT();const yT=Bv(gT),_T=()=>{};var $y={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},vT=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=i[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=i[t++],u=i[t++],d=i[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const a=i[t++],u=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},$v={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const a=i[o],u=o+1<i.length,d=u?i[o+1]:0,p=o+2<i.length,y=p?i[o+2]:0,E=a>>2,T=(a&3)<<4|d>>4;let S=(d&15)<<2|y>>6,O=y&63;p||(O=64,u||(S=64)),r.push(t[E],t[T],t[S],t[O])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(jv(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):vT(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const a=t[i.charAt(o++)],d=o<i.length?t[i.charAt(o)]:0;++o;const y=o<i.length?t[i.charAt(o)]:64;++o;const T=o<i.length?t[i.charAt(o)]:64;if(++o,a==null||d==null||y==null||T==null)throw new ET;const S=a<<2|d>>4;if(r.push(S),y!==64){const O=d<<4&240|y>>2;if(r.push(O),T!==64){const j=y<<6&192|T;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class ET extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wT=function(i){const e=jv(i);return $v.encodeByteArray(e,!0)},Xc=function(i){return wT(i).replace(/\./g,"")},qv=function(i){try{return $v.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=()=>Hv().__FIREBASE_DEFAULTS__,TT=()=>{if(typeof process>"u"||typeof $y>"u")return;const i=$y.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},ST=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&qv(i[1]);return e&&JSON.parse(e)},Ih=()=>{try{return _T()||IT()||TT()||ST()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Kv=i=>{var e,t;return(t=(e=Ih())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},AT=i=>{const e=Kv(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Gv=()=>{var i;return(i=Ih())===null||i===void 0?void 0:i.config},Wv=i=>{var e;return(e=Ih())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(i){return i.endsWith(".cloudworkstations.dev")}async function Qv(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,a=i.sub||i.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Xc(JSON.stringify(t)),Xc(JSON.stringify(u)),""].join(".")}const Cl={};function RT(){const i={prod:[],emulator:[]};for(const e of Object.keys(Cl))Cl[e]?i.emulator.push(e):i.prod.push(e);return i}function xT(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let qy=!1;function Yv(i,e){if(typeof window>"u"||typeof document>"u"||!Ta(window.location.host)||Cl[i]===e||Cl[i]||qy)return;Cl[i]=e;function t(S){return`__firebase__banner__${S}`}const r="__firebase__banner",a=RT().prod.length>0;function u(){const S=document.getElementById(r);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{qy=!0,u()},S}function E(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=xT(r),O=t("text"),j=document.getElementById(O)||document.createElement("span"),K=t("learnmore"),q=document.getElementById(K)||document.createElement("a"),G=t("preprendIcon"),J=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const oe=S.element;d(oe),E(q,K);const me=y();p(J,G),oe.append(J,j,q,me),document.body.appendChild(oe)}a?(j.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function Xv(){var i;const e=(i=Ih())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function DT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VT(){const i=Vt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Jv(){return!Xv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zv(){return!Xv()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function eE(){try{return typeof indexedDB=="object"}catch{return!1}}function OT(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="FirebaseError";class ii extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=MT,Object.setPrototypeOf(this,ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zl.prototype.create)}}class Zl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?LT(a,r):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new ii(o,d,r)}}function LT(i,e){return i.replace(FT,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const FT=/\{\$([^}]+)}/g;function UT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function $s(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=i[o],u=e[o];if(Hy(a)&&Hy(u)){if(!$s(a,u))return!1}else if(a!==u)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Hy(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function BT(i,e){const t=new zT(i,e);return t.subscribe.bind(t)}class zT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");jT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=xf),o.error===void 0&&(o.error=xf),o.complete===void 0&&(o.complete=xf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jT(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function xf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(i){return i&&i._delegate?i._delegate:i}class qs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new CT;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HT(e))try{this.getOrInitializeService({instanceIdentifier:ks})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ks){return this.instances.has(e)}getOptions(e=ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&u.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qT(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ks){return this.component?this.component.multipleInstances?e:ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qT(i){return i===ks?void 0:i}function HT(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $T(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})($e||($e={}));const GT={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},WT=$e.INFO,QT={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},YT=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=QT[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pp{constructor(e){this.name=e,this._logLevel=WT,this._logHandler=YT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const XT=(i,e)=>e.some(t=>i instanceof t);let Ky,Gy;function JT(){return Ky||(Ky=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZT(){return Gy||(Gy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tE=new WeakMap,qf=new WeakMap,nE=new WeakMap,kf=new WeakMap,Rp=new WeakMap;function e1(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",a),i.removeEventListener("error",u)},a=()=>{t($i(i.result)),o()},u=()=>{r(i.error),o()};i.addEventListener("success",a),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&tE.set(t,i)}).catch(()=>{}),Rp.set(e,i),e}function t1(i){if(qf.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",a),i.removeEventListener("error",u),i.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",a),i.addEventListener("error",u),i.addEventListener("abort",u)});qf.set(i,e)}let Hf={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return qf.get(i);if(e==="objectStoreNames")return i.objectStoreNames||nE.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $i(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function n1(i){Hf=i(Hf)}function r1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(bf(this),e,...t);return nE.set(r,e.sort?e.sort():[e]),$i(r)}:ZT().includes(i)?function(...e){return i.apply(bf(this),e),$i(tE.get(this))}:function(...e){return $i(i.apply(bf(this),e))}}function i1(i){return typeof i=="function"?r1(i):(i instanceof IDBTransaction&&t1(i),XT(i,JT())?new Proxy(i,Hf):i)}function $i(i){if(i instanceof IDBRequest)return e1(i);if(kf.has(i))return kf.get(i);const e=i1(i);return e!==i&&(kf.set(i,e),Rp.set(e,i)),e}const bf=i=>Rp.get(i);function s1(i,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const u=indexedDB.open(i,e),d=$i(u);return r&&u.addEventListener("upgradeneeded",p=>{r($i(u.result),p.oldVersion,p.newVersion,$i(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const o1=["get","getKey","getAll","getAllKeys","count"],a1=["put","add","delete","clear"],Nf=new Map;function Wy(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Nf.get(e))return Nf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=a1.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||o1.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let y=p.store;return r&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return Nf.set(e,a),a}n1(i=>({...i,get:(e,t,r)=>Wy(e,t)||i.get(e,t,r),has:(e,t)=>!!Wy(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(u1(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function u1(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kf="@firebase/app",Qy="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new Pp("@firebase/app"),c1="@firebase/app-compat",h1="@firebase/analytics-compat",d1="@firebase/analytics",f1="@firebase/app-check-compat",p1="@firebase/app-check",m1="@firebase/auth",g1="@firebase/auth-compat",y1="@firebase/database",_1="@firebase/data-connect",v1="@firebase/database-compat",E1="@firebase/functions",w1="@firebase/functions-compat",I1="@firebase/installations",T1="@firebase/installations-compat",S1="@firebase/messaging",A1="@firebase/messaging-compat",C1="@firebase/performance",P1="@firebase/performance-compat",R1="@firebase/remote-config",x1="@firebase/remote-config-compat",k1="@firebase/storage",b1="@firebase/storage-compat",N1="@firebase/firestore",D1="@firebase/ai",V1="@firebase/firestore-compat",O1="firebase",M1="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="[DEFAULT]",L1={[Kf]:"fire-core",[c1]:"fire-core-compat",[d1]:"fire-analytics",[h1]:"fire-analytics-compat",[p1]:"fire-app-check",[f1]:"fire-app-check-compat",[m1]:"fire-auth",[g1]:"fire-auth-compat",[y1]:"fire-rtdb",[_1]:"fire-data-connect",[v1]:"fire-rtdb-compat",[E1]:"fire-fn",[w1]:"fire-fn-compat",[I1]:"fire-iid",[T1]:"fire-iid-compat",[S1]:"fire-fcm",[A1]:"fire-fcm-compat",[C1]:"fire-perf",[P1]:"fire-perf-compat",[R1]:"fire-rc",[x1]:"fire-rc-compat",[k1]:"fire-gcs",[b1]:"fire-gcs-compat",[N1]:"fire-fst",[V1]:"fire-fst-compat",[D1]:"fire-vertex","fire-js":"fire-js",[O1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new Map,F1=new Map,Wf=new Map;function Yy(i,e){try{i.container.addComponent(e)}catch(t){ei.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function aa(i){const e=i.name;if(Wf.has(e))return ei.debug(`There were multiple attempts to register component ${e}.`),!1;Wf.set(e,i);for(const t of Jc.values())Yy(t,i);for(const t of F1.values())Yy(t,i);return!0}function xp(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function hr(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qi=new Zl("app","Firebase",U1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=M1;function rE(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gf,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw qi.create("bad-app-name",{appName:String(o)});if(t||(t=Gv()),!t)throw qi.create("no-options");const a=Jc.get(o);if(a){if($s(t,a.options)&&$s(r,a.config))return a;throw qi.create("duplicate-app",{appName:o})}const u=new KT(o);for(const p of Wf.values())u.addComponent(p);const d=new B1(t,r,u);return Jc.set(o,d),d}function iE(i=Gf){const e=Jc.get(i);if(!e&&i===Gf&&Gv())return rE();if(!e)throw qi.create("no-app",{appName:i});return e}function Hi(i,e,t){var r;let o=(r=L1[i])!==null&&r!==void 0?r:i;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ei.warn(d.join(" "));return}aa(new qs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="firebase-heartbeat-database",j1=1,Ll="firebase-heartbeat-store";let Df=null;function sE(){return Df||(Df=s1(z1,j1,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Ll)}catch(t){console.warn(t)}}}}).catch(i=>{throw qi.create("idb-open",{originalErrorMessage:i.message})})),Df}async function $1(i){try{const t=(await sE()).transaction(Ll),r=await t.objectStore(Ll).get(oE(i));return await t.done,r}catch(e){if(e instanceof ii)ei.warn(e.message);else{const t=qi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ei.warn(t.message)}}}async function Xy(i,e){try{const r=(await sE()).transaction(Ll,"readwrite");await r.objectStore(Ll).put(e,oE(i)),await r.done}catch(t){if(t instanceof ii)ei.warn(t.message);else{const r=qi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ei.warn(r.message)}}}function oE(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=1024,H1=30;class K1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new W1(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Jy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>H1){const u=Q1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ei.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Jy(),{heartbeatsToSend:r,unsentEntries:o}=G1(this._heartbeatsCache.heartbeats),a=Xc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ei.warn(t),""}}}function Jy(){return new Date().toISOString().substring(0,10)}function G1(i,e=q1){const t=[];let r=i.slice();for(const o of i){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),Zy(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Zy(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class W1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eE()?OT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await $1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Zy(i){return Xc(JSON.stringify({version:2,heartbeats:i})).length}function Q1(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(i){aa(new qs("platform-logger",e=>new l1(e),"PRIVATE")),aa(new qs("heartbeat",e=>new K1(e),"PRIVATE")),Hi(Kf,Qy,i),Hi(Kf,Qy,"esm2017"),Hi("fire-js","")}Y1("");var e_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ki,aE;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,A){function R(){}R.prototype=A.prototype,k.D=A.prototype,k.prototype=new R,k.prototype.constructor=k,k.C=function(b,D,M){for(var P=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)P[ct-2]=arguments[ct];return A.prototype[D].apply(b,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,A,R){R||(R=0);var b=Array(16);if(typeof A=="string")for(var D=0;16>D;++D)b[D]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(D=0;16>D;++D)b[D]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=k.g[0],R=k.g[1],D=k.g[2];var M=k.g[3],P=A+(M^R&(D^M))+b[0]+3614090360&4294967295;A=R+(P<<7&4294967295|P>>>25),P=M+(D^A&(R^D))+b[1]+3905402710&4294967295,M=A+(P<<12&4294967295|P>>>20),P=D+(R^M&(A^R))+b[2]+606105819&4294967295,D=M+(P<<17&4294967295|P>>>15),P=R+(A^D&(M^A))+b[3]+3250441966&4294967295,R=D+(P<<22&4294967295|P>>>10),P=A+(M^R&(D^M))+b[4]+4118548399&4294967295,A=R+(P<<7&4294967295|P>>>25),P=M+(D^A&(R^D))+b[5]+1200080426&4294967295,M=A+(P<<12&4294967295|P>>>20),P=D+(R^M&(A^R))+b[6]+2821735955&4294967295,D=M+(P<<17&4294967295|P>>>15),P=R+(A^D&(M^A))+b[7]+4249261313&4294967295,R=D+(P<<22&4294967295|P>>>10),P=A+(M^R&(D^M))+b[8]+1770035416&4294967295,A=R+(P<<7&4294967295|P>>>25),P=M+(D^A&(R^D))+b[9]+2336552879&4294967295,M=A+(P<<12&4294967295|P>>>20),P=D+(R^M&(A^R))+b[10]+4294925233&4294967295,D=M+(P<<17&4294967295|P>>>15),P=R+(A^D&(M^A))+b[11]+2304563134&4294967295,R=D+(P<<22&4294967295|P>>>10),P=A+(M^R&(D^M))+b[12]+1804603682&4294967295,A=R+(P<<7&4294967295|P>>>25),P=M+(D^A&(R^D))+b[13]+4254626195&4294967295,M=A+(P<<12&4294967295|P>>>20),P=D+(R^M&(A^R))+b[14]+2792965006&4294967295,D=M+(P<<17&4294967295|P>>>15),P=R+(A^D&(M^A))+b[15]+1236535329&4294967295,R=D+(P<<22&4294967295|P>>>10),P=A+(D^M&(R^D))+b[1]+4129170786&4294967295,A=R+(P<<5&4294967295|P>>>27),P=M+(R^D&(A^R))+b[6]+3225465664&4294967295,M=A+(P<<9&4294967295|P>>>23),P=D+(A^R&(M^A))+b[11]+643717713&4294967295,D=M+(P<<14&4294967295|P>>>18),P=R+(M^A&(D^M))+b[0]+3921069994&4294967295,R=D+(P<<20&4294967295|P>>>12),P=A+(D^M&(R^D))+b[5]+3593408605&4294967295,A=R+(P<<5&4294967295|P>>>27),P=M+(R^D&(A^R))+b[10]+38016083&4294967295,M=A+(P<<9&4294967295|P>>>23),P=D+(A^R&(M^A))+b[15]+3634488961&4294967295,D=M+(P<<14&4294967295|P>>>18),P=R+(M^A&(D^M))+b[4]+3889429448&4294967295,R=D+(P<<20&4294967295|P>>>12),P=A+(D^M&(R^D))+b[9]+568446438&4294967295,A=R+(P<<5&4294967295|P>>>27),P=M+(R^D&(A^R))+b[14]+3275163606&4294967295,M=A+(P<<9&4294967295|P>>>23),P=D+(A^R&(M^A))+b[3]+4107603335&4294967295,D=M+(P<<14&4294967295|P>>>18),P=R+(M^A&(D^M))+b[8]+1163531501&4294967295,R=D+(P<<20&4294967295|P>>>12),P=A+(D^M&(R^D))+b[13]+2850285829&4294967295,A=R+(P<<5&4294967295|P>>>27),P=M+(R^D&(A^R))+b[2]+4243563512&4294967295,M=A+(P<<9&4294967295|P>>>23),P=D+(A^R&(M^A))+b[7]+1735328473&4294967295,D=M+(P<<14&4294967295|P>>>18),P=R+(M^A&(D^M))+b[12]+2368359562&4294967295,R=D+(P<<20&4294967295|P>>>12),P=A+(R^D^M)+b[5]+4294588738&4294967295,A=R+(P<<4&4294967295|P>>>28),P=M+(A^R^D)+b[8]+2272392833&4294967295,M=A+(P<<11&4294967295|P>>>21),P=D+(M^A^R)+b[11]+1839030562&4294967295,D=M+(P<<16&4294967295|P>>>16),P=R+(D^M^A)+b[14]+4259657740&4294967295,R=D+(P<<23&4294967295|P>>>9),P=A+(R^D^M)+b[1]+2763975236&4294967295,A=R+(P<<4&4294967295|P>>>28),P=M+(A^R^D)+b[4]+1272893353&4294967295,M=A+(P<<11&4294967295|P>>>21),P=D+(M^A^R)+b[7]+4139469664&4294967295,D=M+(P<<16&4294967295|P>>>16),P=R+(D^M^A)+b[10]+3200236656&4294967295,R=D+(P<<23&4294967295|P>>>9),P=A+(R^D^M)+b[13]+681279174&4294967295,A=R+(P<<4&4294967295|P>>>28),P=M+(A^R^D)+b[0]+3936430074&4294967295,M=A+(P<<11&4294967295|P>>>21),P=D+(M^A^R)+b[3]+3572445317&4294967295,D=M+(P<<16&4294967295|P>>>16),P=R+(D^M^A)+b[6]+76029189&4294967295,R=D+(P<<23&4294967295|P>>>9),P=A+(R^D^M)+b[9]+3654602809&4294967295,A=R+(P<<4&4294967295|P>>>28),P=M+(A^R^D)+b[12]+3873151461&4294967295,M=A+(P<<11&4294967295|P>>>21),P=D+(M^A^R)+b[15]+530742520&4294967295,D=M+(P<<16&4294967295|P>>>16),P=R+(D^M^A)+b[2]+3299628645&4294967295,R=D+(P<<23&4294967295|P>>>9),P=A+(D^(R|~M))+b[0]+4096336452&4294967295,A=R+(P<<6&4294967295|P>>>26),P=M+(R^(A|~D))+b[7]+1126891415&4294967295,M=A+(P<<10&4294967295|P>>>22),P=D+(A^(M|~R))+b[14]+2878612391&4294967295,D=M+(P<<15&4294967295|P>>>17),P=R+(M^(D|~A))+b[5]+4237533241&4294967295,R=D+(P<<21&4294967295|P>>>11),P=A+(D^(R|~M))+b[12]+1700485571&4294967295,A=R+(P<<6&4294967295|P>>>26),P=M+(R^(A|~D))+b[3]+2399980690&4294967295,M=A+(P<<10&4294967295|P>>>22),P=D+(A^(M|~R))+b[10]+4293915773&4294967295,D=M+(P<<15&4294967295|P>>>17),P=R+(M^(D|~A))+b[1]+2240044497&4294967295,R=D+(P<<21&4294967295|P>>>11),P=A+(D^(R|~M))+b[8]+1873313359&4294967295,A=R+(P<<6&4294967295|P>>>26),P=M+(R^(A|~D))+b[15]+4264355552&4294967295,M=A+(P<<10&4294967295|P>>>22),P=D+(A^(M|~R))+b[6]+2734768916&4294967295,D=M+(P<<15&4294967295|P>>>17),P=R+(M^(D|~A))+b[13]+1309151649&4294967295,R=D+(P<<21&4294967295|P>>>11),P=A+(D^(R|~M))+b[4]+4149444226&4294967295,A=R+(P<<6&4294967295|P>>>26),P=M+(R^(A|~D))+b[11]+3174756917&4294967295,M=A+(P<<10&4294967295|P>>>22),P=D+(A^(M|~R))+b[2]+718787259&4294967295,D=M+(P<<15&4294967295|P>>>17),P=R+(M^(D|~A))+b[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(D+(P<<21&4294967295|P>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+M&4294967295}r.prototype.u=function(k,A){A===void 0&&(A=k.length);for(var R=A-this.blockSize,b=this.B,D=this.h,M=0;M<A;){if(D==0)for(;M<=R;)o(this,k,M),M+=this.blockSize;if(typeof k=="string"){for(;M<A;)if(b[D++]=k.charCodeAt(M++),D==this.blockSize){o(this,b),D=0;break}}else for(;M<A;)if(b[D++]=k[M++],D==this.blockSize){o(this,b),D=0;break}}this.h=D,this.o+=A},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;var R=8*this.o;for(A=k.length-8;A<k.length;++A)k[A]=R&255,R/=256;for(this.u(k),k=Array(16),A=R=0;4>A;++A)for(var b=0;32>b;b+=8)k[R++]=this.g[A]>>>b&255;return k};function a(k,A){var R=d;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=A(k)}function u(k,A){this.h=A;for(var R=[],b=!0,D=k.length-1;0<=D;D--){var M=k[D]|0;b&&M==A||(R[D]=M,b=!1)}this.g=R}var d={};function p(k){return-128<=k&&128>k?a(k,function(A){return new u([A|0],0>A?-1:0)}):new u([k|0],0>k?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return T;if(0>k)return q(y(-k));for(var A=[],R=1,b=0;k>=R;b++)A[b]=k/R|0,R*=4294967296;return new u(A,0)}function E(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return q(E(k.substring(1),A));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(A,8)),b=T,D=0;D<k.length;D+=8){var M=Math.min(8,k.length-D),P=parseInt(k.substring(D,D+M),A);8>M?(M=y(Math.pow(A,M)),b=b.j(M).add(y(P))):(b=b.j(R),b=b.add(y(P)))}return b}var T=p(0),S=p(1),O=p(16777216);i=u.prototype,i.m=function(){if(K(this))return-q(this).m();for(var k=0,A=1,R=0;R<this.g.length;R++){var b=this.i(R);k+=(0<=b?b:4294967296+b)*A,A*=4294967296}return k},i.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(j(this))return"0";if(K(this))return"-"+q(this).toString(k);for(var A=y(Math.pow(k,6)),R=this,b="";;){var D=me(R,A).g;R=G(R,D.j(A));var M=((0<R.g.length?R.g[0]:R.h)>>>0).toString(k);if(R=D,j(R))return M+b;for(;6>M.length;)M="0"+M;b=M+b}},i.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function j(k){if(k.h!=0)return!1;for(var A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function K(k){return k.h==-1}i.l=function(k){return k=G(this,k),K(k)?-1:j(k)?0:1};function q(k){for(var A=k.g.length,R=[],b=0;b<A;b++)R[b]=~k.g[b];return new u(R,~k.h).add(S)}i.abs=function(){return K(this)?q(this):this},i.add=function(k){for(var A=Math.max(this.g.length,k.g.length),R=[],b=0,D=0;D<=A;D++){var M=b+(this.i(D)&65535)+(k.i(D)&65535),P=(M>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);b=P>>>16,M&=65535,P&=65535,R[D]=P<<16|M}return new u(R,R[R.length-1]&-2147483648?-1:0)};function G(k,A){return k.add(q(A))}i.j=function(k){if(j(this)||j(k))return T;if(K(this))return K(k)?q(this).j(q(k)):q(q(this).j(k));if(K(k))return q(this.j(q(k)));if(0>this.l(O)&&0>k.l(O))return y(this.m()*k.m());for(var A=this.g.length+k.g.length,R=[],b=0;b<2*A;b++)R[b]=0;for(b=0;b<this.g.length;b++)for(var D=0;D<k.g.length;D++){var M=this.i(b)>>>16,P=this.i(b)&65535,ct=k.i(D)>>>16,mt=k.i(D)&65535;R[2*b+2*D]+=P*mt,J(R,2*b+2*D),R[2*b+2*D+1]+=M*mt,J(R,2*b+2*D+1),R[2*b+2*D+1]+=P*ct,J(R,2*b+2*D+1),R[2*b+2*D+2]+=M*ct,J(R,2*b+2*D+2)}for(b=0;b<A;b++)R[b]=R[2*b+1]<<16|R[2*b];for(b=A;b<2*A;b++)R[b]=0;return new u(R,0)};function J(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function oe(k,A){this.g=k,this.h=A}function me(k,A){if(j(A))throw Error("division by zero");if(j(k))return new oe(T,T);if(K(k))return A=me(q(k),A),new oe(q(A.g),q(A.h));if(K(A))return A=me(k,q(A)),new oe(q(A.g),A.h);if(30<k.g.length){if(K(k)||K(A))throw Error("slowDivide_ only works with positive integers.");for(var R=S,b=A;0>=b.l(k);)R=ke(R),b=ke(b);var D=ue(R,1),M=ue(b,1);for(b=ue(b,2),R=ue(R,2);!j(b);){var P=M.add(b);0>=P.l(k)&&(D=D.add(R),M=P),b=ue(b,1),R=ue(R,1)}return A=G(k,D.j(A)),new oe(D,A)}for(D=T;0<=k.l(A);){for(R=Math.max(1,Math.floor(k.m()/A.m())),b=Math.ceil(Math.log(R)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),M=y(R),P=M.j(A);K(P)||0<P.l(k);)R-=b,M=y(R),P=M.j(A);j(M)&&(M=S),D=D.add(M),k=G(k,P)}return new oe(D,k)}i.A=function(k){return me(this,k).h},i.and=function(k){for(var A=Math.max(this.g.length,k.g.length),R=[],b=0;b<A;b++)R[b]=this.i(b)&k.i(b);return new u(R,this.h&k.h)},i.or=function(k){for(var A=Math.max(this.g.length,k.g.length),R=[],b=0;b<A;b++)R[b]=this.i(b)|k.i(b);return new u(R,this.h|k.h)},i.xor=function(k){for(var A=Math.max(this.g.length,k.g.length),R=[],b=0;b<A;b++)R[b]=this.i(b)^k.i(b);return new u(R,this.h^k.h)};function ke(k){for(var A=k.g.length+1,R=[],b=0;b<A;b++)R[b]=k.i(b)<<1|k.i(b-1)>>>31;return new u(R,k.h)}function ue(k,A){var R=A>>5;A%=32;for(var b=k.g.length-R,D=[],M=0;M<b;M++)D[M]=0<A?k.i(M+R)>>>A|k.i(M+R+1)<<32-A:k.i(M+R);return new u(D,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,aE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=E,Ki=u}).apply(typeof e_<"u"?e_:typeof self<"u"?self:typeof window<"u"?window:{});var Pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lE,El,uE,Oc,Qf,cE,hE,dE;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,_){return c==Array.prototype||c==Object.prototype||(c[m]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pc=="object"&&Pc];for(var m=0;m<c.length;++m){var _=c[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function o(c,m){if(m)e:{var _=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var L=c[I];if(!(L in _))break e;_=_[L]}c=c[c.length-1],I=_[c],m=m(I),m!=I&&m!=null&&e(_,c,{configurable:!0,writable:!0,value:m})}}function a(c,m){c instanceof String&&(c+="");var _=0,I=!1,L={next:function(){if(!I&&_<c.length){var H=_++;return{value:m(H,c[H]),done:!1}}return I=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return a(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function p(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function y(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function E(c,m,_){return c.call.apply(c.bind,arguments)}function T(c,m,_){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,I),c.apply(m,L)}}return function(){return c.apply(m,arguments)}}function S(c,m,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:T,S.apply(null,arguments)}function O(c,m){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function j(c,m){function _(){}_.prototype=m.prototype,c.aa=m.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(I,L,H){for(var le=Array(arguments.length-2),et=2;et<arguments.length;et++)le[et-2]=arguments[et];return m.prototype[L].apply(I,le)}}function K(c){const m=c.length;if(0<m){const _=Array(m);for(let I=0;I<m;I++)_[I]=c[I];return _}return[]}function q(c,m){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(p(I)){const L=c.length||0,H=I.length||0;c.length=L+H;for(let le=0;le<H;le++)c[L+le]=I[le]}else c.push(I)}}class G{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function J(c){return/^[\s\xa0]*$/.test(c)}function oe(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function me(c){return me[" "](c),c}me[" "]=function(){};var ke=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function ue(c,m,_){for(const I in c)m.call(_,c[I],I,c)}function k(c,m){for(const _ in c)m.call(void 0,c[_],_,c)}function A(c){const m={};for(const _ in c)m[_]=c[_];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,m){let _,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(_ in I)c[_]=I[_];for(let H=0;H<R.length;H++)_=R[H],Object.prototype.hasOwnProperty.call(I,_)&&(c[_]=I[_])}}function D(c){var m=1;c=c.split(":");const _=[];for(;0<m&&c.length;)_.push(c.shift()),m--;return c.length&&_.push(c.join(":")),_}function M(c){d.setTimeout(()=>{throw c},0)}function P(){var c=Pe;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class ct{constructor(){this.h=this.g=null}add(m,_){const I=mt.get();I.set(m,_),this.h?this.h.next=I:this.g=I,this.h=I}}var mt=new G(()=>new Ce,c=>c.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Xe,se=!1,Pe=new ct,de=()=>{const c=d.Promise.resolve(void 0);Xe=()=>{c.then(V)}};var V=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(_){M(_)}var m=mt;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}se=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var Ue=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};d.addEventListener("test",_,m),d.removeEventListener("test",_,m)}catch{}return c}();function Be(c,m){if(Te.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(ke){e:{try{me(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else _=="mouseover"?m=c.fromElement:_=="mouseout"&&(m=c.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Y[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Be.aa.h.call(this)}}j(Be,Te);var Y={2:"touch",3:"pen",4:"mouse"};Be.prototype.h=function(){Be.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),fe=0;function ve(c,m,_,I,L){this.listener=c,this.proxy=null,this.src=m,this.type=_,this.capture=!!I,this.ha=L,this.key=++fe,this.da=this.fa=!1}function Ve(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function it(c){this.src=c,this.g={},this.h=0}it.prototype.add=function(c,m,_,I,L){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var le=at(c,m,I,L);return-1<le?(m=c[le],_||(m.fa=!1)):(m=new ve(m,this.src,H,!!I,L),m.fa=_,c.push(m)),m};function gt(c,m){var _=m.type;if(_ in c.g){var I=c.g[_],L=Array.prototype.indexOf.call(I,m,void 0),H;(H=0<=L)&&Array.prototype.splice.call(I,L,1),H&&(Ve(m),c.g[_].length==0&&(delete c.g[_],c.h--))}}function at(c,m,_,I){for(var L=0;L<c.length;++L){var H=c[L];if(!H.da&&H.listener==m&&H.capture==!!_&&H.ha==I)return L}return-1}var fn="closure_lm_"+(1e6*Math.random()|0),pr={};function Or(c,m,_,I,L){if(Array.isArray(m)){for(var H=0;H<m.length;H++)Or(c,m[H],_,I,L);return null}return _=ci(_),c&&c[ne]?c.K(m,_,y(I)?!!I.capture:!1,L):mr(c,m,_,!1,I,L)}function mr(c,m,_,I,L,H){if(!m)throw Error("Invalid event type");var le=y(L)?!!L.capture:!!L,et=li(c);if(et||(c[fn]=et=new it(c)),_=et.add(m,_,I,le,H),_.proxy)return _;if(I=ns(),_.proxy=I,I.src=c,I.listener=_,c.addEventListener)Ue||(L=le),L===void 0&&(L=!1),c.addEventListener(m.toString(),I,L);else if(c.attachEvent)c.attachEvent(Wn(m.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ns(){function c(_){return m.call(c.src,c.listener,_)}const m=rs;return c}function ai(c,m,_,I,L){if(Array.isArray(m))for(var H=0;H<m.length;H++)ai(c,m[H],_,I,L);else I=y(I)?!!I.capture:!!I,_=ci(_),c&&c[ne]?(c=c.i,m=String(m).toString(),m in c.g&&(H=c.g[m],_=at(H,_,I,L),-1<_&&(Ve(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete c.g[m],c.h--)))):c&&(c=li(c))&&(m=c.g[m.toString()],c=-1,m&&(c=at(m,_,I,L)),(_=-1<c?m[c]:null)&&Tn(_))}function Tn(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[ne])gt(m.i,c);else{var _=c.type,I=c.proxy;m.removeEventListener?m.removeEventListener(_,I,c.capture):m.detachEvent?m.detachEvent(Wn(_),I):m.addListener&&m.removeListener&&m.removeListener(I),(_=li(m))?(gt(_,c),_.h==0&&(_.src=null,m[fn]=null)):Ve(c)}}}function Wn(c){return c in pr?pr[c]:pr[c]="on"+c}function rs(c,m){if(c.da)c=!0;else{m=new Be(m,this);var _=c.listener,I=c.ha||c.src;c.fa&&Tn(c),c=_.call(I,m)}return c}function li(c){return c=c[fn],c instanceof it?c:null}var ui="__closure_events_fn_"+(1e9*Math.random()>>>0);function ci(c){return typeof c=="function"?c:(c[ui]||(c[ui]=function(m){return c.handleEvent(m)}),c[ui])}function wt(){Q.call(this),this.i=new it(this),this.M=this,this.F=null}j(wt,Q),wt.prototype[ne]=!0,wt.prototype.removeEventListener=function(c,m,_,I){ai(this,c,m,_,I)};function It(c,m){var _,I=c.F;if(I)for(_=[];I;I=I.F)_.push(I);if(c=c.M,I=m.type||m,typeof m=="string")m=new Te(m,c);else if(m instanceof Te)m.target=m.target||c;else{var L=m;m=new Te(I,c),b(m,L)}if(L=!0,_)for(var H=_.length-1;0<=H;H--){var le=m.g=_[H];L=B(le,I,!0,m)&&L}if(le=m.g=c,L=B(le,I,!0,m)&&L,L=B(le,I,!1,m)&&L,_)for(H=0;H<_.length;H++)le=m.g=_[H],L=B(le,I,!1,m)&&L}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var _=c.g[m],I=0;I<_.length;I++)Ve(_[I]);delete c.g[m],c.h--}}this.F=null},wt.prototype.K=function(c,m,_,I){return this.i.add(String(c),m,!1,_,I)},wt.prototype.L=function(c,m,_,I){return this.i.add(String(c),m,!0,_,I)};function B(c,m,_,I){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,H=0;H<m.length;++H){var le=m[H];if(le&&!le.da&&le.capture==_){var et=le.listener,bt=le.ha||le.src;le.fa&&gt(c.i,le),L=et.call(bt,I)!==!1&&L}}return L&&!I.defaultPrevented}function X(c,m,_){if(typeof c=="function")_&&(c=S(c,_));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(c,m||0)}function ae(c){c.g=X(()=>{c.g=null,c.i&&(c.i=!1,ae(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class pe extends Q{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Re(c){Q.call(this),this.h=c,this.g={}}j(Re,Q);var Qe=[];function ye(c){ue(c.g,function(m,_){this.g.hasOwnProperty(_)&&Tn(m)},c),c.g={}}Re.prototype.N=function(){Re.aa.N.call(this),ye(this)},Re.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var He=d.JSON.stringify,sn=d.JSON.parse,Sn=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function is(){}is.prototype.h=null;function ro(c){return c.h||(c.h=c.i())}function io(){}var On={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gr(){Te.call(this,"d")}j(gr,Te);function so(){Te.call(this,"c")}j(so,Te);var yr={},ka=null;function ss(){return ka=ka||new wt}yr.La="serverreachability";function ba(c){Te.call(this,yr.La,c)}j(ba,Te);function Mr(c){const m=ss();It(m,new ba(m))}yr.STAT_EVENT="statevent";function Na(c,m){Te.call(this,yr.STAT_EVENT,c),this.stat=m}j(Na,Te);function At(c){const m=ss();It(m,new Na(m,c))}yr.Ma="timingevent";function oo(c,m){Te.call(this,yr.Ma,c),this.size=m}j(oo,Te);function Qn(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},m)}function os(){this.g=!0}os.prototype.xa=function(){this.g=!1};function as(c,m,_,I,L,H){c.info(function(){if(c.g)if(H)for(var le="",et=H.split("&"),bt=0;bt<et.length;bt++){var Ge=et[bt].split("=");if(1<Ge.length){var Mt=Ge[0];Ge=Ge[1];var Pt=Mt.split("_");le=2<=Pt.length&&Pt[1]=="type"?le+(Mt+"="+Ge+"&"):le+(Mt+"=redacted&")}}else le=null;else le=H;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+m+`
`+_+`
`+le})}function ao(c,m,_,I,L,H,le){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+m+`
`+_+`
`+H+" "+le})}function Yn(c,m,_,I){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Jh(c,_)+(I?" "+I:"")})}function Da(c,m){c.info(function(){return"TIMEOUT: "+m})}os.prototype.info=function(){};function Jh(c,m){if(!c.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var I=_[c];if(!(2>I.length)){var L=I[1];if(Array.isArray(L)&&!(1>L.length)){var H=L[0];if(H!="noop"&&H!="stop"&&H!="close")for(var le=1;le<L.length;le++)L[le]=""}}}}return He(_)}catch{return m}}var lo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},du={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xn;function ls(){}j(ls,is),ls.prototype.g=function(){return new XMLHttpRequest},ls.prototype.i=function(){return{}},Xn=new ls;function Jn(c,m,_,I){this.j=c,this.i=m,this.l=_,this.R=I||1,this.U=new Re(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fu}function fu(){this.i=null,this.g="",this.h=!1}var Va={},uo={};function co(c,m,_){c.L=1,c.v=mi(Cn(m)),c.m=_,c.P=!0,Oa(c,null)}function Oa(c,m){c.F=Date.now(),st(c),c.A=Cn(c.v);var _=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),yi(_.i,"t",I),c.C=0,_=c.j.J,c.h=new fu,c.g=bu(c.j,_?m:null,!c.m),0<c.O&&(c.M=new pe(S(c.Y,c,c.g),c.O)),m=c.U,_=c.g,I=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(Qe[0]=L.toString()),L=Qe);for(var H=0;H<L.length;H++){var le=Or(_,L[H],I||m.handleEvent,!1,m.h||m);if(!le)break;m.g[le.key]=le}m=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),Mr(),as(c.i,c.u,c.A,c.l,c.R,c.m)}Jn.prototype.ca=function(c){c=c.target;const m=this.M;m&&mn(c)==3?m.j():this.Y(c)},Jn.prototype.Y=function(c){try{if(c==this.g)e:{const Pt=mn(this.g);var m=this.g.Ba();const Fn=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||za(this.g)))){this.J||Pt!=4||m==7||(m==8||0>=Fn?Mr(3):Mr(2)),us(this);var _=this.g.Z();this.X=_;t:if(pu(this)){var I=za(this.g);c="";var L=I.length,H=mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mn(this),hi(this);var le="";break t}this.h.i=new d.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,c+=this.h.i.decode(I[m],{stream:!(H&&m==L-1)});I.length=0,this.h.g+=c,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=_==200,ao(this.i,this.u,this.A,this.l,this.R,Pt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var et,bt=this.g;if((et=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(et)){var Ge=et;break t}}Ge=null}if(_=Ge)Yn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ma(this,_);else{this.o=!1,this.s=3,At(12),Mn(this),hi(this);break e}}if(this.P){_=!0;let Rn;for(;!this.J&&this.C<le.length;)if(Rn=Zh(this,le),Rn==uo){Pt==4&&(this.s=4,At(14),_=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==Va){this.s=4,At(15),Yn(this.i,this.l,le,"[Invalid Chunk]"),_=!1;break}else Yn(this.i,this.l,Rn,null),Ma(this,Rn);if(pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||le.length!=0||this.h.h||(this.s=1,At(16),_=!1),this.o=this.o&&_,!_)Yn(this.i,this.l,le,"[Invalid Chunked Response]"),Mn(this),hi(this);else if(0<le.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),$a(Mt),Mt.M=!0,At(11))}}else Yn(this.i,this.l,le,null),Ma(this,le);Pt==4&&Mn(this),this.o&&!this.J&&(Pt==4?Io(this.j,this):(this.o=!1,st(this)))}else yo(this.g),_==400&&0<le.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),Mn(this),hi(this)}}}catch{}finally{}};function pu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Zh(c,m){var _=c.C,I=m.indexOf(`
`,_);return I==-1?uo:(_=Number(m.substring(_,I)),isNaN(_)?Va:(I+=1,I+_>m.length?uo:(m=m.slice(I,I+_),c.C=I+_,m)))}Jn.prototype.cancel=function(){this.J=!0,Mn(this)};function st(c){c.S=Date.now()+c.I,mu(c,c.I)}function mu(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Qn(S(c.ba,c),m)}function us(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Jn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Da(this.i,this.A),this.L!=2&&(Mr(),At(17)),Mn(this),this.s=2,hi(this)):mu(this,this.S-c)};function hi(c){c.j.G==0||c.J||Io(c.j,c)}function Mn(c){us(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,ye(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function Ma(c,m){try{var _=c.j;if(_.G!=0&&(_.g==c||on(_.h,c))){if(!c.K&&on(_.h,c)&&_.G==3){try{var I=_.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)wo(_),rr(_);else break e;Eo(_),At(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=Qn(S(_.Za,_),6e3));if(1>=yu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else zr(_,11)}else if((c.K||_.g==c)&&wo(_),!J(m))for(L=_.Da.g.parse(m),m=0;m<L.length;m++){let Ge=L[m];if(_.T=Ge[0],Ge=Ge[1],_.G==2)if(Ge[0]=="c"){_.K=Ge[1],_.ia=Ge[2];const Mt=Ge[3];Mt!=null&&(_.la=Mt,_.j.info("VER="+_.la));const Pt=Ge[4];Pt!=null&&(_.Aa=Pt,_.j.info("SVER="+_.Aa));const Fn=Ge[5];Fn!=null&&typeof Fn=="number"&&0<Fn&&(I=1.5*Fn,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const Rn=c.g;if(Rn){const gs=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gs){var H=I.h;H.g||gs.indexOf("spdy")==-1&&gs.indexOf("quic")==-1&&gs.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(La(H,H.h),H.h=null))}if(I.D){const So=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;So&&(I.ya=So,rt(I.I,I.D,So))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var le=c;if(I.qa=ku(I,I.J?I.ia:null,I.W),le.K){_u(I.h,le);var et=le,bt=I.L;bt&&(et.I=bt),et.B&&(us(et),st(et)),I.g=le}else ms(I);0<_.i.length&&wr(_)}else Ge[0]!="stop"&&Ge[0]!="close"||zr(_,7);else _.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?zr(_,7):jt(_):Ge[0]!="noop"&&_.l&&_.l.ta(Ge),_.v=0)}}Mr(4)}catch{}}var gu=class{constructor(c,m){this.g=c,this.map=m}};function cs(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function An(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function yu(c){return c.h?1:c.g?c.g.size:0}function on(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function La(c,m){c.g?c.g.add(m):c.h=m}function _u(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}cs.prototype.cancel=function(){if(this.i=vu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function vu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const _ of c.g.values())m=m.concat(_.D);return m}return K(c.i)}function ho(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var m=[],_=c.length,I=0;I<_;I++)m.push(c[I]);return m}m=[],_=0;for(I in c)m[_++]=c[I];return m}function fo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var m=[];c=c.length;for(var _=0;_<c;_++)m.push(_);return m}m=[],_=0;for(const I in c)m[_++]=I;return m}}}function di(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var _=fo(c),I=ho(c),L=I.length,H=0;H<L;H++)m.call(void 0,I[H],_&&_[H],c)}var hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ed(c,m){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var I=c[_].indexOf("="),L=null;if(0<=I){var H=c[_].substring(0,I);L=c[_].substring(I+1)}else H=c[_];m(H,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Lr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Lr){this.h=c.h,ds(this,c.j),this.o=c.o,this.g=c.g,fi(this,c.s),this.l=c.l;var m=c.i,_=new _r;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),pi(this,_),this.m=c.m}else c&&(m=String(c).match(hs))?(this.h=!1,ds(this,m[1]||"",!0),this.o=Ke(m[2]||""),this.g=Ke(m[3]||"",!0),fi(this,m[4]),this.l=Ke(m[5]||"",!0),pi(this,m[6]||"",!0),this.m=Ke(m[7]||"")):(this.h=!1,this.i=new _r(null,this.h))}Lr.prototype.toString=function(){var c=[],m=this.j;m&&c.push(gi(m,po,!0),":");var _=this.g;return(_||m=="file")&&(c.push("//"),(m=this.o)&&c.push(gi(m,po,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(gi(_,_.charAt(0)=="/"?Iu:wu,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",gi(_,Fa)),c.join("")};function Cn(c){return new Lr(c)}function ds(c,m,_){c.j=_?Ke(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function fi(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function pi(c,m,_){m instanceof _r?(c.i=m,vr(c.i,c.h)):(_||(m=gi(m,Tu)),c.i=new _r(m,c.h))}function rt(c,m,_){c.i.set(m,_)}function mi(c){return rt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ke(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function gi(c,m,_){return typeof c=="string"?(c=encodeURI(c).replace(m,Eu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Eu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var po=/[#\/\?@]/g,wu=/[#\?:]/g,Iu=/[#\?]/g,Tu=/[#\?@]/g,Fa=/#/g;function _r(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function zt(c){c.g||(c.g=new Map,c.h=0,c.i&&ed(c.i,function(m,_){c.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}i=_r.prototype,i.add=function(c,m){zt(this),this.i=null,c=Ln(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(m),this.h+=1,this};function Zn(c,m){zt(c),m=Ln(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function er(c,m){return zt(c),m=Ln(c,m),c.g.has(m)}i.forEach=function(c,m){zt(this),this.g.forEach(function(_,I){_.forEach(function(L){c.call(m,L,I,this)},this)},this)},i.na=function(){zt(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let I=0;I<m.length;I++){const L=c[I];for(let H=0;H<L.length;H++)_.push(m[I])}return _},i.V=function(c){zt(this);let m=[];if(typeof c=="string")er(this,c)&&(m=m.concat(this.g.get(Ln(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)m=m.concat(c[_])}return m},i.set=function(c,m){return zt(this),this.i=null,c=Ln(this,c),er(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},i.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function yi(c,m,_){Zn(c,m),0<_.length&&(c.i=null,c.g.set(Ln(c,m),K(_)),c.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var I=m[_];const H=encodeURIComponent(String(I)),le=this.V(I);for(I=0;I<le.length;I++){var L=H;le[I]!==""&&(L+="="+encodeURIComponent(String(le[I]))),c.push(L)}}return this.i=c.join("&")};function Ln(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function vr(c,m){m&&!c.j&&(zt(c),c.i=null,c.g.forEach(function(_,I){var L=I.toLowerCase();I!=L&&(Zn(this,I),yi(this,L,_))},c)),c.j=m}function td(c,m){const _=new os;if(d.Image){const I=new Image;I.onload=O(pn,_,"TestLoadImage: loaded",!0,m,I),I.onerror=O(pn,_,"TestLoadImage: error",!1,m,I),I.onabort=O(pn,_,"TestLoadImage: abort",!1,m,I),I.ontimeout=O(pn,_,"TestLoadImage: timeout",!1,m,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else m(!1)}function Su(c,m){const _=new os,I=new AbortController,L=setTimeout(()=>{I.abort(),pn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:I.signal}).then(H=>{clearTimeout(L),H.ok?pn(_,"TestPingServer: ok",!0,m):pn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),pn(_,"TestPingServer: error",!1,m)})}function pn(c,m,_,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(_)}catch{}}function nd(){this.g=new Sn}function Au(c,m,_){const I=_||"";try{di(c,function(L,H){let le=L;y(L)&&(le=He(L)),m.push(I+H+"="+encodeURIComponent(le))})}catch(L){throw m.push(I+"type="+encodeURIComponent("_badmap")),L}}function Fr(c){this.l=c.Ub||null,this.j=c.eb||!1}j(Fr,is),Fr.prototype.g=function(){return new fs(this.l,this.j)},Fr.prototype.i=function(c){return function(){return c}}({});function fs(c,m){wt.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(fs,wt),i=fs.prototype,i.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,nr(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tr(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,nr(this)),this.g&&(this.readyState=3,nr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?tr(this):nr(this),this.readyState==3&&Cu(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,tr(this))},i.Qa=function(c){this.g&&(this.response=c,tr(this))},i.ga=function(){this.g&&tr(this)};function tr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,nr(c)}i.setRequestHeader=function(c,m){this.u.append(c,m)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=m.next();return c.join(`\r
`)};function nr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ur(c){let m="";return ue(c,function(_,I){m+=I,m+=":",m+=_,m+=`\r
`}),m}function _i(c,m,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Ur(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):rt(c,m,_))}function ht(c){wt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(ht,wt);var rd=/^https?$/i,Ua=["POST","PUT"];i=ht.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,m,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xn.g(),this.v=this.o?ro(this.o):ro(Xn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(H){ps(this,H);return}if(c=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)_.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const H of I.keys())_.set(H,I.get(H));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),L=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ua,m,void 0))||I||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,le]of _)this.g.setRequestHeader(H,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{go(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){ps(this,H)}};function ps(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,mo(c),Pn(c)}function mo(c){c.A||(c.A=!0,It(c,"complete"),It(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,It(this,"complete"),It(this,"abort"),Pn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pn(this,!0)),ht.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ba(this):this.bb())},i.bb=function(){Ba(this)};function Ba(c){if(c.h&&typeof u<"u"&&(!c.v[1]||mn(c)!=4||c.Z()!=2)){if(c.u&&mn(c)==4)X(c.Ea,0,c);else if(It(c,"readystatechange"),mn(c)==4){c.h=!1;try{const le=c.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var I;if(I=le===0){var L=String(c.D).match(hs)[1]||null;!L&&d.self&&d.self.location&&(L=d.self.location.protocol.slice(0,-1)),I=!rd.test(L?L.toLowerCase():"")}_=I}if(_)It(c,"complete"),It(c,"success");else{c.m=6;try{var H=2<mn(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",mo(c)}}finally{Pn(c)}}}}function Pn(c,m){if(c.g){go(c);const _=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||It(c,"ready");try{_.onreadystatechange=I}catch{}}}function go(c){c.I&&(d.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function mn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<mn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),sn(m)}};function za(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function yo(c){const m={};c=(c.g&&2<=mn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(J(c[I]))continue;var _=D(c[I]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=m[L]||[];m[L]=H,H.push(_)}k(m,function(I){return I.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Er(c,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||m}function ja(c){this.Aa=0,this.i=[],this.j=new os,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Er("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Er("baseRetryDelayMs",5e3,c),this.cb=Er("retryDelaySeedMs",1e4,c),this.Wa=Er("forwardChannelMaxRetries",2,c),this.wa=Er("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new cs(c&&c.concurrentRequestLimit),this.Da=new nd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=ja.prototype,i.la=8,i.G=1,i.connect=function(c,m,_,I){At(0),this.W=c,this.H=m||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=ku(this,null,this.W),wr(this)};function jt(c){if(_o(c),c.G==3){var m=c.U++,_=Cn(c.I);if(rt(_,"SID",c.K),rt(_,"RID",m),rt(_,"TYPE","terminate"),Br(c,_),m=new Jn(c,c.j,m),m.L=2,m.v=mi(Cn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=m.v,_=!0),_||(m.g=bu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),st(m)}xu(c)}function rr(c){c.g&&($a(c),c.g.cancel(),c.g=null)}function _o(c){rr(c),c.u&&(d.clearTimeout(c.u),c.u=null),wo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function wr(c){if(!An(c.h)&&!c.s){c.s=!0;var m=c.Ga;Xe||de(),se||(Xe(),se=!0),Pe.add(m,c),c.B=0}}function id(c,m){return yu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Qn(S(c.Ga,c,m),Ru(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new Jn(this,this.j,c);let H=this.o;if(this.S&&(H?(H=A(H),b(H,this.S)):H=this.S),this.m!==null||this.O||(L.H=H,H=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=vi(this,L,m),_=Cn(this.I),rt(_,"RID",c),rt(_,"CVER",22),this.D&&rt(_,"X-HTTP-Session-Id",this.D),Br(this,_),H&&(this.O?m="headers="+encodeURIComponent(String(Ur(H)))+"&"+m:this.m&&_i(_,this.m,H)),La(this.h,L),this.Ua&&rt(_,"TYPE","init"),this.P?(rt(_,"$req",m),rt(_,"SID","null"),L.T=!0,co(L,_,null)):co(L,_,m),this.G=2}}else this.G==3&&(c?vo(this,c):this.i.length==0||An(this.h)||vo(this))};function vo(c,m){var _;m?_=m.l:_=c.U++;const I=Cn(c.I);rt(I,"SID",c.K),rt(I,"RID",_),rt(I,"AID",c.T),Br(c,I),c.m&&c.o&&_i(I,c.m,c.o),_=new Jn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),m&&(c.i=m.D.concat(c.i)),m=vi(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),La(c.h,_),co(_,I,m)}function Br(c,m){c.H&&ue(c.H,function(_,I){rt(m,I,_)}),c.l&&di({},function(_,I){rt(m,I,_)})}function vi(c,m,_){_=Math.min(c.i.length,_);var I=c.l?S(c.l.Na,c.l,c):null;e:{var L=c.i;let H=-1;for(;;){const le=["count="+_];H==-1?0<_?(H=L[0].g,le.push("ofs="+H)):H=0:le.push("ofs="+H);let et=!0;for(let bt=0;bt<_;bt++){let Ge=L[bt].g;const Mt=L[bt].map;if(Ge-=H,0>Ge)H=Math.max(0,L[bt].g-100),et=!1;else try{Au(Mt,le,"req"+Ge+"_")}catch{I&&I(Mt)}}if(et){I=le.join("&");break e}}}return c=c.i.splice(0,_),m.D=c,I}function ms(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;Xe||de(),se||(Xe(),se=!0),Pe.add(m,c),c.v=0}}function Eo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Qn(S(c.Fa,c),Ru(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Qn(S(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),rr(this),Pu(this))};function $a(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function Pu(c){c.g=new Jn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=Cn(c.qa);rt(m,"RID","rpc"),rt(m,"SID",c.K),rt(m,"AID",c.T),rt(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&rt(m,"TO",c.ja),rt(m,"TYPE","xmlhttp"),Br(c,m),c.m&&c.o&&_i(m,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=mi(Cn(m)),_.m=null,_.P=!0,Oa(_,c)}i.Za=function(){this.C!=null&&(this.C=null,rr(this),Eo(this),At(19))};function wo(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Io(c,m){var _=null;if(c.g==m){wo(c),$a(c),c.g=null;var I=2}else if(on(c.h,m))_=m.D,_u(c.h,m),I=1;else return;if(c.G!=0){if(m.o)if(I==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var L=c.B;I=ss(),It(I,new oo(I,_)),wr(c)}else ms(c);else if(L=m.s,L==3||L==0&&0<m.X||!(I==1&&id(c,m)||I==2&&Eo(c)))switch(_&&0<_.length&&(m=c.h,m.i=m.i.concat(_)),L){case 1:zr(c,5);break;case 4:zr(c,10);break;case 3:zr(c,6);break;default:zr(c,2)}}}function Ru(c,m){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*m}function zr(c,m){if(c.j.info("Error code "+m),m==2){var _=S(c.fb,c),I=c.Xa;const L=!I;I=new Lr(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ds(I,"https"),mi(I),L?td(I.toString(),_):Su(I.toString(),_)}else At(2);c.G=0,c.l&&c.l.sa(m),xu(c),_o(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function xu(c){if(c.G=0,c.ka=[],c.l){const m=vu(c.h);(m.length!=0||c.i.length!=0)&&(q(c.ka,m),q(c.ka,c.i),c.h.i.length=0,K(c.i),c.i.length=0),c.l.ra()}}function ku(c,m,_){var I=_ instanceof Lr?Cn(_):new Lr(_);if(I.g!="")m&&(I.g=m+"."+I.g),fi(I,I.s);else{var L=d.location;I=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var H=new Lr(null);I&&ds(H,I),m&&(H.g=m),L&&fi(H,L),_&&(H.l=_),I=H}return _=c.D,m=c.ya,_&&m&&rt(I,_,m),rt(I,"VER",c.la),Br(c,I),I}function bu(c,m,_){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new ht(new Fr({eb:_})):new ht(c.pa),m.Ha(c.J),m}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function qa(){}i=qa.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function To(){}To.prototype.g=function(c,m){return new an(c,m)};function an(c,m){wt.call(this),this.g=new ja(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!J(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!J(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Ir(this)}j(an,wt),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){jt(this.g)},an.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=He(c),c=_);m.i.push(new gu(m.Ya++,c)),m.G==3&&wr(m)},an.prototype.N=function(){this.g.l=null,delete this.j,jt(this.g),delete this.g,an.aa.N.call(this)};function Nu(c){gr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const _ in m){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}j(Nu,gr);function Du(){so.call(this),this.status=1}j(Du,so);function Ir(c){this.g=c}j(Ir,qa),Ir.prototype.ua=function(){It(this.g,"a")},Ir.prototype.ta=function(c){It(this.g,new Nu(c))},Ir.prototype.sa=function(c){It(this.g,new Du)},Ir.prototype.ra=function(){It(this.g,"b")},To.prototype.createWebChannel=To.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,dE=function(){return new To},hE=function(){return ss()},cE=yr,Qf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lo.NO_ERROR=0,lo.TIMEOUT=8,lo.HTTP_ERROR=6,Oc=lo,du.COMPLETE="complete",uE=du,io.EventType=On,On.OPEN="a",On.CLOSE="b",On.ERROR="c",On.MESSAGE="d",wt.prototype.listen=wt.prototype.K,El=io,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,lE=ht}).apply(typeof Pc<"u"?Pc:typeof self<"u"?self:typeof window<"u"?window:{});const t_="@firebase/firestore",n_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aa="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new Pp("@firebase/firestore");function Xo(){return Hs.logLevel}function re(i,...e){if(Hs.logLevel<=$e.DEBUG){const t=e.map(kp);Hs.debug(`Firestore (${Aa}): ${i}`,...t)}}function cn(i,...e){if(Hs.logLevel<=$e.ERROR){const t=e.map(kp);Hs.error(`Firestore (${Aa}): ${i}`,...t)}}function Ks(i,...e){if(Hs.logLevel<=$e.WARN){const t=e.map(kp);Hs.warn(`Firestore (${Aa}): ${i}`,...t)}}function kp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,fE(i,r,t)}function fE(i,e,t){let r=`FIRESTORE (${Aa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw cn(r),new Error(r)}function Ae(i,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,i||fE(e,o,r)}function Fe(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends ii{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ht.UNAUTHENTICATED))}shutdown(){}}class J1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Z1{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let a=new br;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new br,e.enqueueRetryable(()=>o(this.currentUser))};const u=()=>{const p=a;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new br)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new pE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new Ht(e)}}class eS{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tS{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new eS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class r_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0,3512);const r=a=>{a.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,re("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const o=a=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new r_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ae(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new r_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=rS(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%62))}return r}}function De(i,e){return i<e?-1:i>e?1:0}function Yf(i,e){let t=0;for(;t<i.length&&t<e.length;){const r=i.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return De(r,o);{const a=mE(),u=iS(a.encode(i_(i,t)),a.encode(i_(e,t)));return u!==0?u:De(r,o)}}t+=r>65535?2:1}return De(i.length,e.length)}function i_(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function iS(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return De(i[t],e[t]);return De(i.length,e.length)}function la(i,e,t){return i.length===e.length&&i.every((r,o)=>t(r,e[o]))}function yE(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=-62135596800,o_=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*o_);return new Et(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<s_)throw new ce(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/o_}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-s_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Et(0,0))}static max(){return new xe(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="__name__";class Pr{constructor(e,t,r){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&we(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Pr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=Pr.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return De(e.length,t.length)}static compareSegments(e,t){const r=Pr.isNumericId(e),o=Pr.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Pr.extractNumericId(e).compare(Pr.extractNumericId(t)):Yf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ki.fromString(e.substring(4,e.length-2))}}class Ze extends Pr{construct(e,t,r){return new Ze(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Ze(t)}static emptyPath(){return new Ze([])}}const sS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends Pr{construct(e,t,r){return new vt(e,t,r)}static isValidIdentifier(e){return sS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===a_}static keyField(){return new vt([a_])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new ce(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ce(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(r+=d,o++):(a(),o++)}if(a(),u)throw new ce(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(t)}static emptyPath(){return new vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Ze.fromString(e))}static fromName(e){return new he(Ze.fromString(e).popFirst(5))}static empty(){return new he(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Ze(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=-1;class Zc{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Xf(i){return i.fields.find(e=>e.kind===2)}function bs(i){return i.fields.filter(e=>e.kind!==2)}Zc.UNKNOWN_ID=-1;class Mc{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ul{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ul(0,Vn.min())}}function oS(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(r===1e9?new Et(t+1,0):new Et(t,r));return new Vn(o,he.empty(),e)}function _E(i){return new Vn(i.readTime,i.key,Fl)}class Vn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Vn(xe.min(),he.empty(),Fl)}static max(){return new Vn(xe.max(),he.empty(),Fl)}}function bp(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(i.documentKey,e.documentKey),t!==0?t:De(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(i){if(i.code!==W.FAILED_PRECONDITION||i.message!==vE)throw i;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):F.reject(t)}static resolve(e){return new F((t,r)=>{t(e)})}static reject(e){return new F((t,r)=>{r(e)})}static waitFor(e){return new F((t,r)=>{let o=0,a=0,u=!1;e.forEach(d=>{++o,d.next(()=>{++a,u&&a===o&&t()},p=>r(p))}),u=!0,a===o&&t()})}static or(e){let t=F.resolve(!1);for(const r of e)t=t.next(o=>o?F.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,a)=>{r.push(t.call(this,o,a))}),this.waitFor(r)}static mapArray(e,t){return new F((r,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const y=p;t(e[y]).next(E=>{u[y]=E,++d,d===a&&r(u)},E=>o(E))}})}static doWhile(e,t){return new F((r,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):r()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="SimpleDb";class Th{static open(e,t,r,o){try{return new Th(t,e.transaction(o,r))}catch(a){throw new Pl(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new br,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Pl(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Np(r.target.error);this.S.reject(new Pl(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(re(Nn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lS(t)}}class Gi{static delete(e){return re(Nn,"Removing database:",e),Ds(Hv().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!eE())return!1;if(Gi.F())return!0;const e=Vt(),t=Gi.M(e),r=0<t&&t<10,o=wE(e),a=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,Gi.M(Vt())===12.2&&cn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(re(Nn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=a=>{const u=a.target.result;t(u)},o.onblocked=()=>{r(new Pl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=a=>{const u=a.target.error;u.name==="VersionError"?r(new ce(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new ce(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new Pl(e,u))},o.onupgradeneeded=a=>{re(Nn,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const u=a.target.result;if(this.L!==null&&this.L!==a.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${a.oldVersion}, event.newVersion=${a.newVersion}, db.version=${u.version}`);this.B.q(u,o.transaction,a.oldVersion,this.version).next(()=>{re(Nn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{const r=t.target;this.L=r.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,o){const a=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.k(e);const d=Th.open(this.db,e,a?"readonly":"readwrite",r),p=o(d).next(y=>(d.v(),y)).catch(y=>(d.abort(y),F.reject(y))).toPromise();return p.catch(()=>{}),await d.D,p}catch(d){const p=d,y=p.name!=="FirebaseError"&&u<3;if(re(Nn,"Transaction failed with error:",p.message,"Retrying:",y),this.close(),!y)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function wE(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class aS{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return Ds(this.K.delete())}}class Pl extends ce{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zi(i){return i.name==="IndexedDbTransactionError"}class lS{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(re(Nn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(re(Nn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ds(r)}add(e){return re(Nn,"ADD",this.store.name,e,e),Ds(this.store.add(e))}get(e){return Ds(this.store.get(e)).next(t=>(t===void 0&&(t=null),re(Nn,"GET",this.store.name,e,t),t))}delete(e){return re(Nn,"DELETE",this.store.name,e),Ds(this.store.delete(e))}count(){return re(Nn,"COUNT",this.store.name),Ds(this.store.count())}J(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const a=o.getAll(r.range);return new F((u,d)=>{a.onerror=p=>{d(p.target.error)},a.onsuccess=p=>{u(p.target.result)}})}{const a=this.cursor(r),u=[];return this.Y(a,(d,p)=>{u.push(p)}).next(()=>u)}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new F((o,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{o(u.target.result)}})}X(e,t){re(Nn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.ee=!1;const o=this.cursor(r);return this.Y(o,(a,u,d)=>d.delete())}te(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Y(o,t)}ne(e){const t=this.cursor({});return new F((r,o)=>{t.onerror=a=>{const u=Np(a.target.error);o(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(d=>{d?u.continue():r()}):r()}})}Y(e,t){const r=[];return new F((o,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void o();const p=new aS(d),y=t(d.primaryKey,d.value,p);if(y instanceof F){const E=y.catch(T=>(p.done(),F.reject(T)));r.push(E)}p.isDone?o():p.j===null?d.continue():d.continue(p.j)}}).next(()=>F.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ds(i){return new F((e,t)=>{i.onsuccess=r=>{const o=r.target.result;e(o)},i.onerror=r=>{const o=Np(r.target.error);t(o)}})}let l_=!1;function Np(i){const e=Gi.M(Vt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return l_||(l_=!0,setTimeout(()=>{throw r},0)),r}}return i}const Rl="IndexBackfiller";class uS{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){re(Rl,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.re.se();re(Rl,`Documents written: ${t}`)}catch(t){Zi(t)?re(Rl,"Ignoring IndexedDB error during index backfill: ",t):await eo(t)}await this.ie(6e4)})}}class cS{constructor(e,t){this.localStore=e,this.persistence=t}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))}oe(e,t){const r=new Set;let o=t,a=!0;return F.doWhile(()=>a===!0&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(u!==null&&!r.has(u))return re(Rl,`Processing collection: ${u}`),this._e(e,u,o).next(d=>{o-=d,r.add(u)});a=!1})).next(()=>t-o)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ae(o,a)).next(d=>(re(Rl,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>u.size)}))}ae(e,t){let r=e;return t.changes.forEach((o,a)=>{const u=_E(a);bp(u,r)>0&&(r=u)}),new Vn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Hn.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=-1;function Sh(i){return i==null}function Bl(i){return i===0&&1/i==-1/0}function hS(i){return typeof i=="number"&&Number.isInteger(i)&&!Bl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh="";function nn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=u_(e)),e=dS(i.get(t),e);return u_(e)}function dS(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const a=i.charAt(o);switch(a){case"\0":t+="";break;case eh:t+="";break;default:t+=a}}return t}function u_(i){return i+eh+""}function xr(i){const e=i.length;if(Ae(e>=2,64408,{path:i}),e===2)return Ae(i.charAt(0)===eh&&i.charAt(1)==="",56145,{path:i}),Ze.emptyPath();const t=e-2,r=[];let o="";for(let a=0;a<e;){const u=i.indexOf(eh,a);switch((u<0||u>t)&&we(50515,{path:i}),i.charAt(u+1)){case"":const d=i.substring(a,u);let p;o.length===0?p=d:(o+=d,p=o,o=""),r.push(p);break;case"":o+=i.substring(a,u),o+="\0";break;case"":o+=i.substring(a,u+1);break;default:we(61167,{path:i})}a=u+2}return new Ze(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="remoteDocuments",tu="owner",Ho="owner",zl="mutationQueues",fS="userId",cr="mutations",c_="batchId",Ls="userMutationsIndex",h_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(i,e){return[i,nn(e)]}function IE(i,e,t){return[i,nn(e),t]}const pS={},ua="documentMutations",th="remoteDocumentsV14",mS=["prefixPath","collectionGroup","readTime","documentId"],Fc="documentKeyIndex",gS=["prefixPath","collectionGroup","documentId"],TE="collectionGroupIndex",yS=["collectionGroup","readTime","prefixPath","documentId"],jl="remoteDocumentGlobal",Jf="remoteDocumentGlobalKey",ca="targets",SE="queryTargetsIndex",_S=["canonicalId","targetId"],ha="targetDocuments",vS=["targetId","path"],Dp="documentTargetsIndex",ES=["path","targetId"],nh="targetGlobalKey",Bs="targetGlobal",$l="collectionParents",wS=["collectionId","parent"],da="clientMetadata",IS="clientId",Ah="bundles",TS="bundleId",Ch="namedQueries",SS="name",Vp="indexConfiguration",AS="indexId",Zf="collectionGroupIndex",CS="collectionGroup",xl="indexState",PS=["indexId","uid"],AE="sequenceNumberIndex",RS=["uid","sequenceNumber"],kl="indexEntries",xS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],CE="documentKeyIndex",kS=["indexId","uid","orderedDocumentKey"],Ph="documentOverlays",bS=["userId","collectionPath","documentId"],ep="collectionPathOverlayIndex",NS=["userId","collectionPath","largestBatchId"],PE="collectionGroupOverlayIndex",DS=["userId","collectionGroup","largestBatchId"],Op="globals",VS="name",RE=[zl,cr,ua,Ns,ca,tu,Bs,ha,da,jl,$l,Ah,Ch],OS=[...RE,Ph],xE=[zl,cr,ua,th,ca,tu,Bs,ha,da,jl,$l,Ah,Ch,Ph],kE=xE,Mp=[...kE,Vp,xl,kl],MS=Mp,bE=[...Mp,Op],LS=bE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp extends EE{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function Ot(i,e){const t=Fe(i);return Gi.N(t.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function es(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function NE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||Kt.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rc(this.root,e,this.comparator,!0)}}class Rc{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??Kt.RED,this.left=o??Kt.EMPTY,this.right=a??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new Kt(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Kt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,r,o,a){return this}insert(e,t,r){return new Kt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new f_(this.data.getIterator())}getIteratorFrom(e){return new f_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new nt(this.comparator);return t.data=e,t}}class f_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ko(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new In([])}unionWith(e){let t=new nt(vt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new In(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return la(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new DE("Invalid base64 string: "+a):a}}(e);return new kt(t)}static fromUint8Array(e){const t=function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a}(e);return new kt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const FS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ti(i){if(Ae(!!i,39018),typeof i=="string"){let e=0;const t=FS.exec(i);if(Ae(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ft(i.seconds),nanos:ft(i.nanos)}}function ft(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ni(i){return typeof i=="string"?kt.fromBase64String(i):kt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="server_timestamp",OE="__type__",ME="__previous_value__",LE="__local_write_time__";function Lp(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[OE])===null||t===void 0?void 0:t.stringValue)===VE}function Rh(i){const e=i.mapValue.fields[ME];return Lp(e)?Rh(e):e}function ql(i){const e=ti(i.mapValue.fields[LE].timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t,r,o,a,u,d,p,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=E}}const rh="(default)";class Gs{constructor(e,t){this.projectId=e,this.database=t||rh}static empty(){return new Gs("","")}get isDefaultDatabase(){return this.database===rh}isEqual(e){return e instanceof Gs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="__type__",FE="__max__",ji={mapValue:{fields:{__type__:{stringValue:FE}}}},Up="__vector__",fa="value",Uc={nullValue:"NULL_VALUE"};function Qi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Lp(i)?4:UE(i)?9007199254740991:xh(i)?10:11:we(28295,{value:i})}function Dr(i,e){if(i===e)return!0;const t=Qi(i);if(t!==Qi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ql(i).isEqual(ql(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=ti(o.timestampValue),d=ti(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,a){return ni(o.bytesValue).isEqual(ni(a.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,a){return ft(o.geoPointValue.latitude)===ft(a.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(a.geoPointValue.longitude)}(i,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return ft(o.integerValue)===ft(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=ft(o.doubleValue),d=ft(a.doubleValue);return u===d?Bl(u)===Bl(d):isNaN(u)&&isNaN(d)}return!1}(i,e);case 9:return la(i.arrayValue.values||[],e.arrayValue.values||[],Dr);case 10:case 11:return function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(d_(u)!==d_(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!Dr(u[p],d[p])))return!1;return!0}(i,e);default:return we(52216,{left:i})}}function Hl(i,e){return(i.values||[]).find(t=>Dr(t,e))!==void 0}function Yi(i,e){if(i===e)return 0;const t=Qi(i),r=Qi(e);if(t!==r)return De(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(i.booleanValue,e.booleanValue);case 2:return function(a,u){const d=ft(a.integerValue||a.doubleValue),p=ft(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(i,e);case 3:return p_(i.timestampValue,e.timestampValue);case 4:return p_(ql(i),ql(e));case 5:return Yf(i.stringValue,e.stringValue);case 6:return function(a,u){const d=ni(a),p=ni(u);return d.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(a,u){const d=a.split("/"),p=u.split("/");for(let y=0;y<d.length&&y<p.length;y++){const E=De(d[y],p[y]);if(E!==0)return E}return De(d.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(a,u){const d=De(ft(a.latitude),ft(u.latitude));return d!==0?d:De(ft(a.longitude),ft(u.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return m_(i.arrayValue,e.arrayValue);case 10:return function(a,u){var d,p,y,E;const T=a.fields||{},S=u.fields||{},O=(d=T[fa])===null||d===void 0?void 0:d.arrayValue,j=(p=S[fa])===null||p===void 0?void 0:p.arrayValue,K=De(((y=O==null?void 0:O.values)===null||y===void 0?void 0:y.length)||0,((E=j==null?void 0:j.values)===null||E===void 0?void 0:E.length)||0);return K!==0?K:m_(O,j)}(i.mapValue,e.mapValue);case 11:return function(a,u){if(a===ji.mapValue&&u===ji.mapValue)return 0;if(a===ji.mapValue)return 1;if(u===ji.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),y=u.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let T=0;T<p.length&&T<E.length;++T){const S=Yf(p[T],E[T]);if(S!==0)return S;const O=Yi(d[p[T]],y[E[T]]);if(O!==0)return O}return De(p.length,E.length)}(i.mapValue,e.mapValue);default:throw we(23264,{Pe:t})}}function p_(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return De(i,e);const t=ti(i),r=ti(e),o=De(t.seconds,r.seconds);return o!==0?o:De(t.nanos,r.nanos)}function m_(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=Yi(t[o],r[o]);if(a)return a}return De(t.length,r.length)}function pa(i){return np(i)}function np(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const r=ti(t);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return ni(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return he.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=np(a);return r+"]"}(i.arrayValue):"mapValue"in i?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of r)a?a=!1:o+=",",o+=`${u}:${np(t.fields[u])}`;return o+"}"}(i.mapValue):we(61005,{value:i})}function Bc(i){switch(Qi(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rh(i);return e?16+Bc(e):16;case 5:return 2*i.stringValue.length;case 6:return ni(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,a)=>o+Bc(a),0)}(i.arrayValue);case 10:case 11:return function(r){let o=0;return es(r.fields,(a,u)=>{o+=a.length+Bc(u)}),o}(i.mapValue);default:throw we(13486,{value:i})}}function Kl(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function rp(i){return!!i&&"integerValue"in i}function Gl(i){return!!i&&"arrayValue"in i}function g_(i){return!!i&&"nullValue"in i}function y_(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function zc(i){return!!i&&"mapValue"in i}function xh(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Fp])===null||t===void 0?void 0:t.stringValue)===Up}function bl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return es(i.mapValue.fields,(t,r)=>e.mapValue.fields[t]=bl(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bl(i.arrayValue.values[t]);return e}return Object.assign({},i)}function UE(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===FE}const BE={mapValue:{fields:{[Fp]:{stringValue:Up},[fa]:{arrayValue:{}}}}};function BS(i){return"nullValue"in i?Uc:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Kl(Gs.empty(),he.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?xh(i)?BE:{mapValue:{}}:we(35942,{value:i})}function zS(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Kl(Gs.empty(),he.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?BE:"mapValue"in i?xh(i)?{mapValue:{}}:ji:we(61959,{value:i})}function __(i,e){const t=Yi(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function v_(i,e){const t=Yi(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bl(t)}setAll(e){let t=vt.emptyPath(),r={},o=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=d.popLast()}u?r[d.lastSegment()]=bl(u):o.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());zc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];zc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){es(t,(o,a)=>e[o]=a);for(const o of r)delete e[o]}clone(){return new en(bl(this.value))}}function zE(i){const e=[];return es(i.fields,(t,r)=>{const o=new vt([t]);if(zc(r)){const a=zE(r.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,t,r,o,a,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new St(e,0,xe.min(),xe.min(),xe.min(),en.empty(),0)}static newFoundDocument(e,t,r,o){return new St(e,1,t,xe.min(),r,o,0)}static newNoDocument(e,t){return new St(e,2,t,xe.min(),xe.min(),en.empty(),0)}static newUnknownDocument(e,t){return new St(e,3,t,xe.min(),xe.min(),en.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,t){this.position=e,this.inclusive=t}}function E_(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const a=e[o],u=i.position[o];if(a.field.isKeyField()?r=he.comparator(he.fromName(u.referenceValue),t.key):r=Yi(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function w_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Dr(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,t="asc"){this.field=e,this.dir=t}}function jS(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{}class qe extends jE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new $S(e,t,r):t==="array-contains"?new KS(e,r):t==="in"?new WE(e,r):t==="not-in"?new GS(e,r):t==="array-contains-any"?new WS(e,r):new qe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new qS(e,r):new HS(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Yi(t,this.value)):t!==null&&Qi(this.value)===Qi(t)&&this.matchesComparison(Yi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tt extends jE{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new tt(e,t)}matches(e){return ga(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ga(i){return i.op==="and"}function ip(i){return i.op==="or"}function Bp(i){return $E(i)&&ga(i)}function $E(i){for(const e of i.filters)if(e instanceof tt)return!1;return!0}function sp(i){if(i instanceof qe)return i.field.canonicalString()+i.op.toString()+pa(i.value);if(Bp(i))return i.filters.map(e=>sp(e)).join(",");{const e=i.filters.map(t=>sp(t)).join(",");return`${i.op}(${e})`}}function qE(i,e){return i instanceof qe?function(r,o){return o instanceof qe&&r.op===o.op&&r.field.isEqual(o.field)&&Dr(r.value,o.value)}(i,e):i instanceof tt?function(r,o){return o instanceof tt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((a,u,d)=>a&&qE(u,o.filters[d]),!0):!1}(i,e):void we(19439)}function HE(i,e){const t=i.filters.concat(e);return tt.create(t,i.op)}function KE(i){return i instanceof qe?function(t){return`${t.field.canonicalString()} ${t.op} ${pa(t.value)}`}(i):i instanceof tt?function(t){return t.op.toString()+" {"+t.getFilters().map(KE).join(" ,")+"}"}(i):"Filter"}class $S extends qe{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class qS extends qe{constructor(e,t){super(e,"in",t),this.keys=GE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class HS extends qe{constructor(e,t){super(e,"not-in",t),this.keys=GE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function GE(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>he.fromName(r.referenceValue))}class KS extends qe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gl(t)&&Hl(t.arrayValue,this.value)}}class WE extends qe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hl(this.value.arrayValue,t)}}class GS extends qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Hl(this.value.arrayValue,t)}}class WS extends qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t=null,r=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Ie=null}}function op(i,e=null,t=[],r=[],o=null,a=null,u=null){return new QS(i,e,t,r,o,a,u)}function Ws(i){const e=Fe(i);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>sp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Sh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>pa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>pa(r)).join(",")),e.Ie=t}return e.Ie}function nu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!jS(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!qE(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!w_(i.startAt,e.startAt)&&w_(i.endAt,e.endAt)}function ih(i){return he.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function sh(i,e){return i.filters.filter(t=>t instanceof qe&&t.field.isEqual(e))}function I_(i,e,t){let r=Uc,o=!0;for(const a of sh(i,e)){let u=Uc,d=!0;switch(a.op){case"<":case"<=":u=BS(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,d=!1;break;case"!=":case"not-in":u=Uc}__({value:r,inclusive:o},{value:u,inclusive:d})<0&&(r=u,o=d)}if(t!==null){for(let a=0;a<i.orderBy.length;++a)if(i.orderBy[a].field.isEqual(e)){const u=t.position[a];__({value:r,inclusive:o},{value:u,inclusive:t.inclusive})<0&&(r=u,o=t.inclusive);break}}return{value:r,inclusive:o}}function T_(i,e,t){let r=ji,o=!0;for(const a of sh(i,e)){let u=ji,d=!0;switch(a.op){case">=":case">":u=zS(a.value),d=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,d=!1;break;case"!=":case"not-in":u=ji}v_({value:r,inclusive:o},{value:u,inclusive:d})>0&&(r=u,o=d)}if(t!==null){for(let a=0;a<i.orderBy.length;++a)if(i.orderBy[a].field.isEqual(e)){const u=t.position[a];v_({value:r,inclusive:o},{value:u,inclusive:t.inclusive})>0&&(r=u,o=t.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t=null,r=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function YS(i,e,t,r,o,a,u,d){return new Ca(i,e,t,r,o,a,u,d)}function kh(i){return new Ca(i)}function S_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function QE(i){return i.collectionGroup!==null}function Nl(i){const e=Fe(i);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new nt(vt.comparator);return u.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(d=d.add(y.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Wl(a,r))}),t.has(vt.keyField().canonicalString())||e.Ee.push(new Wl(vt.keyField(),r))}return e.Ee}function Kn(i){const e=Fe(i);return e.de||(e.de=XS(e,Nl(i))),e.de}function XS(i,e){if(i.limitType==="F")return op(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new Wl(o.field,a)});const t=i.endAt?new ma(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new ma(i.startAt.position,i.startAt.inclusive):null;return op(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function ap(i,e){const t=i.filters.concat([e]);return new Ca(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function lp(i,e,t){return new Ca(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function bh(i,e){return nu(Kn(i),Kn(e))&&i.limitType===e.limitType}function YE(i){return`${Ws(Kn(i))}|lt:${i.limitType}`}function Jo(i){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>KE(o)).join(", ")}]`),Sh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>pa(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>pa(o)).join(",")),`Target(${r})`}(Kn(i))}; limitType=${i.limitType})`}function ru(i,e){return e.isFoundDocument()&&function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):he.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(i,e)&&function(r,o){for(const a of Nl(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(i,e)&&function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0}(i,e)&&function(r,o){return!(r.startAt&&!function(u,d,p){const y=E_(u,d,p);return u.inclusive?y<=0:y<0}(r.startAt,Nl(r),o)||r.endAt&&!function(u,d,p){const y=E_(u,d,p);return u.inclusive?y>=0:y>0}(r.endAt,Nl(r),o))}(i,e)}function JS(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function XE(i){return(e,t)=>{let r=!1;for(const o of Nl(i)){const a=ZS(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function ZS(i,e,t){const r=i.field.isKeyField()?he.comparator(e.key,t.key):function(a,u,d){const p=u.data.field(a),y=d.data.field(a);return p!==null&&y!==null?Yi(p,y):we(42886)}(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){es(this.inner,(t,r)=>{for(const[o,a]of r)e(o,a)})}isEmpty(){return NE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=new pt(he.comparator);function Dn(){return eA}const JE=new pt(he.comparator);function wl(...i){let e=JE;for(const t of i)e=e.insert(t.key,t);return e}function ZE(i){let e=JE;return i.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function kr(){return Dl()}function e0(){return Dl()}function Dl(){return new si(i=>i.toString(),(i,e)=>i.isEqual(e))}const tA=new pt(he.comparator),nA=new nt(he.comparator);function ze(...i){let e=nA;for(const t of i)e=e.add(t);return e}const rA=new nt(De);function iA(){return rA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bl(e)?"-0":e}}function t0(i){return{integerValue:""+i}}function sA(i,e){return hS(e)?t0(e):zp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(){this._=void 0}}function oA(i,e,t){return i instanceof Ql?function(o,a){const u={fields:{[OE]:{stringValue:VE},[LE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Lp(a)&&(a=Rh(a)),a&&(u.fields[ME]=a),{mapValue:u}}(t,e):i instanceof ya?r0(i,e):i instanceof _a?i0(i,e):function(o,a){const u=n0(o,a),d=A_(u)+A_(o.Re);return rp(u)&&rp(o.Re)?t0(d):zp(o.serializer,d)}(i,e)}function aA(i,e,t){return i instanceof ya?r0(i,e):i instanceof _a?i0(i,e):t}function n0(i,e){return i instanceof Yl?function(r){return rp(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Ql extends Nh{}class ya extends Nh{constructor(e){super(),this.elements=e}}function r0(i,e){const t=s0(e);for(const r of i.elements)t.some(o=>Dr(o,r))||t.push(r);return{arrayValue:{values:t}}}class _a extends Nh{constructor(e){super(),this.elements=e}}function i0(i,e){let t=s0(e);for(const r of i.elements)t=t.filter(o=>!Dr(o,r));return{arrayValue:{values:t}}}class Yl extends Nh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function A_(i){return ft(i.integerValue||i.doubleValue)}function s0(i){return Gl(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,t){this.field=e,this.transform=t}}function uA(i,e){return i.field.isEqual(e.field)&&function(r,o){return r instanceof ya&&o instanceof ya||r instanceof _a&&o instanceof _a?la(r.elements,o.elements,Dr):r instanceof Yl&&o instanceof Yl?Dr(r.Re,o.Re):r instanceof Ql&&o instanceof Ql}(i.transform,e.transform)}class cA{constructor(e,t){this.version=e,this.transformResults=t}}class tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tn}static exists(e){return new tn(void 0,e)}static updateTime(e){return new tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jc(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Dh{}function o0(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Vh(i.key,tn.none()):new Pa(i.key,i.data,tn.none());{const t=i.data,r=en.empty();let o=new nt(vt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),o=o.add(a)}return new oi(i.key,r,new In(o.toArray()),tn.none())}}function hA(i,e,t){i instanceof Pa?function(o,a,u){const d=o.value.clone(),p=P_(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(i,e,t):i instanceof oi?function(o,a,u){if(!jc(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=P_(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(a0(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(i,e,t):function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Vl(i,e,t,r){return i instanceof Pa?function(a,u,d,p){if(!jc(a.precondition,u))return d;const y=a.value.clone(),E=R_(a.fieldTransforms,p,u);return y.setAll(E),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(i,e,t,r):i instanceof oi?function(a,u,d,p){if(!jc(a.precondition,u))return d;const y=R_(a.fieldTransforms,p,u),E=u.data;return E.setAll(a0(a)),E.setAll(y),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(T=>T.field))}(i,e,t,r):function(a,u,d){return jc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d}(i,e,t)}function dA(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),a=n0(r.transform,o||null);a!=null&&(t===null&&(t=en.empty()),t.set(r.field,a))}return t||null}function C_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&la(r,o,(a,u)=>uA(a,u))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Pa extends Dh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class oi extends Dh{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function a0(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}}),e}function P_(i,e,t){const r=new Map;Ae(i.length===t.length,32656,{Ve:t.length,me:i.length});for(let o=0;o<t.length;o++){const a=i[o],u=a.transform,d=e.data.field(a.field);r.set(a.field,aA(u,d,t[o]))}return r}function R_(i,e,t){const r=new Map;for(const o of i){const a=o.transform,u=t.data.field(o.field);r.set(o.field,oA(a,u,e))}return r}class Vh extends Dh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l0 extends Dh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&hA(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Vl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=e0();return this.mutations.forEach(o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=o0(u,d);p!==null&&r.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ze())}isEqual(e){return this.batchId===e.batchId&&la(this.mutations,e.mutations,(t,r)=>C_(t,r))&&la(this.baseMutations,e.baseMutations,(t,r)=>C_(t,r))}}class $p{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Ae(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let o=function(){return tA}();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,r[u].version);return new $p(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,We;function pA(i){switch(i){case W.OK:return we(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return we(15467,{code:i})}}function u0(i){if(i===void 0)return cn("GRPC error has no .code"),W.UNKNOWN;switch(i){case xt.OK:return W.OK;case xt.CANCELLED:return W.CANCELLED;case xt.UNKNOWN:return W.UNKNOWN;case xt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case xt.INTERNAL:return W.INTERNAL;case xt.UNAVAILABLE:return W.UNAVAILABLE;case xt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case xt.NOT_FOUND:return W.NOT_FOUND;case xt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case xt.ABORTED:return W.ABORTED;case xt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case xt.DATA_LOSS:return W.DATA_LOSS;default:return we(39323,{code:i})}}(We=xt||(xt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=new Ki([4294967295,4294967295],0);function x_(i){const e=mE().encode(i),t=new aE;return t.update(e),new Uint8Array(t.digest())}function k_(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ki([t,r],0),new Ki([o,a],0)]}class Hp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Il(`Invalid padding: ${t}`);if(r<0)throw new Il(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Il(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Il(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Ki.fromNumber(this.pe)}we(e,t,r){let o=e.add(t.multiply(Ki.fromNumber(r)));return o.compare(mA)===1&&(o=new Ki([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=x_(e),[r,o]=k_(t);for(let a=0;a<this.hashCount;a++){const u=this.we(r,o,a);if(!this.be(u))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Hp(a,o,t);return r.forEach(d=>u.insert(d)),u}insert(e){if(this.pe===0)return;const t=x_(e),[r,o]=k_(t);for(let a=0;a<this.hashCount;a++){const u=this.we(r,o,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,iu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Oh(xe.min(),o,new pt(De),Dn(),ze())}}class iu{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new iu(r,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t,r,o){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=o}}class c0{constructor(e,t){this.targetId=e,this.Ce=t}}class h0{constructor(e,t,r=kt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class b_{constructor(){this.Fe=0,this.Me=N_(),this.xe=kt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ze(),t=ze(),r=ze();return this.Me.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:we(38017,{changeType:a})}}),new iu(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=N_()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ae(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class gA{constructor(e){this.ze=e,this.je=new Map,this.He=Dn(),this.Je=xc(),this.Ye=xc(),this.Ze=new pt(De)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,r=e.Ce.count,o=this._t(t);if(o){const a=o.target;if(ih(a))if(r===0){const u=new he(a.path);this.tt(t,u,St.newNoDocument(u,xe.min()))}else Ae(r===1,20013,{expectedCount:r});else{const u=this.ut(t);if(u!==r){const d=this.ct(e),p=d?this.lt(d,e,u):1;if(p!==0){this.st(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=ni(r).toUint8Array()}catch(p){if(p instanceof DE)return Ks("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Hp(u,o,a)}catch(p){return Ks(p instanceof Il?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.pe===0?null:d}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let o=0;return r.forEach(a=>{const u=this.ze.Pt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.tt(t,a,null),o++)}),o}It(e){const t=new Map;this.je.forEach((a,u)=>{const d=this._t(u);if(d){if(a.current&&ih(d.target)){const p=new he(d.target.path);this.Et(p).has(u)||this.dt(u,p)||this.tt(u,p,St.newNoDocument(p,e))}a.Le&&(t.set(u,a.qe()),a.Qe())}});let r=ze();this.Ye.forEach((a,u)=>{let d=!0;u.forEachWhile(p=>{const y=this._t(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(a))}),this.He.forEach((a,u)=>u.setReadTime(e));const o=new Oh(e,t,this.Ze,this.He,r);return this.He=Dn(),this.Je=xc(),this.Ye=xc(),this.Ze=new pt(De),o}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new b_,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new nt(De),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new nt(De),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new b_),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function xc(){return new pt(he.comparator)}function N_(){return new pt(he.comparator)}const yA={asc:"ASCENDING",desc:"DESCENDING"},_A={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vA={and:"AND",or:"OR"};class EA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function up(i,e){return i.useProto3Json||Sh(e)?e:{value:e}}function va(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function d0(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function wA(i,e){return va(i,e.toTimestamp())}function hn(i){return Ae(!!i,49232),xe.fromTimestamp(function(t){const r=ti(t);return new Et(r.seconds,r.nanos)}(i))}function Kp(i,e){return cp(i,e).canonicalString()}function cp(i,e){const t=function(o){return new Ze(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?t:t.child(e)}function f0(i){const e=Ze.fromString(i);return Ae(I0(e),10190,{key:e.toString()}),e}function oh(i,e){return Kp(i.databaseId,e.path)}function zs(i,e){const t=f0(e);if(t.get(1)!==i.databaseId.projectId)throw new ce(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ce(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new he(g0(t))}function p0(i,e){return Kp(i.databaseId,e)}function m0(i){const e=f0(i);return e.length===4?Ze.emptyPath():g0(e)}function hp(i){return new Ze(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function g0(i){return Ae(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function D_(i,e,t){return{name:oh(i,e),fields:t.value.mapValue.fields}}function IA(i,e,t){const r=zs(i,e.name),o=hn(e.updateTime),a=e.createTime?hn(e.createTime):xe.min(),u=new en({mapValue:{fields:e.fields}}),d=St.newFoundDocument(r,o,a,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function TA(i,e){let t;if("targetChange"in e){e.targetChange;const r=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:we(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(y,E){return y.useProto3Json?(Ae(E===void 0||typeof E=="string",58123),kt.fromBase64String(E||"")):(Ae(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),kt.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(y){const E=y.code===void 0?W.UNKNOWN:u0(y.code);return new ce(E,y.message||"")}(u);t=new h0(r,o,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=zs(i,r.document.name),a=hn(r.document.updateTime),u=r.document.createTime?hn(r.document.createTime):xe.min(),d=new en({mapValue:{fields:r.document.fields}}),p=St.newFoundDocument(o,a,u,d),y=r.targetIds||[],E=r.removedTargetIds||[];t=new $c(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=zs(i,r.document),a=r.readTime?hn(r.readTime):xe.min(),u=St.newNoDocument(o,a),d=r.removedTargetIds||[];t=new $c([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=zs(i,r.document),a=r.removedTargetIds||[];t=new $c([],a,o,null)}else{if(!("filter"in e))return we(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,u=new fA(o,a),d=r.targetId;t=new c0(d,u)}}return t}function ah(i,e){let t;if(e instanceof Pa)t={update:D_(i,e.key,e.value)};else if(e instanceof Vh)t={delete:oh(i,e.key)};else if(e instanceof oi)t={update:D_(i,e.key,e.data),updateMask:xA(e.fieldMask)};else{if(!(e instanceof l0))return we(16599,{ft:e.type});t={verify:oh(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,u){const d=u.transform;if(d instanceof Ql)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ya)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof _a)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Yl)return{fieldPath:u.field.canonicalString(),increment:d.Re};throw we(20930,{transform:u.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:wA(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:we(27497)}(i,e.precondition)),t}function dp(i,e){const t=e.currentDocument?function(a){return a.updateTime!==void 0?tn.updateTime(hn(a.updateTime)):a.exists!==void 0?tn.exists(a.exists):tn.none()}(e.currentDocument):tn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let p=null;if("setToServerValue"in d)Ae(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new Ql;else if("appendMissingElements"in d){const E=d.appendMissingElements.values||[];p=new ya(E)}else if("removeAllFromArray"in d){const E=d.removeAllFromArray.values||[];p=new _a(E)}else"increment"in d?p=new Yl(u,d.increment):we(16584,{proto:d});const y=vt.fromServerFormat(d.fieldPath);return new lA(y,p)}(i,o)):[];if(e.update){e.update.name;const o=zs(i,e.update.name),a=new en({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=function(p){const y=p.fieldPaths||[];return new In(y.map(E=>vt.fromServerFormat(E)))}(e.updateMask);return new oi(o,a,u,t,r)}return new Pa(o,a,t,r)}if(e.delete){const o=zs(i,e.delete);return new Vh(o,t)}if(e.verify){const o=zs(i,e.verify);return new l0(o,t)}return we(1463,{proto:e})}function SA(i,e){return i&&i.length>0?(Ae(e!==void 0,14353),i.map(t=>function(o,a){let u=o.updateTime?hn(o.updateTime):hn(a);return u.isEqual(xe.min())&&(u=hn(a)),new cA(u,o.transformResults||[])}(t,e))):[]}function y0(i,e){return{documents:[p0(i,e.path)]}}function _0(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=p0(i,o);const a=function(y){if(y.length!==0)return w0(tt.create(y,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(y){if(y.length!==0)return y.map(E=>function(S){return{field:Zo(S.field),direction:CA(S.dir)}}(E))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=up(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:t,parent:o}}function v0(i){let e=m0(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Ae(r===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let a=[];t.where&&(a=function(T){const S=E0(T);return S instanceof tt&&Bp(S)?S.getFilters():[S]}(t.where));let u=[];t.orderBy&&(u=function(T){return T.map(S=>function(j){return new Wl(ea(j.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(S))}(t.orderBy));let d=null;t.limit&&(d=function(T){let S;return S=typeof T=="object"?T.value:T,Sh(S)?null:S}(t.limit));let p=null;t.startAt&&(p=function(T){const S=!!T.before,O=T.values||[];return new ma(O,S)}(t.startAt));let y=null;return t.endAt&&(y=function(T){const S=!T.before,O=T.values||[];return new ma(O,S)}(t.endAt)),YS(e,o,u,a,d,"F",p,y)}function AA(i,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function E0(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ea(t.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=ea(t.unaryFilter.field);return qe.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ea(t.unaryFilter.field);return qe.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ea(t.unaryFilter.field);return qe.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(i):i.fieldFilter!==void 0?function(t){return qe.create(ea(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return tt.create(t.compositeFilter.filters.map(r=>E0(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(t.compositeFilter.op))}(i):we(30097,{filter:i})}function CA(i){return yA[i]}function PA(i){return _A[i]}function RA(i){return vA[i]}function Zo(i){return{fieldPath:i.canonicalString()}}function ea(i){return vt.fromServerFormat(i.fieldPath)}function w0(i){return i instanceof qe?function(t){if(t.op==="=="){if(y_(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NAN"}};if(g_(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(y_(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NOT_NAN"}};if(g_(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zo(t.field),op:PA(t.op),value:t.value}}}(i):i instanceof tt?function(t){const r=t.getFilters().map(o=>w0(o));return r.length===1?r[0]:{compositeFilter:{op:RA(t.op),filters:r}}}(i):we(54877,{filter:i})}function xA(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function I0(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,t,r,o,a=xe.min(),u=xe.min(),d=kt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e){this.wt=e}}function kA(i,e){let t;if(e.document)t=IA(i.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=he.fromSegments(e.noDocument.path),o=Ys(e.noDocument.readTime);t=St.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return we(56709);{const r=he.fromSegments(e.unknownDocument.path),o=Ys(e.unknownDocument.version);t=St.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(o){const a=new Et(o[0],o[1]);return xe.fromTimestamp(a)}(e.readTime)),t}function V_(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:lh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(a,u){return{name:oh(a,u.key),fields:u.data.value.mapValue.fields,updateTime:va(a,u.version.toTimestamp()),createTime:va(a,u.createTime.toTimestamp())}}(i.wt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Qs(e.version)};else{if(!e.isUnknownDocument())return we(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Qs(e.version)}}return r}function lh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Qs(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ys(i){const e=new Et(i.seconds,i.nanoseconds);return xe.fromTimestamp(e)}function Vs(i,e){const t=(e.baseMutations||[]).map(a=>dp(i.wt,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const d=e.mutations[a+1];u.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map(a=>dp(i.wt,a)),o=Et.fromMillis(e.localWriteTimeMs);return new jp(e.batchId,o,t,r)}function Tl(i){const e=Ys(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?Ys(i.lastLimboFreeSnapshotVersion):xe.min();let r;return r=function(a){return a.documents!==void 0}(i.query)?function(a){const u=a.documents.length;return Ae(u===1,1966,{count:u}),Kn(kh(m0(a.documents[0])))}(i.query):function(a){return Kn(v0(a))}(i.query),new Xr(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,kt.fromBase64String(i.resumeToken))}function S0(i,e){const t=Qs(e.snapshotVersion),r=Qs(e.lastLimboFreeSnapshotVersion);let o;o=ih(e.target)?y0(i.wt,e.target):_0(i.wt,e.target).gt;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ws(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function A0(i){const e=v0({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?lp(e,e.limit,"L"):e}function Vf(i,e){return new qp(e.largestBatchId,dp(i.wt,e.overlayMutation))}function O_(i,e){const t=e.path.lastSegment();return[i,nn(e.path.popLast()),t]}function M_(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:Qs(r.readTime),documentKey:nn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{getBundleMetadata(e,t){return L_(e).get(t).next(r=>{if(r)return function(a){return{id:a.bundleId,createTime:Ys(a.createTime),version:a.version}}(r)})}saveBundleMetadata(e,t){return L_(e).put(function(o){return{bundleId:o.id,createTime:Qs(hn(o.createTime)),version:o.version}}(t))}getNamedQuery(e,t){return F_(e).get(t).next(r=>{if(r)return function(a){return{name:a.name,query:A0(a.bundledQuery),readTime:Ys(a.readTime)}}(r)})}saveNamedQuery(e,t){return F_(e).put(function(o){return{name:o.name,readTime:Qs(hn(o.readTime)),bundledQuery:o.bundledQuery}}(t))}}function L_(i){return Ot(i,Ah)}function F_(i){return Ot(i,Ch)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){const r=t.uid||"";return new Mh(e,r)}getOverlay(e,t){return pl(e).get(O_(this.userId,t)).next(r=>r?Vf(this.serializer,r):null)}getOverlays(e,t){const r=kr();return F.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&r.set(o,a)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((a,u)=>{const d=new qp(t,u);o.push(this.St(e,d))}),F.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(u=>o.add(nn(u.getCollectionPath())));const a=[];return o.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(pl(e).X(ep,d))}),F.waitFor(a)}getOverlaysForCollection(e,t,r){const o=kr(),a=nn(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return pl(e).J(ep,u).next(d=>{for(const p of d){const y=Vf(this.serializer,p);o.set(y.getKey(),y)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const a=kr();let u;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pl(e).te({index:PE,range:d},(p,y,E)=>{const T=Vf(this.serializer,y);a.size()<o||T.largestBatchId===u?(a.set(T.getKey(),T),u=T.largestBatchId):E.done()}).next(()=>a)}St(e,t){return pl(e).put(function(o,a,u){const[d,p,y]=O_(a,u.mutation.key);return{userId:a,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:ah(o.wt,u.mutation)}}(this.serializer,this.userId,t))}}function pl(i){return Ot(i,Ph)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{Dt(e){return Ot(e,Op)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?kt.fromUint8Array(r):kt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(ft(e.integerValue));else if("doubleValue"in e){const r=ft(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Bl(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=ti(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(ni(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?UE(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):xh(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):we(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const r=e.fields||{};this.Mt(t,55);for(const o of Object.keys(r))this.Nt(o,t),this.Ct(r[o],t)}qt(e,t){var r,o;const a=e.fields||{};this.Mt(t,53);const u=fa,d=((o=(r=a[u].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.length)||0;this.Mt(t,15),t.xt(ft(d)),this.Nt(u,t),this.Ct(a[u],t)}$t(e,t){const r=e.values||[];this.Mt(t,50);for(const o of r)this.Ct(o,t)}kt(e,t){this.Mt(t,37),he.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}Os.Wt=new Os;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=255;function DA(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function U_(i){const e=64-function(r){let o=0;for(let a=0;a<8;++a){const u=DA(255&r[a]);if(o+=u,u!==8)break}return o}(i);return Math.ceil(e/8)}class VA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{const o=t.codePointAt(0);this.zt(240|o>>>18),this.zt(128|63&o>>>12),this.zt(128|63&o>>>6),this.zt(128|63&o)}}this.jt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Yt()}en(e){const t=this.tn(e),r=U_(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}rn(e){const t=this.tn(e),r=U_(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}sn(){this._n(Go),this._n(255)}an(){this.un(Go),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(a){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,a,!1),new Uint8Array(u.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}zt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===Go?(this._n(Go),this._n(0)):this._n(t)}Jt(e){const t=255&e;t===0?(this.un(0),this.un(255)):t===Go?(this.un(Go),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class OA{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class MA{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class ml{constructor(){this.ln=new VA,this.hn=new OA(this.ln),this.Pn=new MA(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t,r,o){this.In=e,this.En=t,this.dn=r,this.An=o}Rn(){const e=this.An.length,t=e===0||this.An[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.An,0),t!==e?r.set([0],this.An.length):++r[r.length-1],new Ms(this.In,this.En,this.dn,r)}Vn(e,t,r){return{indexId:this.In,uid:e,arrayValue:qc(this.dn),directionalValue:qc(this.An),orderedDocumentKey:qc(t),documentKey:r.path.toArray()}}mn(e,t,r){const o=this.Vn(e,t,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function Vi(i,e){let t=i.In-e.In;return t!==0?t:(t=B_(i.dn,e.dn),t!==0?t:(t=B_(i.An,e.An),t!==0?t:he.comparator(i.En,e.En)))}function B_(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function qc(i){return Zv()?function(t){let r="";for(let o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r}(i):i}function z_(i){return typeof i!="string"?i:function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(i)}class j_{constructor(e){this.fn=new nt((t,r)=>vt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const t of e.filters){const r=t;r.isInequality()?this.fn=this.fn.add(r):this.pn.push(r)}}get yn(){return this.fn.size>1}wn(e){if(Ae(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const t=Xf(e);if(t!==void 0&&!this.bn(t))return!1;const r=bs(e);let o=new Set,a=0,u=0;for(;a<r.length&&this.bn(r[a]);++a)o=o.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.fn.size>0){const d=this.fn.getIterator().getNext();if(!o.has(d.field.canonicalString())){const p=r[a];if(!this.Sn(d,p)||!this.Dn(this.gn[u++],p))return!1}++a}for(;a<r.length;++a){const d=r[a];if(u>=this.gn.length||!this.Dn(this.gn[u++],d))return!1}return!0}vn(){if(this.yn)return null;let e=new nt(vt.comparator);const t=[];for(const r of this.pn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Mc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Mc(r.field,0))}for(const r of this.gn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Mc(r.field,r.dir==="asc"?0:1)));return new Zc(Zc.UNKNOWN_ID,this.collectionId,t,Ul.empty())}bn(e){for(const t of this.pn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Dn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(i){var e,t;if(Ae(i instanceof qe||i instanceof tt,20012),i instanceof qe){if(i instanceof WE){const o=((t=(e=i.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(a=>qe.create(i.field,"==",a)))||[];return tt.create(o,"or")}return i}const r=i.filters.map(o=>C0(o));return tt.create(r,i.op)}function LA(i){if(i.getFilters().length===0)return[];const e=mp(C0(i));return Ae(P0(e),7391),fp(e)||pp(e)?[e]:e.getFilters()}function fp(i){return i instanceof qe}function pp(i){return i instanceof tt&&Bp(i)}function P0(i){return fp(i)||pp(i)||function(t){if(t instanceof tt&&ip(t)){for(const r of t.getFilters())if(!fp(r)&&!pp(r))return!1;return!0}return!1}(i)}function mp(i){if(Ae(i instanceof qe||i instanceof tt,34018),i instanceof qe)return i;if(i.filters.length===1)return mp(i.filters[0]);const e=i.filters.map(r=>mp(r));let t=tt.create(e,i.op);return t=uh(t),P0(t)?t:(Ae(t instanceof tt,64498),Ae(ga(t),40251),Ae(t.filters.length>1,57927),t.filters.reduce((r,o)=>Gp(r,o)))}function Gp(i,e){let t;return Ae(i instanceof qe||i instanceof tt,38388),Ae(e instanceof qe||e instanceof tt,25473),t=i instanceof qe?e instanceof qe?function(o,a){return tt.create([o,a],"and")}(i,e):$_(i,e):e instanceof qe?$_(e,i):function(o,a){if(Ae(o.filters.length>0&&a.filters.length>0,48005),ga(o)&&ga(a))return HE(o,a.getFilters());const u=ip(o)?o:a,d=ip(o)?a:o,p=u.filters.map(y=>Gp(y,d));return tt.create(p,"or")}(i,e),uh(t)}function $_(i,e){if(ga(e))return HE(e,i.getFilters());{const t=e.filters.map(r=>Gp(i,r));return tt.create(t,"or")}}function uh(i){if(Ae(i instanceof qe||i instanceof tt,11850),i instanceof qe)return i;const e=i.getFilters();if(e.length===1)return uh(e[0]);if($E(i))return i;const t=e.map(o=>uh(o)),r=[];return t.forEach(o=>{o instanceof qe?r.push(o):o instanceof tt&&(o.op===i.op?r.push(...o.filters):r.push(o))}),r.length===1?r[0]:tt.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.Cn=new Wp}addToCollectionParentIndex(e,t){return this.Cn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(Vn.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(Vn.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class Wp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new nt(Ze.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new nt(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="IndexedDbIndexManager",kc=new Uint8Array(0);class UA{constructor(e,t){this.databaseId=t,this.Fn=new Wp,this.Mn=new si(r=>Ws(r),(r,o)=>nu(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Fn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Fn.add(t)});const a={collectionId:r,parent:nn(o)};return H_(e).put(a)}return F.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[yE(t),""],!1,!0);return H_(e).J(o).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(xr(u.parent))}return r})}addFieldIndex(e,t){const r=gl(e),o=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])}}(t);delete o.indexId;const a=r.add(o);if(t.indexState){const u=Qo(e);return a.next(d=>{u.put(M_(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=gl(e),o=Qo(e),a=Wo(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=gl(e),r=Wo(e),o=Qo(e);return t.X().next(()=>r.X()).next(()=>o.X())}createTargetIndexes(e,t){return F.forEach(this.xn(t),r=>this.getIndexType(e,r).next(o=>{if(o===0||o===1){const a=new j_(r).vn();if(a!=null)return this.addFieldIndex(e,a)}}))}getDocumentsMatchingTarget(e,t){const r=Wo(e);let o=!0;const a=new Map;return F.forEach(this.xn(t),u=>this.On(e,u).next(d=>{o&&(o=!!d),a.set(u,d)})).next(()=>{if(o){let u=ze();const d=[];return F.forEach(a,(p,y)=>{re(q_,`Using index ${function(oe){return`id=${oe.indexId}|cg=${oe.collectionGroup}|f=${oe.fields.map(me=>`${me.fieldPath}:${me.kind}`).join(",")}`}(p)} to execute ${Ws(t)}`);const E=function(oe,me){const ke=Xf(me);if(ke===void 0)return null;for(const ue of sh(oe,ke.fieldPath))switch(ue.op){case"array-contains-any":return ue.value.arrayValue.values||[];case"array-contains":return[ue.value]}return null}(y,p),T=function(oe,me){const ke=new Map;for(const ue of bs(me))for(const k of sh(oe,ue.fieldPath))switch(k.op){case"==":case"in":ke.set(ue.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return ke.set(ue.fieldPath.canonicalString(),k.value),Array.from(ke.values())}return null}(y,p),S=function(oe,me){const ke=[];let ue=!0;for(const k of bs(me)){const A=k.kind===0?I_(oe,k.fieldPath,oe.startAt):T_(oe,k.fieldPath,oe.startAt);ke.push(A.value),ue&&(ue=A.inclusive)}return new ma(ke,ue)}(y,p),O=function(oe,me){const ke=[];let ue=!0;for(const k of bs(me)){const A=k.kind===0?T_(oe,k.fieldPath,oe.endAt):I_(oe,k.fieldPath,oe.endAt);ke.push(A.value),ue&&(ue=A.inclusive)}return new ma(ke,ue)}(y,p),j=this.Nn(p,y,S),K=this.Nn(p,y,O),q=this.Bn(p,y,T),G=this.Ln(p.indexId,E,j,S.inclusive,K,O.inclusive,q);return F.forEach(G,J=>r.Z(J,t.limit).next(oe=>{oe.forEach(me=>{const ke=he.fromSegments(me.documentKey);u.has(ke)||(u=u.add(ke),d.push(ke))})}))}).next(()=>d)}return F.resolve(null)})}xn(e){let t=this.Mn.get(e);return t||(e.filters.length===0?t=[e]:t=LA(tt.create(e.filters,"and")).map(r=>op(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,t),t)}Ln(e,t,r,o,a,u,d){const p=(t!=null?t.length:1)*Math.max(r.length,a.length),y=p/(t!=null?t.length:1),E=[];for(let T=0;T<p;++T){const S=t?this.kn(t[T/y]):kc,O=this.qn(e,S,r[T%y],o),j=this.Qn(e,S,a[T%y],u),K=d.map(q=>this.qn(e,S,q,!0));E.push(...this.createRange(O,j,K))}return E}qn(e,t,r,o){const a=new Ms(e,he.empty(),t,r);return o?a:a.Rn()}Qn(e,t,r,o){const a=new Ms(e,he.empty(),t,r);return o?a.Rn():a}On(e,t){const r=new j_(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(a=>{let u=null;for(const d of a)r.wn(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u})}getIndexType(e,t){let r=2;const o=this.xn(t);return F.forEach(o,a=>this.On(e,a).next(u=>{u?r!==0&&u.fields.length<function(p){let y=new nt(vt.comparator),E=!1;for(const T of p.filters)for(const S of T.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?E=!0:y=y.add(S.field));for(const T of p.orderBy)T.field.isKeyField()||(y=y.add(T.field));return y.size+(E?1:0)}(a)&&(r=1):r=0})).next(()=>function(u){return u.limit!==null}(t)&&o.length>1&&r===2?1:r)}$n(e,t){const r=new ml;for(const o of bs(e)){const a=t.data.field(o.fieldPath);if(a==null)return null;const u=r.Tn(o.kind);Os.Wt.vt(a,u)}return r.cn()}kn(e){const t=new ml;return Os.Wt.vt(e,t.Tn(0)),t.cn()}Un(e,t){const r=new ml;return Os.Wt.vt(Kl(this.databaseId,t),r.Tn(function(a){const u=bs(a);return u.length===0?0:u[u.length-1].kind}(e))),r.cn()}Bn(e,t,r){if(r===null)return[];let o=[];o.push(new ml);let a=0;for(const u of bs(e)){const d=r[a++];for(const p of o)if(this.Kn(t,u.fieldPath)&&Gl(d))o=this.Wn(o,u,d);else{const y=p.Tn(u.kind);Os.Wt.vt(d,y)}}return this.Gn(o)}Nn(e,t,r){return this.Bn(e,t,r.position)}Gn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}Wn(e,t,r){const o=[...e],a=[];for(const u of r.arrayValue.values||[])for(const d of o){const p=new ml;p.seed(d.cn()),Os.Wt.vt(u,p.Tn(t.kind)),a.push(p)}return a}Kn(e,t){return!!e.filters.find(r=>r instanceof qe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=gl(e),o=Qo(e);return(t?r.J(Zf,IDBKeyRange.bound(t,t)):r.J()).next(a=>{const u=[];return F.forEach(a,d=>o.get([d.indexId,this.uid]).next(p=>{u.push(function(E,T){const S=T?new Ul(T.sequenceNumber,new Vn(Ys(T.readTime),new he(xr(T.documentKey)),T.largestBatchId)):Ul.empty(),O=E.fields.map(([j,K])=>new Mc(vt.fromServerFormat(j),K));return new Zc(E.indexId,E.collectionGroup,O,S)}(d,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,o)=>{const a=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return a!==0?a:De(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=gl(e),a=Qo(e);return this.zn(e).next(u=>o.J(Zf,IDBKeyRange.bound(t,t)).next(d=>F.forEach(d,p=>a.put(M_(p.indexId,this.uid,u,r)))))}updateIndexEntries(e,t){const r=new Map;return F.forEach(t,(o,a)=>{const u=r.get(o.collectionGroup);return(u?F.resolve(u):this.getFieldIndexes(e,o.collectionGroup)).next(d=>(r.set(o.collectionGroup,d),F.forEach(d,p=>this.jn(e,o,p).next(y=>{const E=this.Hn(a,p);return y.isEqual(E)?F.resolve():this.Jn(e,a,p,y,E)}))))})}Yn(e,t,r,o){return Wo(e).put(o.Vn(this.uid,this.Un(r,t.key),t.key))}Zn(e,t,r,o){return Wo(e).delete(o.mn(this.uid,this.Un(r,t.key),t.key))}jn(e,t,r){const o=Wo(e);let a=new nt(Vi);return o.te({index:CE,range:IDBKeyRange.only([r.indexId,this.uid,qc(this.Un(r,t))])},(u,d)=>{a=a.add(new Ms(r.indexId,t,z_(d.arrayValue),z_(d.directionalValue)))}).next(()=>a)}Hn(e,t){let r=new nt(Vi);const o=this.$n(t,e);if(o==null)return r;const a=Xf(t);if(a!=null){const u=e.data.field(a.fieldPath);if(Gl(u))for(const d of u.arrayValue.values||[])r=r.add(new Ms(t.indexId,e.key,this.kn(d),o))}else r=r.add(new Ms(t.indexId,e.key,kc,o));return r}Jn(e,t,r,o,a){re(q_,"Updating index entries for document '%s'",t.key);const u=[];return function(p,y,E,T,S){const O=p.getIterator(),j=y.getIterator();let K=Ko(O),q=Ko(j);for(;K||q;){let G=!1,J=!1;if(K&&q){const oe=E(K,q);oe<0?J=!0:oe>0&&(G=!0)}else K!=null?J=!0:G=!0;G?(T(q),q=Ko(j)):J?(S(K),K=Ko(O)):(K=Ko(O),q=Ko(j))}}(o,a,Vi,d=>{u.push(this.Yn(e,t,r,d))},d=>{u.push(this.Zn(e,t,r,d))}),F.waitFor(u)}zn(e){let t=1;return Qo(e).te({index:AE,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,a)=>{a.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,d)=>Vi(u,d)).filter((u,d,p)=>!d||Vi(u,p[d-1])!==0);const o=[];o.push(e);for(const u of r){const d=Vi(u,e),p=Vi(u,t);if(d===0)o[0]=e.Rn();else if(d>0&&p<0)o.push(u),o.push(u.Rn());else if(p>0)break}o.push(t);const a=[];for(let u=0;u<o.length;u+=2){if(this.Xn(o[u],o[u+1]))return[];const d=o[u].mn(this.uid,kc,he.empty()),p=o[u+1].mn(this.uid,kc,he.empty());a.push(IDBKeyRange.bound(d,p))}return a}Xn(e,t){return Vi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(K_)}getMinOffset(e,t){return F.mapArray(this.xn(t),r=>this.On(e,r).next(o=>o||we(44426))).next(K_)}}function H_(i){return Ot(i,$l)}function Wo(i){return Ot(i,kl)}function gl(i){return Ot(i,Vp)}function Qo(i){return Ot(i,xl)}function K_(i){Ae(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const o=i[r].indexState.offset;bp(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Vn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},R0=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(i,e,t){const r=i.store(cr),o=i.store(ua),a=[],u=IDBKeyRange.only(t.batchId);let d=0;const p=r.te({range:u},(E,T,S)=>(d++,S.delete()));a.push(p.next(()=>{Ae(d===1,47070,{batchId:t.batchId})}));const y=[];for(const E of t.mutations){const T=IE(e,E.key.path,t.batchId);a.push(o.delete(T)),y.push(E.key)}return F.waitFor(a).next(()=>y)}function ch(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw we(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(R0,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);class Lh{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.er={}}static bt(e,t,r,o){Ae(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new Lh(a,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Oi(e).te({index:Ls,range:r},(o,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const a=ta(e),u=Oi(e);return u.add({}).next(d=>{Ae(typeof d=="number",49019);const p=new jp(d,t,r,o),y=function(O,j,K){const q=K.baseMutations.map(J=>ah(O.wt,J)),G=K.mutations.map(J=>ah(O.wt,J));return{userId:j,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:q,mutations:G}}(this.serializer,this.userId,p),E=[];let T=new nt((S,O)=>De(S.canonicalString(),O.canonicalString()));for(const S of o){const O=IE(this.userId,S.key.path,d);T=T.add(S.key.path.popLast()),E.push(u.put(y)),E.push(a.put(O,pS))}return T.forEach(S=>{E.push(this.indexManager.addToCollectionParentIndex(e,S))}),e.addOnCommittedListener(()=>{this.er[d]=p.keys()}),F.waitFor(E).next(()=>p)})}lookupMutationBatch(e,t){return Oi(e).get(t).next(r=>r?(Ae(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Vs(this.serializer,r)):null)}tr(e,t){return this.er[t]?F.resolve(this.er[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.er[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Oi(e).te({index:Ls,range:o},(u,d,p)=>{d.userId===this.userId&&(Ae(d.batchId>=r,47524,{nr:r}),a=Vs(this.serializer,d)),p.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Us;return Oi(e).te({index:Ls,range:t,reverse:!0},(o,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Us],[this.userId,Number.POSITIVE_INFINITY]);return Oi(e).J(Ls,t).next(r=>r.map(o=>Vs(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Lc(this.userId,t.path),o=IDBKeyRange.lowerBound(r),a=[];return ta(e).te({range:o},(u,d,p)=>{const[y,E,T]=u,S=xr(E);if(y===this.userId&&t.path.isEqual(S))return Oi(e).get(T).next(O=>{if(!O)throw we(61480,{rr:u,batchId:T});Ae(O.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:O.userId,batchId:T}),a.push(Vs(this.serializer,O))});p.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nt(De);const o=[];return t.forEach(a=>{const u=Lc(this.userId,a.path),d=IDBKeyRange.lowerBound(u),p=ta(e).te({range:d},(y,E,T)=>{const[S,O,j]=y,K=xr(O);S===this.userId&&a.path.isEqual(K)?r=r.add(j):T.done()});o.push(p)}),F.waitFor(o).next(()=>this.ir(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,a=Lc(this.userId,r),u=IDBKeyRange.lowerBound(a);let d=new nt(De);return ta(e).te({range:u},(p,y,E)=>{const[T,S,O]=p,j=xr(S);T===this.userId&&r.isPrefixOf(j)?j.length===o&&(d=d.add(O)):E.done()}).next(()=>this.ir(e,d))}ir(e,t){const r=[],o=[];return t.forEach(a=>{o.push(Oi(e).get(a).next(u=>{if(u===null)throw we(35274,{batchId:a});Ae(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:a}),r.push(Vs(this.serializer,u))}))}),F.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return x0(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.sr(t.batchId)}),F.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return F.resolve();const r=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),o=[];return ta(e).te({range:r},(a,u,d)=>{if(a[0]===this.userId){const p=xr(a[1]);o.push(p)}else d.done()}).next(()=>{Ae(o.length===0,56720,{_r:o.map(a=>a.canonicalString())})})})}containsKey(e,t){return k0(e,this.userId,t)}ar(e){return b0(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Us,lastStreamToken:""})}}function k0(i,e,t){const r=Lc(e,t.path),o=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return ta(i).te({range:a,ee:!0},(d,p,y)=>{const[E,T,S]=d;E===e&&T===o&&(u=!0),y.done()}).next(()=>u)}function Oi(i){return Ot(i,cr)}function ta(i){return Ot(i,ua)}function b0(i){return Ot(i,zl)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Xs(0)}static lr(){return new Xs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.hr(e).next(t=>{const r=new Xs(t.highestTargetId);return t.highestTargetId=r.next(),this.Pr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(t=>xe.fromTimestamp(new Et(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.hr(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Pr(e,o)))}addTargetData(e,t){return this.Tr(e,t).next(()=>this.hr(e).next(r=>(r.targetCount+=1,this.Ir(t,r),this.Pr(e,r))))}updateTargetData(e,t){return this.Tr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Yo(e).delete(t.targetId)).next(()=>this.hr(e)).next(r=>(Ae(r.targetCount>0,8065),r.targetCount-=1,this.Pr(e,r)))}removeTargets(e,t,r){let o=0;const a=[];return Yo(e).te((u,d)=>{const p=Tl(d);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(o++,a.push(this.removeTargetData(e,p)))}).next(()=>F.waitFor(a)).next(()=>o)}forEachTarget(e,t){return Yo(e).te((r,o)=>{const a=Tl(o);t(a)})}hr(e){return W_(e).get(nh).next(t=>(Ae(t!==null,2888),t))}Pr(e,t){return W_(e).put(nh,t)}Tr(e,t){return Yo(e).put(S0(this.serializer,t))}Ir(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.hr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ws(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Yo(e).te({range:o,index:SE},(u,d,p)=>{const y=Tl(d);nu(t,y.target)&&(a=y,p.done())}).next(()=>a)}addMatchingKeys(e,t,r){const o=[],a=Fi(e);return t.forEach(u=>{const d=nn(u.path);o.push(a.put({targetId:r,path:d})),o.push(this.referenceDelegate.addReference(e,r,u))}),F.waitFor(o)}removeMatchingKeys(e,t,r){const o=Fi(e);return F.forEach(t,a=>{const u=nn(a.path);return F.waitFor([o.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Fi(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Fi(e);let a=ze();return o.te({range:r,ee:!0},(u,d,p)=>{const y=xr(u[1]),E=new he(y);a=a.add(E)}).next(()=>a)}containsKey(e,t){const r=nn(t.path),o=IDBKeyRange.bound([r],[yE(r)],!1,!0);let a=0;return Fi(e).te({index:Dp,ee:!0,range:o},([u,d],p,y)=>{u!==0&&(a++,y.done())}).next(()=>a>0)}Rt(e,t){return Yo(e).get(t).next(r=>r?Tl(r):null)}}function Yo(i){return Ot(i,ca)}function W_(i){return Ot(i,Bs)}function Fi(i){return Ot(i,ha)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="LruGarbageCollector",zA=1048576;function Y_([i,e],[t,r]){const o=De(i,t);return o===0?De(e,r):o}class jA{constructor(e){this.Er=e,this.buffer=new nt(Y_),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Y_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class N0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){re(Q_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zi(t)?re(Q_,"Ignoring IndexedDB error during garbage collection: ",t):await eo(t)}await this.mr(3e5)})}}class $A{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return F.resolve(Hn.le);const r=new jA(t);return this.gr.forEachTarget(e,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(G_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),G_):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,o,a,u,d,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(r=T,d=Date.now(),this.removeTargets(e,r,t))).next(T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(y=Date.now(),Xo()<=$e.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-E}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:T})))}}function D0(i,e){return new $A(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,t){this.db=e,this.garbageCollector=D0(this,t)}pr(e){const t=this.br(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}yr(e,t){return this.Sr(e,(r,o)=>t(o))}addReference(e,t,r){return bc(e,r)}removeReference(e,t,r){return bc(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return bc(e,t)}Dr(e,t){return function(o,a){let u=!1;return b0(o).ne(d=>k0(o,d,a).next(p=>(p&&(u=!0),F.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let a=0;return this.Sr(e,(u,d)=>{if(d<=t){const p=this.Dr(e,u).next(y=>{if(!y)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,xe.min()),Fi(e).delete(function(T){return[0,nn(T.path)]}(u))))});o.push(p)}}).next(()=>F.waitFor(o)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return bc(e,t)}Sr(e,t){const r=Fi(e);let o,a=Hn.le;return r.te({index:Dp},([u,d],{path:p,sequenceNumber:y})=>{u===0?(a!==Hn.le&&t(new he(xr(o)),a),a=y,o=p):a=Hn.le}).next(()=>{a!==Hn.le&&t(new he(xr(o)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bc(i,e){return Fi(i).put(function(r,o){return{targetId:0,path:nn(r.path),sequenceNumber:o}}(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this.changes=new si(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return xs(e).put(r)}removeEntry(e,t,r){return xs(e).delete(function(a,u){const d=a.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],lh(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.vr(e,r)))}getEntry(e,t){let r=St.newInvalidDocument(t);return xs(e).te({index:Fc,range:IDBKeyRange.only(yl(t))},(o,a)=>{r=this.Cr(t,a)}).next(()=>r)}Fr(e,t){let r={size:0,document:St.newInvalidDocument(t)};return xs(e).te({index:Fc,range:IDBKeyRange.only(yl(t))},(o,a)=>{r={document:this.Cr(t,a),size:ch(a)}}).next(()=>r)}getEntries(e,t){let r=Dn();return this.Mr(e,t,(o,a)=>{const u=this.Cr(o,a);r=r.insert(o,u)}).next(()=>r)}Or(e,t){let r=Dn(),o=new pt(he.comparator);return this.Mr(e,t,(a,u)=>{const d=this.Cr(a,u);r=r.insert(a,d),o=o.insert(a,ch(u))}).next(()=>({documents:r,Nr:o}))}Mr(e,t,r){if(t.isEmpty())return F.resolve();let o=new nt(Z_);t.forEach(p=>o=o.add(p));const a=IDBKeyRange.bound(yl(o.first()),yl(o.last())),u=o.getIterator();let d=u.getNext();return xs(e).te({index:Fc,range:a},(p,y,E)=>{const T=he.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&Z_(d,T)<0;)r(d,null),d=u.getNext();d&&d.isEqual(T)&&(r(d,y),d=u.hasNext()?u.getNext():null),d?E.H(yl(d)):E.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,o,a){const u=t.path,d=[u.popLast().toArray(),u.lastSegment(),lh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xs(e).J(IDBKeyRange.bound(d,p,!0)).next(y=>{a==null||a.incrementDocumentReadCount(y.length);let E=Dn();for(const T of y){const S=this.Cr(he.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);S.isFoundDocument()&&(ru(t,S)||o.has(S.key))&&(E=E.insert(S.key,S))}return E})}getAllFromCollectionGroup(e,t,r,o){let a=Dn();const u=J_(t,r),d=J_(t,Vn.max());return xs(e).te({index:TE,range:IDBKeyRange.bound(u,d,!0)},(p,y,E)=>{const T=this.Cr(he.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);a=a.insert(T.key,T),a.size===o&&E.done()}).next(()=>a)}newChangeBuffer(e){return new KA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return X_(e).get(Jf).next(t=>(Ae(!!t,20021),t))}vr(e,t){return X_(e).put(Jf,t)}Cr(e,t){if(t){const r=kA(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(xe.min())))return r}return St.newInvalidDocument(e)}}function O0(i){return new HA(i)}class KA extends V0{constructor(e,t){super(),this.Br=e,this.trackRemovals=t,this.Lr=new si(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new nt((a,u)=>De(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const d=this.Lr.get(a);if(t.push(this.Br.removeEntry(e,a,d.readTime)),u.isValidDocument()){const p=V_(this.Br.serializer,u);o=o.add(a.path.popLast());const y=ch(p);r+=y-d.size,t.push(this.Br.addEntry(e,a,p))}else if(r-=d.size,this.trackRemovals){const p=V_(this.Br.serializer,u.convertToNoDocument(xe.min()));t.push(this.Br.addEntry(e,a,p))}}),o.forEach(a=>{t.push(this.Br.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Br.updateMetadata(e,r)),F.waitFor(t)}getFromCache(e,t){return this.Br.Fr(e,t).next(r=>(this.Lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Br.Or(e,t).next(({documents:r,Nr:o})=>(o.forEach((a,u)=>{this.Lr.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function X_(i){return Ot(i,jl)}function xs(i){return Ot(i,th)}function yl(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function J_(i,e){const t=e.documentKey.path.toArray();return[i,lh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Z_(i,e){const t=i.path.toArray(),r=e.path.toArray();let o=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(o=De(t[a],r[a]),o)return o;return o=De(t.length,r.length),o||(o=De(t[t.length-2],r[r.length-2]),o||De(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&Vl(r.mutation,o,In.empty(),Et.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ze()){const o=kr();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(a=>{let u=wl();return a.forEach((d,p)=>{u=u.insert(d,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=kr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ze()))}populateOverlays(e,t,r){const o=[];return r.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,o){let a=Dn();const u=Dl(),d=function(){return Dl()}();return t.forEach((p,y)=>{const E=r.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof oi)?a=a.insert(y.key,y):E!==void 0?(u.set(y.key,E.mutation.getFieldMask()),Vl(E.mutation,y,E.mutation.getFieldMask(),Et.now())):u.set(y.key,In.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((y,E)=>u.set(y,E)),t.forEach((y,E)=>{var T;return d.set(y,new GA(E,(T=u.get(y))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Dl();let o=new pt((u,d)=>u-d),a=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let E=r.get(p)||In.empty();E=d.applyToLocalView(y,E),r.set(p,E);const T=(o.get(d.batchId)||ze()).add(p);o=o.insert(d.batchId,T)})}).next(()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,E=p.value,T=e0();E.forEach(S=>{if(!a.has(S)){const O=o0(t.get(S),r.get(S));O!==null&&T.set(S,O),a=a.add(S)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,T))}return F.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(u){return he.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):QE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):F.resolve(kr());let d=Fl,p=a;return u.next(y=>F.forEach(y,(E,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(E)?F.resolve():this.remoteDocumentCache.getEntry(e,E).next(S=>{p=p.insert(E,S)}))).next(()=>this.populateOverlays(e,y,a)).next(()=>this.computeViews(e,p,y,ze())).next(E=>({batchId:d,changes:ZE(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let o=wl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let u=wl();return this.indexManager.getCollectionParents(e,a).next(d=>F.forEach(d,p=>{const y=function(T,S){return new Ca(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next(E=>{E.forEach((T,S)=>{u=u.insert(T,S)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o))).next(u=>{a.forEach((p,y)=>{const E=y.getKey();u.get(E)===null&&(u=u.insert(E,St.newInvalidDocument(E)))});let d=wl();return u.forEach((p,y)=>{const E=a.get(p);E!==void 0&&Vl(E.mutation,y,In.empty(),Et.now()),ru(t,y)&&(d=d.insert(p,y))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return F.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:hn(o.createTime)}}(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:A0(o.bundledQuery),readTime:hn(o.readTime)}}(t)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(){this.overlays=new pt(he.comparator),this.Qr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const r=kr();return F.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&r.set(o,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,a)=>{this.St(e,t,a)}),F.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){const o=kr(),a=t.length+1,u=new he(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&p.largestBatchId>r&&o.set(p.getKey(),p)}return F.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new pt((y,E)=>y-E);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let E=a.get(y.largestBatchId);E===null&&(E=kr(),a=a.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const d=kr(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>d.set(y,E)),!(d.size()>=o)););return F.resolve(d)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new qp(t,r));let a=this.Qr.get(t);a===void 0&&(a=ze(),this.Qr.set(t,a)),this.Qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(){this.$r=new nt(Bt.Ur),this.Kr=new nt(Bt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Bt(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Bt(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new he(new Ze([])),r=new Bt(t,e),o=new Bt(t,e+1),a=[];return this.Kr.forEachInRange([r,o],u=>{this.zr(u),a.push(u.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new he(new Ze([])),r=new Bt(t,e),o=new Bt(t,e+1);let a=ze();return this.Kr.forEachInRange([r,o],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Bt(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return he.comparator(e.key,t.key)||De(e.Zr,t.Zr)}static Wr(e,t){return De(e.Zr,t.Zr)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new nt(Bt.Ur)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new jp(a,t,r,o);this.mutationQueue.push(u);for(const d of o)this.Xr=this.Xr.add(new Bt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return F.resolve(u)}lookupMutationBatch(e,t){return F.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ti(r),a=o<0?0:o;return F.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Us:this.nr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Bt(t,0),o=new Bt(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,o],u=>{const d=this.ei(u.Zr);a.push(d)}),F.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nt(De);return t.forEach(o=>{const a=new Bt(o,0),u=new Bt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,u],d=>{r=r.add(d.Zr)})}),F.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;he.isDocumentKey(a)||(a=a.child(""));const u=new Bt(new he(a),0);let d=new nt(De);return this.Xr.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.Zr)),!0)},u),F.resolve(this.ni(d))}ni(e){const t=[];return e.forEach(r=>{const o=this.ei(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ae(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return F.forEach(t.mutations,o=>{const a=new Bt(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Bt(t,0),o=this.Xr.firstAfterOrEqual(r);return F.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.ii=e,this.docs=function(){return new pt(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,u=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():St.newInvalidDocument(t))}getEntries(e,t){let r=Dn();return t.forEach(o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():St.newInvalidDocument(o))}),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=Dn();const u=t.path,d=new he(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||bp(_E(E),r)<=0||(o.has(E.key)||ru(t,E))&&(a=a.insert(E.key,E.mutableCopy()))}return F.resolve(a)}getAllFromCollectionGroup(e,t,r,o){we(9500)}si(e,t){return F.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ZA(this)}getSize(e){return F.resolve(this.size)}}class ZA extends V0{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(r)}),F.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.persistence=e,this.oi=new si(t=>Ws(t),nu),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this._i=0,this.ai=new Qp,this.targetCount=0,this.ui=Xs.cr()}forEachTarget(e,t){return this.oi.forEach((r,o)=>t(o)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),F.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Xs(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Tr(t),F.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.oi.forEach((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.oi.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),F.waitFor(a).next(()=>o)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(u=>{a.push(o.markPotentiallyOrphaned(e,u))}),F.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t){this.ci={},this.overlays={},this.li=new Hn(0),this.hi=!1,this.hi=!0,this.Pi=new YA,this.referenceDelegate=e(this),this.Ti=new eC(this),this.indexManager=new FA,this.remoteDocumentCache=function(o){return new JA(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new T0(t),this.Ei=new WA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new QA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new XA(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){re("MemoryPersistence","Starting transaction:",e);const o=new tC(this.li.next());return this.referenceDelegate.di(),r(o).next(a=>this.referenceDelegate.Ai(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Ri(e,t){return F.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class tC extends EE{constructor(e){super(),this.currentSequenceNumber=e}}class Fh{constructor(e){this.persistence=e,this.Vi=new Qp,this.mi=null}static fi(e){return new Fh(e)}get gi(){if(this.mi)return this.mi;throw we(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),F.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.gi,r=>{const o=he.fromPath(r);return this.pi(e,o).next(a=>{a||t.removeEntry(o,xe.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return F.or([()=>F.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class hh{constructor(e,t){this.persistence=e,this.yi=new si(r=>nn(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=D0(this,t)}static fi(e,t){return new hh(e,t)}di(){}Ai(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return F.forEach(this.yi,(r,o)=>this.Dr(e,r,o).next(a=>a?F.resolve():t(o)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.si(e,u=>this.Dr(e,u,t).next(d=>{d||(r++,a.removeEntry(u,xe.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),F.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Bc(e.data.value)),t}Dr(e,t,r){return F.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return F.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.serializer=e}q(e,t,r,o){const a=new Th("createOrUpgrade",t);r<1&&o>=1&&(function(p){p.createObjectStore(tu)}(e),function(p){p.createObjectStore(zl,{keyPath:fS}),p.createObjectStore(cr,{keyPath:c_,autoIncrement:!0}).createIndex(Ls,h_,{unique:!0}),p.createObjectStore(ua)}(e),ev(e),function(p){p.createObjectStore(Ns)}(e));let u=F.resolve();return r<3&&o>=3&&(r!==0&&(function(p){p.deleteObjectStore(ha),p.deleteObjectStore(ca),p.deleteObjectStore(Bs)}(e),ev(e)),u=u.next(()=>function(p){const y=p.store(Bs),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xe.min().toTimestamp(),targetCount:0};return y.put(nh,E)}(a))),r<4&&o>=4&&(r!==0&&(u=u.next(()=>function(p,y){return y.store(cr).J().next(T=>{p.deleteObjectStore(cr),p.createObjectStore(cr,{keyPath:c_,autoIncrement:!0}).createIndex(Ls,h_,{unique:!0});const S=y.store(cr),O=T.map(j=>S.put(j));return F.waitFor(O)})}(e,a))),u=u.next(()=>{(function(p){p.createObjectStore(da,{keyPath:IS})})(e)})),r<5&&o>=5&&(u=u.next(()=>this.wi(a))),r<6&&o>=6&&(u=u.next(()=>(function(p){p.createObjectStore(jl)}(e),this.bi(a)))),r<7&&o>=7&&(u=u.next(()=>this.Si(a))),r<8&&o>=8&&(u=u.next(()=>this.Di(e,a))),r<9&&o>=9&&(u=u.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&o>=10&&(u=u.next(()=>this.Ci(a))),r<11&&o>=11&&(u=u.next(()=>{(function(p){p.createObjectStore(Ah,{keyPath:TS})})(e),function(p){p.createObjectStore(Ch,{keyPath:SS})}(e)})),r<12&&o>=12&&(u=u.next(()=>{(function(p){const y=p.createObjectStore(Ph,{keyPath:bS});y.createIndex(ep,NS,{unique:!1}),y.createIndex(PE,DS,{unique:!1})})(e)})),r<13&&o>=13&&(u=u.next(()=>function(p){const y=p.createObjectStore(th,{keyPath:mS});y.createIndex(Fc,gS),y.createIndex(TE,yS)}(e)).next(()=>this.Fi(e,a)).next(()=>e.deleteObjectStore(Ns))),r<14&&o>=14&&(u=u.next(()=>this.Mi(e,a))),r<15&&o>=15&&(u=u.next(()=>function(p){p.createObjectStore(Vp,{keyPath:AS,autoIncrement:!0}).createIndex(Zf,CS,{unique:!1}),p.createObjectStore(xl,{keyPath:PS}).createIndex(AE,RS,{unique:!1}),p.createObjectStore(kl,{keyPath:xS}).createIndex(CE,kS,{unique:!1})}(e))),r<16&&o>=16&&(u=u.next(()=>{t.objectStore(xl).clear()}).next(()=>{t.objectStore(kl).clear()})),r<17&&o>=17&&(u=u.next(()=>{(function(p){p.createObjectStore(Op,{keyPath:VS})})(e)})),r<18&&o>=18&&Zv()&&(u=u.next(()=>{t.objectStore(xl).clear()}).next(()=>{t.objectStore(kl).clear()})),u}bi(e){let t=0;return e.store(Ns).te((r,o)=>{t+=ch(o)}).next(()=>{const r={byteSize:t};return e.store(jl).put(Jf,r)})}wi(e){const t=e.store(zl),r=e.store(cr);return t.J().next(o=>F.forEach(o,a=>{const u=IDBKeyRange.bound([a.userId,Us],[a.userId,a.lastAcknowledgedBatchId]);return r.J(Ls,u).next(d=>F.forEach(d,p=>{Ae(p.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const y=Vs(this.serializer,p);return x0(e,a.userId,y).next(()=>{})}))}))}Si(e){const t=e.store(ha),r=e.store(Ns);return e.store(Bs).get(nh).next(o=>{const a=[];return r.te((u,d)=>{const p=new Ze(u),y=function(T){return[0,nn(T)]}(p);a.push(t.get(y).next(E=>E?F.resolve():(T=>t.put({targetId:0,path:nn(T),sequenceNumber:o.highestListenSequenceNumber}))(p)))}).next(()=>F.waitFor(a))})}Di(e,t){e.createObjectStore($l,{keyPath:wS});const r=t.store($l),o=new Wp,a=u=>{if(o.add(u)){const d=u.lastSegment(),p=u.popLast();return r.put({collectionId:d,parent:nn(p)})}};return t.store(Ns).te({ee:!0},(u,d)=>{const p=new Ze(u);return a(p.popLast())}).next(()=>t.store(ua).te({ee:!0},([u,d,p],y)=>{const E=xr(d);return a(E.popLast())}))}Ci(e){const t=e.store(ca);return t.te((r,o)=>{const a=Tl(o),u=S0(this.serializer,a);return t.put(u)})}Fi(e,t){const r=t.store(Ns),o=[];return r.te((a,u)=>{const d=t.store(th),p=function(T){return T.document?new he(Ze.fromString(T.document.name).popFirst(5)):T.noDocument?he.fromSegments(T.noDocument.path):T.unknownDocument?he.fromSegments(T.unknownDocument.path):we(36783)}(u).path.toArray(),y={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};o.push(d.put(y))}).next(()=>F.waitFor(o))}Mi(e,t){const r=t.store(cr),o=O0(this.serializer),a=new Yp(Fh.fi,this.serializer.wt);return r.J().next(u=>{const d=new Map;return u.forEach(p=>{var y;let E=(y=d.get(p.userId))!==null&&y!==void 0?y:ze();Vs(this.serializer,p).keys().forEach(T=>E=E.add(T)),d.set(p.userId,E)}),F.forEach(d,(p,y)=>{const E=new Ht(y),T=Mh.bt(this.serializer,E),S=a.getIndexManager(E),O=Lh.bt(E,this.serializer,S,a.referenceDelegate);return new M0(o,O,T,S).recalculateAndSaveOverlaysForDocumentKeys(new tp(t,Hn.le),p).next()})})}}function ev(i){i.createObjectStore(ha,{keyPath:vS}).createIndex(Dp,ES,{unique:!0}),i.createObjectStore(ca,{keyPath:"targetId"}).createIndex(SE,_S,{unique:!0}),i.createObjectStore(Bs)}const Mi="IndexedDbPersistence",Of=18e5,Mf=5e3,Lf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rC="main";class Xp{constructor(e,t,r,o,a,u,d,p,y,E,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.xi=a,this.window=u,this.document=d,this.Oi=y,this.Ni=E,this.Bi=T,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=S=>Promise.resolve(),!Xp.C())throw new ce(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qA(this,o),this.Ui=t+rC,this.serializer=new T0(p),this.Ki=new Gi(this.Ui,this.Bi,new nC(this.serializer)),this.Pi=new NA,this.Ti=new BA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=O0(this.serializer),this.Ei=new bA,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,E===!1&&cn(Mi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(W.FAILED_PRECONDITION,Lf);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new Hn(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Nc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(t=>{t||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(t=>this.isPrimary&&!t?this.Xi(e).next(()=>!1):!!t&&this.es(e).next(()=>!0))).catch(e=>{if(Zi(e))return re(Mi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re(Mi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return _l(e).get(Ho).next(t=>F.resolve(this.ts(t)))}ns(e){return Nc(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,Of)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Ot(t,da);return r.J().next(o=>{const a=this._s(o,Of),u=o.filter(d=>a.indexOf(d)===-1);return F.forEach(u,d=>r.delete(d.clientId)).next(()=>u)})}).catch(()=>[]);if(this.Wi)for(const t of e)this.Wi.removeItem(this.us(t.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?F.resolve(!0):_l(e).get(Ho).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,Mf)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new ce(W.FAILED_PRECONDITION,Lf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Nc(e).J().next(r=>this._s(r,Mf).find(o=>{if(this.clientId!==o.clientId){const a=!this.networkEnabled&&o.networkEnabled,u=!this.inForeground&&o.inForeground,d=this.networkEnabled===o.networkEnabled;if(a||u&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&re(Mi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[tu,da],e=>{const t=new tp(e,Hn.le);return this.Xi(t).next(()=>this.ns(t))}),this.Ki.close(),this.Ts()}_s(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>Nc(e).J().next(t=>this._s(t,Of).map(r=>r.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,t){return Lh.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new UA(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return Mh.bt(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,t,r){re(Mi,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",a=function(p){return p===18?LS:p===17?bE:p===16?MS:p===15?Mp:p===14?kE:p===13?xE:p===12?OS:p===11?RE:void we(60245)}(this.Bi);let u;return this.Ki.runTransaction(e,o,a,d=>(u=new tp(d,this.li?this.li.next():Hn.le),t==="readwrite-primary"?this.Yi(u).next(p=>!!p||this.Zi(u)).next(p=>{if(!p)throw cn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new ce(W.FAILED_PRECONDITION,vE);return r(u)}).next(p=>this.es(u).next(()=>p)):this.Es(u).next(()=>r(u)))).then(d=>(u.raiseOnCommittedEvent(),d))}Es(e){return _l(e).get(Ho).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,Mf)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Ni||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ce(W.FAILED_PRECONDITION,Lf)})}es(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _l(e).put(Ho,t)}static C(){return Gi.C()}Xi(e){const t=_l(e);return t.get(Ho).next(r=>this.ts(r)?(re(Mi,"Releasing primary lease."),t.delete(Ho)):F.resolve())}ss(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(cn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}zi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground=this.document.visibilityState==="visible")}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Li=()=>{this.ls();const t=/(?:Version|Mobile)\/1[456]/;Jv()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var t;try{const r=((t=this.Wi)===null||t===void 0?void 0:t.getItem(this.us(e)))!==null;return re(Mi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return cn(Mi,"Failed to get zombied client id.",r),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(e){cn("Failed to set zombie client id.",e)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch{}}us(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function _l(i){return Ot(i,tu)}function Nc(i){return Ot(i,da)}function iC(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.ds=r,this.As=o}static Rs(e,t){let r=ze(),o=ze();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Jp(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Jv()?8:wE(Vt())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.ws(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.bs(e,t,o,r).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new sC;return this.Ss(e,t,u).next(d=>{if(a.result=d,this.fs)return this.Ds(e,t,u,d.size)})}).next(()=>a.result)}Ds(e,t,r,o){return r.documentReadCount<this.gs?(Xo()<=$e.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Jo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),F.resolve()):(Xo()<=$e.DEBUG&&re("QueryEngine","Query:",Jo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(Xo()<=$e.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Jo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(t))):F.resolve())}ws(e,t){if(S_(t))return F.resolve(null);let r=Kn(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=lp(t,null,"F"),r=Kn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=ze(...a);return this.ys.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.vs(t,d);return this.Cs(t,y,u,p.readTime)?this.ws(e,lp(t,null,"F")):this.Fs(e,y,t,p)}))})))}bs(e,t,r,o){return S_(t)||o.isEqual(xe.min())?F.resolve(null):this.ys.getDocuments(e,r).next(a=>{const u=this.vs(t,a);return this.Cs(t,u,r,o)?F.resolve(null):(Xo()<=$e.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Jo(t)),this.Fs(e,u,t,oS(o,Fl)).next(d=>d))})}vs(e,t){let r=new nt(XE(e));return t.forEach((o,a)=>{ru(e,a)&&(r=r.add(a))}),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,r){return Xo()<=$e.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Jo(t)),this.ys.getDocumentsMatchingQuery(e,t,Vn.min(),r)}Fs(e,t,r,o){return this.ys.getDocumentsMatchingQuery(e,r,o).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="LocalStore",oC=3e8;class aC{constructor(e,t,r,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new pt(De),this.Os=new si(a=>Ws(a),nu),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M0(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function F0(i,e,t,r){return new aC(i,e,t,r)}async function U0(i,e){const t=Fe(i);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(a=>(o=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],d=[];let p=ze();for(const y of o){u.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of a){d.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(r,p).next(y=>({ks:y,removedBatchIds:u,addedBatchIds:d}))})})}function lC(i,e){const t=Fe(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(d,p,y,E){const T=y.batch,S=T.keys();let O=F.resolve();return S.forEach(j=>{O=O.next(()=>E.getEntry(p,j)).next(K=>{const q=y.docVersions.get(j);Ae(q!==null,48541),K.version.compareTo(q)<0&&(T.applyToRemoteDocument(K,y),K.isValidDocument()&&(K.setReadTime(y.commitVersion),E.addEntry(K)))})}),O.next(()=>d.mutationQueue.removeMutationBatch(p,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=ze();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function B0(i){const e=Fe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function uC(i,e){const t=Fe(i),r=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const d=[];e.targetChanges.forEach((E,T)=>{const S=o.get(T);if(!S)return;d.push(t.Ti.removeMatchingKeys(a,E.removedDocuments,T).next(()=>t.Ti.addMatchingKeys(a,E.addedDocuments,T)));let O=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken(kt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,r)),o=o.insert(T,O),function(K,q,G){return K.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=oC?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(S,O,E)&&d.push(t.Ti.updateTargetData(a,O))});let p=Dn(),y=ze();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))}),d.push(cC(a,u,e.documentUpdates).next(E=>{p=E.qs,y=E.Qs})),!r.isEqual(xe.min())){const E=t.Ti.getLastRemoteSnapshotVersion(a).next(T=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(E)}return F.waitFor(d).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,y)).next(()=>p)}).then(a=>(t.xs=o,a))}function cC(i,e,t){let r=ze(),o=ze();return t.forEach(a=>r=r.add(a)),e.getEntries(i,r).next(a=>{let u=Dn();return t.forEach((d,p)=>{const y=a.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(xe.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):re(Zp,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{qs:u,Qs:o}})}function hC(i,e){const t=Fe(i);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Us),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dC(i,e){const t=Fe(i);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ti.getTargetData(r,e).next(a=>a?(o=a,F.resolve(o)):t.Ti.allocateTargetId(r).next(u=>(o=new Xr(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function gp(i,e,t){const r=Fe(i),o=r.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,o))}catch(u){if(!Zi(u))throw u;re(Zp,`Failed to update sequence numbers for target ${e}: ${u}`)}r.xs=r.xs.remove(e),r.Os.delete(o.target)}function tv(i,e,t){const r=Fe(i);let o=xe.min(),a=ze();return r.persistence.runTransaction("Execute query","readwrite",u=>function(p,y,E){const T=Fe(p),S=T.Os.get(E);return S!==void 0?F.resolve(T.xs.get(S)):T.Ti.getTargetData(y,E)}(r,u,Kn(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(u,d.targetId).next(p=>{a=p})}).next(()=>r.Ms.getDocumentsMatchingQuery(u,e,t?o:xe.min(),t?a:ze())).next(d=>(fC(r,JS(e),d),{documents:d,$s:a})))}function fC(i,e,t){let r=i.Ns.get(e)||xe.min();t.forEach((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),i.Ns.set(e,r)}class nv{constructor(){this.activeTargetIds=iA()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class z0{constructor(){this.xo=new nv,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new nv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="ConnectivityMonitor";class iv{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){re(rv,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){re(rv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc=null;function yp(){return Dc===null?Dc=function(){return 268435456+Math.round(2147483648*Math.random())}():Dc++,"0x"+Dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="RestConnection",mC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gC{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===rh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(e,t,r,o,a){const u=yp(),d=this.jo(e,t.toUriEncodedString());re(Ff,`Sending RPC '${e}' ${u}:`,d,r);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,o,a);const{host:y}=new URL(d),E=Ta(y);return this.Jo(e,d,p,r,E).then(T=>(re(Ff,`Received RPC '${e}' ${u}: `,T),T),T=>{throw Ks(Ff,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",r),T})}Yo(e,t,r,o,a,u){return this.zo(e,t,r,o,a)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Aa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,a)=>e[a]=o),r&&r.headers.forEach((o,a)=>e[a]=o)}jo(e,t){const r=mC[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class _C extends gC{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,a){const u=yp();return new Promise((d,p)=>{const y=new lE;y.setWithCredentials(!0),y.listenOnce(uE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Oc.NO_ERROR:const T=y.getResponseJson();re(Xt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case Oc.TIMEOUT:re(Xt,`RPC '${e}' ${u} timed out`),p(new ce(W.DEADLINE_EXCEEDED,"Request time out"));break;case Oc.HTTP_ERROR:const S=y.getStatus();if(re(Xt,`RPC '${e}' ${u} failed with status:`,S,"response text:",y.getResponseText()),S>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const j=O==null?void 0:O.error;if(j&&j.status&&j.message){const K=function(G){const J=G.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(J)>=0?J:W.UNKNOWN}(j.status);p(new ce(K,j.message))}else p(new ce(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ce(W.UNAVAILABLE,"Connection failed."));break;default:we(9055,{h_:e,streamId:u,P_:y.getLastErrorCode(),T_:y.getLastError()})}}finally{re(Xt,`RPC '${e}' ${u} completed.`)}});const E=JSON.stringify(o);re(Xt,`RPC '${e}' ${u} sending request:`,o),y.send(t,"POST",E,r,15)})}I_(e,t,r){const o=yp(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=dE(),d=hE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const E=a.join("");re(Xt,`Creating RPC '${e}' stream ${o}: ${E}`,p);const T=u.createWebChannel(E,p);this.E_(T);let S=!1,O=!1;const j=new yC({Zo:q=>{O?re(Xt,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(S||(re(Xt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),re(Xt,`RPC '${e}' stream ${o} sending:`,q),T.send(q))},Xo:()=>T.close()}),K=(q,G,J)=>{q.listen(G,oe=>{try{J(oe)}catch(me){setTimeout(()=>{throw me},0)}})};return K(T,El.EventType.OPEN,()=>{O||(re(Xt,`RPC '${e}' stream ${o} transport opened.`),j.__())}),K(T,El.EventType.CLOSE,()=>{O||(O=!0,re(Xt,`RPC '${e}' stream ${o} transport closed`),j.u_(),this.d_(T))}),K(T,El.EventType.ERROR,q=>{O||(O=!0,Ks(Xt,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),j.u_(new ce(W.UNAVAILABLE,"The operation could not be completed")))}),K(T,El.EventType.MESSAGE,q=>{var G;if(!O){const J=q.data[0];Ae(!!J,16349);const oe=J,me=(oe==null?void 0:oe.error)||((G=oe[0])===null||G===void 0?void 0:G.error);if(me){re(Xt,`RPC '${e}' stream ${o} received error:`,me);const ke=me.status;let ue=function(R){const b=xt[R];if(b!==void 0)return u0(b)}(ke),k=me.message;ue===void 0&&(ue=W.INTERNAL,k="Unknown error status: "+ke+" with message "+me.message),O=!0,j.u_(new ce(ue,k)),T.close()}else re(Xt,`RPC '${e}' stream ${o} received:`,J),j.c_(J)}}),K(d,cE.STAT_EVENT,q=>{q.stat===Qf.PROXY?re(Xt,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===Qf.NOPROXY&&re(Xt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{j.a_()},0),j}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(){return typeof window<"u"?window:null}function Hc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(i){return new EA(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,t,r=1e3,o=1.5,a=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=o,this.V_=a,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,t-r);o>0&&re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="PersistentStream";class $0{constructor(e,t,r,o,a,u,d,p){this.xi=e,this.S_=r,this.D_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new j0(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(cn(t.toString()),cn("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===t&&this.z_(r,o)},r=>{e(()=>{const o=new ce(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return re(sv,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(re(sv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EC extends $0{constructor(e,t,r,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,u),this.serializer=a}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=TA(this.serializer,e),r=function(a){if(!("targetChange"in a))return xe.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?xe.min():u.readTime?hn(u.readTime):xe.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=hp(this.serializer),t.addTarget=function(a,u){let d;const p=u.target;if(d=ih(p)?{documents:y0(a,p)}:{query:_0(a,p).gt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=d0(a,u.resumeToken);const y=up(a,u.expectedCount);y!==null&&(d.expectedCount=y)}else if(u.snapshotVersion.compareTo(xe.min())>0){d.readTime=va(a,u.snapshotVersion.toTimestamp());const y=up(a,u.expectedCount);y!==null&&(d.expectedCount=y)}return d}(this.serializer,e);const r=AA(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=hp(this.serializer),t.removeTarget=e,this.Q_(t)}}class wC extends $0{constructor(e,t,r,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,u),this.serializer=a}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=SA(e.writeResults,e.commitTime),r=hn(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=hp(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ah(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{}class TC extends IC{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new ce(W.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.zo(e,cp(t,r),o,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(W.UNKNOWN,a.toString())})}Yo(e,t,r,o,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.Yo(e,cp(t,r),o,u,d,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(W.UNKNOWN,u.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class SC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(cn(t),this.ua=!1):re("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="RemoteStore";class AC{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=a,this.Ra.No(u=>{r.enqueueAndForget(async()=>{to(this)&&(re(Js,"Restarting streams for network reachability change."),await async function(p){const y=Fe(p);y.da.add(4),await su(y),y.Va.set("Unknown"),y.da.delete(4),await Bh(y)}(this))})}),this.Va=new SC(r,o)}}async function Bh(i){if(to(i))for(const e of i.Aa)await e(!0)}async function su(i){for(const e of i.Aa)await e(!1)}function q0(i,e){const t=Fe(i);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),rm(t)?nm(t):Ra(t).N_()&&tm(t,e))}function em(i,e){const t=Fe(i),r=Ra(t);t.Ea.delete(e),r.N_()&&H0(t,e),t.Ea.size===0&&(r.N_()?r.k_():to(t)&&t.Va.set("Unknown"))}function tm(i,e){if(i.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ra(i).Z_(e)}function H0(i,e){i.ma.Ke(e),Ra(i).X_(e)}function nm(i){i.ma=new gA({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i.Ea.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),Ra(i).start(),i.Va.ca()}function rm(i){return to(i)&&!Ra(i).O_()&&i.Ea.size>0}function to(i){return Fe(i).da.size===0}function K0(i){i.ma=void 0}async function CC(i){i.Va.set("Online")}async function PC(i){i.Ea.forEach((e,t)=>{tm(i,e)})}async function RC(i,e){K0(i),rm(i)?(i.Va.Pa(e),nm(i)):i.Va.set("Unknown")}async function xC(i,e,t){if(i.Va.set("Online"),e instanceof h0&&e.state===2&&e.cause)try{await async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ea.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ea.delete(d),o.ma.removeTarget(d))}(i,e)}catch(r){re(Js,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dh(i,r)}else if(e instanceof $c?i.ma.Xe(e):e instanceof c0?i.ma.ot(e):i.ma.nt(e),!t.isEqual(xe.min()))try{const r=await B0(i.localStore);t.compareTo(r)>=0&&await function(a,u){const d=a.ma.It(u);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=a.Ea.get(y);E&&a.Ea.set(y,E.withResumeToken(p.resumeToken,u))}}),d.targetMismatches.forEach((p,y)=>{const E=a.Ea.get(p);if(!E)return;a.Ea.set(p,E.withResumeToken(kt.EMPTY_BYTE_STRING,E.snapshotVersion)),H0(a,p);const T=new Xr(E.target,p,y,E.sequenceNumber);tm(a,T)}),a.remoteSyncer.applyRemoteEvent(d)}(i,t)}catch(r){re(Js,"Failed to raise snapshot:",r),await dh(i,r)}}async function dh(i,e,t){if(!Zi(e))throw e;i.da.add(1),await su(i),i.Va.set("Offline"),t||(t=()=>B0(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{re(Js,"Retrying IndexedDB access"),await t(),i.da.delete(1),await Bh(i)})}function G0(i,e){return e().catch(t=>dh(i,t,e))}async function ou(i){const e=Fe(i),t=Xi(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Us;for(;kC(e);)try{const o=await hC(e.localStore,r);if(o===null){e.Ia.length===0&&t.k_();break}r=o.batchId,bC(e,o)}catch(o){await dh(e,o)}W0(e)&&Q0(e)}function kC(i){return to(i)&&i.Ia.length<10}function bC(i,e){i.Ia.push(e);const t=Xi(i);t.N_()&&t.ea&&t.ta(e.mutations)}function W0(i){return to(i)&&!Xi(i).O_()&&i.Ia.length>0}function Q0(i){Xi(i).start()}async function NC(i){Xi(i).ia()}async function DC(i){const e=Xi(i);for(const t of i.Ia)e.ta(t.mutations)}async function VC(i,e,t){const r=i.Ia.shift(),o=$p.from(r,e,t);await G0(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await ou(i)}async function OC(i,e){e&&Xi(i).ea&&await async function(r,o){if(function(u){return pA(u)&&u!==W.ABORTED}(o.code)){const a=r.Ia.shift();Xi(r).L_(),await G0(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o)),await ou(r)}}(i,e),W0(i)&&Q0(i)}async function ov(i,e){const t=Fe(i);t.asyncQueue.verifyOperationInProgress(),re(Js,"RemoteStore received new credentials");const r=to(t);t.da.add(3),await su(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await Bh(t)}async function MC(i,e){const t=Fe(i);e?(t.da.delete(2),await Bh(t)):e||(t.da.add(2),await su(t),t.Va.set("Unknown"))}function Ra(i){return i.fa||(i.fa=function(t,r,o){const a=Fe(t);return a.oa(),new EC(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(i.datastore,i.asyncQueue,{e_:CC.bind(null,i),n_:PC.bind(null,i),i_:RC.bind(null,i),Y_:xC.bind(null,i)}),i.Aa.push(async e=>{e?(i.fa.L_(),rm(i)?nm(i):i.Va.set("Unknown")):(await i.fa.stop(),K0(i))})),i.fa}function Xi(i){return i.ga||(i.ga=function(t,r,o){const a=Fe(t);return a.oa(),new wC(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(i.datastore,i.asyncQueue,{e_:()=>Promise.resolve(),n_:NC.bind(null,i),i_:OC.bind(null,i),na:DC.bind(null,i),ra:VC.bind(null,i)}),i.Aa.push(async e=>{e?(i.ga.L_(),await ou(i)):(await i.ga.stop(),i.Ia.length>0&&(re(Js,`Stopping write stream with ${i.Ia.length} pending writes`),i.Ia=[]))})),i.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const u=Date.now()+r,d=new im(e,t,u,o,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sm(i,e){if(cn("AsyncQueue",`${e}: ${i}`),Zi(i))return new ce(W.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{static emptySet(e){return new na(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=wl(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof na)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new na;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(){this.pa=new pt(he.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):we(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ea{constructor(e,t,r,o,a,u,d,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,o,a){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Ea(e,t,na.emptySet(t),u,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class FC{constructor(){this.queries=lv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=Fe(t),a=o.queries;o.queries=lv(),a.forEach((u,d)=>{for(const p of d.Sa)p.onError(r)})})(this,new ce(W.ABORTED,"Firestore shutting down"))}}function lv(){return new si(i=>YE(i),bh)}async function Y0(i,e){const t=Fe(i);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.Da()&&e.va()&&(r=2):(a=new LC,r=e.va()?0:1);try{switch(r){case 0:a.ba=await t.onListen(o,!0);break;case 1:a.ba=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=sm(u,`Initialization of query '${Jo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.Sa.push(e),e.Fa(t.onlineState),a.ba&&e.Ma(a.ba)&&om(t)}async function X0(i,e){const t=Fe(i),r=e.query;let o=3;const a=t.queries.get(r);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?o=e.va()?0:1:!a.Da()&&e.va()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function UC(i,e){const t=Fe(i);let r=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.Sa)d.Ma(o)&&(r=!0);u.ba=o}}r&&om(t)}function BC(i,e,t){const r=Fe(i),o=r.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);r.queries.delete(e)}function om(i){i.Ca.forEach(e=>{e.next()})}var _p,uv;(uv=_p||(_p={})).xa="default",uv.Cache="cache";class J0{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Ea(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==_p.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e){this.key=e}}class ew{constructor(e){this.key=e}}class zC{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ze(),this.mutatedKeys=ze(),this.Za=XE(e),this.Xa=new na(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new av,o=t?t.Xa:this.Xa;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,T)=>{const S=o.get(E),O=ru(this.query,T)?T:null,j=!!S&&this.mutatedKeys.has(S.key),K=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let q=!1;S&&O?S.data.isEqual(O.data)?j!==K&&(r.track({type:3,doc:O}),q=!0):this.ru(S,O)||(r.track({type:2,doc:O}),q=!0,(p&&this.Za(O,p)>0||y&&this.Za(O,y)<0)&&(d=!0)):!S&&O?(r.track({type:0,doc:O}),q=!0):S&&!O&&(r.track({type:1,doc:S}),q=!0,(p||y)&&(d=!0)),q&&(O?(u=u.add(O),a=K?a.add(E):a.delete(E)):(u=u.delete(E),a=a.delete(E)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const E=this.query.limitType==="F"?u.last():u.first();u=u.delete(E.key),a=a.delete(E.key),r.track({type:1,doc:E})}return{Xa:u,nu:r,Cs:d,mutatedKeys:a}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const u=e.nu.wa();u.sort((E,T)=>function(O,j){const K=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Vt:q})}};return K(O)-K(j)}(E.type,T.type)||this.Za(E.doc,T.doc)),this.iu(r),o=o!=null&&o;const d=t&&!o?this.su():[],p=this.Ya.size===0&&this.current&&!o?1:0,y=p!==this.Ja;return this.Ja=p,u.length!==0||y?{snapshot:new Ea(this.query,e.Xa,a,u,e.mutatedKeys,p===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new av,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=ze(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new ew(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new Z0(r))}),t}au(e){this.Ha=e.$s,this.Ya=ze();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Ea.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const am="SyncEngine";class jC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class $C{constructor(e){this.key=e,this.cu=!1}}class qC{constructor(e,t,r,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.lu={},this.hu=new si(d=>YE(d),bh),this.Pu=new Map,this.Tu=new Set,this.Iu=new pt(he.comparator),this.Eu=new Map,this.du=new Qp,this.Au={},this.Ru=new Map,this.Vu=Xs.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function HC(i,e,t=!0){const r=ow(i);let o;const a=r.hu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.uu()):o=await tw(r,e,t,!0),o}async function KC(i,e){const t=ow(i);await tw(t,e,!0,!1)}async function tw(i,e,t,r){const o=await dC(i.localStore,Kn(e)),a=o.targetId,u=i.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await GC(i,e,a,u==="current",o.resumeToken)),i.isPrimaryClient&&t&&q0(i.remoteStore,o),d}async function GC(i,e,t,r,o){i.fu=(T,S,O)=>async function(K,q,G,J){let oe=q.view.tu(G);oe.Cs&&(oe=await tv(K.localStore,q.query,!1).then(({documents:k})=>q.view.tu(k,oe)));const me=J&&J.targetChanges.get(q.targetId),ke=J&&J.targetMismatches.get(q.targetId)!=null,ue=q.view.applyChanges(oe,K.isPrimaryClient,me,ke);return hv(K,q.targetId,ue.ou),ue.snapshot}(i,T,S,O);const a=await tv(i.localStore,e,!0),u=new zC(e,a.$s),d=u.tu(a.documents),p=iu.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),y=u.applyChanges(d,i.isPrimaryClient,p);hv(i,t,y.ou);const E=new jC(e,t,u);return i.hu.set(e,E),i.Pu.has(t)?i.Pu.get(t).push(e):i.Pu.set(t,[e]),y.snapshot}async function WC(i,e,t){const r=Fe(i),o=r.hu.get(e),a=r.Pu.get(o.targetId);if(a.length>1)return r.Pu.set(o.targetId,a.filter(u=>!bh(u,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await gp(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&em(r.remoteStore,o.targetId),vp(r,o.targetId)}).catch(eo)):(vp(r,o.targetId),await gp(r.localStore,o.targetId,!0))}async function QC(i,e){const t=Fe(i),r=t.hu.get(e),o=t.Pu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),em(t.remoteStore,r.targetId))}async function YC(i,e,t){const r=aw(i);try{const o=await function(u,d){const p=Fe(u),y=Et.now(),E=d.reduce((O,j)=>O.add(j.key),ze());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",O=>{let j=Dn(),K=ze();return p.Bs.getEntries(O,E).next(q=>{j=q,j.forEach((G,J)=>{J.isValidDocument()||(K=K.add(G))})}).next(()=>p.localDocuments.getOverlayedDocuments(O,j)).next(q=>{T=q;const G=[];for(const J of d){const oe=dA(J,T.get(J.key).overlayedDocument);oe!=null&&G.push(new oi(J.key,oe,zE(oe.value.mapValue),tn.exists(!0)))}return p.mutationQueue.addMutationBatch(O,y,G,d)}).next(q=>{S=q;const G=q.applyToLocalDocumentSet(T,K);return p.documentOverlayCache.saveOverlays(O,q.batchId,G)})}).then(()=>({batchId:S.batchId,changes:ZE(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,p){let y=u.Au[u.currentUser.toKey()];y||(y=new pt(De)),y=y.insert(d,p),u.Au[u.currentUser.toKey()]=y}(r,o.batchId,t),await au(r,o.changes),await ou(r.remoteStore)}catch(o){const a=sm(o,"Failed to persist write");t.reject(a)}}async function nw(i,e){const t=Fe(i);try{const r=await uC(t.localStore,e);e.targetChanges.forEach((o,a)=>{const u=t.Eu.get(a);u&&(Ae(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.cu=!0:o.modifiedDocuments.size>0?Ae(u.cu,14607):o.removedDocuments.size>0&&(Ae(u.cu,42227),u.cu=!1))}),await au(t,r,e)}catch(r){await eo(r)}}function cv(i,e,t){const r=Fe(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.hu.forEach((a,u)=>{const d=u.view.Fa(e);d.snapshot&&o.push(d.snapshot)}),function(u,d){const p=Fe(u);p.onlineState=d;let y=!1;p.queries.forEach((E,T)=>{for(const S of T.Sa)S.Fa(d)&&(y=!0)}),y&&om(p)}(r.eventManager,e),o.length&&r.lu.Y_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function XC(i,e,t){const r=Fe(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),a=o&&o.key;if(a){let u=new pt(he.comparator);u=u.insert(a,St.newNoDocument(a,xe.min()));const d=ze().add(a),p=new Oh(xe.min(),new Map,new pt(De),u,d);await nw(r,p),r.Iu=r.Iu.remove(a),r.Eu.delete(e),lm(r)}else await gp(r.localStore,e,!1).then(()=>vp(r,e,t)).catch(eo)}async function JC(i,e){const t=Fe(i),r=e.batch.batchId;try{const o=await lC(t.localStore,e);iw(t,r,null),rw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await au(t,o)}catch(o){await eo(o)}}async function ZC(i,e,t){const r=Fe(i);try{const o=await function(u,d){const p=Fe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return p.mutationQueue.lookupMutationBatch(y,d).next(T=>(Ae(T!==null,37113),E=T.keys(),p.mutationQueue.removeMutationBatch(y,T))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>p.localDocuments.getDocuments(y,E))})}(r.localStore,e);iw(r,e,t),rw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await au(r,o)}catch(o){await eo(o)}}function rw(i,e){(i.Ru.get(e)||[]).forEach(t=>{t.resolve()}),i.Ru.delete(e)}function iw(i,e,t){const r=Fe(i);let o=r.Au[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.Au[r.currentUser.toKey()]=o}}function vp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Pu.get(e))i.hu.delete(r),t&&i.lu.gu(r,t);i.Pu.delete(e),i.isPrimaryClient&&i.du.Hr(e).forEach(r=>{i.du.containsKey(r)||sw(i,r)})}function sw(i,e){i.Tu.delete(e.path.canonicalString());const t=i.Iu.get(e);t!==null&&(em(i.remoteStore,t),i.Iu=i.Iu.remove(e),i.Eu.delete(t),lm(i))}function hv(i,e,t){for(const r of t)r instanceof Z0?(i.du.addReference(r.key,e),eP(i,r)):r instanceof ew?(re(am,"Document no longer in limbo: "+r.key),i.du.removeReference(r.key,e),i.du.containsKey(r.key)||sw(i,r.key)):we(19791,{pu:r})}function eP(i,e){const t=e.key,r=t.path.canonicalString();i.Iu.get(t)||i.Tu.has(r)||(re(am,"New document in limbo: "+t),i.Tu.add(r),lm(i))}function lm(i){for(;i.Tu.size>0&&i.Iu.size<i.maxConcurrentLimboResolutions;){const e=i.Tu.values().next().value;i.Tu.delete(e);const t=new he(Ze.fromString(e)),r=i.Vu.next();i.Eu.set(r,new $C(t)),i.Iu=i.Iu.insert(t,r),q0(i.remoteStore,new Xr(Kn(kh(t.path)),r,"TargetPurposeLimboResolution",Hn.le))}}async function au(i,e,t){const r=Fe(i),o=[],a=[],u=[];r.hu.isEmpty()||(r.hu.forEach((d,p)=>{u.push(r.fu(p,e,t).then(y=>{var E;if((y||t)&&r.isPrimaryClient){const T=y?!y.fromCache:(E=t==null?void 0:t.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;r.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=Jp.Rs(p.targetId,y);a.push(T)}}))}),await Promise.all(u),r.lu.Y_(o),await async function(p,y){const E=Fe(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>F.forEach(y,S=>F.forEach(S.ds,O=>E.persistence.referenceDelegate.addReference(T,S.targetId,O)).next(()=>F.forEach(S.As,O=>E.persistence.referenceDelegate.removeReference(T,S.targetId,O)))))}catch(T){if(!Zi(T))throw T;re(Zp,"Failed to update sequence numbers: "+T)}for(const T of y){const S=T.targetId;if(!T.fromCache){const O=E.xs.get(S),j=O.snapshotVersion,K=O.withLastLimboFreeSnapshotVersion(j);E.xs=E.xs.insert(S,K)}}}(r.localStore,a))}async function tP(i,e){const t=Fe(i);if(!t.currentUser.isEqual(e)){re(am,"User change. New user:",e.toKey());const r=await U0(t.localStore,e);t.currentUser=e,function(a,u){a.Ru.forEach(d=>{d.forEach(p=>{p.reject(new ce(W.CANCELLED,u))})}),a.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await au(t,r.ks)}}function nP(i,e){const t=Fe(i),r=t.Eu.get(e);if(r&&r.cu)return ze().add(r.key);{let o=ze();const a=t.Pu.get(e);if(!a)return o;for(const u of a){const d=t.hu.get(u);o=o.unionWith(d.view.eu)}return o}}function ow(i){const e=Fe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=nw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XC.bind(null,e),e.lu.Y_=UC.bind(null,e.eventManager),e.lu.gu=BC.bind(null,e.eventManager),e}function aw(i){const e=Fe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZC.bind(null,e),e}class Xl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return F0(this.persistence,new L0,e.initialUser,this.serializer)}Su(e){return new Yp(Fh.fi,this.serializer)}bu(e){return new z0}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xl.provider={build:()=>new Xl};class rP extends Xl{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Ae(this.persistence.referenceDelegate instanceof hh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new N0(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new Yp(r=>hh.fi(r,t),this.serializer)}}class iP extends Xl{constructor(e,t,r){super(),this.Fu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Fu.initialize(this,e),await aw(this.Fu.syncEngine),await ou(this.Fu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Du(e){return F0(this.persistence,new L0,e.initialUser,this.serializer)}vu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new N0(r,e.asyncQueue,t)}Cu(e,t){const r=new cS(t,this.persistence);return new uS(e.asyncQueue,r)}Su(e){const t=iC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new Xp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,vC(),Hc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new z0}}class fh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tP.bind(null,this.syncEngine),await MC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new FC}()}createDatastore(e){const t=Uh(e.databaseInfo.databaseId),r=function(a){return new _C(a)}(e.databaseInfo);return function(a,u,d,p){return new TC(a,u,d,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,a,u,d){return new AC(r,o,a,u,d)}(this.localStore,this.datastore,e.asyncQueue,t=>cv(this.syncEngine,t,0),function(){return iv.C()?new iv:new pC}())}createSyncEngine(e,t){return function(o,a,u,d,p,y,E){const T=new qC(o,a,u,d,p,y);return E&&(T.mu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=Fe(o);re(Js,"RemoteStore shutting down."),a.da.add(5),await su(a),a.Ra.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}fh.provider={build:()=>new fh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):cn("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="FirestoreClient";class sP{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Ht.UNAUTHENTICATED,this.clientId=gE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async u=>{re(Ji,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(re(Ji,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=sm(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Uf(i,e){i.asyncQueue.verifyOperationInProgress(),re(Ji,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener(async o=>{r.isEqual(o)||(await U0(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function dv(i,e){i.asyncQueue.verifyOperationInProgress();const t=await oP(i);re(Ji,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(r=>ov(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,o)=>ov(e.remoteStore,o)),i._onlineComponents=e}async function oP(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){re(Ji,"Using user provided OfflineComponentProvider");try{await Uf(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Ks("Error using user provided cache. Falling back to memory cache: "+t),await Uf(i,new Xl)}}else re(Ji,"Using default OfflineComponentProvider"),await Uf(i,new rP(void 0));return i._offlineComponents}async function uw(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(re(Ji,"Using user provided OnlineComponentProvider"),await dv(i,i._uninitializedComponentsProvider._online)):(re(Ji,"Using default OnlineComponentProvider"),await dv(i,new fh))),i._onlineComponents}function aP(i){return uw(i).then(e=>e.syncEngine)}async function cw(i){const e=await uw(i),t=e.eventManager;return t.onListen=HC.bind(null,e.syncEngine),t.onUnlisten=WC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=KC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QC.bind(null,e.syncEngine),t}function lP(i,e,t={}){const r=new br;return i.asyncQueue.enqueueAndForget(async()=>function(a,u,d,p,y){const E=new lw({next:S=>{E.xu(),u.enqueueAndForget(()=>X0(a,T));const O=S.docs.has(d);!O&&S.fromCache?y.reject(new ce(W.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&p&&p.source==="server"?y.reject(new ce(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new J0(kh(d.path),E,{includeMetadataChanges:!0,Qa:!0});return Y0(a,T)}(await cw(i),i.asyncQueue,e,t,r)),r.promise}function uP(i,e,t={}){const r=new br;return i.asyncQueue.enqueueAndForget(async()=>function(a,u,d,p,y){const E=new lw({next:S=>{E.xu(),u.enqueueAndForget(()=>X0(a,T)),S.fromCache&&p.source==="server"?y.reject(new ce(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new J0(d,E,{includeMetadataChanges:!0,Qa:!0});return Y0(a,T)}(await cw(i),i.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(i,e,t){if(!t)throw new ce(W.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function cP(i,e,t,r){if(e===!0&&r===!0)throw new ce(W.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function pv(i){if(!he.isDocumentKey(i))throw new ce(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function mv(i){if(he.isDocumentKey(i))throw new ce(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function zh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":we(12329,{type:typeof i})}function Gn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ce(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zh(i);throw new ce(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="firestore.googleapis.com",gv=!0;class yv{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fw,this.ssl=gv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:gv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=R0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zA)throw new ce(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ce(W.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ce(W.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ce(W.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jh{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new X1;switch(r.type){case"firstParty":return new tS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=fv.get(t);r&&(re("ComponentProvider","Removing Datastore"),fv.delete(t),r.terminate())}(this),Promise.resolve()}}function hP(i,e,t,r={}){var o;i=Gn(i,jh);const a=Ta(e),u=i._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:i._getEmulatorOptions()}),p=`${e}:${t}`;a&&(Qv(`https://${p}`),Yv("Firestore",!0)),u.host!==fw&&u.host!==p&&Ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},u),{host:p,ssl:a,emulatorOptions:r});if(!$s(y,d)&&(i._setSettings(y),r.mockUserToken)){let E,T;if(typeof r.mockUserToken=="string")E=r.mockUserToken,T=Ht.MOCK_USER;else{E=PT(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new ce(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Ht(S)}i._authCredentials=new J1(new pE(E,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new no(this.firestore,e,this._query)}}class dn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dn(this.firestore,e,this._key)}}class Wi extends no{constructor(e,t,r){super(e,t,kh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new he(e))}withConverter(e){return new Wi(this.firestore,e,this._path)}}function ra(i,e,...t){if(i=rn(i),dw("collection","path",e),i instanceof jh){const r=Ze.fromString(e,...t);return mv(r),new Wi(i,null,r)}{if(!(i instanceof dn||i instanceof Wi))throw new ce(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ze.fromString(e,...t));return mv(r),new Wi(i.firestore,null,r)}}function Rr(i,e,...t){if(i=rn(i),arguments.length===1&&(e=gE.newId()),dw("doc","path",e),i instanceof jh){const r=Ze.fromString(e,...t);return pv(r),new dn(i,null,new he(r))}{if(!(i instanceof dn||i instanceof Wi))throw new ce(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ze.fromString(e,...t));return pv(r),new dn(i.firestore,i instanceof Wi?i.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="AsyncQueue";class vv{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new j0(this,"async_queue_retry"),this.rc=()=>{const r=Hc();r&&re(_v,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=Hc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=Hc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new br;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Zi(e))throw e;re(_v,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,cn("INTERNAL UNHANDLED ERROR: ",Ev(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const o=im.createAndSchedule(this,e,t,r,a=>this.uc(a));return this.Zu.push(o),o}oc(){this.Xu&&we(47125,{cc:Ev(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function Ev(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class ts extends jh{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new vv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vv(e),this._firestoreClient=void 0,await e}}}function dP(i,e){const t=typeof i=="object"?i:iE(),r=typeof i=="string"?i:rh,o=xp(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const a=AT("firestore");a&&hP(o,...a)}return o}function um(i){if(i._terminated)throw new ce(W.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||pw(i),i._firestoreClient}function pw(i){var e,t,r;const o=i._freezeSettings(),a=function(d,p,y,E){return new US(d,p,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,hw(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new sP(i._authCredentials,i._appCheckCredentials,i._queue,a,i._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(i._componentsProvider))}function fP(i,e){Ks("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings();return pP(i,fh.provider,{build:r=>new iP(r,t.cacheSizeBytes,void 0)}),Promise.resolve()}function pP(i,e,t){if((i=Gn(i,ts))._firestoreClient||i._terminated)throw new ce(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new ce(W.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:e,_offline:t},pw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wa(kt.fromBase64String(e))}catch(t){throw new ce(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wa(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=/^__.*__$/;class gP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new oi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pa(e,this.data,t,this.fieldTransforms)}}class mw{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new oi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ic:i})}}class fm{constructor(e,t,r,o,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.Ec(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new fm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Vc(e),o}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return ph(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(gw(this.Ic)&&mP.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class yP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Uh(e)}bc(e,t,r,o=!1){return new fm({Ic:e,methodName:t,wc:r,path:vt.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qh(i){const e=i._freezeSettings(),t=Uh(i._databaseId);return new yP(i._databaseId,!!e.ignoreUndefinedProperties,t)}function yw(i,e,t,r,o,a={}){const u=i.bc(a.merge||a.mergeFields?2:0,e,t,o);pm("Data must be an object, but it was:",u,r);const d=_w(r,u);let p,y;if(a.merge)p=new In(u.fieldMask),y=u.fieldTransforms;else if(a.mergeFields){const E=[];for(const T of a.mergeFields){const S=Ep(e,T,t);if(!u.contains(S))throw new ce(W.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Ew(E,S)||E.push(S)}p=new In(E),y=u.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=u.fieldTransforms;return new gP(new en(d),p,y)}class Hh extends cm{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hh}}function _P(i,e,t,r){const o=i.bc(1,e,t);pm("Data must be an object, but it was:",o,r);const a=[],u=en.empty();es(r,(p,y)=>{const E=mm(e,p,t);y=rn(y);const T=o.mc(E);if(y instanceof Hh)a.push(E);else{const S=lu(y,T);S!=null&&(a.push(E),u.set(E,S))}});const d=new In(a);return new mw(u,d,o.fieldTransforms)}function vP(i,e,t,r,o,a){const u=i.bc(1,e,t),d=[Ep(e,r,t)],p=[o];if(a.length%2!=0)throw new ce(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(Ep(e,a[S])),p.push(a[S+1]);const y=[],E=en.empty();for(let S=d.length-1;S>=0;--S)if(!Ew(y,d[S])){const O=d[S];let j=p[S];j=rn(j);const K=u.mc(O);if(j instanceof Hh)y.push(O);else{const q=lu(j,K);q!=null&&(y.push(O),E.set(O,q))}}const T=new In(y);return new mw(E,T,u.fieldTransforms)}function EP(i,e,t,r=!1){return lu(t,i.bc(r?4:3,e))}function lu(i,e){if(vw(i=rn(i)))return pm("Unsupported field value:",e,i),_w(i,e);if(i instanceof cm)return function(r,o){if(!gw(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,o){const a=[];let u=0;for(const d of r){let p=lu(d,o.fc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}}(i,e)}return function(r,o){if((r=rn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sA(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Et.fromDate(r);return{timestampValue:va(o.serializer,a)}}if(r instanceof Et){const a=new Et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:va(o.serializer,a)}}if(r instanceof hm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wa)return{bytesValue:d0(o.serializer,r._byteString)};if(r instanceof dn){const a=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw o.gc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Kp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof dm)return function(u,d){return{mapValue:{fields:{[Fp]:{stringValue:Up},[fa]:{arrayValue:{values:u.toArray().map(y=>{if(typeof y!="number")throw d.gc("VectorValues must only contain numeric values.");return zp(d.serializer,y)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${zh(r)}`)}(i,e)}function _w(i,e){const t={};return NE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):es(i,(r,o)=>{const a=lu(o,e.Ac(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function vw(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Et||i instanceof hm||i instanceof wa||i instanceof dn||i instanceof cm||i instanceof dm)}function pm(i,e,t){if(!vw(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=zh(t);throw r==="an object"?e.gc(i+" a custom object"):e.gc(i+" "+r)}}function Ep(i,e,t){if((e=rn(e))instanceof $h)return e._internalPath;if(typeof e=="string")return mm(i,e);throw ph("Field path arguments must be of type string or ",i,!1,void 0,t)}const wP=new RegExp("[~\\*/\\[\\]]");function mm(i,e,t){if(e.search(wP)>=0)throw ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new $h(...e.split("."))._internalPath}catch{throw ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function ph(i,e,t,r,o){const a=r&&!r.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${r}`),u&&(p+=` in document ${o}`),p+=")"),new ce(W.INVALID_ARGUMENT,d+i+p)}function Ew(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class IP extends ww{data(){return super.data()}}function Kh(i,e){return typeof e=="string"?mm(i,e):e instanceof $h?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ce(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gm{}class Iw extends gm{}function wp(i,e,...t){let r=[];e instanceof gm&&r.push(e),r=r.concat(t),function(a){const u=a.filter(p=>p instanceof ym).length,d=a.filter(p=>p instanceof Gh).length;if(u>1||u>0&&d>0)throw new ce(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)i=o._apply(i);return i}class Gh extends Iw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Gh(e,t,r)}_apply(e){const t=this._parse(e);return Tw(e._query,t),new no(e.firestore,e.converter,ap(e._query,t))}_parse(e){const t=qh(e.firestore);return function(a,u,d,p,y,E,T){let S;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ce(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Iv(T,E);const j=[];for(const K of T)j.push(wv(p,a,K));S={arrayValue:{values:j}}}else S=wv(p,a,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Iv(T,E),S=EP(d,u,T,E==="in"||E==="not-in");return qe.create(y,E,S)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ip(i,e,t){const r=e,o=Kh("where",i);return Gh._create(o,r,t)}class ym extends gm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ym(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:tt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,a){let u=o;const d=a.getFlattenedFilters();for(const p of d)Tw(u,p),u=ap(u,p)}(e._query,t),new no(e.firestore,e.converter,ap(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _m extends Iw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _m(e,t)}_apply(e){const t=function(o,a,u){if(o.startAt!==null)throw new ce(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wl(a,u)}(e._query,this._field,this._direction);return new no(e.firestore,e.converter,function(o,a){const u=o.explicitOrderBy.concat([a]);return new Ca(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function Tp(i,e="asc"){const t=e,r=Kh("orderBy",i);return _m._create(r,t)}function wv(i,e,t){if(typeof(t=rn(t))=="string"){if(t==="")throw new ce(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QE(e)&&t.indexOf("/")!==-1)throw new ce(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ze.fromString(t));if(!he.isDocumentKey(r))throw new ce(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kl(i,new he(r))}if(t instanceof dn)return Kl(i,t._key);throw new ce(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zh(t)}.`)}function Iv(i,e){if(!Array.isArray(i)||i.length===0)throw new ce(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Tw(i,e){const t=function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ce(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class SP{convertValue(e,t="none"){switch(Qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return es(e,(o,a)=>{r[o]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,o;const a=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[fa].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(u=>ft(u.doubleValue));return new dm(a)}convertGeoPoint(e){return new hm(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Rh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ql(e));default:return null}}convertTimestamp(e){const t=ti(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ze.fromString(e);Ae(I0(r),9688,{name:e});const o=new Gs(r.get(1),r.get(3)),a=new he(r.popFirst(5));return o.isEqual(t)||cn(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(i,e,t){let r;return r=i?i.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Aw extends ww{constructor(e,t,r,o,a,u){super(e,t,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Kh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Kc extends Aw{data(e={}){return super.data(e)}}class AP{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Sl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Kc(this._firestore,this._userDataWriter,r.key,r,new Sl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map(d=>{const p=new Kc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Sl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}})}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const p=new Kc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Sl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return d.type!==0&&(y=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),E=u.indexOf(d.doc.key)),{type:CP(d.type),doc:p,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function CP(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(i){i=Gn(i,dn);const e=Gn(i.firestore,ts);return lP(um(e),i._key).then(t=>RP(e,i,t))}class Cw extends SP{constructor(e){super(),this.firestore=e}convertBytes(e){return new wa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,t)}}function mh(i){i=Gn(i,no);const e=Gn(i.firestore,ts),t=um(e),r=new Cw(e);return TP(i._query),uP(t,i._query).then(o=>new AP(e,r,i,o))}function Al(i,e,t){i=Gn(i,dn);const r=Gn(i.firestore,ts),o=Sw(i.converter,e);return Wh(r,[yw(qh(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,tn.none())])}function Pw(i,e,t,...r){i=Gn(i,dn);const o=Gn(i.firestore,ts),a=qh(o);let u;return u=typeof(e=rn(e))=="string"||e instanceof $h?vP(a,"updateDoc",i._key,e,t,r):_P(a,"updateDoc",i._key,e),Wh(o,[u.toMutation(i._key,tn.exists(!0))])}function Rw(i){return Wh(Gn(i.firestore,ts),[new Vh(i._key,tn.none())])}function xw(i,e){const t=Gn(i.firestore,ts),r=Rr(i),o=Sw(i.converter,e);return Wh(t,[yw(qh(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,tn.exists(!1))]).then(()=>r)}function Wh(i,e){return function(r,o){const a=new br;return r.asyncQueue.enqueueAndForget(async()=>YC(await aP(r),o,a)),a.promise}(um(i),e)}function RP(i,e,t){const r=t.docs.get(e._key),o=new Cw(i);return new Aw(i,o,e._key,r,new Sl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Aa=o})(Sa),aa(new qs("firestore",(r,{instanceIdentifier:o,options:a})=>{const u=r.getProvider("app").getImmediate(),d=new ts(new Z1(r.getProvider("auth-internal")),new nS(u,r.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ce(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gs(y.options.projectId,E)}(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Hi(t_,n_,e),Hi(t_,n_,"esm2017")})();var xP="firebase",kP="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hi(xP,kP,"app");function vm(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(i);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(i,r[o])&&(t[r[o]]=i[r[o]]);return t}function kw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bP=kw,bw=new Zl("auth","Firebase",kw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new Pp("@firebase/auth");function NP(i,...e){gh.logLevel<=$e.WARN&&gh.warn(`Auth (${Sa}): ${i}`,...e)}function Gc(i,...e){gh.logLevel<=$e.ERROR&&gh.error(`Auth (${Sa}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(i,...e){throw wm(i,...e)}function fr(i,...e){return wm(i,...e)}function Em(i,e,t){const r=Object.assign(Object.assign({},bP()),{[e]:t});return new Zl("auth","Firebase",r).create(e,{appName:i.name})}function js(i){return Em(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function DP(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Vr(i,"argument-error"),Em(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wm(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return bw.create(i,...e)}function Le(i,e,...t){if(!i)throw wm(e,...t)}function Jr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Gc(e),new Error(e)}function ri(i,e){i||Jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function VP(){return Tv()==="http:"||Tv()==="https:"}function Tv(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VP()||NT()||"connection"in navigator)?navigator.onLine:!0}function MP(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ri(t>e,"Short delay should be less than long delay!"),this.isMobile=kT()||DT()}get(){return OP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(i,e){ri(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UP=new uu(3e4,6e4);function Tm(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function xa(i,e,t,r,o={}){return Dw(i,o,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const d=eu(Object.assign({key:i.config.apiKey},u)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const y=Object.assign({method:e,headers:p},a);return bT()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&Ta(i.emulatorConfig.host)&&(y.credentials="include"),Nw.fetch()(await Vw(i,i.config.apiHost,t,d),y)})}async function Dw(i,e,t){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},LP),e);try{const o=new zP(i),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Vc(i,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vc(i,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Vc(i,"email-already-in-use",u);if(p==="USER_DISABLED")throw Vc(i,"user-disabled",u);const E=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Em(i,E,y);Vr(i,E)}}catch(o){if(o instanceof ii)throw o;Vr(i,"network-request-failed",{message:String(o)})}}async function BP(i,e,t,r,o={}){const a=await xa(i,e,t,r,o);return"mfaPendingCredential"in a&&Vr(i,"multi-factor-auth-required",{_serverResponse:a}),a}async function Vw(i,e,t,r){const o=`${e}${t}?${r}`,a=i,u=a.config.emulator?Im(i.config,o):`${i.config.apiScheme}://${o}`;return FP.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class zP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(fr(this.auth,"network-request-failed")),UP.get())})}}function Vc(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=fr(i,e,r);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(i,e){return xa(i,"POST","/v1/accounts:delete",e)}async function yh(i,e){return xa(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $P(i,e=!1){const t=rn(i),r=await t.getIdToken(e),o=Sm(r);Le(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:r,authTime:Ol(Bf(o.auth_time)),issuedAtTime:Ol(Bf(o.iat)),expirationTime:Ol(Bf(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Bf(i){return Number(i)*1e3}function Sm(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Gc("JWT malformed, contained fewer than 3 sections"),null;try{const o=qv(t);return o?JSON.parse(o):(Gc("Failed to decode base64 JWT payload"),null)}catch(o){return Gc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Sv(i){const e=Sm(i);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ii&&qP(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function qP({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ol(this.lastLoginAt),this.creationTime=Ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(i){var e;const t=i.auth,r=await i.getIdToken(),o=await Jl(i,yh(t,{idToken:r}));Le(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];i._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Ow(a.providerUserInfo):[],d=GP(i.providerData,u),p=i.isAnonymous,y=!(i.email&&a.passwordHash)&&!(d!=null&&d.length),E=p?y:!1,T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Ap(a.createdAt,a.lastLoginAt),isAnonymous:E};Object.assign(i,T)}async function KP(i){const e=rn(i);await _h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GP(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Ow(i){return i.map(e=>{var{providerId:t}=e,r=vm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WP(i,e){const t=await Dw(i,{},async()=>{const r=eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=i.config,u=await Vw(i,o,"/v1/token",`key=${a}`),d=await i._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:r};return i.emulatorConfig&&Ta(i.emulatorConfig.host)&&(p.credentials="include"),Nw.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function QP(i,e){return xa(i,"POST","/v2/accounts:revokeToken",Tm(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const t=Sv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:a}=await WP(e,t);this.updateTokensAndExpiration(r,o,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:a}=t,u=new ia;return r&&(Le(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),o&&(Le(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Le(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ia,this.toJSON())}_performRefresh(){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(i,e){Le(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,a=vm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ap(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Jl(this,this.stsTokenManager.getToken(this.auth,e));return Le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $P(this,e)}reload(){return KP(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await _h(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hr(this.auth.app))return Promise.reject(js(this.auth));const e=await this.getIdToken();return await Jl(this,jP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,a,u,d,p,y,E;const T=(r=t.displayName)!==null&&r!==void 0?r:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,O=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,j=(u=t.photoURL)!==null&&u!==void 0?u:void 0,K=(d=t.tenantId)!==null&&d!==void 0?d:void 0,q=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,G=(y=t.createdAt)!==null&&y!==void 0?y:void 0,J=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:oe,emailVerified:me,isAnonymous:ke,providerData:ue,stsTokenManager:k}=t;Le(oe&&k,e,"internal-error");const A=ia.fromJSON(this.name,k);Le(typeof oe=="string",e,"internal-error"),Li(T,e.name),Li(S,e.name),Le(typeof me=="boolean",e,"internal-error"),Le(typeof ke=="boolean",e,"internal-error"),Li(O,e.name),Li(j,e.name),Li(K,e.name),Li(q,e.name),Li(G,e.name),Li(J,e.name);const R=new dr({uid:oe,auth:e,email:S,emailVerified:me,displayName:T,isAnonymous:ke,photoURL:j,phoneNumber:O,tenantId:K,stsTokenManager:A,createdAt:G,lastLoginAt:J});return ue&&Array.isArray(ue)&&(R.providerData=ue.map(b=>Object.assign({},b))),q&&(R._redirectEventId=q),R}static async _fromIdTokenResponse(e,t,r=!1){const o=new ia;o.updateFromServerResponse(t);const a=new dr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await _h(a),a}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Le(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?Ow(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new ia;d.updateFromIdToken(r);const p=new dr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ap(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;function Zr(i){ri(i instanceof Function,"Expected a class definition");let e=Av.get(i);return e?(ri(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Av.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Mw.type="NONE";const Cv=Mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(i,e,t){return`firebase:${i}:${e}:${t}`}class sa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:a}=this.auth;this.fullUserKey=Wc(this.userKey,o.apiKey,a),this.fullPersistenceKey=Wc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await yh(this.auth,{idToken:e}).catch(()=>{});return t?dr._fromGetAccountInfoResponse(this.auth,t,e):null}return dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new sa(Zr(Cv),e,r);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let a=o[0]||Zr(Cv);const u=Wc(r,e.config.apiKey,e.name);let d=null;for(const y of t)try{const E=await y._get(u);if(E){let T;if(typeof E=="string"){const S=await yh(e,{idToken:E}).catch(()=>{});if(!S)break;T=await dr._fromGetAccountInfoResponse(e,S,E)}else T=dr._fromJSON(e,E);y!==a&&(d=T),a=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new sa(a,e,r):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==a)try{await y._remove(u)}catch{}})),new sa(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Bw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Lw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jw(e))return"Blackberry";if($w(e))return"Webos";if(Fw(e))return"Safari";if((e.includes("chrome/")||Uw(e))&&!e.includes("edge/"))return"Chrome";if(zw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Lw(i=Vt()){return/firefox\//i.test(i)}function Fw(i=Vt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Uw(i=Vt()){return/crios\//i.test(i)}function Bw(i=Vt()){return/iemobile/i.test(i)}function zw(i=Vt()){return/android/i.test(i)}function jw(i=Vt()){return/blackberry/i.test(i)}function $w(i=Vt()){return/webos/i.test(i)}function Am(i=Vt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function YP(i=Vt()){var e;return Am(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XP(){return VT()&&document.documentMode===10}function qw(i=Vt()){return Am(i)||zw(i)||$w(i)||jw(i)||/windows phone/i.test(i)||Bw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(i,e=[]){let t;switch(i){case"Browser":t=Pv(Vt());break;case"Worker":t=`${Pv(Vt())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Sa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP(i,e={}){return xa(i,"GET","/v2/passwordPolicy",Tm(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=6;class tR{constructor(e){var t,r,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:eR,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,a,u,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rv(this),this.idTokenSubscription=new Rv(this),this.beforeStateQueue=new JP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zr(t)),this._initializationPromise=this.queue(async()=>{var r,o,a;if(!this._deleted&&(this.persistenceManager=await sa.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yh(this,{idToken:e}),r=await dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(hr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _h(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hr(this.app))return Promise.reject(js(this));const t=e?rn(e):null;return t&&Le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hr(this.app)?Promise.reject(js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hr(this.app)?Promise.reject(js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZP(this),t=new tR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zl("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await QP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Zr(e)||this._popupRedirectResolver;Le(t,this,"argument-error"),this.redirectPersistenceManager=await sa.create(this,[Zr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&NP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Qh(i){return rn(i)}class Rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=BT(t=>this.observer=t)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rR(i){Cm=i}function iR(i){return Cm.loadJS(i)}function sR(){return Cm.gapiScript}function oR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(i,e){const t=xp(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if($s(a,e??{}))return o;Vr(o,"already-initialized")}return t.initialize({options:e})}function lR(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Zr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uR(i,e,t){const r=Qh(i);Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,a=Kw(e),{host:u,port:d}=cR(e),p=d===null?"":`:${d}`,y={url:`${a}//${u}${p}/`},E=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Le($s(y,r.config.emulator)&&$s(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,Ta(u)?(Qv(`${a}//${u}${p}`),Yv("Auth",!0)):hR()}function Kw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function cR(i){const e=Kw(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const a=o[1];return{host:a,port:xv(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:xv(u)}}}function xv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function hR(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Jr("not implemented")}_getIdTokenResponse(e){return Jr("not implemented")}_linkToIdToken(e,t){return Jr("not implemented")}_getReauthenticationResolver(e){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(i,e){return BP(i,"POST","/v1/accounts:signInWithIdp",Tm(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="http://localhost";class Zs extends Gw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,a=vm(t,["providerId","signInMethod"]);if(!r||!o)return null;const u=new Zs(r,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return oa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,oa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,oa(e,t)}buildRequest(){const e={requestUri:dR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=eu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends Pm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends cu{constructor(){super("facebook.com")}static credential(e){return Zs._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ui.credential(e.oauthAccessToken)}catch{return null}}}Ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Zs._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Yr.credential(t,r)}catch{return null}}}Yr.GOOGLE_SIGN_IN_METHOD="google.com";Yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends cu{constructor(){super("github.com")}static credential(e){return Zs._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bi.credential(e.oauthAccessToken)}catch{return null}}}Bi.GITHUB_SIGN_IN_METHOD="github.com";Bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends cu{constructor(){super("twitter.com")}static credential(e,t){return Zs._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return zi.credential(t,r)}catch{return null}}}zi.TWITTER_SIGN_IN_METHOD="twitter.com";zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const a=await dr._fromIdTokenResponse(e,r,o),u=kv(r);return new Ia({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=kv(r);return new Ia({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function kv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh extends ii{constructor(e,t,r,o){var a;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,vh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new vh(e,t,r,o)}}function Ww(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?vh._fromErrorAndOperation(i,a,e,r):a})}async function fR(i,e,t=!1){const r=await Jl(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Ia._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(i,e,t=!1){const{auth:r}=i;if(hr(r.app))return Promise.reject(js(r));const o="reauthenticate";try{const a=await Jl(i,Ww(r,o,e,i),t);Le(a.idToken,r,"internal-error");const u=Sm(a.idToken);Le(u,r,"internal-error");const{sub:d}=u;return Le(i.uid===d,r,"user-mismatch"),Ia._forOperation(i,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Vr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mR(i,e,t=!1){if(hr(i.app))return Promise.reject(js(i));const r="signIn",o=await Ww(i,r,e),a=await Ia._fromIdTokenResponse(i,r,o);return t||await i._updateCurrentUser(a.user),a}function gR(i,e,t,r){return rn(i).onIdTokenChanged(e,t,r)}function yR(i,e,t){return rn(i).beforeAuthStateChanged(e,t)}function _R(i){return rn(i).signOut()}const Eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Eh,"1"),this.storage.removeItem(Eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=1e3,ER=10;class Yw extends Qw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);XP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ER):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},vR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yw.type="LOCAL";const wR=Yw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw extends Qw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Xw.type="SESSION";const Jw=Xw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Yh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const d=Array.from(u).map(async y=>y(t.origin,a)),p=await IR(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const y=Rm("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},r);u={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(E),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(E),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return window}function SR(i){Nr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(){return typeof Nr().WorkerGlobalScope<"u"&&typeof Nr().importScripts=="function"}async function AR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CR(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function PR(){return Zw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="firebaseLocalStorageDb",RR=1,wh="firebaseLocalStorage",tI="fbase_key";class hu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xh(i,e){return i.transaction([wh],e?"readwrite":"readonly").objectStore(wh)}function xR(){const i=indexedDB.deleteDatabase(eI);return new hu(i).toPromise()}function Cp(){const i=indexedDB.open(eI,RR);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(wh,{keyPath:tI})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(wh)?e(r):(r.close(),await xR(),e(await Cp()))})})}async function bv(i,e,t){const r=Xh(i,!0).put({[tI]:e,value:t});return new hu(r).toPromise()}async function kR(i,e){const t=Xh(i,!1).get(e),r=await new hu(t).toPromise();return r===void 0?null:r.value}function Nv(i,e){const t=Xh(i,!0).delete(e);return new hu(t).toPromise()}const bR=800,NR=3;class nI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>NR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yh._getInstance(PR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await AR(),!this.activeServiceWorker)return;this.sender=new TR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cp();return await bv(e,Eh,"1"),await Nv(e,Eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>bv(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>kR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Nv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Xh(o,!1).getAll();return new hu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nI.type="LOCAL";const DR=nI;new uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(i,e){return e?Zr(e):(Le(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm extends Gw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return oa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function VR(i){return mR(i.auth,new xm(i),i.bypassAuthState)}function OR(i){const{auth:e,user:t}=i;return Le(t,e,"internal-error"),pR(t,new xm(i),i.bypassAuthState)}async function MR(i){const{auth:e,user:t}=i;return Le(t,e,"internal-error"),fR(t,new xm(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t,r,o,a=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VR;case"linkViaPopup":case"linkViaRedirect":return MR;case"reauthViaPopup":case"reauthViaRedirect":return OR;default:Vr(this.auth,"internal-error")}}resolve(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=new uu(2e3,1e4);async function FR(i,e,t){if(hr(i.app))return Promise.reject(fr(i,"operation-not-supported-in-this-environment"));const r=Qh(i);DP(i,e,Pm);const o=rI(r,t);return new Fs(r,"signInViaPopup",e,o).executeNotNull()}class Fs extends iI{constructor(e,t,r,o,a){super(e,t,o,a),this.provider=r,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){ri(this.filter.length===1,"Popup operations only handle one event");const e=Rm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LR.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="pendingRedirect",Qc=new Map;class BR extends iI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Qc.get(this.auth._key());if(!e){try{const r=await zR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Qc.set(this.auth._key(),e)}return this.bypassAuthState||Qc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zR(i,e){const t=qR(e),r=$R(i);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function jR(i,e){Qc.set(i._key(),e)}function $R(i){return Zr(i._redirectPersistence)}function qR(i){return Wc(UR,i.config.apiKey,i.name)}async function HR(i,e,t=!1){if(hr(i.app))return Promise.reject(js(i));const r=Qh(i),o=rI(r,e),u=await new BR(r,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=10*60*1e3;class GR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!sI(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(fr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dv(e))}saveEventToCache(e){this.cachedEventUids.add(Dv(e)),this.lastProcessedEventTime=Date.now()}}function Dv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function sI({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WR(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sI(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(i,e={}){return xa(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XR=/^https?/;async function JR(i){if(i.config.emulator)return;const{authorizedDomains:e}=await QR(i);for(const t of e)try{if(ZR(t))return}catch{}Vr(i,"unauthorized-domain")}function ZR(i){const e=Sp(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!XR.test(t))return!1;if(YR.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=new uu(3e4,6e4);function Vv(){const i=Nr().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function tx(i){return new Promise((e,t)=>{var r,o,a;function u(){Vv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vv(),t(fr(i,"network-request-failed"))},timeout:ex.get()})}if(!((o=(r=Nr().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Nr().gapi)===null||a===void 0)&&a.load)u();else{const d=oR("iframefcb");return Nr()[d]=()=>{gapi.load?u():t(fr(i,"network-request-failed"))},iR(`${sR()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Yc=null,e})}let Yc=null;function nx(i){return Yc=Yc||tx(i),Yc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new uu(5e3,15e3),ix="__/auth/iframe",sx="emulator/auth/iframe",ox={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ax=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lx(i){const e=i.config;Le(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Im(e,sx):`https://${i.config.authDomain}/${ix}`,r={apiKey:e.apiKey,appName:i.name,v:Sa},o=ax.get(i.config.apiHost);o&&(r.eid=o);const a=i._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${eu(r).slice(1)}`}async function ux(i){const e=await nx(i),t=Nr().gapi;return Le(t,i,"internal-error"),e.open({where:document.body,url:lx(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ox,dontclear:!0},r=>new Promise(async(o,a)=>{await r.restyle({setHideOnLeave:!1});const u=fr(i,"network-request-failed"),d=Nr().setTimeout(()=>{a(u)},rx.get());function p(){Nr().clearTimeout(d),o(r)}r.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hx=500,dx=600,fx="_blank",px="http://localhost";class Ov{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mx(i,e,t,r=hx,o=dx){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},cx),{width:r.toString(),height:o.toString(),top:a,left:u}),y=Vt().toLowerCase();t&&(d=Uw(y)?fx:t),Lw(y)&&(e=e||px,p.scrollbars="yes");const E=Object.entries(p).reduce((S,[O,j])=>`${S}${O}=${j},`,"");if(YP(y)&&d!=="_self")return gx(e||"",d),new Ov(null);const T=window.open(e||"",d,E);Le(T,i,"popup-blocked");try{T.focus()}catch{}return new Ov(T)}function gx(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx="__/auth/handler",_x="emulator/auth/handler",vx=encodeURIComponent("fac");async function Mv(i,e,t,r,o,a){Le(i.config.authDomain,i,"auth-domain-config-required"),Le(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Sa,eventId:o};if(e instanceof Pm){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",UT(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))u[E]=T}if(e instanceof cu){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(u.scopes=E.join(","))}i.tenantId&&(u.tid=i.tenantId);const d=u;for(const E of Object.keys(d))d[E]===void 0&&delete d[E];const p=await i._getAppCheckToken(),y=p?`#${vx}=${encodeURIComponent(p)}`:"";return`${Ex(i)}?${eu(d).slice(1)}${y}`}function Ex({config:i}){return i.emulator?Im(i,_x):`https://${i.authDomain}/${yx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="webStorageSupport";class wx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jw,this._completeRedirectFn=HR,this._overrideRedirectResult=jR}async _openPopup(e,t,r,o){var a;ri((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await Mv(e,t,r,Sp(),o);return mx(e,u,Rm())}async _openRedirect(e,t,r,o){await this._originValidation(e);const a=await Mv(e,t,r,Sp(),o);return SR(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(ri(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await ux(e),r=new GR(e);return t.register("authEvent",o=>(Le(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(zf,{type:zf},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[zf];u!==void 0&&t(!!u),Vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qw()||Fw()||Am()}}const Ix=wx;var Lv="@firebase/auth",Fv="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ax(i){aa(new qs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Le(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:u,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hw(i)},y=new nR(r,o,a,p);return lR(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),aa(new qs("auth-internal",e=>{const t=Qh(e.getProvider("auth").getImmediate());return(r=>new Tx(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hi(Lv,Fv,Sx(i)),Hi(Lv,Fv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=5*60,Px=Wv("authIdTokenMaxAge")||Cx;let Uv=null;const Rx=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Px)return;const o=t==null?void 0:t.token;Uv!==o&&(Uv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function xx(i=iE()){const e=xp(i,"auth");if(e.isInitialized())return e.getImmediate();const t=aR(i,{popupRedirectResolver:Ix,persistence:[DR,wR,Jw]}),r=Wv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=Rx(a.toString());yR(t,u,()=>u(t.currentUser)),gR(t,d=>u(d))}}const o=Kv("auth");return o&&uR(t,`http://${o}`),t}function kx(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}rR({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const a=fr("internal-error");a.customData=o,t(a)},r.type="text/javascript",r.charset="UTF-8",kx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ax("Browser");const bx={apiKey:"AIzaSyBuxTa1BC-QdKY4DtMWKzNNorjHfkbEXik",authDomain:"food-tracker-19c9d.firebaseapp.com",projectId:"food-tracker-19c9d",storageBucket:"food-tracker-19c9d.appspot.com",messagingSenderId:"961928172022",appId:"1:961928172022:web:9a85ac5ae45a10de35b7d7"},oI=rE(bx),Zt=dP(oI),Ml=xx(oI),Nx=new Yr;fP(Zt).catch(i=>{i.code==="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):i.code==="unimplemented"&&console.warn("The current browser does not support persistence.")});const jf="131fa0b3",$f="3733def5ca528b11d7fa11a41f23703b";function Dx({onNutritionixAdd:i}){const[e,t]=Me.useState([]),[r,o]=Me.useState(""),[a,u]=Me.useState(!1),[d,p]=Me.useState(null),[y,E]=Me.useState([]);Me.useEffect(()=>{(async()=>{const q=await mh(ra(Zt,"foods"));if(q.empty){const G=[{label:"Whey protein ",calories:120,fat:1,carbs:3,protein:25,fiber:0},{label:"Sauted chicken",calories:220,fat:10,carbs:0,protein:26,fiber:0},{label:"3 Fried Eggs",calories:255,fat:18,carbs:2,protein:18,fiber:0}];for(const J of G)await xw(ra(Zt,"foods"),J);t(G)}else{const G=q.docs.map(J=>({id:J.id,...J.data()}));t(G)}})()},[]),Me.useEffect(()=>{if(!r){E([]);return}const K=e.filter(q=>q.label&&q.label.toLowerCase().includes(r.toLowerCase()));E(K.slice(0,5))},[r,e]);const T=async K=>{u(!0);try{const G=await(await fetch("https://trackapi.nutritionix.com/v2/search/instant",{method:"POST",headers:{"x-app-id":jf,"x-app-key":$f,"Content-Type":"application/json"},body:JSON.stringify({query:K})})).json();let J=[];G.common&&(J=J.concat(G.common)),G.branded&&(J=J.concat(G.branded)),J=J.slice(0,5);const oe=J.map(me=>{var ke;return{label:me.food_name,brand_name:me.brand_name||null,photo:((ke=me.photo)==null?void 0:ke.thumb)||null,nix_item_id:me.nix_item_id||null,common_type:me.common_type||null,is_branded:!!me.nix_item_id}});p(oe)}catch(q){alert(q.message||"Failed to fetch from Nutritionix. Please try again.")}finally{u(!1)}},S=async K=>{if(!K)return null;let q=null;try{let G;if(K.nix_item_id){const J="https://trackapi.nutritionix.com/v2/search/item",oe={"x-app-id":jf,"x-app-key":$f,"Content-Type":"application/json"},me=JSON.stringify({nix_item_id:K.nix_item_id});if(console.log("Nutritionix API Request:",{url:J,method:"POST",headers:oe,body:me}),G=await(await fetch(J,{method:"POST",headers:oe,body:me})).json(),G.foods&&G.foods.length>0){const ue=G.foods[0];q={calories:Math.round(ue.nf_calories)||0,fat:Math.round(ue.nf_total_fat*10)/10||0,carbs:Math.round(ue.nf_total_carbohydrate*10)/10||0,protein:Math.round(ue.nf_protein*10)/10||0,fiber:Math.round(ue.nf_dietary_fiber*10)/10||0,sodium:Math.round((ue.nf_sodium||0)*10)/10,potassium:Math.round((ue.nf_potassium||0)*10)/10,vitamin_c:ue.nf_vitamin_c||0,vitamin_b6:ue.nf_vitamin_b6||0,iron:ue.nf_iron||0}}}else{const J="https://trackapi.nutritionix.com/v2/natural/nutrients",oe={"x-app-id":jf,"x-app-key":$f,"Content-Type":"application/json"},me=JSON.stringify({query:K.food_name||K.label});if(console.log("Nutritionix API Request:",{url:J,method:"POST",headers:oe,body:me}),G=await(await fetch(J,{method:"POST",headers:oe,body:me})).json(),G.foods&&G.foods.length>0){const ue=G.foods[0];q={calories:Math.round(ue.nf_calories)||0,fat:Math.round(ue.nf_total_fat*10)/10||0,carbs:Math.round(ue.nf_total_carbohydrate*10)/10||0,protein:Math.round(ue.nf_protein*10)/10||0,fiber:Math.round(ue.nf_dietary_fiber*10)/10||0,sodium:Math.round((ue.nf_sodium||0)*10)/10,potassium:Math.round((ue.nf_potassium||0)*10)/10,vitamin_c:ue.nf_vitamin_c||0,vitamin_b6:ue.nf_vitamin_b6||0,iron:ue.nf_iron||0}}}}catch(G){alert(G.message||"Failed to fetch nutrition info from Nutritionix.")}return q},O=async K=>{console.log("saveNutritionixToLibrary called",K);const q=K.food_name||K.label;if(!q||typeof q!="string"){console.error("No valid food_name or label:",K);return}const G=K.id||q.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"").slice(0,32);if(!e.some(J=>J.id===G))try{const J={...K,id:G,label:q};console.log("Saving food to Firestore:",{collection:"foods",doc:G,data:J}),await Al(Rr(Zt,"foods",G),J),t([...e,J]),console.log("Successfully saved food to Firestore:",J)}catch(J){console.error("Error saving food to Firestore:",J)}},j=[...e];return j.fetchNutritionix=T,j.nutritionixLoading=a,j.nutritionixQuery=r,j.setNutritionixQuery=o,j.nutritionixPreview=d,j.setNutritionixPreview=p,j.dbResults=y,j.setDbResults=E,j.saveNutritionixToLibrary=O,j.fetchNutritionixItem=S,j.handleSelectDbFood=K=>{i&&i(K)},j}function Vx(){const[i,e]=Me.useState(null),[t,r]=Me.useState(!0);Me.useEffect(()=>{const u=Ml.onAuthStateChanged(d=>{e(d),r(!1)});return()=>u()},[]);const o=async()=>{try{await FR(Ml,Nx)}catch(u){console.error("Error signing in with Google:",u)}},a=async()=>{try{await _R(Ml)}catch(u){console.error("Error signing out:",u)}};return t?w.createElement("div",{className:"text-center py-4"},"Loading..."):i?w.createElement("div",{className:"flex items-center gap-4"},w.createElement("img",{src:i.photoURL,alt:i.displayName,className:"w-8 h-8 rounded-full"}),w.createElement("span",{className:"text-sm"},i.displayName),w.createElement("button",{onClick:a,className:"text-sm text-red-600 hover:text-red-800"},"Sign Out")):w.createElement("button",{onClick:o,className:"flex items-center gap-2 bg-white border border-gray-300 rounded-lg px-4 py-2 hover:bg-gray-50"},w.createElement("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-4 h-4"}),"Sign in with Google")}function Ox({onClose:i,onOpenGoals:e,onSignOut:t}){return w.createElement("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded-lg shadow-lg z-50"},w.createElement("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100",onClick:()=>{e(),i()}},"Daily Goals"),w.createElement("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600",onClick:t},"Sign Out"))}const Mx=[{id:"pushups",label:"Push-ups",category:"Strength",muscleGroup:"Chest",caloriesPerMinute:8},{id:"squats",label:"Squats",category:"Strength",muscleGroup:"Legs",caloriesPerMinute:6},{id:"planks",label:"Planks",category:"Core",muscleGroup:"Abs",caloriesPerMinute:4},{id:"burpees",label:"Burpees",category:"Cardio",muscleGroup:"Full Body",caloriesPerMinute:12},{id:"jumping_jacks",label:"Jumping Jacks",category:"Cardio",muscleGroup:"Full Body",caloriesPerMinute:10},{id:"lunges",label:"Lunges",category:"Strength",muscleGroup:"Legs",caloriesPerMinute:7},{id:"pullups",label:"Pull-ups",category:"Strength",muscleGroup:"Back",caloriesPerMinute:9},{id:"mountain_climbers",label:"Mountain Climbers",category:"Cardio",muscleGroup:"Full Body",caloriesPerMinute:11}];function Lx({user:i,userProfile:e,saveUserProfile:t}){const[r,o]=Me.useState([]),[a,u]=Me.useState([]),[d,p]=Me.useState(!0),[y,E]=Me.useState(null),[T,S]=Me.useState(!1),[O,j]=Me.useState({label:"",category:"Strength",muscleGroup:"",caloriesPerMinute:""}),K=new Date;let q=K.getHours();const[G,J]=Me.useState(q%12||12),[oe,me]=Me.useState(K.getMinutes()),[ke,ue]=Me.useState(q>=12?"PM":"AM"),[k,A]=Me.useState(()=>new Date().toISOString().slice(0,10)),[R,b]=Me.useState(30),D=Y=>{const ne=Y.getHours();return ne>=0&&ne<9?"Morning":ne>=9&&ne<16?"Midday":"Evening"};function M(){const Y=new Date,fe={timeZone:(e==null?void 0:e.timezone)||"America/New_York",hour:"numeric",hour12:!1},ve=parseInt(Y.toLocaleString("en-US",fe));return ve>=0&&ve<9?"Morning":ve>=9&&ve<16?"Midday":"Evening"}const[P,ct]=Me.useState(M());Me.useEffect(()=>{(async()=>{if(i)try{const ne=wp(ra(Zt,"exerciseLog"),Ip("userId","==",i.uid),Tp("timestamp","desc")),ve=(await mh(ne)).docs.map(Ve=>({id:Ve.id,...Ve.data()}));u(ve)}catch(ne){console.error("Error fetching exercise logs:",ne)}finally{p(!1)}})()},[i]);const mt=(Y,ne=30)=>{o(fe=>{const ve=fe.findIndex(Ve=>Ve.id===Y.id);if(ve!==-1){const Ve=[...fe];return Ve[ve].duration+=ne,Ve}else return[...fe,{...Y,duration:ne}]})},Ce=Y=>{o(ne=>ne.filter(fe=>fe.id!==Y))},Xe=(Y,ne)=>{o(fe=>fe.map(ve=>ve.id===Y?{...ve,duration:Math.max(1,parseInt(ne)||1)}:ve))},se=async()=>{if(!i||r.length===0)return;const Y=(e==null?void 0:e.timezone)||"America/New_York",ne=(ve,Ve)=>{let it=parseInt(ve);return Ve==="PM"&&it!==12&&(it+=12),Ve==="AM"&&it===12&&(it=0),it},fe=(ve,Ve,it,gt)=>{const[at,fn,pr]=ve.split("-"),Or=ne(Ve,gt),mr=new Date(at,fn-1,pr,Or,it);return new Date(mr.toLocaleString("en-US",{timeZone:Y})).toISOString()};try{const ve=fe(k,G,oe,ke);for(const at of r){const fn=Math.round((at.caloriesPerMinute||0)*at.duration);await xw(ra(Zt,"exerciseLog"),{userId:i.uid,exerciseId:at.id,exerciseName:at.label,category:at.category,muscleGroup:at.muscleGroup,duration:at.duration,calories:fn,timestamp:ve,timeSegment:P})}const Ve=wp(ra(Zt,"exerciseLog"),Ip("userId","==",i.uid),Tp("timestamp","desc")),gt=(await mh(Ve)).docs.map(at=>({id:at.id,...at.data()}));u(gt),o([])}catch(ve){console.error("Error logging exercises:",ve)}},Pe=async Y=>{try{await Rw(Rr(Zt,"exerciseLog",Y)),u(ne=>ne.filter(fe=>fe.id!==Y))}catch(ne){console.error("Error deleting exercise log:",ne)}},de=async(Y,ne,fe)=>{try{await Pw(Rr(Zt,"exerciseLog",Y),{[ne]:fe}),u(ve=>ve.map(Ve=>Ve.id===Y?{...Ve,[ne]:fe}:Ve))}catch(ve){console.error("Error updating exercise log:",ve)}},V=async Y=>{if(!e)return;const ne=e.pinnedExercises||[],ve=ne.includes(Y)?ne.filter(it=>it!==Y):[...ne,Y],Ve={...e,pinnedExercises:ve};await t(Ve)},Q=new Date().toDateString();a.filter(Y=>new Date(Y.timestamp).toDateString()===Q);const Te=a.reduce((Y,ne)=>{const fe=new Date(ne.timestamp).toDateString();return Y[fe]||(Y[fe]=[]),Y[fe].push(ne),Y},{}),Ue=Y=>Y.reduce((ne,fe)=>{const ve=D(new Date(fe.timestamp));return ne[ve]||(ne[ve]=[]),ne[ve].push(fe),ne},{}),Be=Y=>Y.reduce((ne,fe)=>(ne.calories+=fe.calories||0,ne.duration+=fe.duration||0,ne),{calories:0,duration:0});return d?w.createElement("div",{className:"text-center py-8"},"Loading exercises..."):w.createElement("div",{className:"space-y-4"},w.createElement("div",{className:"bg-white rounded-lg shadow p-4 space-y-4"},w.createElement("div",{className:"flex justify-end mb-2"},w.createElement("button",{className:"text-blue-600 text-sm flex items-center gap-1 hover:underline",onClick:()=>S(Y=>!Y),title:T?"Hide Custom Exercise":"Add Custom Exercise"},w.createElement("span",{style:{fontSize:"1.2em"}},"")," ",T?"Hide":"Custom Exercise")),w.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2"},e!=null&&e.pinnedExercises&&e.pinnedExercises.length>0?e.pinnedExercises.map(Y=>{const ne=Mx.find(fe=>fe.id===Y);return ne?w.createElement("div",{key:ne.id,className:"relative"},w.createElement("button",{onClick:()=>mt(ne),className:"bg-gray-100 border hover:bg-blue-100 rounded p-2 text-sm flex flex-col w-full"},w.createElement("span",{className:"font-medium"},ne.label),w.createElement("span",{className:"text-xs text-gray-500"},ne.category,"  ",ne.muscleGroup),w.createElement("span",{className:"text-xs text-blue-600"},ne.caloriesPerMinute," cal/min")),w.createElement("button",{className:"absolute top-1 right-1 text-yellow-500 hover:text-yellow-700 text-lg font-bold bg-white rounded-full w-6 h-6 flex items-center justify-center border border-gray-300",onClick:fe=>{fe.stopPropagation(),V(ne.id)},title:"Unpin exercise",style:{lineHeight:1}},"")):null}):null,w.createElement("div",{className:"relative"},w.createElement("button",{className:"bg-green-500 hover:bg-green-600 text-white rounded p-2 flex flex-col items-center justify-center w-full h-full min-h-[60px] border-2 border-green-700 text-3xl",style:{minHeight:"60px"},onClick:()=>S(!0),title:"Add Custom Exercise"},w.createElement("span",null,"+")))),T&&w.createElement("div",{className:"bg-white border rounded-lg p-4 flex flex-col gap-2 shadow-lg"},w.createElement("h3",{className:"font-semibold mb-2"},"Add Custom Exercise"),w.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2"},w.createElement("input",{type:"text",placeholder:"Exercise name",className:"border rounded px-2 py-1",value:O.label,onChange:Y=>j({...O,label:Y.target.value})}),w.createElement("select",{className:"border rounded px-2 py-1",value:O.category,onChange:Y=>j({...O,category:Y.target.value})},w.createElement("option",{value:"Strength"},"Strength"),w.createElement("option",{value:"Cardio"},"Cardio"),w.createElement("option",{value:"Core"},"Core"),w.createElement("option",{value:"Flexibility"},"Flexibility")),w.createElement("input",{type:"text",placeholder:"Muscle group",className:"border rounded px-2 py-1",value:O.muscleGroup,onChange:Y=>j({...O,muscleGroup:Y.target.value})}),w.createElement("input",{type:"number",placeholder:"Calories per minute",className:"border rounded px-2 py-1",value:O.caloriesPerMinute,onChange:Y=>j({...O,caloriesPerMinute:Y.target.value})})),w.createElement("div",{className:"flex gap-2 mt-2"},w.createElement("button",{className:"bg-blue-500 hover:bg-blue-600 text-white rounded px-3 py-1",onClick:()=>{if(O.label){const Y={id:O.label.toLowerCase().replace(/\s+/g,"_"),...O,caloriesPerMinute:parseFloat(O.caloriesPerMinute)||0};mt(Y),j({label:"",category:"Strength",muscleGroup:"",caloriesPerMinute:""}),S(!1)}}},"Add to Cart"),w.createElement("button",{className:"bg-gray-500 hover:bg-gray-600 text-white rounded px-3 py-1",onClick:()=>S(!1)},"Cancel"))),r.length>0&&w.createElement("div",{className:"mt-2"},w.createElement("div",{className:"flex flex-col sm:flex-row gap-2 mb-2 items-center justify-between"},w.createElement("div",null,w.createElement("label",{className:"text-sm mr-2"},"Date:"),w.createElement("input",{type:"date",className:"border rounded px-2 py-1",value:k,onChange:Y=>A(Y.target.value)})),w.createElement("div",null,w.createElement("label",{className:"text-sm mr-2"},"Time:"),w.createElement("div",{className:"inline-flex items-center gap-1"},w.createElement("input",{type:"number",min:1,max:12,className:"w-12 border rounded px-2 py-1 text-center",value:G,onChange:Y=>J(Math.max(1,Math.min(12,Number(Y.target.value))))}),":",w.createElement("input",{type:"number",min:0,max:59,className:"w-12 border rounded px-2 py-1 text-center",value:oe.toString().padStart(2,"0"),onChange:Y=>me(Math.max(0,Math.min(59,Number(Y.target.value))))}),w.createElement("select",{className:"border rounded px-2 py-1",value:ke,onChange:Y=>ue(Y.target.value)},w.createElement("option",{value:"AM"},"AM"),w.createElement("option",{value:"PM"},"PM"))))),w.createElement("h3",{className:"font-semibold mb-2"},"Exercise Cart"),w.createElement("table",{className:"min-w-full text-sm mb-2 border border-gray-200"},w.createElement("thead",null,w.createElement("tr",null,w.createElement("th",{className:"border-b border-gray-200 px-2 py-1"},"Exercise"),w.createElement("th",{className:"border-b border-gray-200 px-2 py-1"},"Category"),w.createElement("th",{className:"border-b border-gray-200 px-2 py-1"},"Duration (min)"),w.createElement("th",{className:"border-b border-gray-200 px-2 py-1"},"Calories"),w.createElement("th",{className:"border-b border-gray-200 px-2 py-1"}))),w.createElement("tbody",null,r.map((Y,ne)=>w.createElement("tr",{key:Y.id,className:`border-b border-gray-100 ${ne%2===1?"bg-gray-50":""}`},w.createElement("td",{className:"border-r border-gray-100 px-2 py-1 font-medium"},Y.label),w.createElement("td",{className:"border-r border-gray-100 px-2 py-1"},Y.category),w.createElement("td",{className:"border-r border-gray-100 px-2 py-1"},w.createElement("input",{type:"number",min:1,className:"w-16 border rounded text-center",value:Y.duration,onChange:fe=>Xe(Y.id,fe.target.value)})),w.createElement("td",{className:"border-r border-gray-100 px-2 py-1"},Math.round((Y.caloriesPerMinute||0)*Y.duration)),w.createElement("td",{className:"px-2 py-1"},w.createElement("button",{className:"text-red-500",onClick:()=>Ce(Y.id)},"")))))),w.createElement("div",{className:"flex gap-2 mt-2"},w.createElement("button",{className:"bg-green-500 hover:bg-green-600 text-white rounded-full p-3 flex items-center justify-center text-xl shadow",disabled:r.length===0,onClick:se,title:"Log All","aria-label":"Log All"},w.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-6 h-6"},w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))),w.createElement("button",{className:"bg-red-500 hover:bg-red-600 text-white rounded-full p-3 flex items-center justify-center text-xl shadow",disabled:r.length===0,onClick:()=>o([]),title:"Clear Cart","aria-label":"Clear Cart"},w.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-6 h-6"},w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))))),w.createElement("div",{className:"bg-white rounded-lg shadow p-4 overflow-auto"},w.createElement("table",{className:"min-w-full text-sm text-left"},w.createElement("thead",null,w.createElement("tr",{className:"border-b"},w.createElement("th",{className:"px-2 py-1"},"Exercise"),w.createElement("th",{className:"px-2 py-1"},"Category"),w.createElement("th",{className:"px-2 py-1"},"Duration (min)"),w.createElement("th",{className:"px-2 py-1"},"Calories"),w.createElement("th",{className:"px-2 py-1"},""))),w.createElement("tbody",null,Object.entries(Te).map(([Y,ne])=>{const fe=Be(ne),ve=Ue(ne);return w.createElement(w.Fragment,{key:Y},w.createElement("tr",{className:"bg-gray-100 font-semibold"},w.createElement("td",{colSpan:2,className:"px-2 py-2"},w.createElement("span",{role:"img","aria-label":"Calendar"},"")," ",new Date(Y).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})),w.createElement("td",{className:"px-2 py-2"},Math.round(fe.duration)),w.createElement("td",{className:"px-2 py-2"},Math.round(fe.calories)),w.createElement("td",null)),Object.entries(ve).map(([Ve,it])=>it.length>0&&w.createElement(w.Fragment,{key:Ve},w.createElement("tr",{className:"bg-gray-50"},w.createElement("td",{colSpan:2,className:"px-2 py-1 font-medium"},Ve),(()=>{const gt=Be(it);return w.createElement(w.Fragment,null,w.createElement("td",{className:"px-2 py-1"},Math.round(gt.duration)),w.createElement("td",{className:"px-2 py-1"},Math.round(gt.calories)),w.createElement("td",null))})()),it.map(gt=>w.createElement("tr",{key:gt.id,className:"border-t hover:bg-gray-50 cursor-pointer",onClick:()=>E(gt)},w.createElement("td",{className:"px-2 py-1"},gt.exerciseName),w.createElement("td",{className:"px-2 py-1"},gt.category),w.createElement("td",{className:"px-2 py-1"},gt.duration),w.createElement("td",{className:"px-2 py-1"},gt.calories),w.createElement("td",{className:"px-2 py-1"},w.createElement("button",{onClick:at=>{at.stopPropagation(),Pe(gt.id)},className:"text-red-600"},"")))))))})))),y&&w.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},w.createElement("div",{className:"bg-white rounded-lg p-6 max-w-md w-full"},w.createElement("h3",{className:"text-lg font-semibold mb-4"},"Edit Exercise Entry"),w.createElement("div",{className:"space-y-4"},w.createElement("div",null,w.createElement("label",{className:"block text-sm font-medium mb-1"},"Date"),w.createElement("input",{type:"date",className:"w-full border rounded px-2 py-1",value:new Date(y.timestamp).toISOString().slice(0,10),onChange:Y=>{const ne=new Date(y.timestamp),[fe,ve,Ve]=Y.target.value.split("-");ne.setFullYear(fe,ve-1,Ve),E({...y,timestamp:ne.toISOString()})}})),w.createElement("div",null,w.createElement("label",{className:"block text-sm font-medium mb-1"},"Duration (minutes)"),w.createElement("input",{type:"number",min:"1",className:"w-full border rounded px-2 py-1",value:y.duration,onChange:Y=>E({...y,duration:parseInt(Y.target.value)||1})})),w.createElement("div",{className:"flex justify-end gap-2 mt-6"},w.createElement("button",{className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",onClick:()=>E(null)},"Cancel"),w.createElement("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:()=>{de(y.id,"timestamp",y.timestamp),de(y.id,"duration",y.duration),E(null)}},"Save Changes"))))))}const vl={calories:2300,fat:65,carbs:280,protein:180,fiber:32},Fx=i=>{const e=i.getHours();return e>=0&&e<9?"Morning":e>=9&&e<16?"Midday":"Evening"};function Ux(){const i=new Date,e={timeZone:"America/New_York",hour:"numeric",hour12:!1},t=parseInt(i.toLocaleString("en-US",e));return t>=0&&t<9?"Morning":t>=9&&t<16?"Midday":"Evening"}const Bx=[{value:"America/New_York",label:"Eastern Time (US & Canada)"},{value:"America/Chicago",label:"Central Time (US & Canada)"},{value:"America/Denver",label:"Mountain Time (US & Canada)"},{value:"America/Los_Angeles",label:"Pacific Time (US & Canada)"},{value:"America/Phoenix",label:"Arizona"},{value:"America/Anchorage",label:"Alaska"},{value:"Pacific/Honolulu",label:"Hawaii"},{value:"UTC",label:"UTC"}];function zx(){var wt,It;const[i,e]=Me.useState([]),[t,r]=Me.useState([]),[o,a]=Me.useState(!1),[u,d]=Me.useState({label:"",calories:"",fat:"",carbs:"",protein:"",fiber:""}),[p,y]=Me.useState(!0),[E,T]=Me.useState([]),[S,O]=Me.useState(null),[j,K]=Me.useState(null),q=Me.useRef(!1),[G,J]=Me.useState(null),[oe,me]=Me.useState(!0),[ke,ue]=Me.useState("nutrition"),k=new Date;let A=k.getHours();const[R,b]=Me.useState(A%12||12),[D,M]=Me.useState(k.getMinutes()),[P,ct]=Me.useState(A>=12?"PM":"AM"),mt=(B,X=1)=>{e(ae=>{const pe=ae.findIndex(Re=>Re.label===B.label&&Re.units===B.units);if(pe!==-1){const Re=[...ae];return Re[pe].quantity+=X,Re}else return[...ae,{...B,quantity:X}]})},Ce=Dx({onNutritionixAdd:mt}),[Xe,se]=Me.useState(!1),[Pe,de]=Me.useState(!1),[V,Q]=Me.useState(!1),[Te,Ue]=Me.useState(()=>new Date().toISOString().slice(0,10)),[Be,Y]=Me.useState(Ux());Me.useEffect(()=>{const B=Ml.onAuthStateChanged(X=>{K(X),y(!1)});return()=>B()},[]),Me.useEffect(()=>{(async()=>{if(!q.current&&j)try{const X=wp(ra(Zt,"foodLog"),Ip("userId","==",j.uid),Tp("timestamp","desc")),pe=(await mh(X)).docs.map(Re=>({id:Re.id,...Re.data()}));r(pe),q.current=!0}catch(X){console.error("Error fetching food logs:",X)}finally{y(!1)}})()},[j]),Me.useEffect(()=>{if(!j)return;me(!0),(async()=>{const X=Rr(Zt,"userProfile",j.uid),ae=await PP(X);if(ae.exists())J(ae.data());else{const pe={goals:vl,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,pinnedFoods:[]};await Al(X,pe),J(pe)}me(!1)})()},[j]);const ne=async B=>{if(!j)return;const X=Rr(Zt,"userProfile",j.uid);await Al(X,B),J(B)},fe=()=>(G==null?void 0:G.timezone)||"UTC";let ve=(G==null?void 0:G.goals)||vl;const Ve=B=>Ce.find(X=>X.id===B),it=async B=>{if(!B||!B.label)return null;const X=B.id||B.label.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"").slice(0,32);if(Ce.some(ae=>ae.id===X))return X;try{return await Al(Rr(Zt,"foods",X),{...B,id:X}),Ce.push({...B,id:X}),X}catch(ae){return console.error("Error saving new food to Firestore:",ae,B),null}},gt=(B,X)=>{let ae=parseInt(B,10);return X==="PM"&&ae!==12&&(ae+=12),X==="AM"&&ae===12&&(ae=0),ae},at=(B,X,ae,pe)=>{const[Re,Qe,ye]=B.split("-").map(Number),He=gt(X,pe);return new Date(Re,Qe-1,ye,He,ae,0,0).toISOString().slice(0,19)},fn=async(B,X,ae)=>{try{const pe=Rr(Zt,"foodLog",B),Re=t.find(ye=>ye.id===B);let Qe={};if(X==="date"||X==="time"){const ye=new Date(Re.timestamp);if(X==="date"){const He=ye.toTimeString().slice(0,5);Qe.timestamp=new Date(`${ae}T${He}`).toISOString()}else{const He=ye.toISOString().slice(0,10);Qe.timestamp=new Date(`${He}T${ae}`).toISOString()}}else{const ye=X==="serving"?parseFloat(ae)||1:ae;Qe[X]=ye}await Pw(pe,Qe),r(t.map(ye=>ye.id===B?{...ye,...Qe}:ye))}catch(pe){console.error("Error updating food log:",pe)}},pr=async B=>{try{await Rw(Rr(Zt,"foodLog",B)),r(t.filter(X=>X.id!==B))}catch(X){console.error("Error deleting food log:",X)}},Or=new Date().toDateString(),mr=t.filter(B=>new Date(B.timestamp).toDateString()===Or),ns=mr.reduce((B,X)=>{const ae=new Date(X.timestamp).toDateString();return B[ae]=B[ae]||[],B[ae].push(X),B},{}),ai=B=>B.reduce((X,ae)=>{const pe=Fx(new Date(ae.timestamp));return X[pe]=X[pe]||[],X[pe].push(ae),X},{Morning:[],Midday:[],Evening:[]}),Tn=B=>B.reduce((X,ae)=>{var Re;const pe=Ve(ae.foodId);if(pe&&pe.nutrition){const Qe=ae.serving/(((Re=pe.default_serving)==null?void 0:Re.grams)||1);Object.keys(vl).forEach(ye=>{X[ye]+=(pe.nutrition[ye]||0)*Qe})}return X},{calories:0,fat:0,carbs:0,protein:0,fiber:0}),Wn=(B,X,ae)=>{const pe=Math.min(X/ae*100,100);return w.createElement("div",{key:B,className:"space-y-1"},w.createElement("p",{className:"text-sm font-medium"},B),w.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},w.createElement("div",{className:"bg-blue-600 h-3 rounded-full",style:{width:`${pe}%`}})),w.createElement("p",{className:"text-xs text-gray-600"},Math.round(X)," / ",ae," (",pe.toFixed(1),"%)"))},rs=(B,X)=>{e(ae=>ae.filter(pe=>!(pe.label===B&&pe.units===X)))},li=(B,X,ae)=>{e(pe=>pe.map(Re=>Re.label===B&&Re.units===X?{...Re,quantity:ae}:Re))},ui=async()=>{var B;fe();for(const X of i){let ae=Ce.find(pe=>{var Re;return pe.label===X.label&&(pe.units===X.units||((Re=pe.default_serving)==null?void 0:Re.label)===X.units)});if(!ae){const pe=await it(X);if(pe)ae={...X,id:pe};else{console.warn("Could not save new food for cart item:",X);continue}}for(let pe=0;pe<X.quantity;pe++){const Re=at(Te,R,D,P),Qe=new Date().toISOString().slice(0,19),ye={foodId:ae.id,timestamp:Re,serving:X.serving||1,units:X.units||((B=ae.default_serving)==null?void 0:B.label)||"serving",userId:j.uid,recordedTime:Qe};try{const He=`${Re}_${ae.id}`;await Al(Rr(Zt,"foodLog",He),ye),r(sn=>[{id:He,...ye},...sn]),console.log("Successfully logged cart item:",ye)}catch(He){console.error("Error adding food log from cart:",He,ye)}}}e([])},ci=async B=>{var pe;if(!G)return;let X;(pe=G.pinnedFoods)!=null&&pe.includes(B)?X=G.pinnedFoods.filter(Re=>Re!==B):X=[...G.pinnedFoods||[],B];const ae={...G,pinnedFoods:X};await ne(ae)};return w.createElement("div",{className:"max-w-4xl mx-auto p-4 space-y-4"},p?w.createElement("div",{className:"text-center py-4"},"Loading..."):j?w.createElement(w.Fragment,null,w.createElement("div",{className:"relative flex items-center justify-center mb-6"},w.createElement("h1",{className:"text-3xl font-bold absolute left-1/2 transform -translate-x-1/2 w-full text-center"},w.createElement("span",{role:"img","aria-label":"Chef"},"")," GORDON ",w.createElement("span",{role:"img","aria-label":"Chef"},"")),w.createElement("div",{className:"ml-auto z-10 flex items-center gap-4"},w.createElement("img",{src:j.photoURL,alt:j.displayName,className:"w-10 h-10 rounded-full cursor-pointer border-2 border-gray-300 hover:border-blue-500",onClick:()=>se(B=>!B)}),Xe&&w.createElement(Ox,{onClose:()=>se(!1),onOpenGoals:()=>{de(!0)},onSignOut:()=>{Ml.signOut(),se(!1)}}))),w.createElement("div",{className:"flex justify-center mb-6"},w.createElement("div",{className:"bg-gray-100 rounded-lg p-1 flex"},w.createElement("button",{className:`px-6 py-2 rounded-md font-medium transition-colors ${ke==="nutrition"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,onClick:()=>ue("nutrition")}," Nutrition"),w.createElement("button",{className:`px-6 py-2 rounded-md font-medium transition-colors ${ke==="exercise"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,onClick:()=>ue("exercise")}," Exercise"))),ke==="nutrition"?w.createElement(w.Fragment,null,w.createElement("div",{className:"bg-white rounded-lg shadow p-4 space-y-4"},w.createElement("div",{className:"flex justify-end mb-2"},w.createElement("button",{className:"text-blue-600 text-sm flex items-center gap-1 hover:underline",onClick:()=>Q(B=>!B),title:V?"Show Less":"Show All"},w.createElement("span",{style:{fontSize:"1.2em"}},"")," ",V?"Show Less":"Show All")),w.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2"},G!=null&&G.pinnedFoods&&G.pinnedFoods.length>0?G.pinnedFoods.map(B=>{var ae,pe,Re,Qe;const X=Ce.find(ye=>ye.id===B);return X?w.createElement("div",{key:X.id||X.label,className:"relative"},w.createElement("button",{onClick:()=>mt(X),className:"bg-gray-100 border hover:bg-blue-100 rounded p-2 text-sm flex flex-col w-full"},w.createElement("span",null,X.label),w.createElement("span",{className:"text-xs text-gray-500"},X.serving,X.units,"  ",((ae=X.nutrition)==null?void 0:ae.calories)??0,"c ",((pe=X.nutrition)==null?void 0:pe.fat)??0,"f ",((Re=X.nutrition)==null?void 0:Re.carbs)??0,"c ",((Qe=X.nutrition)==null?void 0:Qe.protein)??0,"p")),w.createElement("button",{className:"absolute top-1 right-1 text-yellow-500 hover:text-yellow-700 text-lg font-bold bg-white rounded-full w-6 h-6 flex items-center justify-center border border-gray-300",onClick:ye=>{ye.stopPropagation(),ci(X.id)},title:"Unpin food",style:{lineHeight:1}},"")):null}):null,w.createElement("div",{className:"relative"},w.createElement("button",{className:"bg-green-500 hover:bg-green-600 text-white rounded p-2 flex flex-col items-center justify-center w-full h-full min-h-[60px] border-2 border-green-700 text-3xl",style:{minHeight:"60px"},onClick:()=>a(!0),title:"Add New Food"},w.createElement("span",null,"+")))),(o||i.length>0)&&w.createElement("div",{className:"relative max-w-2xl mx-auto mt-6"},w.createElement("div",{className:"bg-white border rounded-lg p-4 flex flex-col gap-2 shadow-lg"},o&&w.createElement(w.Fragment,null,w.createElement("div",{className:"mb-2"},w.createElement("label",{className:"block text-sm font-medium mb-1"},"Search Nutritionix"),w.createElement("div",{className:"flex flex-col gap-1 relative"},w.createElement("div",{className:"flex gap-2"},w.createElement("input",{className:"border rounded px-2 py-1 flex-1",placeholder:"e.g. 3 beef tacos",value:Ce.nutritionixQuery||"",onChange:B=>{Ce.setNutritionixQuery(B.target.value),Ce.setShowDbDropdown&&Ce.setShowDbDropdown(!0)},disabled:Ce.nutritionixLoading,autoComplete:"off"}),w.createElement("button",{className:"bg-blue-500 hover:bg-blue-600 text-white rounded px-3 py-1",disabled:Ce.nutritionixLoading||!Ce.nutritionixQuery,onClick:()=>Ce.fetchNutritionix(Ce.nutritionixQuery,mt),type:"button"},Ce.nutritionixLoading?"Searching...":"Search")),Ce.nutritionixQuery&&w.createElement("ul",{className:"z-20 bg-white border border-gray-200 rounded w-full mt-1 max-h-56 overflow-auto shadow-lg"},Ce.dbResults&&Ce.dbResults.length>0&&Ce.dbResults.map((B,X)=>{var ae,pe;return w.createElement("li",{key:B.id||B.label+X,className:"px-3 py-2 hover:bg-blue-100 cursor-pointer text-sm flex items-center justify-between",onClick:()=>{Ce.handleSelectDbFood&&Ce.handleSelectDbFood(B),Ce.onNutritionixAdd&&Ce.onNutritionixAdd(B)}},w.createElement("span",null,B.label,B.nutrition&&w.createElement(w.Fragment,null," ",w.createElement("span",null,"",B.nutrition.calories??0),w.createElement("span",null," ",B.nutrition.fat??0,"g"),w.createElement("span",null," ",B.nutrition.carbs??0,"g"),w.createElement("span",null," ",B.nutrition.protein??0,"g"),w.createElement("span",null," ",B.nutrition.fiber??0,"g"))),w.createElement("button",{className:"ml-2 text-yellow-500 hover:text-yellow-700 bg-white rounded-full w-6 h-6 flex items-center justify-center border border-gray-300",onClick:Re=>{Re.stopPropagation(),ci(B.id)},title:(ae=G==null?void 0:G.pinnedFoods)!=null&&ae.includes(B.id)?"Unpin food":"Pin food",style:{lineHeight:1}},(pe=G==null?void 0:G.pinnedFoods)!=null&&pe.includes(B.id)?"":""))}),Array.isArray(Ce.nutritionixPreview)&&Ce.nutritionixPreview.filter(B=>!Ce.dbResults.some(X=>X.label.toLowerCase()===B.label.toLowerCase())).map((B,X)=>w.createElement("li",{key:B.label+X,className:"px-3 py-2 cursor-pointer text-sm flex items-center justify-between bg-blue-50 border border-blue-200",style:{transition:"background 0.2s"}},w.createElement("span",{className:"flex-1",onClick:async()=>{const ae=await Ce.fetchNutritionixItem(B),pe={...B,nutrition:ae};Ce.saveNutritionixToLibrary&&await Ce.saveNutritionixToLibrary(pe),Ce.onNutritionixAdd&&Ce.onNutritionixAdd(pe)}},B.label,B.nutrition&&w.createElement(w.Fragment,null," ",w.createElement("span",null,"",B.nutrition.calories??0),w.createElement("span",null," ",B.nutrition.fat??0,"g"),w.createElement("span",null," ",B.nutrition.carbs??0,"g"),w.createElement("span",null," ",B.nutrition.protein??0,"g"),w.createElement("span",null," ",B.nutrition.fiber??0,"g"))),w.createElement("button",{className:"ml-2 text-blue-600 hover:text-blue-800 bg-blue-100 hover:bg-blue-200 rounded-full p-1 flex items-center justify-center border border-blue-300",title:"Add to Library",onClick:async ae=>{ae.stopPropagation();const pe=await Ce.fetchNutritionixItem(B),Re={...B,nutrition:pe};Ce.saveNutritionixToLibrary&&await Ce.saveNutritionixToLibrary(Re)}},w.createElement("span",{className:"text-lg font-bold"},"+")))),(!Ce.dbResults||Ce.dbResults.length===0)&&(!Array.isArray(Ce.nutritionixPreview)||Ce.nutritionixPreview.length===0)&&w.createElement("li",{className:"px-3 py-2 text-gray-400 cursor-default text-sm"},"No results found"))),w.createElement("div",{className:"text-xs text-gray-500 mt-1"},"Powered by Nutritionix"))),i.length>0&&w.createElement("div",{className:"mt-2"},w.createElement("div",{className:"flex flex-col sm:flex-row gap-2 mb-2 items-center justify-between"},w.createElement("div",null,w.createElement("label",{className:"text-sm mr-2"},"Date:"),w.createElement("input",{type:"date",className:"border rounded px-2 py-1",value:Te,onChange:B=>Ue(B.target.value)})),w.createElement("div",null,w.createElement("label",{className:"text-sm mr-2"},"Time:"),w.createElement("div",{className:"inline-flex items-center gap-1"},w.createElement("input",{type:"number",min:1,max:12,className:"w-12 border rounded px-2 py-1 text-center",value:R,onChange:B=>b(Math.max(1,Math.min(12,Number(B.target.value))))}),":",w.createElement("input",{type:"number",min:0,max:59,className:"w-12 border rounded px-2 py-1 text-center",value:D.toString().padStart(2,"0"),onChange:B=>M(Math.max(0,Math.min(59,Number(B.target.value))))}),w.createElement("select",{className:"border rounded px-2 py-1",value:P,onChange:B=>ct(B.target.value)},w.createElement("option",{value:"AM"},"AM"),w.createElement("option",{value:"PM"},"PM"))))),w.createElement("h3",{className:"font-semibold mb-2"},"Food Cart"),w.createElement("table",{className:"min-w-full text-sm mb-2 border border-gray-200"},w.createElement("thead",null,w.createElement("tr",null,w.createElement("th",{className:"border-b border-gray-200 px-2 py-1 min-w-[180px]"},"Food"),w.createElement("th",{className:"border-b border-gray-200 px-2 py-1"},"Qty"),w.createElement("th",{className:"border-b border-gray-200 px-2 py-1"},"Unit"),w.createElement("th",{className:"border-b border-gray-200 px-2 py-1"},""),w.createElement("th",{className:"border-b border-gray-200 px-2 py-1"},""),w.createElement("th",{className:"border-b border-gray-200 px-2 py-1"},""),w.createElement("th",{className:"border-b border-gray-200 px-2 py-1"},""),w.createElement("th",{className:"border-b border-gray-200 px-2 py-1"},""),w.createElement("th",{className:"border-b border-gray-200 px-2 py-1"}))),w.createElement("tbody",null,i.map((B,X)=>{var ae,pe,Re,Qe,ye;return w.createElement("tr",{key:B.label+B.units,className:`border-b border-gray-100 ${X%2===1?"bg-gray-50":""}`},w.createElement("td",{className:"border-r border-gray-100 px-2 py-1 min-w-[180px] font-medium"},B.label),w.createElement("td",{className:"border-r border-gray-100 px-2 py-1"},w.createElement("input",{type:"number",min:1,className:"w-12 border rounded text-center",value:B.quantity,onChange:He=>li(B.label,B.units,Math.max(1,parseInt(He.target.value)||1))})),w.createElement("td",{className:"border-r border-gray-100 px-2 py-1"},B.units),w.createElement("td",{className:"border-r border-gray-100 px-2 py-1"},((ae=B.nutrition)==null?void 0:ae.calories)??0),w.createElement("td",{className:"border-r border-gray-100 px-2 py-1"},((pe=B.nutrition)==null?void 0:pe.fat)??0),w.createElement("td",{className:"border-r border-gray-100 px-2 py-1"},((Re=B.nutrition)==null?void 0:Re.carbs)??0),w.createElement("td",{className:"border-r border-gray-100 px-2 py-1"},((Qe=B.nutrition)==null?void 0:Qe.protein)??0),w.createElement("td",{className:"border-r border-gray-100 px-2 py-1"},((ye=B.nutrition)==null?void 0:ye.fiber)??0),w.createElement("td",{className:"px-2 py-1"},w.createElement("button",{className:"text-red-500",onClick:()=>rs(B.label,B.units)},"")))}))),w.createElement("div",{className:"flex gap-2 mt-2"},w.createElement("button",{className:"bg-green-500 hover:bg-green-600 text-white rounded-full p-3 flex items-center justify-center text-xl shadow",disabled:i.length===0,onClick:ui,title:"Log All","aria-label":"Log All"},w.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-6 h-6"},w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))),w.createElement("button",{className:"bg-red-500 hover:bg-red-600 text-white rounded-full p-3 flex items-center justify-center text-xl shadow",disabled:i.length===0,onClick:()=>e([]),title:"Clear Cart","aria-label":"Clear Cart"},w.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-6 h-6"},w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))))))),w.createElement("div",{className:"bg-white rounded-lg shadow p-4"},w.createElement("h2",{className:"text-lg font-semibold mb-2"},"Daily Summary"),w.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"},Object.keys(vl).map(B=>Wn(B,Tn(mr)[B],ve[B])))),w.createElement("div",{className:"bg-white rounded-lg shadow p-4 overflow-auto"},w.createElement("table",{className:"min-w-full text-sm text-left"},w.createElement("thead",null,w.createElement("tr",{className:"border-b"},w.createElement("th",{className:"px-2 py-1"},"Food"),w.createElement("th",{className:"px-2 py-1"},"Amount"),w.createElement("th",{className:"px-2 py-1"},"Unit"),w.createElement("th",{className:"px-2 py-1"},w.createElement("span",{role:"img","aria-label":"Calories"},"")," Calories"),w.createElement("th",{className:"px-2 py-1"},w.createElement("span",{role:"img","aria-label":"Fat"},"")," Fat"),w.createElement("th",{className:"px-2 py-1"},w.createElement("span",{role:"img","aria-label":"Carbs"},"")," Carbs"),w.createElement("th",{className:"px-2 py-1"},w.createElement("span",{role:"img","aria-label":"Protein"},"")," Protein"),w.createElement("th",{className:"px-2 py-1"},w.createElement("span",{role:"img","aria-label":"Fiber"},"")," Fiber"),w.createElement("th",{className:"px-2 py-1"},""))),w.createElement("tbody",null,Object.entries(ns).map(([B,X])=>{const ae=Tn(X),pe=ai(X);return w.createElement(w.Fragment,{key:B},w.createElement("tr",{className:"bg-gray-100 font-semibold"},w.createElement("td",{colSpan:3,className:"px-2 py-2"},w.createElement("span",{role:"img","aria-label":"Calendar"},"")," ",new Date(B).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})),w.createElement("td",{className:"px-2 py-2"},Math.round(ae.calories)),w.createElement("td",{className:"px-2 py-2"},Math.round(ae.fat),"g"),w.createElement("td",{className:"px-2 py-2"},Math.round(ae.carbs),"g"),w.createElement("td",{className:"px-2 py-2"},Math.round(ae.protein),"g"),w.createElement("td",{className:"px-2 py-2"},Math.round(ae.fiber),"g"),w.createElement("td",null)),Object.entries(pe).map(([Re,Qe])=>Qe.length>0&&w.createElement(w.Fragment,{key:Re},w.createElement("tr",{className:"bg-gray-50"},w.createElement("td",{colSpan:3,className:"px-2 py-1 font-medium"},Re),(()=>{const ye=Tn(Qe);return w.createElement(w.Fragment,null,w.createElement("td",{className:"px-2 py-1"},Math.round(ye.calories)),w.createElement("td",{className:"px-2 py-1"},Math.round(ye.fat),"g"),w.createElement("td",{className:"px-2 py-1"},Math.round(ye.carbs),"g"),w.createElement("td",{className:"px-2 py-1"},Math.round(ye.protein),"g"),w.createElement("td",{className:"px-2 py-1"},Math.round(ye.fiber),"g"),w.createElement("td",null))})()),Qe.map(ye=>{const He=Ve(ye.foodId),sn=He?ye.serving/(He.serving||1):1;return w.createElement("tr",{key:ye.id,className:"border-t hover:bg-gray-50 cursor-pointer",onClick:()=>O(ye)},w.createElement("td",{className:"px-2 py-1"},He?He.label:ye.foodId),w.createElement("td",{className:"px-2 py-1"},ye.serving),w.createElement("td",{className:"px-2 py-1"},ye.units),Object.keys(vl).map(Sn=>w.createElement("td",{key:Sn,className:"px-2 py-1"},He?Math.round((He.nutrition[Sn]||0)*sn):"")),w.createElement("td",{className:"px-2 py-1"},w.createElement("button",{onClick:Sn=>{Sn.stopPropagation(),pr(ye.id)},className:"text-red-600"},"")))}))))}))))):w.createElement(Lx,{user:j,userProfile:G,saveUserProfile:ne}),Pe&&w.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},w.createElement("div",{className:"bg-white rounded-lg p-6 w-full max-w-md shadow-lg"},w.createElement("h2",{className:"text-xl font-bold mb-4 text-center"},"Profile Settings"),w.createElement("div",{className:"space-y-4"},w.createElement("div",null,w.createElement("label",{className:"block text-sm font-medium mb-1"},"Time Zone"),w.createElement("select",{className:"w-full border rounded px-2 py-1",value:(G==null?void 0:G.timezone)||"America/New_York",onChange:B=>J({...G,timezone:B.target.value})},Bx.map(B=>w.createElement("option",{key:B.value,value:B.value},B.label)))),w.createElement("div",null,w.createElement("label",{className:"block text-sm font-medium mb-1"},"Daily Calories"),w.createElement("input",{type:"number",className:"w-full border rounded px-2 py-1",value:((wt=G==null?void 0:G.goals)==null?void 0:wt.calories)||"",onChange:B=>J({...G,goals:{...G.goals,calories:Number(B.target.value)}})})),w.createElement("div",{className:"grid grid-cols-3 gap-2"},["carbs","fat","protein"].map(B=>{var X;return w.createElement("div",{key:B,className:"flex flex-col items-center"},w.createElement("label",{className:"block text-sm font-medium mb-1"},B.charAt(0).toUpperCase()+B.slice(1)),w.createElement("input",{type:"number",className:"w-16 border rounded text-center",value:((X=G==null?void 0:G.goals)==null?void 0:X[B])||"",onChange:ae=>J({...G,goals:{...G.goals,[B]:Number(ae.target.value)}})}),w.createElement("span",{className:"text-xs text-gray-500"},"g"))})),w.createElement("div",null,w.createElement("label",{className:"block text-sm font-medium mb-1"},"Fiber"),w.createElement("input",{type:"number",className:"w-full border rounded px-2 py-1",value:((It=G==null?void 0:G.goals)==null?void 0:It.fiber)||"",onChange:B=>J({...G,goals:{...G.goals,fiber:Number(B.target.value)}})}))),w.createElement("div",{className:"flex justify-end gap-2 mt-6"},w.createElement("button",{className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",onClick:()=>de(!1)},"Cancel"),w.createElement("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:async()=>{await ne(G),de(!1)}},"Save")))),S&&w.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},w.createElement("div",{className:"bg-white rounded-lg p-6 max-w-md w-full"},w.createElement("h3",{className:"text-lg font-semibold mb-4"},"Edit Entry"),w.createElement("div",{className:"space-y-4"},w.createElement("div",null,w.createElement("label",{className:"block text-sm font-medium mb-1"},"Date"),w.createElement("input",{type:"date",className:"w-full border rounded px-2 py-1",value:new Date(S.timestamp).toISOString().slice(0,10),onChange:B=>{const X=new Date(S.timestamp),[ae,pe,Re]=B.target.value.split("-");X.setFullYear(ae,pe-1,Re),O({...S,timestamp:X.toISOString()})}})),w.createElement("div",null,w.createElement("label",{className:"block text-sm font-medium mb-1"},"Time"),w.createElement("div",{className:"inline-flex items-center gap-1"},(()=>{const B=new Date(S.timestamp);let X=B.getHours();const ae=B.getMinutes(),pe=X>=12?"PM":"AM",Re=X%12||12;return w.createElement(w.Fragment,null,w.createElement("input",{type:"number",min:1,max:12,className:"w-12 border rounded px-2 py-1 text-center",value:Re,onChange:Qe=>{let ye=parseInt(Qe.target.value,10);(isNaN(ye)||ye<1)&&(ye=1),ye>12&&(ye=12);let He=pe==="PM"?ye===12?12:ye+12:ye===12?0:ye;const sn=new Date(S.timestamp);sn.setHours(He),O({...S,timestamp:sn.toISOString()})}}),":",w.createElement("input",{type:"number",min:0,max:59,className:"w-12 border rounded px-2 py-1 text-center",value:ae.toString().padStart(2,"0"),onChange:Qe=>{let ye=parseInt(Qe.target.value,10);(isNaN(ye)||ye<0)&&(ye=0),ye>59&&(ye=59);const He=new Date(S.timestamp);He.setMinutes(ye),O({...S,timestamp:He.toISOString()})}}),w.createElement("select",{className:"border rounded px-2 py-1",value:pe,onChange:Qe=>{let ye=Qe.target.value,He=Re,sn=ye==="PM"?He===12?12:He+12:He===12?0:He;const Sn=new Date(S.timestamp);Sn.setHours(sn),O({...S,timestamp:Sn.toISOString()})}},w.createElement("option",{value:"AM"},"AM"),w.createElement("option",{value:"PM"},"PM")))})())),w.createElement("div",null,w.createElement("label",{className:"block text-sm font-medium mb-1"},"Amount"),w.createElement("input",{type:"number",step:"0.1",className:"w-full border rounded px-2 py-1",value:S.serving,onChange:B=>O({...S,serving:parseFloat(B.target.value)||1})})),w.createElement("div",{className:"flex justify-end gap-2 mt-6"},w.createElement("button",{className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",onClick:()=>O(null)},"Cancel"),w.createElement("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:()=>{fn(S.id,"timestamp",S.timestamp),fn(S.id,"serving",S.serving),O(null)}},"Save Changes")))))):w.createElement("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-4"},w.createElement("h1",{className:"text-3xl font-bold text-center mb-6"},w.createElement("span",{role:"img","aria-label":"Chef"},"")," GORDON ",w.createElement("span",{role:"img","aria-label":"Chef"},"")),w.createElement(Vx,null)))}yT.createRoot(document.getElementById("root")).render(w.createElement(w.StrictMode,null,w.createElement(zx,null)));
