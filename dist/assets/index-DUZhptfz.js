(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function Mv(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var If={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xy;function iT(){if(xy)return Oe;xy=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function T(O){return O===null||typeof O!="object"?null:(O=I&&O[I]||O["@@iterator"],typeof O=="function"?O:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,H={};function q(O,W,ge){this.props=O,this.context=W,this.refs=H,this.updater=ge||V}q.prototype.isReactComponent={},q.prototype.setState=function(O,W){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,W,"setState")},q.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Ee(){}Ee.prototype=q.prototype;function J(O,W,ge){this.props=O,this.context=W,this.refs=H,this.updater=ge||V}var te=J.prototype=new Ee;te.constructor=J,j(te,q.prototype),te.isPureReactComponent=!0;var ue=Array.isArray,de=Object.prototype.hasOwnProperty,_e={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function S(O,W,ge){var De,be={},Me=null,ze=null;if(W!=null)for(De in W.ref!==void 0&&(ze=W.ref),W.key!==void 0&&(Me=""+W.key),W)de.call(W,De)&&!x.hasOwnProperty(De)&&(be[De]=W[De]);var qe=arguments.length-2;if(qe===1)be.children=ge;else if(1<qe){for(var Ye=Array(qe),_t=0;_t<qe;_t++)Ye[_t]=arguments[_t+2];be.children=Ye}if(O&&O.defaultProps)for(De in qe=O.defaultProps,qe)be[De]===void 0&&(be[De]=qe[De]);return{$$typeof:i,type:O,key:Me,ref:ze,props:be,_owner:_e.current}}function P(O,W){return{$$typeof:i,type:O.type,key:W,ref:O.ref,props:O.props,_owner:O._owner}}function N(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function b(O){var W={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ge){return W[ge]})}var M=/\/+/g;function R(O,W){return typeof O=="object"&&O!==null&&O.key!=null?b(""+O.key):W.toString(36)}function ht(O,W,ge,De,be){var Me=typeof O;(Me==="undefined"||Me==="boolean")&&(O=null);var ze=!1;if(O===null)ze=!0;else switch(Me){case"string":case"number":ze=!0;break;case"object":switch(O.$$typeof){case i:case e:ze=!0}}if(ze)return ze=O,be=be(ze),O=De===""?"."+R(ze,0):De,ue(be)?(ge="",O!=null&&(ge=O.replace(M,"$&/")+"/"),ht(be,W,ge,"",function(_t){return _t})):be!=null&&(N(be)&&(be=P(be,ge+(!be.key||ze&&ze.key===be.key?"":(""+be.key).replace(M,"$&/")+"/")+O)),W.push(be)),1;if(ze=0,De=De===""?".":De+":",ue(O))for(var qe=0;qe<O.length;qe++){Me=O[qe];var Ye=De+R(Me,qe);ze+=ht(Me,W,ge,Ye,be)}else if(Ye=T(O),typeof Ye=="function")for(O=Ye.call(O),qe=0;!(Me=O.next()).done;)Me=Me.value,Ye=De+R(Me,qe++),ze+=ht(Me,W,ge,Ye,be);else if(Me==="object")throw W=String(O),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return ze}function At(O,W,ge){if(O==null)return O;var De=[],be=0;return ht(O,De,"","",function(Me){return W.call(ge,Me,be++)}),De}function Dt(O){if(O._status===-1){var W=O._result;W=W(),W.then(function(ge){(O._status===0||O._status===-1)&&(O._status=1,O._result=ge)},function(ge){(O._status===0||O._status===-1)&&(O._status=2,O._result=ge)}),O._status===-1&&(O._status=0,O._result=W)}if(O._status===1)return O._result.default;throw O._result}var We={current:null},ie={transition:null},we={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:ie,ReactCurrentOwner:_e};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:At,forEach:function(O,W,ge){At(O,function(){W.apply(this,arguments)},ge)},count:function(O){var W=0;return At(O,function(){W++}),W},toArray:function(O){return At(O,function(W){return W})||[]},only:function(O){if(!N(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Oe.Component=q,Oe.Fragment=t,Oe.Profiler=o,Oe.PureComponent=J,Oe.StrictMode=r,Oe.Suspense=p,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=we,Oe.act=ae,Oe.cloneElement=function(O,W,ge){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var De=j({},O.props),be=O.key,Me=O.ref,ze=O._owner;if(W!=null){if(W.ref!==void 0&&(Me=W.ref,ze=_e.current),W.key!==void 0&&(be=""+W.key),O.type&&O.type.defaultProps)var qe=O.type.defaultProps;for(Ye in W)de.call(W,Ye)&&!x.hasOwnProperty(Ye)&&(De[Ye]=W[Ye]===void 0&&qe!==void 0?qe[Ye]:W[Ye])}var Ye=arguments.length-2;if(Ye===1)De.children=ge;else if(1<Ye){qe=Array(Ye);for(var _t=0;_t<Ye;_t++)qe[_t]=arguments[_t+2];De.children=qe}return{$$typeof:i,type:O.type,key:be,ref:Me,props:De,_owner:ze}},Oe.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:a,_context:O},O.Consumer=O},Oe.createElement=S,Oe.createFactory=function(O){var W=S.bind(null,O);return W.type=O,W},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(O){return{$$typeof:d,render:O}},Oe.isValidElement=N,Oe.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:Dt}},Oe.memo=function(O,W){return{$$typeof:y,type:O,compare:W===void 0?null:W}},Oe.startTransition=function(O){var W=ie.transition;ie.transition={};try{O()}finally{ie.transition=W}},Oe.unstable_act=ae,Oe.useCallback=function(O,W){return We.current.useCallback(O,W)},Oe.useContext=function(O){return We.current.useContext(O)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(O){return We.current.useDeferredValue(O)},Oe.useEffect=function(O,W){return We.current.useEffect(O,W)},Oe.useId=function(){return We.current.useId()},Oe.useImperativeHandle=function(O,W,ge){return We.current.useImperativeHandle(O,W,ge)},Oe.useInsertionEffect=function(O,W){return We.current.useInsertionEffect(O,W)},Oe.useLayoutEffect=function(O,W){return We.current.useLayoutEffect(O,W)},Oe.useMemo=function(O,W){return We.current.useMemo(O,W)},Oe.useReducer=function(O,W,ge){return We.current.useReducer(O,W,ge)},Oe.useRef=function(O){return We.current.useRef(O)},Oe.useState=function(O){return We.current.useState(O)},Oe.useSyncExternalStore=function(O,W,ge){return We.current.useSyncExternalStore(O,W,ge)},Oe.useTransition=function(){return We.current.useTransition()},Oe.version="18.3.1",Oe}var Ny;function Lv(){return Ny||(Ny=1,If.exports=iT()),If.exports}var Ge=Lv();const C=Mv(Ge);var Tc={},Tf={exports:{}},mn={},Sf={exports:{}},Af={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function sT(){return Dy||(Dy=1,function(i){function e(ie,we){var ae=ie.length;ie.push(we);e:for(;0<ae;){var O=ae-1>>>1,W=ie[O];if(0<o(W,we))ie[O]=we,ie[ae]=W,ae=O;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var we=ie[0],ae=ie.pop();if(ae!==we){ie[0]=ae;e:for(var O=0,W=ie.length,ge=W>>>1;O<ge;){var De=2*(O+1)-1,be=ie[De],Me=De+1,ze=ie[Me];if(0>o(be,ae))Me<W&&0>o(ze,be)?(ie[O]=ze,ie[Me]=ae,O=Me):(ie[O]=be,ie[De]=ae,O=De);else if(Me<W&&0>o(ze,ae))ie[O]=ze,ie[Me]=ae,O=Me;else break e}}return we}function o(ie,we){var ae=ie.sortIndex-we.sortIndex;return ae!==0?ae:ie.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var p=[],y=[],E=1,I=null,T=3,V=!1,j=!1,H=!1,q=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(ie){for(var we=t(y);we!==null;){if(we.callback===null)r(y);else if(we.startTime<=ie)r(y),we.sortIndex=we.expirationTime,e(p,we);else break;we=t(y)}}function ue(ie){if(H=!1,te(ie),!j)if(t(p)!==null)j=!0,Dt(de);else{var we=t(y);we!==null&&We(ue,we.startTime-ie)}}function de(ie,we){j=!1,H&&(H=!1,Ee(S),S=-1),V=!0;var ae=T;try{for(te(we),I=t(p);I!==null&&(!(I.expirationTime>we)||ie&&!b());){var O=I.callback;if(typeof O=="function"){I.callback=null,T=I.priorityLevel;var W=O(I.expirationTime<=we);we=i.unstable_now(),typeof W=="function"?I.callback=W:I===t(p)&&r(p),te(we)}else r(p);I=t(p)}if(I!==null)var ge=!0;else{var De=t(y);De!==null&&We(ue,De.startTime-we),ge=!1}return ge}finally{I=null,T=ae,V=!1}}var _e=!1,x=null,S=-1,P=5,N=-1;function b(){return!(i.unstable_now()-N<P)}function M(){if(x!==null){var ie=i.unstable_now();N=ie;var we=!0;try{we=x(!0,ie)}finally{we?R():(_e=!1,x=null)}}else _e=!1}var R;if(typeof J=="function")R=function(){J(M)};else if(typeof MessageChannel<"u"){var ht=new MessageChannel,At=ht.port2;ht.port1.onmessage=M,R=function(){At.postMessage(null)}}else R=function(){q(M,0)};function Dt(ie){x=ie,_e||(_e=!0,R())}function We(ie,we){S=q(function(){ie(i.unstable_now())},we)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ie){ie.callback=null},i.unstable_continueExecution=function(){j||V||(j=!0,Dt(de))},i.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ie?Math.floor(1e3/ie):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_getFirstCallbackNode=function(){return t(p)},i.unstable_next=function(ie){switch(T){case 1:case 2:case 3:var we=3;break;default:we=T}var ae=T;T=we;try{return ie()}finally{T=ae}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ie,we){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ae=T;T=ie;try{return we()}finally{T=ae}},i.unstable_scheduleCallback=function(ie,we,ae){var O=i.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?O+ae:O):ae=O,ie){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ae+W,ie={id:E++,callback:we,priorityLevel:ie,startTime:ae,expirationTime:W,sortIndex:-1},ae>O?(ie.sortIndex=ae,e(y,ie),t(p)===null&&ie===t(y)&&(H?(Ee(S),S=-1):H=!0,We(ue,ae-O))):(ie.sortIndex=W,e(p,ie),j||V||(j=!0,Dt(de))),ie},i.unstable_shouldYield=b,i.unstable_wrapCallback=function(ie){var we=T;return function(){var ae=T;T=we;try{return ie.apply(this,arguments)}finally{T=ae}}}}(Af)),Af}var by;function oT(){return by||(by=1,Sf.exports=sT()),Sf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function aT(){if(Vy)return mn;Vy=1;var i=Lv(),e=oT();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(n,s){c(n,s),c(n+"Capture",s)}function c(n,s){for(o[n]=s,n=0;n<s.length;n++)r.add(s[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},I={};function T(n){return p.call(I,n)?!0:p.call(E,n)?!1:y.test(n)?I[n]=!0:(E[n]=!0,!1)}function V(n,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function j(n,s,l,h){if(s===null||typeof s>"u"||V(n,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function H(n,s,l,h,f,g,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=v}var q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){q[n]=new H(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];q[s]=new H(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){q[n]=new H(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){q[n]=new H(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){q[n]=new H(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){q[n]=new H(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){q[n]=new H(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){q[n]=new H(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){q[n]=new H(n,5,!1,n.toLowerCase(),null,!1,!1)});var Ee=/[\-:]([a-z])/g;function J(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(Ee,J);q[s]=new H(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(Ee,J);q[s]=new H(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(Ee,J);q[s]=new H(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){q[n]=new H(n,1,!1,n.toLowerCase(),null,!1,!1)}),q.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){q[n]=new H(n,1,!1,n.toLowerCase(),null,!0,!0)});function te(n,s,l,h){var f=q.hasOwnProperty(s)?q[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(j(s,l,f,h)&&(l=null),h||f===null?T(s)&&(l===null?n.removeAttribute(s):n.setAttribute(s,""+l)):f.mustUseProperty?n[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,h=f.attributeNamespace,l===null?n.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?n.setAttributeNS(h,s,l):n.setAttribute(s,l))))}var ue=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,de=Symbol.for("react.element"),_e=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),b=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),ht=Symbol.for("react.suspense_list"),At=Symbol.for("react.memo"),Dt=Symbol.for("react.lazy"),We=Symbol.for("react.offscreen"),ie=Symbol.iterator;function we(n){return n===null||typeof n!="object"?null:(n=ie&&n[ie]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,O;function W(n){if(O===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);O=s&&s[1]||""}return`
`+O+n}var ge=!1;function De(n,s){if(!n||ge)return"";ge=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var h=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){h=z}n.call(s.prototype)}else{try{throw Error()}catch(z){h=z}n()}}catch(z){if(z&&h&&typeof z.stack=="string"){for(var f=z.stack.split(`
`),g=h.stack.split(`
`),v=f.length-1,A=g.length-1;1<=v&&0<=A&&f[v]!==g[A];)A--;for(;1<=v&&0<=A;v--,A--)if(f[v]!==g[A]){if(v!==1||A!==1)do if(v--,A--,0>A||f[v]!==g[A]){var k=`
`+f[v].replace(" at new "," at ");return n.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",n.displayName)),k}while(1<=v&&0<=A);break}}}finally{ge=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?W(n):""}function be(n){switch(n.tag){case 5:return W(n.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return n=De(n.type,!1),n;case 11:return n=De(n.type.render,!1),n;case 1:return n=De(n.type,!0),n;default:return""}}function Me(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case _e:return"Portal";case P:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case ht:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case b:return(n.displayName||"Context")+".Consumer";case N:return(n._context.displayName||"Context")+".Provider";case M:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case At:return s=n.displayName||null,s!==null?s:Me(n.type)||"Memo";case Dt:s=n._payload,n=n._init;try{return Me(n(s))}catch{}}return null}function ze(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function qe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ye(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function _t(n){var s=Ye(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,g=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){h=""+v,g.call(this,v)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(v){h=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Bn(n){n._valueTracker||(n._valueTracker=_t(n))}function Zr(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return n&&(h=Ye(n)?n.checked?"true":"false":n.value),n=h,n!==l?(s.setValue(n),!0):!1}function or(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ar(n,s){var l=s.checked;return ae({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Pr(n,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=qe(s.value!=null?s.value:l),n._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ei(n,s){s=s.checked,s!=null&&te(n,"checked",s,!1)}function ti(n,s){ei(n,s);var l=qe(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?G(n,s.type,l):s.hasOwnProperty("defaultValue")&&G(n,s.type,qe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Wi(n,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,l||s===n.value||(n.value=s),n.defaultValue=s}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function G(n,s,l){(s!=="number"||or(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var re=Array.isArray;function ce(n,s,l,h){if(n=n.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<n.length;l++)f=s.hasOwnProperty("$"+n[l].value),n[l].selected!==f&&(n[l].selected=f),f&&h&&(n[l].defaultSelected=!0)}else{for(l=""+qe(l),s=null,f=0;f<n.length;f++){if(n[f].value===l){n[f].selected=!0,h&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Ae(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Pe(n,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(re(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}n._wrapperState={initialValue:qe(l)}}function Xe(n,s){var l=qe(s.value),h=qe(s.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),s.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),h!=null&&(n.defaultValue=""+h)}function xe(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Le(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nt(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Le(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Rt,Qi=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,f){MSApp.execUnsafeLocalFunction(function(){return n(s,l,h,f)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Rt=Rt||document.createElement("div"),Rt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Rt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function ni(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var Yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xi=["Webkit","ms","Moz","O"];Object.keys(Yi).forEach(function(n){Xi.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Yi[s]=Yi[n]})});function Sa(n,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Yi.hasOwnProperty(n)&&Yi[n]?(""+s).trim():s+"px"}function Aa(n,s){n=n.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=Sa(l,s[l],h);l==="float"&&(l="cssFloat"),h?n.setProperty(l,f):n[l]=f}}var Ra=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pa(n,s){if(s){if(Ra[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Ca(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ji=null;function Js(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Zs=null,Pn=null,lr=null;function eo(n){if(n=Ja(n)){if(typeof Zs!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Fu(s),Zs(n.stateNode,n.type,s))}}function ur(n){Pn?lr?lr.push(n):lr=[n]:Pn=n}function ka(){if(Pn){var n=Pn,s=lr;if(lr=Pn=null,eo(n),s)for(n=0;n<s.length;n++)eo(s[n])}}function Zi(n,s){return n(s)}function xa(){}var Cr=!1;function Na(n,s,l){if(Cr)return n(s,l);Cr=!0;try{return Zi(n,s,l)}finally{Cr=!1,(Pn!==null||lr!==null)&&(xa(),ka())}}function vt(n,s){var l=n.stateNode;if(l===null)return null;var h=Fu(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var to=!1;if(d)try{var zn={};Object.defineProperty(zn,"passive",{get:function(){to=!0}}),window.addEventListener("test",zn,zn),window.removeEventListener("test",zn,zn)}catch{to=!1}function es(n,s,l,h,f,g,v,A,k){var z=Array.prototype.slice.call(arguments,3);try{s.apply(l,z)}catch(Y){this.onError(Y)}}var ts=!1,no=null,jn=!1,Da=null,Qh={onError:function(n){ts=!0,no=n}};function ro(n,s,l,h,f,g,v,A,k){ts=!1,no=null,es.apply(Qh,arguments)}function uu(n,s,l,h,f,g,v,A,k){if(ro.apply(this,arguments),ts){if(ts){var z=no;ts=!1,no=null}else throw Error(t(198));jn||(jn=!0,Da=z)}}function $n(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function ns(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function qn(n){if($n(n)!==n)throw Error(t(188))}function cu(n){var s=n.alternate;if(!s){if(s=$n(n),s===null)throw Error(t(188));return s!==n?null:n}for(var l=n,h=s;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return qn(f),n;if(g===h)return qn(f),s;g=g.sibling}throw Error(t(188))}if(l.return!==h.return)l=f,h=g;else{for(var v=!1,A=f.child;A;){if(A===l){v=!0,l=f,h=g;break}if(A===h){v=!0,h=f,l=g;break}A=A.sibling}if(!v){for(A=g.child;A;){if(A===l){v=!0,l=g,h=f;break}if(A===h){v=!0,h=g,l=f;break}A=A.sibling}if(!v)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?n:s}function ba(n){return n=cu(n),n!==null?io(n):null}function io(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=io(n);if(s!==null)return s;n=n.sibling}return null}var so=e.unstable_scheduleCallback,Va=e.unstable_cancelCallback,hu=e.unstable_shouldYield,Yh=e.unstable_requestPaint,rt=e.unstable_now,du=e.unstable_getCurrentPriorityLevel,rs=e.unstable_ImmediatePriority,ri=e.unstable_UserBlockingPriority,Cn=e.unstable_NormalPriority,Oa=e.unstable_LowPriority,fu=e.unstable_IdlePriority,is=null,yn=null;function pu(n){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(is,n,void 0,(n.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:gu,Ma=Math.log,mu=Math.LN2;function gu(n){return n>>>=0,n===0?32:31-(Ma(n)/mu|0)|0}var oo=64,ao=4194304;function ii(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ss(n,s){var l=n.pendingLanes;if(l===0)return 0;var h=0,f=n.suspendedLanes,g=n.pingedLanes,v=l&268435455;if(v!==0){var A=v&~f;A!==0?h=ii(A):(g&=v,g!==0&&(h=ii(g)))}else v=l&~f,v!==0?h=ii(v):g!==0&&(h=ii(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)l=31-en(s),f=1<<l,h|=n[l],s&=~f;return h}function Xh(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kr(n,s){for(var l=n.suspendedLanes,h=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var v=31-en(g),A=1<<v,k=f[v];k===-1?((A&l)===0||(A&h)!==0)&&(f[v]=Xh(A,s)):k<=s&&(n.expiredLanes|=A),g&=~A}}function _n(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function os(){var n=oo;return oo<<=1,(oo&4194240)===0&&(oo=64),n}function si(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function oi(n,s,l){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-en(s),n[s]=l}function tt(n,s){var l=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<l;){var f=31-en(l),g=1<<f;s[f]=0,h[f]=-1,n[f]=-1,l&=~g}}function ai(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var h=31-en(l),f=1<<h;f&s|n[h]&s&&(n[h]|=s),l&=~f}}var Be=0;function li(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var yu,lo,_u,vu,Eu,La=!1,cr=[],Ft=null,Kn=null,Hn=null,ui=new Map,kn=new Map,hr=[],Jh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wu(n,s){switch(n){case"focusin":case"focusout":Ft=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":ui.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":kn.delete(s.pointerId)}}function ln(n,s,l,h,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Ja(s),s!==null&&lo(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function Zh(n,s,l,h,f){switch(s){case"focusin":return Ft=ln(Ft,n,s,l,h,f),!0;case"dragenter":return Kn=ln(Kn,n,s,l,h,f),!0;case"mouseover":return Hn=ln(Hn,n,s,l,h,f),!0;case"pointerover":var g=f.pointerId;return ui.set(g,ln(ui.get(g)||null,n,s,l,h,f)),!0;case"gotpointercapture":return g=f.pointerId,kn.set(g,ln(kn.get(g)||null,n,s,l,h,f)),!0}return!1}function Iu(n){var s=hs(n.target);if(s!==null){var l=$n(s);if(l!==null){if(s=l.tag,s===13){if(s=ns(l),s!==null){n.blockedOn=s,Eu(n.priority,function(){_u(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function xr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=uo(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);Ji=h,l.target.dispatchEvent(h),Ji=null}else return s=Ja(l),s!==null&&lo(s),n.blockedOn=l,!1;s.shift()}return!0}function as(n,s,l){xr(n)&&l.delete(s)}function Tu(){La=!1,Ft!==null&&xr(Ft)&&(Ft=null),Kn!==null&&xr(Kn)&&(Kn=null),Hn!==null&&xr(Hn)&&(Hn=null),ui.forEach(as),kn.forEach(as)}function Gn(n,s){n.blockedOn===s&&(n.blockedOn=null,La||(La=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Tu)))}function Wn(n){function s(f){return Gn(f,n)}if(0<cr.length){Gn(cr[0],n);for(var l=1;l<cr.length;l++){var h=cr[l];h.blockedOn===n&&(h.blockedOn=null)}}for(Ft!==null&&Gn(Ft,n),Kn!==null&&Gn(Kn,n),Hn!==null&&Gn(Hn,n),ui.forEach(s),kn.forEach(s),l=0;l<hr.length;l++)h=hr[l],h.blockedOn===n&&(h.blockedOn=null);for(;0<hr.length&&(l=hr[0],l.blockedOn===null);)Iu(l),l.blockedOn===null&&hr.shift()}var Nr=ue.ReactCurrentBatchConfig,ci=!0;function at(n,s,l,h){var f=Be,g=Nr.transition;Nr.transition=null;try{Be=1,Fa(n,s,l,h)}finally{Be=f,Nr.transition=g}}function ed(n,s,l,h){var f=Be,g=Nr.transition;Nr.transition=null;try{Be=4,Fa(n,s,l,h)}finally{Be=f,Nr.transition=g}}function Fa(n,s,l,h){if(ci){var f=uo(n,s,l,h);if(f===null)hd(n,s,h,ls,l),wu(n,h);else if(Zh(f,n,s,l,h))h.stopPropagation();else if(wu(n,h),s&4&&-1<Jh.indexOf(n)){for(;f!==null;){var g=Ja(f);if(g!==null&&yu(g),g=uo(n,s,l,h),g===null&&hd(n,s,h,ls,l),g===f)break;f=g}f!==null&&h.stopPropagation()}else hd(n,s,h,null,l)}}var ls=null;function uo(n,s,l,h){if(ls=null,n=Js(h),n=hs(n),n!==null)if(s=$n(n),s===null)n=null;else if(l=s.tag,l===13){if(n=ns(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return ls=n,null}function Ua(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(du()){case rs:return 1;case ri:return 4;case Cn:case Oa:return 16;case fu:return 536870912;default:return 16}default:return 16}}var vn=null,co=null,un=null;function Ba(){if(un)return un;var n,s=co,l=s.length,h,f="value"in vn?vn.value:vn.textContent,g=f.length;for(n=0;n<l&&s[n]===f[n];n++);var v=l-n;for(h=1;h<=v&&s[l-h]===f[g-h];h++);return un=f.slice(n,1<h?1-h:void 0)}function ho(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function dr(){return!0}function za(){return!1}function Ut(n){function s(l,h,f,g,v){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(l=n[A],this[A]=l?l(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?dr:za,this.isPropagationStopped=za,this}return ae(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=dr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=dr)},persist:function(){},isPersistent:dr}),s}var Qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fo=Ut(Qn),fr=ae({},Qn,{view:0,detail:0}),td=Ut(fr),po,Dr,hi,us=ae({},fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hi&&(hi&&n.type==="mousemove"?(po=n.screenX-hi.screenX,Dr=n.screenY-hi.screenY):Dr=po=0,hi=n),po)},movementY:function(n){return"movementY"in n?n.movementY:Dr}}),mo=Ut(us),ja=ae({},us,{dataTransfer:0}),Su=Ut(ja),go=ae({},fr,{relatedTarget:0}),yo=Ut(go),Au=ae({},Qn,{animationName:0,elapsedTime:0,pseudoElement:0}),br=Ut(Au),Ru=ae({},Qn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Pu=Ut(Ru),Cu=ae({},Qn,{data:0}),$a=Ut(Cu),_o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ku={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xu(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=ku[n])?!!s[n]:!1}function pr(){return xu}var u=ae({},fr,{key:function(n){if(n.key){var s=_o[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ho(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pr,charCode:function(n){return n.type==="keypress"?ho(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ho(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=Ut(u),_=ae({},us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=Ut(_),L=ae({},fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pr}),$=Ut(L),ne=ae({},Qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Je=Ut(ne),Pt=ae({},us,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),je=Ut(Pt),bt=[9,13,27,32],wt=d&&"CompositionEvent"in window,xn=null;d&&"documentMode"in document&&(xn=document.documentMode);var En=d&&"TextEvent"in window&&!xn,cs=d&&(!wt||xn&&8<xn&&11>=xn),vo=" ",Sm=!1;function Am(n,s){switch(n){case"keyup":return bt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Eo=!1;function tI(n,s){switch(n){case"compositionend":return Rm(s);case"keypress":return s.which!==32?null:(Sm=!0,vo);case"textInput":return n=s.data,n===vo&&Sm?null:n;default:return null}}function nI(n,s){if(Eo)return n==="compositionend"||!wt&&Am(n,s)?(n=Ba(),un=co=vn=null,Eo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return cs&&s.locale!=="ko"?null:s.data;default:return null}}var rI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!rI[n.type]:s==="textarea"}function Cm(n,s,l,h){ur(h),s=Ou(s,"onChange"),0<s.length&&(l=new fo("onChange","change",null,l,h),n.push({event:l,listeners:s}))}var qa=null,Ka=null;function iI(n){Hm(n,0)}function Nu(n){var s=Ao(n);if(Zr(s))return n}function sI(n,s){if(n==="change")return s}var km=!1;if(d){var nd;if(d){var rd="oninput"in document;if(!rd){var xm=document.createElement("div");xm.setAttribute("oninput","return;"),rd=typeof xm.oninput=="function"}nd=rd}else nd=!1;km=nd&&(!document.documentMode||9<document.documentMode)}function Nm(){qa&&(qa.detachEvent("onpropertychange",Dm),Ka=qa=null)}function Dm(n){if(n.propertyName==="value"&&Nu(Ka)){var s=[];Cm(s,Ka,n,Js(n)),Na(iI,s)}}function oI(n,s,l){n==="focusin"?(Nm(),qa=s,Ka=l,qa.attachEvent("onpropertychange",Dm)):n==="focusout"&&Nm()}function aI(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Nu(Ka)}function lI(n,s){if(n==="click")return Nu(s)}function uI(n,s){if(n==="input"||n==="change")return Nu(s)}function cI(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Yn=typeof Object.is=="function"?Object.is:cI;function Ha(n,s){if(Yn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!p.call(s,f)||!Yn(n[f],s[f]))return!1}return!0}function bm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Vm(n,s){var l=bm(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=s&&h>=s)return{node:l,offset:s-n};n=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=bm(l)}}function Om(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Om(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Mm(){for(var n=window,s=or();s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=or(n.document)}return s}function id(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function hI(n){var s=Mm(),l=n.focusedElem,h=n.selectionRange;if(s!==l&&l&&l.ownerDocument&&Om(l.ownerDocument.documentElement,l)){if(h!==null&&id(l)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(n,l.value.length);else if(n=(s=l.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=l.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!n.extend&&g>h&&(f=h,h=g,g=f),f=Vm(l,g);var v=Vm(l,h);f&&v&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>h?(n.addRange(s),n.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),n.addRange(s)))}}for(s=[],n=l;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)n=s[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var dI=d&&"documentMode"in document&&11>=document.documentMode,wo=null,sd=null,Ga=null,od=!1;function Lm(n,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;od||wo==null||wo!==or(h)||(h=wo,"selectionStart"in h&&id(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ga&&Ha(Ga,h)||(Ga=h,h=Ou(sd,"onSelect"),0<h.length&&(s=new fo("onSelect","select",null,s,l),n.push({event:s,listeners:h}),s.target=wo)))}function Du(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var Io={animationend:Du("Animation","AnimationEnd"),animationiteration:Du("Animation","AnimationIteration"),animationstart:Du("Animation","AnimationStart"),transitionend:Du("Transition","TransitionEnd")},ad={},Fm={};d&&(Fm=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function bu(n){if(ad[n])return ad[n];if(!Io[n])return n;var s=Io[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in Fm)return ad[n]=s[l];return n}var Um=bu("animationend"),Bm=bu("animationiteration"),zm=bu("animationstart"),jm=bu("transitionend"),$m=new Map,qm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(n,s){$m.set(n,s),a(s,[n])}for(var ld=0;ld<qm.length;ld++){var ud=qm[ld],fI=ud.toLowerCase(),pI=ud[0].toUpperCase()+ud.slice(1);di(fI,"on"+pI)}di(Um,"onAnimationEnd"),di(Bm,"onAnimationIteration"),di(zm,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(jm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wa));function Km(n,s,l){var h=n.type||"unknown-event";n.currentTarget=l,uu(h,s,void 0,n),n.currentTarget=null}function Hm(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var v=h.length-1;0<=v;v--){var A=h[v],k=A.instance,z=A.currentTarget;if(A=A.listener,k!==g&&f.isPropagationStopped())break e;Km(f,A,z),g=k}else for(v=0;v<h.length;v++){if(A=h[v],k=A.instance,z=A.currentTarget,A=A.listener,k!==g&&f.isPropagationStopped())break e;Km(f,A,z),g=k}}}if(jn)throw n=Da,jn=!1,Da=null,n}function st(n,s){var l=s[yd];l===void 0&&(l=s[yd]=new Set);var h=n+"__bubble";l.has(h)||(Gm(s,n,2,!1),l.add(h))}function cd(n,s,l){var h=0;s&&(h|=4),Gm(l,n,h,s)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function Qa(n){if(!n[Vu]){n[Vu]=!0,r.forEach(function(l){l!=="selectionchange"&&(mI.has(l)||cd(l,!1,n),cd(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Vu]||(s[Vu]=!0,cd("selectionchange",!1,s))}}function Gm(n,s,l,h){switch(Ua(s)){case 1:var f=at;break;case 4:f=ed;break;default:f=Fa}l=f.bind(null,s,l,n),f=void 0,!to||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?n.addEventListener(s,l,{capture:!0,passive:f}):n.addEventListener(s,l,!0):f!==void 0?n.addEventListener(s,l,{passive:f}):n.addEventListener(s,l,!1)}function hd(n,s,l,h,f){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var v=h.tag;if(v===3||v===4){var A=h.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(v===4)for(v=h.return;v!==null;){var k=v.tag;if((k===3||k===4)&&(k=v.stateNode.containerInfo,k===f||k.nodeType===8&&k.parentNode===f))return;v=v.return}for(;A!==null;){if(v=hs(A),v===null)return;if(k=v.tag,k===5||k===6){h=g=v;continue e}A=A.parentNode}}h=h.return}Na(function(){var z=g,Y=Js(l),X=[];e:{var Q=$m.get(n);if(Q!==void 0){var le=fo,fe=n;switch(n){case"keypress":if(ho(l)===0)break e;case"keydown":case"keyup":le=m;break;case"focusin":fe="focus",le=yo;break;case"focusout":fe="blur",le=yo;break;case"beforeblur":case"afterblur":le=yo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=mo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Su;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=$;break;case Um:case Bm:case zm:le=br;break;case jm:le=Je;break;case"scroll":le=td;break;case"wheel":le=je;break;case"copy":case"cut":case"paste":le=Pu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=w}var me=(s&4)!==0,Et=!me&&n==="scroll",U=me?Q!==null?Q+"Capture":null:Q;me=[];for(var D=z,B;D!==null;){B=D;var ee=B.stateNode;if(B.tag===5&&ee!==null&&(B=ee,U!==null&&(ee=vt(D,U),ee!=null&&me.push(Ya(D,ee,B)))),Et)break;D=D.return}0<me.length&&(Q=new le(Q,fe,null,l,Y),X.push({event:Q,listeners:me}))}}if((s&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",Q&&l!==Ji&&(fe=l.relatedTarget||l.fromElement)&&(hs(fe)||fe[Vr]))break e;if((le||Q)&&(Q=Y.window===Y?Y:(Q=Y.ownerDocument)?Q.defaultView||Q.parentWindow:window,le?(fe=l.relatedTarget||l.toElement,le=z,fe=fe?hs(fe):null,fe!==null&&(Et=$n(fe),fe!==Et||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(le=null,fe=z),le!==fe)){if(me=mo,ee="onMouseLeave",U="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(me=w,ee="onPointerLeave",U="onPointerEnter",D="pointer"),Et=le==null?Q:Ao(le),B=fe==null?Q:Ao(fe),Q=new me(ee,D+"leave",le,l,Y),Q.target=Et,Q.relatedTarget=B,ee=null,hs(Y)===z&&(me=new me(U,D+"enter",fe,l,Y),me.target=B,me.relatedTarget=Et,ee=me),Et=ee,le&&fe)t:{for(me=le,U=fe,D=0,B=me;B;B=To(B))D++;for(B=0,ee=U;ee;ee=To(ee))B++;for(;0<D-B;)me=To(me),D--;for(;0<B-D;)U=To(U),B--;for(;D--;){if(me===U||U!==null&&me===U.alternate)break t;me=To(me),U=To(U)}me=null}else me=null;le!==null&&Wm(X,Q,le,me,!1),fe!==null&&Et!==null&&Wm(X,Et,fe,me,!0)}}e:{if(Q=z?Ao(z):window,le=Q.nodeName&&Q.nodeName.toLowerCase(),le==="select"||le==="input"&&Q.type==="file")var ye=sI;else if(Pm(Q))if(km)ye=uI;else{ye=aI;var Te=oI}else(le=Q.nodeName)&&le.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(ye=lI);if(ye&&(ye=ye(n,z))){Cm(X,ye,l,Y);break e}Te&&Te(n,Q,z),n==="focusout"&&(Te=Q._wrapperState)&&Te.controlled&&Q.type==="number"&&G(Q,"number",Q.value)}switch(Te=z?Ao(z):window,n){case"focusin":(Pm(Te)||Te.contentEditable==="true")&&(wo=Te,sd=z,Ga=null);break;case"focusout":Ga=sd=wo=null;break;case"mousedown":od=!0;break;case"contextmenu":case"mouseup":case"dragend":od=!1,Lm(X,l,Y);break;case"selectionchange":if(dI)break;case"keydown":case"keyup":Lm(X,l,Y)}var Se;if(wt)e:{switch(n){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Eo?Am(n,l)&&(Ce="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Ce="onCompositionStart");Ce&&(cs&&l.locale!=="ko"&&(Eo||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Eo&&(Se=Ba()):(vn=Y,co="value"in vn?vn.value:vn.textContent,Eo=!0)),Te=Ou(z,Ce),0<Te.length&&(Ce=new $a(Ce,n,null,l,Y),X.push({event:Ce,listeners:Te}),Se?Ce.data=Se:(Se=Rm(l),Se!==null&&(Ce.data=Se)))),(Se=En?tI(n,l):nI(n,l))&&(z=Ou(z,"onBeforeInput"),0<z.length&&(Y=new $a("onBeforeInput","beforeinput",null,l,Y),X.push({event:Y,listeners:z}),Y.data=Se))}Hm(X,s)})}function Ya(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Ou(n,s){for(var l=s+"Capture",h=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=vt(n,l),g!=null&&h.unshift(Ya(n,g,f)),g=vt(n,s),g!=null&&h.push(Ya(n,g,f))),n=n.return}return h}function To(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Wm(n,s,l,h,f){for(var g=s._reactName,v=[];l!==null&&l!==h;){var A=l,k=A.alternate,z=A.stateNode;if(k!==null&&k===h)break;A.tag===5&&z!==null&&(A=z,f?(k=vt(l,g),k!=null&&v.unshift(Ya(l,k,A))):f||(k=vt(l,g),k!=null&&v.push(Ya(l,k,A)))),l=l.return}v.length!==0&&n.push({event:s,listeners:v})}var gI=/\r\n?/g,yI=/\u0000|\uFFFD/g;function Qm(n){return(typeof n=="string"?n:""+n).replace(gI,`
`).replace(yI,"")}function Mu(n,s,l){if(s=Qm(s),Qm(n)!==s&&l)throw Error(t(425))}function Lu(){}var dd=null,fd=null;function pd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var md=typeof setTimeout=="function"?setTimeout:void 0,_I=typeof clearTimeout=="function"?clearTimeout:void 0,Ym=typeof Promise=="function"?Promise:void 0,vI=typeof queueMicrotask=="function"?queueMicrotask:typeof Ym<"u"?function(n){return Ym.resolve(null).then(n).catch(EI)}:md;function EI(n){setTimeout(function(){throw n})}function gd(n,s){var l=s,h=0;do{var f=l.nextSibling;if(n.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){n.removeChild(f),Wn(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);Wn(s)}function fi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Xm(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}var So=Math.random().toString(36).slice(2),mr="__reactFiber$"+So,Xa="__reactProps$"+So,Vr="__reactContainer$"+So,yd="__reactEvents$"+So,wI="__reactListeners$"+So,II="__reactHandles$"+So;function hs(n){var s=n[mr];if(s)return s;for(var l=n.parentNode;l;){if(s=l[Vr]||l[mr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=Xm(n);n!==null;){if(l=n[mr])return l;n=Xm(n)}return s}n=l,l=n.parentNode}return null}function Ja(n){return n=n[mr]||n[Vr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ao(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Fu(n){return n[Xa]||null}var _d=[],Ro=-1;function pi(n){return{current:n}}function ot(n){0>Ro||(n.current=_d[Ro],_d[Ro]=null,Ro--)}function it(n,s){Ro++,_d[Ro]=n.current,n.current=s}var mi={},qt=pi(mi),cn=pi(!1),ds=mi;function Po(n,s){var l=n.type.contextTypes;if(!l)return mi;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in l)f[g]=s[g];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function hn(n){return n=n.childContextTypes,n!=null}function Uu(){ot(cn),ot(qt)}function Jm(n,s,l){if(qt.current!==mi)throw Error(t(168));it(qt,s),it(cn,l)}function Zm(n,s,l){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,ze(n)||"Unknown",f));return ae({},l,h)}function Bu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||mi,ds=qt.current,it(qt,n),it(cn,cn.current),!0}function eg(n,s,l){var h=n.stateNode;if(!h)throw Error(t(169));l?(n=Zm(n,s,ds),h.__reactInternalMemoizedMergedChildContext=n,ot(cn),ot(qt),it(qt,n)):ot(cn),it(cn,l)}var Or=null,zu=!1,vd=!1;function tg(n){Or===null?Or=[n]:Or.push(n)}function TI(n){zu=!0,tg(n)}function gi(){if(!vd&&Or!==null){vd=!0;var n=0,s=Be;try{var l=Or;for(Be=1;n<l.length;n++){var h=l[n];do h=h(!0);while(h!==null)}Or=null,zu=!1}catch(f){throw Or!==null&&(Or=Or.slice(n+1)),so(rs,gi),f}finally{Be=s,vd=!1}}return null}var Co=[],ko=0,ju=null,$u=0,Nn=[],Dn=0,fs=null,Mr=1,Lr="";function ps(n,s){Co[ko++]=$u,Co[ko++]=ju,ju=n,$u=s}function ng(n,s,l){Nn[Dn++]=Mr,Nn[Dn++]=Lr,Nn[Dn++]=fs,fs=n;var h=Mr;n=Lr;var f=32-en(h)-1;h&=~(1<<f),l+=1;var g=32-en(s)+f;if(30<g){var v=f-f%5;g=(h&(1<<v)-1).toString(32),h>>=v,f-=v,Mr=1<<32-en(s)+f|l<<f|h,Lr=g+n}else Mr=1<<g|l<<f|h,Lr=n}function Ed(n){n.return!==null&&(ps(n,1),ng(n,1,0))}function wd(n){for(;n===ju;)ju=Co[--ko],Co[ko]=null,$u=Co[--ko],Co[ko]=null;for(;n===fs;)fs=Nn[--Dn],Nn[Dn]=null,Lr=Nn[--Dn],Nn[Dn]=null,Mr=Nn[--Dn],Nn[Dn]=null}var wn=null,In=null,lt=!1,Xn=null;function rg(n,s){var l=Mn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=n,s=n.deletions,s===null?(n.deletions=[l],n.flags|=16):s.push(l)}function ig(n,s){switch(n.tag){case 5:var l=n.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,wn=n,In=fi(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,wn=n,In=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=fs!==null?{id:Mr,overflow:Lr}:null,n.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Mn(18,null,null,0),l.stateNode=s,l.return=n,n.child=l,wn=n,In=null,!0):!1;default:return!1}}function Id(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Td(n){if(lt){var s=In;if(s){var l=s;if(!ig(n,s)){if(Id(n))throw Error(t(418));s=fi(l.nextSibling);var h=wn;s&&ig(n,s)?rg(h,l):(n.flags=n.flags&-4097|2,lt=!1,wn=n)}}else{if(Id(n))throw Error(t(418));n.flags=n.flags&-4097|2,lt=!1,wn=n}}}function sg(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;wn=n}function qu(n){if(n!==wn)return!1;if(!lt)return sg(n),lt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!pd(n.type,n.memoizedProps)),s&&(s=In)){if(Id(n))throw og(),Error(t(418));for(;s;)rg(n,s),s=fi(s.nextSibling)}if(sg(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(s===0){In=fi(n.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}n=n.nextSibling}In=null}}else In=wn?fi(n.stateNode.nextSibling):null;return!0}function og(){for(var n=In;n;)n=fi(n.nextSibling)}function xo(){In=wn=null,lt=!1}function Sd(n){Xn===null?Xn=[n]:Xn.push(n)}var SI=ue.ReactCurrentBatchConfig;function Za(n,s,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,n));var f=h,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(v){var A=f.refs;v===null?delete A[g]:A[g]=v},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,n))}return n}function Ku(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function ag(n){var s=n._init;return s(n._payload)}function lg(n){function s(U,D){if(n){var B=U.deletions;B===null?(U.deletions=[D],U.flags|=16):B.push(D)}}function l(U,D){if(!n)return null;for(;D!==null;)s(U,D),D=D.sibling;return null}function h(U,D){for(U=new Map;D!==null;)D.key!==null?U.set(D.key,D):U.set(D.index,D),D=D.sibling;return U}function f(U,D){return U=Si(U,D),U.index=0,U.sibling=null,U}function g(U,D,B){return U.index=B,n?(B=U.alternate,B!==null?(B=B.index,B<D?(U.flags|=2,D):B):(U.flags|=2,D)):(U.flags|=1048576,D)}function v(U){return n&&U.alternate===null&&(U.flags|=2),U}function A(U,D,B,ee){return D===null||D.tag!==6?(D=gf(B,U.mode,ee),D.return=U,D):(D=f(D,B),D.return=U,D)}function k(U,D,B,ee){var ye=B.type;return ye===x?Y(U,D,B.props.children,ee,B.key):D!==null&&(D.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Dt&&ag(ye)===D.type)?(ee=f(D,B.props),ee.ref=Za(U,D,B),ee.return=U,ee):(ee=mc(B.type,B.key,B.props,null,U.mode,ee),ee.ref=Za(U,D,B),ee.return=U,ee)}function z(U,D,B,ee){return D===null||D.tag!==4||D.stateNode.containerInfo!==B.containerInfo||D.stateNode.implementation!==B.implementation?(D=yf(B,U.mode,ee),D.return=U,D):(D=f(D,B.children||[]),D.return=U,D)}function Y(U,D,B,ee,ye){return D===null||D.tag!==7?(D=Is(B,U.mode,ee,ye),D.return=U,D):(D=f(D,B),D.return=U,D)}function X(U,D,B){if(typeof D=="string"&&D!==""||typeof D=="number")return D=gf(""+D,U.mode,B),D.return=U,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case de:return B=mc(D.type,D.key,D.props,null,U.mode,B),B.ref=Za(U,null,D),B.return=U,B;case _e:return D=yf(D,U.mode,B),D.return=U,D;case Dt:var ee=D._init;return X(U,ee(D._payload),B)}if(re(D)||we(D))return D=Is(D,U.mode,B,null),D.return=U,D;Ku(U,D)}return null}function Q(U,D,B,ee){var ye=D!==null?D.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return ye!==null?null:A(U,D,""+B,ee);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case de:return B.key===ye?k(U,D,B,ee):null;case _e:return B.key===ye?z(U,D,B,ee):null;case Dt:return ye=B._init,Q(U,D,ye(B._payload),ee)}if(re(B)||we(B))return ye!==null?null:Y(U,D,B,ee,null);Ku(U,B)}return null}function le(U,D,B,ee,ye){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return U=U.get(B)||null,A(D,U,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case de:return U=U.get(ee.key===null?B:ee.key)||null,k(D,U,ee,ye);case _e:return U=U.get(ee.key===null?B:ee.key)||null,z(D,U,ee,ye);case Dt:var Te=ee._init;return le(U,D,B,Te(ee._payload),ye)}if(re(ee)||we(ee))return U=U.get(B)||null,Y(D,U,ee,ye,null);Ku(D,ee)}return null}function fe(U,D,B,ee){for(var ye=null,Te=null,Se=D,Ce=D=0,Mt=null;Se!==null&&Ce<B.length;Ce++){Se.index>Ce?(Mt=Se,Se=null):Mt=Se.sibling;var He=Q(U,Se,B[Ce],ee);if(He===null){Se===null&&(Se=Mt);break}n&&Se&&He.alternate===null&&s(U,Se),D=g(He,D,Ce),Te===null?ye=He:Te.sibling=He,Te=He,Se=Mt}if(Ce===B.length)return l(U,Se),lt&&ps(U,Ce),ye;if(Se===null){for(;Ce<B.length;Ce++)Se=X(U,B[Ce],ee),Se!==null&&(D=g(Se,D,Ce),Te===null?ye=Se:Te.sibling=Se,Te=Se);return lt&&ps(U,Ce),ye}for(Se=h(U,Se);Ce<B.length;Ce++)Mt=le(Se,U,Ce,B[Ce],ee),Mt!==null&&(n&&Mt.alternate!==null&&Se.delete(Mt.key===null?Ce:Mt.key),D=g(Mt,D,Ce),Te===null?ye=Mt:Te.sibling=Mt,Te=Mt);return n&&Se.forEach(function(Ai){return s(U,Ai)}),lt&&ps(U,Ce),ye}function me(U,D,B,ee){var ye=we(B);if(typeof ye!="function")throw Error(t(150));if(B=ye.call(B),B==null)throw Error(t(151));for(var Te=ye=null,Se=D,Ce=D=0,Mt=null,He=B.next();Se!==null&&!He.done;Ce++,He=B.next()){Se.index>Ce?(Mt=Se,Se=null):Mt=Se.sibling;var Ai=Q(U,Se,He.value,ee);if(Ai===null){Se===null&&(Se=Mt);break}n&&Se&&Ai.alternate===null&&s(U,Se),D=g(Ai,D,Ce),Te===null?ye=Ai:Te.sibling=Ai,Te=Ai,Se=Mt}if(He.done)return l(U,Se),lt&&ps(U,Ce),ye;if(Se===null){for(;!He.done;Ce++,He=B.next())He=X(U,He.value,ee),He!==null&&(D=g(He,D,Ce),Te===null?ye=He:Te.sibling=He,Te=He);return lt&&ps(U,Ce),ye}for(Se=h(U,Se);!He.done;Ce++,He=B.next())He=le(Se,U,Ce,He.value,ee),He!==null&&(n&&He.alternate!==null&&Se.delete(He.key===null?Ce:He.key),D=g(He,D,Ce),Te===null?ye=He:Te.sibling=He,Te=He);return n&&Se.forEach(function(rT){return s(U,rT)}),lt&&ps(U,Ce),ye}function Et(U,D,B,ee){if(typeof B=="object"&&B!==null&&B.type===x&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case de:e:{for(var ye=B.key,Te=D;Te!==null;){if(Te.key===ye){if(ye=B.type,ye===x){if(Te.tag===7){l(U,Te.sibling),D=f(Te,B.props.children),D.return=U,U=D;break e}}else if(Te.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Dt&&ag(ye)===Te.type){l(U,Te.sibling),D=f(Te,B.props),D.ref=Za(U,Te,B),D.return=U,U=D;break e}l(U,Te);break}else s(U,Te);Te=Te.sibling}B.type===x?(D=Is(B.props.children,U.mode,ee,B.key),D.return=U,U=D):(ee=mc(B.type,B.key,B.props,null,U.mode,ee),ee.ref=Za(U,D,B),ee.return=U,U=ee)}return v(U);case _e:e:{for(Te=B.key;D!==null;){if(D.key===Te)if(D.tag===4&&D.stateNode.containerInfo===B.containerInfo&&D.stateNode.implementation===B.implementation){l(U,D.sibling),D=f(D,B.children||[]),D.return=U,U=D;break e}else{l(U,D);break}else s(U,D);D=D.sibling}D=yf(B,U.mode,ee),D.return=U,U=D}return v(U);case Dt:return Te=B._init,Et(U,D,Te(B._payload),ee)}if(re(B))return fe(U,D,B,ee);if(we(B))return me(U,D,B,ee);Ku(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,D!==null&&D.tag===6?(l(U,D.sibling),D=f(D,B),D.return=U,U=D):(l(U,D),D=gf(B,U.mode,ee),D.return=U,U=D),v(U)):l(U,D)}return Et}var No=lg(!0),ug=lg(!1),Hu=pi(null),Gu=null,Do=null,Ad=null;function Rd(){Ad=Do=Gu=null}function Pd(n){var s=Hu.current;ot(Hu),n._currentValue=s}function Cd(n,s,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===l)break;n=n.return}}function bo(n,s){Gu=n,Ad=Do=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(dn=!0),n.firstContext=null)}function bn(n){var s=n._currentValue;if(Ad!==n)if(n={context:n,memoizedValue:s,next:null},Do===null){if(Gu===null)throw Error(t(308));Do=n,Gu.dependencies={lanes:0,firstContext:n}}else Do=Do.next=n;return s}var ms=null;function kd(n){ms===null?ms=[n]:ms.push(n)}function cg(n,s,l,h){var f=s.interleaved;return f===null?(l.next=l,kd(s)):(l.next=f.next,f.next=l),s.interleaved=l,Fr(n,h)}function Fr(n,s){n.lanes|=s;var l=n.alternate;for(l!==null&&(l.lanes|=s),l=n,n=n.return;n!==null;)n.childLanes|=s,l=n.alternate,l!==null&&(l.childLanes|=s),l=n,n=n.return;return l.tag===3?l.stateNode:null}var yi=!1;function xd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hg(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ur(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function _i(n,s,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Ke&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Fr(n,l)}return f=h.interleaved,f===null?(s.next=s,kd(h)):(s.next=f.next,f.next=s),h.interleaved=s,Fr(n,l)}function Wu(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,ai(n,l)}}function dg(n,s){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var v={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};g===null?f=g=v:g=g.next=v,l=l.next}while(l!==null);g===null?f=g=s:g=g.next=s}else f=g=s;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}function Qu(n,s,l,h){var f=n.updateQueue;yi=!1;var g=f.firstBaseUpdate,v=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var k=A,z=k.next;k.next=null,v===null?g=z:v.next=z,v=k;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,A=Y.lastBaseUpdate,A!==v&&(A===null?Y.firstBaseUpdate=z:A.next=z,Y.lastBaseUpdate=k))}if(g!==null){var X=f.baseState;v=0,Y=z=k=null,A=g;do{var Q=A.lane,le=A.eventTime;if((h&Q)===Q){Y!==null&&(Y=Y.next={eventTime:le,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var fe=n,me=A;switch(Q=s,le=l,me.tag){case 1:if(fe=me.payload,typeof fe=="function"){X=fe.call(le,X,Q);break e}X=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=me.payload,Q=typeof fe=="function"?fe.call(le,X,Q):fe,Q==null)break e;X=ae({},X,Q);break e;case 2:yi=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,Q=f.effects,Q===null?f.effects=[A]:Q.push(A))}else le={eventTime:le,lane:Q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Y===null?(z=Y=le,k=X):Y=Y.next=le,v|=Q;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;Q=A,A=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);if(Y===null&&(k=X),f.baseState=k,f.firstBaseUpdate=z,f.lastBaseUpdate=Y,s=f.shared.interleaved,s!==null){f=s;do v|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);_s|=v,n.lanes=v,n.memoizedState=X}}function fg(n,s,l){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var el={},gr=pi(el),tl=pi(el),nl=pi(el);function gs(n){if(n===el)throw Error(t(174));return n}function Nd(n,s){switch(it(nl,s),it(tl,n),it(gr,el),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:nt(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=nt(s,n)}ot(gr),it(gr,s)}function Vo(){ot(gr),ot(tl),ot(nl)}function pg(n){gs(nl.current);var s=gs(gr.current),l=nt(s,n.type);s!==l&&(it(tl,n),it(gr,l))}function Dd(n){tl.current===n&&(ot(gr),ot(tl))}var dt=pi(0);function Yu(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var bd=[];function Vd(){for(var n=0;n<bd.length;n++)bd[n]._workInProgressVersionPrimary=null;bd.length=0}var Xu=ue.ReactCurrentDispatcher,Od=ue.ReactCurrentBatchConfig,ys=0,ft=null,Ct=null,Vt=null,Ju=!1,rl=!1,il=0,AI=0;function Kt(){throw Error(t(321))}function Md(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!Yn(n[l],s[l]))return!1;return!0}function Ld(n,s,l,h,f,g){if(ys=g,ft=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Xu.current=n===null||n.memoizedState===null?kI:xI,n=l(h,f),rl){g=0;do{if(rl=!1,il=0,25<=g)throw Error(t(301));g+=1,Vt=Ct=null,s.updateQueue=null,Xu.current=NI,n=l(h,f)}while(rl)}if(Xu.current=tc,s=Ct!==null&&Ct.next!==null,ys=0,Vt=Ct=ft=null,Ju=!1,s)throw Error(t(300));return n}function Fd(){var n=il!==0;return il=0,n}function yr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?ft.memoizedState=Vt=n:Vt=Vt.next=n,Vt}function Vn(){if(Ct===null){var n=ft.alternate;n=n!==null?n.memoizedState:null}else n=Ct.next;var s=Vt===null?ft.memoizedState:Vt.next;if(s!==null)Vt=s,Ct=n;else{if(n===null)throw Error(t(310));Ct=n,n={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Vt===null?ft.memoizedState=Vt=n:Vt=Vt.next=n}return Vt}function sl(n,s){return typeof s=="function"?s(n):s}function Ud(n){var s=Vn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var h=Ct,f=h.baseQueue,g=l.pending;if(g!==null){if(f!==null){var v=f.next;f.next=g.next,g.next=v}h.baseQueue=f=g,l.pending=null}if(f!==null){g=f.next,h=h.baseState;var A=v=null,k=null,z=g;do{var Y=z.lane;if((ys&Y)===Y)k!==null&&(k=k.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),h=z.hasEagerState?z.eagerState:n(h,z.action);else{var X={lane:Y,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};k===null?(A=k=X,v=h):k=k.next=X,ft.lanes|=Y,_s|=Y}z=z.next}while(z!==null&&z!==g);k===null?v=h:k.next=A,Yn(h,s.memoizedState)||(dn=!0),s.memoizedState=h,s.baseState=v,s.baseQueue=k,l.lastRenderedState=h}if(n=l.interleaved,n!==null){f=n;do g=f.lane,ft.lanes|=g,_s|=g,f=f.next;while(f!==n)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Bd(n){var s=Vn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var h=l.dispatch,f=l.pending,g=s.memoizedState;if(f!==null){l.pending=null;var v=f=f.next;do g=n(g,v.action),v=v.next;while(v!==f);Yn(g,s.memoizedState)||(dn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,h]}function mg(){}function gg(n,s){var l=ft,h=Vn(),f=s(),g=!Yn(h.memoizedState,f);if(g&&(h.memoizedState=f,dn=!0),h=h.queue,zd(vg.bind(null,l,h,n),[n]),h.getSnapshot!==s||g||Vt!==null&&Vt.memoizedState.tag&1){if(l.flags|=2048,ol(9,_g.bind(null,l,h,f,s),void 0,null),Ot===null)throw Error(t(349));(ys&30)!==0||yg(l,s,f)}return f}function yg(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=ft.updateQueue,s===null?(s={lastEffect:null,stores:null},ft.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function _g(n,s,l,h){s.value=l,s.getSnapshot=h,Eg(s)&&wg(n)}function vg(n,s,l){return l(function(){Eg(s)&&wg(n)})}function Eg(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!Yn(n,l)}catch{return!0}}function wg(n){var s=Fr(n,1);s!==null&&tr(s,n,1,-1)}function Ig(n){var s=yr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:n},s.queue=n,n=n.dispatch=CI.bind(null,ft,n),[s.memoizedState,n]}function ol(n,s,l,h){return n={tag:n,create:s,destroy:l,deps:h,next:null},s=ft.updateQueue,s===null?(s={lastEffect:null,stores:null},ft.updateQueue=s,s.lastEffect=n.next=n):(l=s.lastEffect,l===null?s.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,s.lastEffect=n)),n}function Tg(){return Vn().memoizedState}function Zu(n,s,l,h){var f=yr();ft.flags|=n,f.memoizedState=ol(1|s,l,void 0,h===void 0?null:h)}function ec(n,s,l,h){var f=Vn();h=h===void 0?null:h;var g=void 0;if(Ct!==null){var v=Ct.memoizedState;if(g=v.destroy,h!==null&&Md(h,v.deps)){f.memoizedState=ol(s,l,g,h);return}}ft.flags|=n,f.memoizedState=ol(1|s,l,g,h)}function Sg(n,s){return Zu(8390656,8,n,s)}function zd(n,s){return ec(2048,8,n,s)}function Ag(n,s){return ec(4,2,n,s)}function Rg(n,s){return ec(4,4,n,s)}function Pg(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Cg(n,s,l){return l=l!=null?l.concat([n]):null,ec(4,4,Pg.bind(null,s,n),l)}function jd(){}function kg(n,s){var l=Vn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Md(s,h[1])?h[0]:(l.memoizedState=[n,s],n)}function xg(n,s){var l=Vn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Md(s,h[1])?h[0]:(n=n(),l.memoizedState=[n,s],n)}function Ng(n,s,l){return(ys&21)===0?(n.baseState&&(n.baseState=!1,dn=!0),n.memoizedState=l):(Yn(l,s)||(l=os(),ft.lanes|=l,_s|=l,n.baseState=!0),s)}function RI(n,s){var l=Be;Be=l!==0&&4>l?l:4,n(!0);var h=Od.transition;Od.transition={};try{n(!1),s()}finally{Be=l,Od.transition=h}}function Dg(){return Vn().memoizedState}function PI(n,s,l){var h=Ii(n);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},bg(n))Vg(s,l);else if(l=cg(n,s,l,h),l!==null){var f=rn();tr(l,n,h,f),Og(l,s,h)}}function CI(n,s,l){var h=Ii(n),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(bg(n))Vg(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var v=s.lastRenderedState,A=g(v,l);if(f.hasEagerState=!0,f.eagerState=A,Yn(A,v)){var k=s.interleaved;k===null?(f.next=f,kd(s)):(f.next=k.next,k.next=f),s.interleaved=f;return}}catch{}finally{}l=cg(n,s,f,h),l!==null&&(f=rn(),tr(l,n,h,f),Og(l,s,h))}}function bg(n){var s=n.alternate;return n===ft||s!==null&&s===ft}function Vg(n,s){rl=Ju=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function Og(n,s,l){if((l&4194240)!==0){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,ai(n,l)}}var tc={readContext:bn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},kI={readContext:bn,useCallback:function(n,s){return yr().memoizedState=[n,s===void 0?null:s],n},useContext:bn,useEffect:Sg,useImperativeHandle:function(n,s,l){return l=l!=null?l.concat([n]):null,Zu(4194308,4,Pg.bind(null,s,n),l)},useLayoutEffect:function(n,s){return Zu(4194308,4,n,s)},useInsertionEffect:function(n,s){return Zu(4,2,n,s)},useMemo:function(n,s){var l=yr();return s=s===void 0?null:s,n=n(),l.memoizedState=[n,s],n},useReducer:function(n,s,l){var h=yr();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=PI.bind(null,ft,n),[h.memoizedState,n]},useRef:function(n){var s=yr();return n={current:n},s.memoizedState=n},useState:Ig,useDebugValue:jd,useDeferredValue:function(n){return yr().memoizedState=n},useTransition:function(){var n=Ig(!1),s=n[0];return n=RI.bind(null,n[1]),yr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,l){var h=ft,f=yr();if(lt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),Ot===null)throw Error(t(349));(ys&30)!==0||yg(h,s,l)}f.memoizedState=l;var g={value:l,getSnapshot:s};return f.queue=g,Sg(vg.bind(null,h,g,n),[n]),h.flags|=2048,ol(9,_g.bind(null,h,g,l,s),void 0,null),l},useId:function(){var n=yr(),s=Ot.identifierPrefix;if(lt){var l=Lr,h=Mr;l=(h&~(1<<32-en(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=il++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=AI++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},xI={readContext:bn,useCallback:kg,useContext:bn,useEffect:zd,useImperativeHandle:Cg,useInsertionEffect:Ag,useLayoutEffect:Rg,useMemo:xg,useReducer:Ud,useRef:Tg,useState:function(){return Ud(sl)},useDebugValue:jd,useDeferredValue:function(n){var s=Vn();return Ng(s,Ct.memoizedState,n)},useTransition:function(){var n=Ud(sl)[0],s=Vn().memoizedState;return[n,s]},useMutableSource:mg,useSyncExternalStore:gg,useId:Dg,unstable_isNewReconciler:!1},NI={readContext:bn,useCallback:kg,useContext:bn,useEffect:zd,useImperativeHandle:Cg,useInsertionEffect:Ag,useLayoutEffect:Rg,useMemo:xg,useReducer:Bd,useRef:Tg,useState:function(){return Bd(sl)},useDebugValue:jd,useDeferredValue:function(n){var s=Vn();return Ct===null?s.memoizedState=n:Ng(s,Ct.memoizedState,n)},useTransition:function(){var n=Bd(sl)[0],s=Vn().memoizedState;return[n,s]},useMutableSource:mg,useSyncExternalStore:gg,useId:Dg,unstable_isNewReconciler:!1};function Jn(n,s){if(n&&n.defaultProps){s=ae({},s),n=n.defaultProps;for(var l in n)s[l]===void 0&&(s[l]=n[l]);return s}return s}function $d(n,s,l,h){s=n.memoizedState,l=l(h,s),l=l==null?s:ae({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var nc={isMounted:function(n){return(n=n._reactInternals)?$n(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var h=rn(),f=Ii(n),g=Ur(h,f);g.payload=s,l!=null&&(g.callback=l),s=_i(n,g,f),s!==null&&(tr(s,n,f,h),Wu(s,n,f))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var h=rn(),f=Ii(n),g=Ur(h,f);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=_i(n,g,f),s!==null&&(tr(s,n,f,h),Wu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=rn(),h=Ii(n),f=Ur(l,h);f.tag=2,s!=null&&(f.callback=s),s=_i(n,f,h),s!==null&&(tr(s,n,h,l),Wu(s,n,h))}};function Mg(n,s,l,h,f,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,g,v):s.prototype&&s.prototype.isPureReactComponent?!Ha(l,h)||!Ha(f,g):!0}function Lg(n,s,l){var h=!1,f=mi,g=s.contextType;return typeof g=="object"&&g!==null?g=bn(g):(f=hn(s)?ds:qt.current,h=s.contextTypes,g=(h=h!=null)?Po(n,f):mi),s=new s(l,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=nc,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function Fg(n,s,l,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==n&&nc.enqueueReplaceState(s,s.state,null)}function qd(n,s,l,h){var f=n.stateNode;f.props=l,f.state=n.memoizedState,f.refs={},xd(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=bn(g):(g=hn(s)?ds:qt.current,f.context=Po(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&($d(n,s,g,l),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&nc.enqueueReplaceState(f,f.state,null),Qu(n,l,f,h),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Oo(n,s){try{var l="",h=s;do l+=be(h),h=h.return;while(h);var f=l}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function Kd(n,s,l){return{value:n,source:null,stack:l??null,digest:s??null}}function Hd(n,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var DI=typeof WeakMap=="function"?WeakMap:Map;function Ug(n,s,l){l=Ur(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){uc||(uc=!0,lf=h),Hd(n,s)},l}function Bg(n,s,l){l=Ur(-1,l),l.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;l.payload=function(){return h(f)},l.callback=function(){Hd(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(l.callback=function(){Hd(n,s),typeof h!="function"&&(Ei===null?Ei=new Set([this]):Ei.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),l}function zg(n,s,l){var h=n.pingCache;if(h===null){h=n.pingCache=new DI;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(l)||(f.add(l),n=HI.bind(null,n,s,l),s.then(n,n))}function jg(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function $g(n,s,l,h,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Ur(-1,1),s.tag=2,_i(l,s,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var bI=ue.ReactCurrentOwner,dn=!1;function nn(n,s,l,h){s.child=n===null?ug(s,null,l,h):No(s,n.child,l,h)}function qg(n,s,l,h,f){l=l.render;var g=s.ref;return bo(s,f),h=Ld(n,s,l,h,g,f),l=Fd(),n!==null&&!dn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Br(n,s,f)):(lt&&l&&Ed(s),s.flags|=1,nn(n,s,h,f),s.child)}function Kg(n,s,l,h,f){if(n===null){var g=l.type;return typeof g=="function"&&!mf(g)&&g.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=g,Hg(n,s,g,h,f)):(n=mc(l.type,null,h,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,(n.lanes&f)===0){var v=g.memoizedProps;if(l=l.compare,l=l!==null?l:Ha,l(v,h)&&n.ref===s.ref)return Br(n,s,f)}return s.flags|=1,n=Si(g,h),n.ref=s.ref,n.return=s,s.child=n}function Hg(n,s,l,h,f){if(n!==null){var g=n.memoizedProps;if(Ha(g,h)&&n.ref===s.ref)if(dn=!1,s.pendingProps=h=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(dn=!0);else return s.lanes=n.lanes,Br(n,s,f)}return Gd(n,s,l,h,f)}function Gg(n,s,l){var h=s.pendingProps,f=h.children,g=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Lo,Tn),Tn|=l;else{if((l&1073741824)===0)return n=g!==null?g.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,it(Lo,Tn),Tn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:l,it(Lo,Tn),Tn|=h}else g!==null?(h=g.baseLanes|l,s.memoizedState=null):h=l,it(Lo,Tn),Tn|=h;return nn(n,s,f,l),s.child}function Wg(n,s){var l=s.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Gd(n,s,l,h,f){var g=hn(l)?ds:qt.current;return g=Po(s,g),bo(s,f),l=Ld(n,s,l,h,g,f),h=Fd(),n!==null&&!dn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Br(n,s,f)):(lt&&h&&Ed(s),s.flags|=1,nn(n,s,l,f),s.child)}function Qg(n,s,l,h,f){if(hn(l)){var g=!0;Bu(s)}else g=!1;if(bo(s,f),s.stateNode===null)ic(n,s),Lg(s,l,h),qd(s,l,h,f),h=!0;else if(n===null){var v=s.stateNode,A=s.memoizedProps;v.props=A;var k=v.context,z=l.contextType;typeof z=="object"&&z!==null?z=bn(z):(z=hn(l)?ds:qt.current,z=Po(s,z));var Y=l.getDerivedStateFromProps,X=typeof Y=="function"||typeof v.getSnapshotBeforeUpdate=="function";X||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==h||k!==z)&&Fg(s,v,h,z),yi=!1;var Q=s.memoizedState;v.state=Q,Qu(s,h,v,f),k=s.memoizedState,A!==h||Q!==k||cn.current||yi?(typeof Y=="function"&&($d(s,l,Y,h),k=s.memoizedState),(A=yi||Mg(s,l,A,h,Q,k,z))?(X||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=k),v.props=h,v.state=k,v.context=z,h=A):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{v=s.stateNode,hg(n,s),A=s.memoizedProps,z=s.type===s.elementType?A:Jn(s.type,A),v.props=z,X=s.pendingProps,Q=v.context,k=l.contextType,typeof k=="object"&&k!==null?k=bn(k):(k=hn(l)?ds:qt.current,k=Po(s,k));var le=l.getDerivedStateFromProps;(Y=typeof le=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==X||Q!==k)&&Fg(s,v,h,k),yi=!1,Q=s.memoizedState,v.state=Q,Qu(s,h,v,f);var fe=s.memoizedState;A!==X||Q!==fe||cn.current||yi?(typeof le=="function"&&($d(s,l,le,h),fe=s.memoizedState),(z=yi||Mg(s,l,z,h,Q,fe,k)||!1)?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,fe,k),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,fe,k)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=fe),v.props=h,v.state=fe,v.context=k,h=z):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),h=!1)}return Wd(n,s,l,h,g,f)}function Wd(n,s,l,h,f,g){Wg(n,s);var v=(s.flags&128)!==0;if(!h&&!v)return f&&eg(s,l,!1),Br(n,s,g);h=s.stateNode,bI.current=s;var A=v&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&v?(s.child=No(s,n.child,null,g),s.child=No(s,null,A,g)):nn(n,s,A,g),s.memoizedState=h.state,f&&eg(s,l,!0),s.child}function Yg(n){var s=n.stateNode;s.pendingContext?Jm(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Jm(n,s.context,!1),Nd(n,s.containerInfo)}function Xg(n,s,l,h,f){return xo(),Sd(f),s.flags|=256,nn(n,s,l,h),s.child}var Qd={dehydrated:null,treeContext:null,retryLane:0};function Yd(n){return{baseLanes:n,cachePool:null,transitions:null}}function Jg(n,s,l){var h=s.pendingProps,f=dt.current,g=!1,v=(s.flags&128)!==0,A;if((A=v)||(A=n!==null&&n.memoizedState===null?!1:(f&2)!==0),A?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),it(dt,f&1),n===null)return Td(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(v=h.children,n=h.fallback,g?(h=s.mode,g=s.child,v={mode:"hidden",children:v},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=v):g=gc(v,h,0,null),n=Is(n,h,l,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=Yd(l),s.memoizedState=Qd,n):Xd(s,v));if(f=n.memoizedState,f!==null&&(A=f.dehydrated,A!==null))return VI(n,s,v,h,A,f,l);if(g){g=h.fallback,v=s.mode,f=n.child,A=f.sibling;var k={mode:"hidden",children:h.children};return(v&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=k,s.deletions=null):(h=Si(f,k),h.subtreeFlags=f.subtreeFlags&14680064),A!==null?g=Si(A,g):(g=Is(g,v,l,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,v=n.child.memoizedState,v=v===null?Yd(l):{baseLanes:v.baseLanes|l,cachePool:null,transitions:v.transitions},g.memoizedState=v,g.childLanes=n.childLanes&~l,s.memoizedState=Qd,h}return g=n.child,n=g.sibling,h=Si(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,n!==null&&(l=s.deletions,l===null?(s.deletions=[n],s.flags|=16):l.push(n)),s.child=h,s.memoizedState=null,h}function Xd(n,s){return s=gc({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function rc(n,s,l,h){return h!==null&&Sd(h),No(s,n.child,null,l),n=Xd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function VI(n,s,l,h,f,g,v){if(l)return s.flags&256?(s.flags&=-257,h=Kd(Error(t(422))),rc(n,s,v,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=gc({mode:"visible",children:h.children},f,0,null),g=Is(g,f,v,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&No(s,n.child,null,v),s.child.memoizedState=Yd(v),s.memoizedState=Qd,g);if((s.mode&1)===0)return rc(n,s,v,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var A=h.dgst;return h=A,g=Error(t(419)),h=Kd(g,h,void 0),rc(n,s,v,h)}if(A=(v&n.childLanes)!==0,dn||A){if(h=Ot,h!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|v))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Fr(n,f),tr(h,n,f,-1))}return pf(),h=Kd(Error(t(421))),rc(n,s,v,h)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=GI.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,In=fi(f.nextSibling),wn=s,lt=!0,Xn=null,n!==null&&(Nn[Dn++]=Mr,Nn[Dn++]=Lr,Nn[Dn++]=fs,Mr=n.id,Lr=n.overflow,fs=s),s=Xd(s,h.children),s.flags|=4096,s)}function Zg(n,s,l){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),Cd(n.return,s,l)}function Jd(n,s,l,h,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=l,g.tailMode=f)}function ey(n,s,l){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(nn(n,s,h.children,l),h=dt.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Zg(n,l,s);else if(n.tag===19)Zg(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(it(dt,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)n=l.alternate,n!==null&&Yu(n)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),Jd(s,!1,f,l,g);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Yu(n)===null){s.child=f;break}n=f.sibling,f.sibling=l,l=f,f=n}Jd(s,!0,l,null,g);break;case"together":Jd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ic(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Br(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),_s|=s.lanes,(l&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,l=Si(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=Si(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function OI(n,s,l){switch(s.tag){case 3:Yg(s),xo();break;case 5:pg(s);break;case 1:hn(s.type)&&Bu(s);break;case 4:Nd(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;it(Hu,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(it(dt,dt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?Jg(n,s,l):(it(dt,dt.current&1),n=Br(n,s,l),n!==null?n.sibling:null);it(dt,dt.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(n.flags&128)!==0){if(h)return ey(n,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),it(dt,dt.current),h)break;return null;case 22:case 23:return s.lanes=0,Gg(n,s,l)}return Br(n,s,l)}var ty,Zd,ny,ry;ty=function(n,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Zd=function(){},ny=function(n,s,l,h){var f=n.memoizedProps;if(f!==h){n=s.stateNode,gs(gr.current);var g=null;switch(l){case"input":f=ar(n,f),h=ar(n,h),g=[];break;case"select":f=ae({},f,{value:void 0}),h=ae({},h,{value:void 0}),g=[];break;case"textarea":f=Ae(n,f),h=Ae(n,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Lu)}Pa(l,h);var v;l=null;for(z in f)if(!h.hasOwnProperty(z)&&f.hasOwnProperty(z)&&f[z]!=null)if(z==="style"){var A=f[z];for(v in A)A.hasOwnProperty(v)&&(l||(l={}),l[v]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?g||(g=[]):(g=g||[]).push(z,null));for(z in h){var k=h[z];if(A=f!=null?f[z]:void 0,h.hasOwnProperty(z)&&k!==A&&(k!=null||A!=null))if(z==="style")if(A){for(v in A)!A.hasOwnProperty(v)||k&&k.hasOwnProperty(v)||(l||(l={}),l[v]="");for(v in k)k.hasOwnProperty(v)&&A[v]!==k[v]&&(l||(l={}),l[v]=k[v])}else l||(g||(g=[]),g.push(z,l)),l=k;else z==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,A=A?A.__html:void 0,k!=null&&A!==k&&(g=g||[]).push(z,k)):z==="children"?typeof k!="string"&&typeof k!="number"||(g=g||[]).push(z,""+k):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(k!=null&&z==="onScroll"&&st("scroll",n),g||A===k||(g=[])):(g=g||[]).push(z,k))}l&&(g=g||[]).push("style",l);var z=g;(s.updateQueue=z)&&(s.flags|=4)}},ry=function(n,s,l,h){l!==h&&(s.flags|=4)};function al(n,s){if(!lt)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Ht(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(s)for(var f=n.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=h,n.childLanes=l,s}function MI(n,s,l){var h=s.pendingProps;switch(wd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(s),null;case 1:return hn(s.type)&&Uu(),Ht(s),null;case 3:return h=s.stateNode,Vo(),ot(cn),ot(qt),Vd(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(qu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xn!==null&&(hf(Xn),Xn=null))),Zd(n,s),Ht(s),null;case 5:Dd(s);var f=gs(nl.current);if(l=s.type,n!==null&&s.stateNode!=null)ny(n,s,l,h,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Ht(s),null}if(n=gs(gr.current),qu(s)){h=s.stateNode,l=s.type;var g=s.memoizedProps;switch(h[mr]=s,h[Xa]=g,n=(s.mode&1)!==0,l){case"dialog":st("cancel",h),st("close",h);break;case"iframe":case"object":case"embed":st("load",h);break;case"video":case"audio":for(f=0;f<Wa.length;f++)st(Wa[f],h);break;case"source":st("error",h);break;case"img":case"image":case"link":st("error",h),st("load",h);break;case"details":st("toggle",h);break;case"input":Pr(h,g),st("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},st("invalid",h);break;case"textarea":Pe(h,g),st("invalid",h)}Pa(l,g),f=null;for(var v in g)if(g.hasOwnProperty(v)){var A=g[v];v==="children"?typeof A=="string"?h.textContent!==A&&(g.suppressHydrationWarning!==!0&&Mu(h.textContent,A,n),f=["children",A]):typeof A=="number"&&h.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&Mu(h.textContent,A,n),f=["children",""+A]):o.hasOwnProperty(v)&&A!=null&&v==="onScroll"&&st("scroll",h)}switch(l){case"input":Bn(h),Wi(h,g,!0);break;case"textarea":Bn(h),xe(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Lu)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Le(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=v.createElement(l,{is:h.is}):(n=v.createElement(l),l==="select"&&(v=n,h.multiple?v.multiple=!0:h.size&&(v.size=h.size))):n=v.createElementNS(n,l),n[mr]=s,n[Xa]=h,ty(n,s,!1,!1),s.stateNode=n;e:{switch(v=Ca(l,h),l){case"dialog":st("cancel",n),st("close",n),f=h;break;case"iframe":case"object":case"embed":st("load",n),f=h;break;case"video":case"audio":for(f=0;f<Wa.length;f++)st(Wa[f],n);f=h;break;case"source":st("error",n),f=h;break;case"img":case"image":case"link":st("error",n),st("load",n),f=h;break;case"details":st("toggle",n),f=h;break;case"input":Pr(n,h),f=ar(n,h),st("invalid",n);break;case"option":f=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},f=ae({},h,{value:void 0}),st("invalid",n);break;case"textarea":Pe(n,h),f=Ae(n,h),st("invalid",n);break;default:f=h}Pa(l,f),A=f;for(g in A)if(A.hasOwnProperty(g)){var k=A[g];g==="style"?Aa(n,k):g==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&Qi(n,k)):g==="children"?typeof k=="string"?(l!=="textarea"||k!=="")&&ni(n,k):typeof k=="number"&&ni(n,""+k):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?k!=null&&g==="onScroll"&&st("scroll",n):k!=null&&te(n,g,k,v))}switch(l){case"input":Bn(n),Wi(n,h,!1);break;case"textarea":Bn(n),xe(n);break;case"option":h.value!=null&&n.setAttribute("value",""+qe(h.value));break;case"select":n.multiple=!!h.multiple,g=h.value,g!=null?ce(n,!!h.multiple,g,!1):h.defaultValue!=null&&ce(n,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Lu)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ht(s),null;case 6:if(n&&s.stateNode!=null)ry(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=gs(nl.current),gs(gr.current),qu(s)){if(h=s.stateNode,l=s.memoizedProps,h[mr]=s,(g=h.nodeValue!==l)&&(n=wn,n!==null))switch(n.tag){case 3:Mu(h.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Mu(h.nodeValue,l,(n.mode&1)!==0)}g&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[mr]=s,s.stateNode=h}return Ht(s),null;case 13:if(ot(dt),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(lt&&In!==null&&(s.mode&1)!==0&&(s.flags&128)===0)og(),xo(),s.flags|=98560,g=!1;else if(g=qu(s),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[mr]=s}else xo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ht(s),g=!1}else Xn!==null&&(hf(Xn),Xn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(dt.current&1)!==0?kt===0&&(kt=3):pf())),s.updateQueue!==null&&(s.flags|=4),Ht(s),null);case 4:return Vo(),Zd(n,s),n===null&&Qa(s.stateNode.containerInfo),Ht(s),null;case 10:return Pd(s.type._context),Ht(s),null;case 17:return hn(s.type)&&Uu(),Ht(s),null;case 19:if(ot(dt),g=s.memoizedState,g===null)return Ht(s),null;if(h=(s.flags&128)!==0,v=g.rendering,v===null)if(h)al(g,!1);else{if(kt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=Yu(n),v!==null){for(s.flags|=128,al(g,!1),h=v.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)g=l,n=h,g.flags&=14680066,v=g.alternate,v===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=v.childLanes,g.lanes=v.lanes,g.child=v.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=v.memoizedProps,g.memoizedState=v.memoizedState,g.updateQueue=v.updateQueue,g.type=v.type,n=v.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return it(dt,dt.current&1|2),s.child}n=n.sibling}g.tail!==null&&rt()>Fo&&(s.flags|=128,h=!0,al(g,!1),s.lanes=4194304)}else{if(!h)if(n=Yu(v),n!==null){if(s.flags|=128,h=!0,l=n.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),al(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!lt)return Ht(s),null}else 2*rt()-g.renderingStartTime>Fo&&l!==1073741824&&(s.flags|=128,h=!0,al(g,!1),s.lanes=4194304);g.isBackwards?(v.sibling=s.child,s.child=v):(l=g.last,l!==null?l.sibling=v:s.child=v,g.last=v)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=rt(),s.sibling=null,l=dt.current,it(dt,h?l&1|2:l&1),s):(Ht(s),null);case 22:case 23:return ff(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(Tn&1073741824)!==0&&(Ht(s),s.subtreeFlags&6&&(s.flags|=8192)):Ht(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function LI(n,s){switch(wd(s),s.tag){case 1:return hn(s.type)&&Uu(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Vo(),ot(cn),ot(qt),Vd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Dd(s),null;case 13:if(ot(dt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));xo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ot(dt),null;case 4:return Vo(),null;case 10:return Pd(s.type._context),null;case 22:case 23:return ff(),null;case 24:return null;default:return null}}var sc=!1,Gt=!1,FI=typeof WeakSet=="function"?WeakSet:Set,he=null;function Mo(n,s){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){gt(n,s,h)}else l.current=null}function ef(n,s,l){try{l()}catch(h){gt(n,s,h)}}var iy=!1;function UI(n,s){if(dd=ci,n=Mm(),id(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var v=0,A=-1,k=-1,z=0,Y=0,X=n,Q=null;t:for(;;){for(var le;X!==l||f!==0&&X.nodeType!==3||(A=v+f),X!==g||h!==0&&X.nodeType!==3||(k=v+h),X.nodeType===3&&(v+=X.nodeValue.length),(le=X.firstChild)!==null;)Q=X,X=le;for(;;){if(X===n)break t;if(Q===l&&++z===f&&(A=v),Q===g&&++Y===h&&(k=v),(le=X.nextSibling)!==null)break;X=Q,Q=X.parentNode}X=le}l=A===-1||k===-1?null:{start:A,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(fd={focusedElem:n,selectionRange:l},ci=!1,he=s;he!==null;)if(s=he,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,he=n;else for(;he!==null;){s=he;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var me=fe.memoizedProps,Et=fe.memoizedState,U=s.stateNode,D=U.getSnapshotBeforeUpdate(s.elementType===s.type?me:Jn(s.type,me),Et);U.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){gt(s,s.return,ee)}if(n=s.sibling,n!==null){n.return=s.return,he=n;break}he=s.return}return fe=iy,iy=!1,fe}function ll(n,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&ef(s,l,g)}f=f.next}while(f!==h)}}function oc(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&n)===n){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function tf(n){var s=n.ref;if(s!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof s=="function"?s(n):s.current=n}}function sy(n){var s=n.alternate;s!==null&&(n.alternate=null,sy(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[mr],delete s[Xa],delete s[yd],delete s[wI],delete s[II])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function oy(n){return n.tag===5||n.tag===3||n.tag===4}function ay(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||oy(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function nf(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Lu));else if(h!==4&&(n=n.child,n!==null))for(nf(n,s,l),n=n.sibling;n!==null;)nf(n,s,l),n=n.sibling}function rf(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(rf(n,s,l),n=n.sibling;n!==null;)rf(n,s,l),n=n.sibling}var Bt=null,Zn=!1;function vi(n,s,l){for(l=l.child;l!==null;)ly(n,s,l),l=l.sibling}function ly(n,s,l){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(is,l)}catch{}switch(l.tag){case 5:Gt||Mo(l,s);case 6:var h=Bt,f=Zn;Bt=null,vi(n,s,l),Bt=h,Zn=f,Bt!==null&&(Zn?(n=Bt,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):Bt.removeChild(l.stateNode));break;case 18:Bt!==null&&(Zn?(n=Bt,l=l.stateNode,n.nodeType===8?gd(n.parentNode,l):n.nodeType===1&&gd(n,l),Wn(n)):gd(Bt,l.stateNode));break;case 4:h=Bt,f=Zn,Bt=l.stateNode.containerInfo,Zn=!0,vi(n,s,l),Bt=h,Zn=f;break;case 0:case 11:case 14:case 15:if(!Gt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,v=g.destroy;g=g.tag,v!==void 0&&((g&2)!==0||(g&4)!==0)&&ef(l,s,v),f=f.next}while(f!==h)}vi(n,s,l);break;case 1:if(!Gt&&(Mo(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(A){gt(l,s,A)}vi(n,s,l);break;case 21:vi(n,s,l);break;case 22:l.mode&1?(Gt=(h=Gt)||l.memoizedState!==null,vi(n,s,l),Gt=h):vi(n,s,l);break;default:vi(n,s,l)}}function uy(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new FI),s.forEach(function(h){var f=WI.bind(null,n,h);l.has(h)||(l.add(h),h.then(f,f))})}}function er(n,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var g=n,v=s,A=v;e:for(;A!==null;){switch(A.tag){case 5:Bt=A.stateNode,Zn=!1;break e;case 3:Bt=A.stateNode.containerInfo,Zn=!0;break e;case 4:Bt=A.stateNode.containerInfo,Zn=!0;break e}A=A.return}if(Bt===null)throw Error(t(160));ly(g,v,f),Bt=null,Zn=!1;var k=f.alternate;k!==null&&(k.return=null),f.return=null}catch(z){gt(f,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)cy(s,n),s=s.sibling}function cy(n,s){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(er(s,n),_r(n),h&4){try{ll(3,n,n.return),oc(3,n)}catch(me){gt(n,n.return,me)}try{ll(5,n,n.return)}catch(me){gt(n,n.return,me)}}break;case 1:er(s,n),_r(n),h&512&&l!==null&&Mo(l,l.return);break;case 5:if(er(s,n),_r(n),h&512&&l!==null&&Mo(l,l.return),n.flags&32){var f=n.stateNode;try{ni(f,"")}catch(me){gt(n,n.return,me)}}if(h&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,v=l!==null?l.memoizedProps:g,A=n.type,k=n.updateQueue;if(n.updateQueue=null,k!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&ei(f,g),Ca(A,v);var z=Ca(A,g);for(v=0;v<k.length;v+=2){var Y=k[v],X=k[v+1];Y==="style"?Aa(f,X):Y==="dangerouslySetInnerHTML"?Qi(f,X):Y==="children"?ni(f,X):te(f,Y,X,z)}switch(A){case"input":ti(f,g);break;case"textarea":Xe(f,g);break;case"select":var Q=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var le=g.value;le!=null?ce(f,!!g.multiple,le,!1):Q!==!!g.multiple&&(g.defaultValue!=null?ce(f,!!g.multiple,g.defaultValue,!0):ce(f,!!g.multiple,g.multiple?[]:"",!1))}f[Xa]=g}catch(me){gt(n,n.return,me)}}break;case 6:if(er(s,n),_r(n),h&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(me){gt(n,n.return,me)}}break;case 3:if(er(s,n),_r(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Wn(s.containerInfo)}catch(me){gt(n,n.return,me)}break;case 4:er(s,n),_r(n);break;case 13:er(s,n),_r(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(af=rt())),h&4&&uy(n);break;case 22:if(Y=l!==null&&l.memoizedState!==null,n.mode&1?(Gt=(z=Gt)||Y,er(s,n),Gt=z):er(s,n),_r(n),h&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!Y&&(n.mode&1)!==0)for(he=n,Y=n.child;Y!==null;){for(X=he=Y;he!==null;){switch(Q=he,le=Q.child,Q.tag){case 0:case 11:case 14:case 15:ll(4,Q,Q.return);break;case 1:Mo(Q,Q.return);var fe=Q.stateNode;if(typeof fe.componentWillUnmount=="function"){h=Q,l=Q.return;try{s=h,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(me){gt(h,l,me)}}break;case 5:Mo(Q,Q.return);break;case 22:if(Q.memoizedState!==null){fy(X);continue}}le!==null?(le.return=Q,he=le):fy(X)}Y=Y.sibling}e:for(Y=null,X=n;;){if(X.tag===5){if(Y===null){Y=X;try{f=X.stateNode,z?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=X.stateNode,k=X.memoizedProps.style,v=k!=null&&k.hasOwnProperty("display")?k.display:null,A.style.display=Sa("display",v))}catch(me){gt(n,n.return,me)}}}else if(X.tag===6){if(Y===null)try{X.stateNode.nodeValue=z?"":X.memoizedProps}catch(me){gt(n,n.return,me)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===n)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===n)break e;for(;X.sibling===null;){if(X.return===null||X.return===n)break e;Y===X&&(Y=null),X=X.return}Y===X&&(Y=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:er(s,n),_r(n),h&4&&uy(n);break;case 21:break;default:er(s,n),_r(n)}}function _r(n){var s=n.flags;if(s&2){try{e:{for(var l=n.return;l!==null;){if(oy(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(ni(f,""),h.flags&=-33);var g=ay(n);rf(n,g,f);break;case 3:case 4:var v=h.stateNode.containerInfo,A=ay(n);nf(n,A,v);break;default:throw Error(t(161))}}catch(k){gt(n,n.return,k)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function BI(n,s,l){he=n,hy(n)}function hy(n,s,l){for(var h=(n.mode&1)!==0;he!==null;){var f=he,g=f.child;if(f.tag===22&&h){var v=f.memoizedState!==null||sc;if(!v){var A=f.alternate,k=A!==null&&A.memoizedState!==null||Gt;A=sc;var z=Gt;if(sc=v,(Gt=k)&&!z)for(he=f;he!==null;)v=he,k=v.child,v.tag===22&&v.memoizedState!==null?py(f):k!==null?(k.return=v,he=k):py(f);for(;g!==null;)he=g,hy(g),g=g.sibling;he=f,sc=A,Gt=z}dy(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,he=g):dy(n)}}function dy(n){for(;he!==null;){var s=he;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Gt||oc(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Gt)if(l===null)h.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:Jn(s.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&fg(s,g,h);break;case 3:var v=s.updateQueue;if(v!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}fg(s,v,l)}break;case 5:var A=s.stateNode;if(l===null&&s.flags&4){l=A;var k=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&l.focus();break;case"img":k.src&&(l.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var Y=z.memoizedState;if(Y!==null){var X=Y.dehydrated;X!==null&&Wn(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Gt||s.flags&512&&tf(s)}catch(Q){gt(s,s.return,Q)}}if(s===n){he=null;break}if(l=s.sibling,l!==null){l.return=s.return,he=l;break}he=s.return}}function fy(n){for(;he!==null;){var s=he;if(s===n){he=null;break}var l=s.sibling;if(l!==null){l.return=s.return,he=l;break}he=s.return}}function py(n){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{oc(4,s)}catch(k){gt(s,l,k)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(k){gt(s,f,k)}}var g=s.return;try{tf(s)}catch(k){gt(s,g,k)}break;case 5:var v=s.return;try{tf(s)}catch(k){gt(s,v,k)}}}catch(k){gt(s,s.return,k)}if(s===n){he=null;break}var A=s.sibling;if(A!==null){A.return=s.return,he=A;break}he=s.return}}var zI=Math.ceil,ac=ue.ReactCurrentDispatcher,sf=ue.ReactCurrentOwner,On=ue.ReactCurrentBatchConfig,Ke=0,Ot=null,It=null,zt=0,Tn=0,Lo=pi(0),kt=0,ul=null,_s=0,lc=0,of=0,cl=null,fn=null,af=0,Fo=1/0,zr=null,uc=!1,lf=null,Ei=null,cc=!1,wi=null,hc=0,hl=0,uf=null,dc=-1,fc=0;function rn(){return(Ke&6)!==0?rt():dc!==-1?dc:dc=rt()}function Ii(n){return(n.mode&1)===0?1:(Ke&2)!==0&&zt!==0?zt&-zt:SI.transition!==null?(fc===0&&(fc=os()),fc):(n=Be,n!==0||(n=window.event,n=n===void 0?16:Ua(n.type)),n)}function tr(n,s,l,h){if(50<hl)throw hl=0,uf=null,Error(t(185));oi(n,l,h),((Ke&2)===0||n!==Ot)&&(n===Ot&&((Ke&2)===0&&(lc|=l),kt===4&&Ti(n,zt)),pn(n,h),l===1&&Ke===0&&(s.mode&1)===0&&(Fo=rt()+500,zu&&gi()))}function pn(n,s){var l=n.callbackNode;kr(n,s);var h=ss(n,n===Ot?zt:0);if(h===0)l!==null&&Va(l),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(l!=null&&Va(l),s===1)n.tag===0?TI(gy.bind(null,n)):tg(gy.bind(null,n)),vI(function(){(Ke&6)===0&&gi()}),l=null;else{switch(li(h)){case 1:l=rs;break;case 4:l=ri;break;case 16:l=Cn;break;case 536870912:l=fu;break;default:l=Cn}l=Sy(l,my.bind(null,n))}n.callbackPriority=s,n.callbackNode=l}}function my(n,s){if(dc=-1,fc=0,(Ke&6)!==0)throw Error(t(327));var l=n.callbackNode;if(Uo()&&n.callbackNode!==l)return null;var h=ss(n,n===Ot?zt:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||s)s=pc(n,h);else{s=h;var f=Ke;Ke|=2;var g=_y();(Ot!==n||zt!==s)&&(zr=null,Fo=rt()+500,Es(n,s));do try{qI();break}catch(A){yy(n,A)}while(!0);Rd(),ac.current=g,Ke=f,It!==null?s=0:(Ot=null,zt=0,s=kt)}if(s!==0){if(s===2&&(f=_n(n),f!==0&&(h=f,s=cf(n,f))),s===1)throw l=ul,Es(n,0),Ti(n,h),pn(n,rt()),l;if(s===6)Ti(n,h);else{if(f=n.current.alternate,(h&30)===0&&!jI(f)&&(s=pc(n,h),s===2&&(g=_n(n),g!==0&&(h=g,s=cf(n,g))),s===1))throw l=ul,Es(n,0),Ti(n,h),pn(n,rt()),l;switch(n.finishedWork=f,n.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ws(n,fn,zr);break;case 3:if(Ti(n,h),(h&130023424)===h&&(s=af+500-rt(),10<s)){if(ss(n,0)!==0)break;if(f=n.suspendedLanes,(f&h)!==h){rn(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=md(ws.bind(null,n,fn,zr),s);break}ws(n,fn,zr);break;case 4:if(Ti(n,h),(h&4194240)===h)break;for(s=n.eventTimes,f=-1;0<h;){var v=31-en(h);g=1<<v,v=s[v],v>f&&(f=v),h&=~g}if(h=f,h=rt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*zI(h/1960))-h,10<h){n.timeoutHandle=md(ws.bind(null,n,fn,zr),h);break}ws(n,fn,zr);break;case 5:ws(n,fn,zr);break;default:throw Error(t(329))}}}return pn(n,rt()),n.callbackNode===l?my.bind(null,n):null}function cf(n,s){var l=cl;return n.current.memoizedState.isDehydrated&&(Es(n,s).flags|=256),n=pc(n,s),n!==2&&(s=fn,fn=l,s!==null&&hf(s)),n}function hf(n){fn===null?fn=n:fn.push.apply(fn,n)}function jI(n){for(var s=n;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],g=f.getSnapshot;f=f.value;try{if(!Yn(g(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ti(n,s){for(s&=~of,s&=~lc,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var l=31-en(s),h=1<<l;n[l]=-1,s&=~h}}function gy(n){if((Ke&6)!==0)throw Error(t(327));Uo();var s=ss(n,0);if((s&1)===0)return pn(n,rt()),null;var l=pc(n,s);if(n.tag!==0&&l===2){var h=_n(n);h!==0&&(s=h,l=cf(n,h))}if(l===1)throw l=ul,Es(n,0),Ti(n,s),pn(n,rt()),l;if(l===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ws(n,fn,zr),pn(n,rt()),null}function df(n,s){var l=Ke;Ke|=1;try{return n(s)}finally{Ke=l,Ke===0&&(Fo=rt()+500,zu&&gi())}}function vs(n){wi!==null&&wi.tag===0&&(Ke&6)===0&&Uo();var s=Ke;Ke|=1;var l=On.transition,h=Be;try{if(On.transition=null,Be=1,n)return n()}finally{Be=h,On.transition=l,Ke=s,(Ke&6)===0&&gi()}}function ff(){Tn=Lo.current,ot(Lo)}function Es(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,_I(l)),It!==null)for(l=It.return;l!==null;){var h=l;switch(wd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Uu();break;case 3:Vo(),ot(cn),ot(qt),Vd();break;case 5:Dd(h);break;case 4:Vo();break;case 13:ot(dt);break;case 19:ot(dt);break;case 10:Pd(h.type._context);break;case 22:case 23:ff()}l=l.return}if(Ot=n,It=n=Si(n.current,null),zt=Tn=s,kt=0,ul=null,of=lc=_s=0,fn=cl=null,ms!==null){for(s=0;s<ms.length;s++)if(l=ms[s],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,g=l.pending;if(g!==null){var v=g.next;g.next=f,h.next=v}l.pending=h}ms=null}return n}function yy(n,s){do{var l=It;try{if(Rd(),Xu.current=tc,Ju){for(var h=ft.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Ju=!1}if(ys=0,Vt=Ct=ft=null,rl=!1,il=0,sf.current=null,l===null||l.return===null){kt=1,ul=s,It=null;break}e:{var g=n,v=l.return,A=l,k=s;if(s=zt,A.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var z=k,Y=A,X=Y.tag;if((Y.mode&1)===0&&(X===0||X===11||X===15)){var Q=Y.alternate;Q?(Y.updateQueue=Q.updateQueue,Y.memoizedState=Q.memoizedState,Y.lanes=Q.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var le=jg(v);if(le!==null){le.flags&=-257,$g(le,v,A,g,s),le.mode&1&&zg(g,z,s),s=le,k=z;var fe=s.updateQueue;if(fe===null){var me=new Set;me.add(k),s.updateQueue=me}else fe.add(k);break e}else{if((s&1)===0){zg(g,z,s),pf();break e}k=Error(t(426))}}else if(lt&&A.mode&1){var Et=jg(v);if(Et!==null){(Et.flags&65536)===0&&(Et.flags|=256),$g(Et,v,A,g,s),Sd(Oo(k,A));break e}}g=k=Oo(k,A),kt!==4&&(kt=2),cl===null?cl=[g]:cl.push(g),g=v;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var U=Ug(g,k,s);dg(g,U);break e;case 1:A=k;var D=g.type,B=g.stateNode;if((g.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Ei===null||!Ei.has(B)))){g.flags|=65536,s&=-s,g.lanes|=s;var ee=Bg(g,A,s);dg(g,ee);break e}}g=g.return}while(g!==null)}Ey(l)}catch(ye){s=ye,It===l&&l!==null&&(It=l=l.return);continue}break}while(!0)}function _y(){var n=ac.current;return ac.current=tc,n===null?tc:n}function pf(){(kt===0||kt===3||kt===2)&&(kt=4),Ot===null||(_s&268435455)===0&&(lc&268435455)===0||Ti(Ot,zt)}function pc(n,s){var l=Ke;Ke|=2;var h=_y();(Ot!==n||zt!==s)&&(zr=null,Es(n,s));do try{$I();break}catch(f){yy(n,f)}while(!0);if(Rd(),Ke=l,ac.current=h,It!==null)throw Error(t(261));return Ot=null,zt=0,kt}function $I(){for(;It!==null;)vy(It)}function qI(){for(;It!==null&&!hu();)vy(It)}function vy(n){var s=Ty(n.alternate,n,Tn);n.memoizedProps=n.pendingProps,s===null?Ey(n):It=s,sf.current=null}function Ey(n){var s=n;do{var l=s.alternate;if(n=s.return,(s.flags&32768)===0){if(l=MI(l,s,Tn),l!==null){It=l;return}}else{if(l=LI(l,s),l!==null){l.flags&=32767,It=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{kt=6,It=null;return}}if(s=s.sibling,s!==null){It=s;return}It=s=n}while(s!==null);kt===0&&(kt=5)}function ws(n,s,l){var h=Be,f=On.transition;try{On.transition=null,Be=1,KI(n,s,l,h)}finally{On.transition=f,Be=h}return null}function KI(n,s,l,h){do Uo();while(wi!==null);if((Ke&6)!==0)throw Error(t(327));l=n.finishedWork;var f=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=l.lanes|l.childLanes;if(tt(n,g),n===Ot&&(It=Ot=null,zt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||cc||(cc=!0,Sy(Cn,function(){return Uo(),null})),g=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||g){g=On.transition,On.transition=null;var v=Be;Be=1;var A=Ke;Ke|=4,sf.current=null,UI(n,l),cy(l,n),hI(fd),ci=!!dd,fd=dd=null,n.current=l,BI(l),Yh(),Ke=A,Be=v,On.transition=g}else n.current=l;if(cc&&(cc=!1,wi=n,hc=f),g=n.pendingLanes,g===0&&(Ei=null),pu(l.stateNode),pn(n,rt()),s!==null)for(h=n.onRecoverableError,l=0;l<s.length;l++)f=s[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(uc)throw uc=!1,n=lf,lf=null,n;return(hc&1)!==0&&n.tag!==0&&Uo(),g=n.pendingLanes,(g&1)!==0?n===uf?hl++:(hl=0,uf=n):hl=0,gi(),null}function Uo(){if(wi!==null){var n=li(hc),s=On.transition,l=Be;try{if(On.transition=null,Be=16>n?16:n,wi===null)var h=!1;else{if(n=wi,wi=null,hc=0,(Ke&6)!==0)throw Error(t(331));var f=Ke;for(Ke|=4,he=n.current;he!==null;){var g=he,v=g.child;if((he.flags&16)!==0){var A=g.deletions;if(A!==null){for(var k=0;k<A.length;k++){var z=A[k];for(he=z;he!==null;){var Y=he;switch(Y.tag){case 0:case 11:case 15:ll(8,Y,g)}var X=Y.child;if(X!==null)X.return=Y,he=X;else for(;he!==null;){Y=he;var Q=Y.sibling,le=Y.return;if(sy(Y),Y===z){he=null;break}if(Q!==null){Q.return=le,he=Q;break}he=le}}}var fe=g.alternate;if(fe!==null){var me=fe.child;if(me!==null){fe.child=null;do{var Et=me.sibling;me.sibling=null,me=Et}while(me!==null)}}he=g}}if((g.subtreeFlags&2064)!==0&&v!==null)v.return=g,he=v;else e:for(;he!==null;){if(g=he,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:ll(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,he=U;break e}he=g.return}}var D=n.current;for(he=D;he!==null;){v=he;var B=v.child;if((v.subtreeFlags&2064)!==0&&B!==null)B.return=v,he=B;else e:for(v=D;he!==null;){if(A=he,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:oc(9,A)}}catch(ye){gt(A,A.return,ye)}if(A===v){he=null;break e}var ee=A.sibling;if(ee!==null){ee.return=A.return,he=ee;break e}he=A.return}}if(Ke=f,gi(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(is,n)}catch{}h=!0}return h}finally{Be=l,On.transition=s}}return!1}function wy(n,s,l){s=Oo(l,s),s=Ug(n,s,1),n=_i(n,s,1),s=rn(),n!==null&&(oi(n,1,s),pn(n,s))}function gt(n,s,l){if(n.tag===3)wy(n,n,l);else for(;s!==null;){if(s.tag===3){wy(s,n,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ei===null||!Ei.has(h))){n=Oo(l,n),n=Bg(s,n,1),s=_i(s,n,1),n=rn(),s!==null&&(oi(s,1,n),pn(s,n));break}}s=s.return}}function HI(n,s,l){var h=n.pingCache;h!==null&&h.delete(s),s=rn(),n.pingedLanes|=n.suspendedLanes&l,Ot===n&&(zt&l)===l&&(kt===4||kt===3&&(zt&130023424)===zt&&500>rt()-af?Es(n,0):of|=l),pn(n,s)}function Iy(n,s){s===0&&((n.mode&1)===0?s=1:(s=ao,ao<<=1,(ao&130023424)===0&&(ao=4194304)));var l=rn();n=Fr(n,s),n!==null&&(oi(n,s,l),pn(n,l))}function GI(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),Iy(n,l)}function WI(n,s){var l=0;switch(n.tag){case 13:var h=n.stateNode,f=n.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Iy(n,l)}var Ty;Ty=function(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps||cn.current)dn=!0;else{if((n.lanes&l)===0&&(s.flags&128)===0)return dn=!1,OI(n,s,l);dn=(n.flags&131072)!==0}else dn=!1,lt&&(s.flags&1048576)!==0&&ng(s,$u,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;ic(n,s),n=s.pendingProps;var f=Po(s,qt.current);bo(s,l),f=Ld(null,s,h,n,f,l);var g=Fd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,hn(h)?(g=!0,Bu(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,xd(s),f.updater=nc,s.stateNode=f,f._reactInternals=s,qd(s,h,n,l),s=Wd(null,s,h,!0,g,l)):(s.tag=0,lt&&g&&Ed(s),nn(null,s,f,l),s=s.child),s;case 16:h=s.elementType;e:{switch(ic(n,s),n=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=YI(h),n=Jn(h,n),f){case 0:s=Gd(null,s,h,n,l);break e;case 1:s=Qg(null,s,h,n,l);break e;case 11:s=qg(null,s,h,n,l);break e;case 14:s=Kg(null,s,h,Jn(h.type,n),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Jn(h,f),Gd(n,s,h,f,l);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Jn(h,f),Qg(n,s,h,f,l);case 3:e:{if(Yg(s),n===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,hg(n,s),Qu(s,h,null,l);var v=s.memoizedState;if(h=v.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=Oo(Error(t(423)),s),s=Xg(n,s,h,l,f);break e}else if(h!==f){f=Oo(Error(t(424)),s),s=Xg(n,s,h,l,f);break e}else for(In=fi(s.stateNode.containerInfo.firstChild),wn=s,lt=!0,Xn=null,l=ug(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(xo(),h===f){s=Br(n,s,l);break e}nn(n,s,h,l)}s=s.child}return s;case 5:return pg(s),n===null&&Td(s),h=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,v=f.children,pd(h,f)?v=null:g!==null&&pd(h,g)&&(s.flags|=32),Wg(n,s),nn(n,s,v,l),s.child;case 6:return n===null&&Td(s),null;case 13:return Jg(n,s,l);case 4:return Nd(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=No(s,null,h,l):nn(n,s,h,l),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Jn(h,f),qg(n,s,h,f,l);case 7:return nn(n,s,s.pendingProps,l),s.child;case 8:return nn(n,s,s.pendingProps.children,l),s.child;case 12:return nn(n,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,v=f.value,it(Hu,h._currentValue),h._currentValue=v,g!==null)if(Yn(g.value,v)){if(g.children===f.children&&!cn.current){s=Br(n,s,l);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var A=g.dependencies;if(A!==null){v=g.child;for(var k=A.firstContext;k!==null;){if(k.context===h){if(g.tag===1){k=Ur(-1,l&-l),k.tag=2;var z=g.updateQueue;if(z!==null){z=z.shared;var Y=z.pending;Y===null?k.next=k:(k.next=Y.next,Y.next=k),z.pending=k}}g.lanes|=l,k=g.alternate,k!==null&&(k.lanes|=l),Cd(g.return,l,s),A.lanes|=l;break}k=k.next}}else if(g.tag===10)v=g.type===s.type?null:g.child;else if(g.tag===18){if(v=g.return,v===null)throw Error(t(341));v.lanes|=l,A=v.alternate,A!==null&&(A.lanes|=l),Cd(v,l,s),v=g.sibling}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===s){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}nn(n,s,f.children,l),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,bo(s,l),f=bn(f),h=h(f),s.flags|=1,nn(n,s,h,l),s.child;case 14:return h=s.type,f=Jn(h,s.pendingProps),f=Jn(h.type,f),Kg(n,s,h,f,l);case 15:return Hg(n,s,s.type,s.pendingProps,l);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Jn(h,f),ic(n,s),s.tag=1,hn(h)?(n=!0,Bu(s)):n=!1,bo(s,l),Lg(s,h,f),qd(s,h,f,l),Wd(null,s,h,!0,n,l);case 19:return ey(n,s,l);case 22:return Gg(n,s,l)}throw Error(t(156,s.tag))};function Sy(n,s){return so(n,s)}function QI(n,s,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(n,s,l,h){return new QI(n,s,l,h)}function mf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function YI(n){if(typeof n=="function")return mf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M)return 11;if(n===At)return 14}return 2}function Si(n,s){var l=n.alternate;return l===null?(l=Mn(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function mc(n,s,l,h,f,g){var v=2;if(h=n,typeof n=="function")mf(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case x:return Is(l.children,f,g,s);case S:v=8,f|=8;break;case P:return n=Mn(12,l,s,f|2),n.elementType=P,n.lanes=g,n;case R:return n=Mn(13,l,s,f),n.elementType=R,n.lanes=g,n;case ht:return n=Mn(19,l,s,f),n.elementType=ht,n.lanes=g,n;case We:return gc(l,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:v=10;break e;case b:v=9;break e;case M:v=11;break e;case At:v=14;break e;case Dt:v=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Mn(v,l,s,f),s.elementType=n,s.type=h,s.lanes=g,s}function Is(n,s,l,h){return n=Mn(7,n,h,s),n.lanes=l,n}function gc(n,s,l,h){return n=Mn(22,n,h,s),n.elementType=We,n.lanes=l,n.stateNode={isHidden:!1},n}function gf(n,s,l){return n=Mn(6,n,null,s),n.lanes=l,n}function yf(n,s,l){return s=Mn(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function XI(n,s,l,h,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=si(0),this.expirationTimes=si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=si(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function _f(n,s,l,h,f,g,v,A,k){return n=new XI(n,s,l,A,k),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Mn(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},xd(g),n}function JI(n,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_e,key:h==null?null:""+h,children:n,containerInfo:s,implementation:l}}function Ay(n){if(!n)return mi;n=n._reactInternals;e:{if($n(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(hn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var l=n.type;if(hn(l))return Zm(n,l,s)}return s}function Ry(n,s,l,h,f,g,v,A,k){return n=_f(l,h,!0,n,f,g,v,A,k),n.context=Ay(null),l=n.current,h=rn(),f=Ii(l),g=Ur(h,f),g.callback=s??null,_i(l,g,f),n.current.lanes=f,oi(n,f,h),pn(n,h),n}function yc(n,s,l,h){var f=s.current,g=rn(),v=Ii(f);return l=Ay(l),s.context===null?s.context=l:s.pendingContext=l,s=Ur(g,v),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=_i(f,s,v),n!==null&&(tr(n,f,v,g),Wu(n,f,v)),v}function _c(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Py(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function vf(n,s){Py(n,s),(n=n.alternate)&&Py(n,s)}function ZI(){return null}var Cy=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ef(n){this._internalRoot=n}vc.prototype.render=Ef.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));yc(n,s,null,null)},vc.prototype.unmount=Ef.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;vs(function(){yc(null,n,null,null)}),s[Vr]=null}};function vc(n){this._internalRoot=n}vc.prototype.unstable_scheduleHydration=function(n){if(n){var s=vu();n={blockedOn:null,target:n,priority:s};for(var l=0;l<hr.length&&s!==0&&s<hr[l].priority;l++);hr.splice(l,0,n),l===0&&Iu(n)}};function wf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ec(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ky(){}function eT(n,s,l,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var z=_c(v);g.call(z)}}var v=Ry(s,h,n,0,null,!1,!1,"",ky);return n._reactRootContainer=v,n[Vr]=v.current,Qa(n.nodeType===8?n.parentNode:n),vs(),v}for(;f=n.lastChild;)n.removeChild(f);if(typeof h=="function"){var A=h;h=function(){var z=_c(k);A.call(z)}}var k=_f(n,0,!1,null,null,!1,!1,"",ky);return n._reactRootContainer=k,n[Vr]=k.current,Qa(n.nodeType===8?n.parentNode:n),vs(function(){yc(s,k,l,h)}),k}function wc(n,s,l,h,f){var g=l._reactRootContainer;if(g){var v=g;if(typeof f=="function"){var A=f;f=function(){var k=_c(v);A.call(k)}}yc(s,v,n,f)}else v=eT(l,s,n,f,h);return _c(v)}yu=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var l=ii(s.pendingLanes);l!==0&&(ai(s,l|1),pn(s,rt()),(Ke&6)===0&&(Fo=rt()+500,gi()))}break;case 13:vs(function(){var h=Fr(n,1);if(h!==null){var f=rn();tr(h,n,1,f)}}),vf(n,1)}},lo=function(n){if(n.tag===13){var s=Fr(n,134217728);if(s!==null){var l=rn();tr(s,n,134217728,l)}vf(n,134217728)}},_u=function(n){if(n.tag===13){var s=Ii(n),l=Fr(n,s);if(l!==null){var h=rn();tr(l,n,s,h)}vf(n,s)}},vu=function(){return Be},Eu=function(n,s){var l=Be;try{return Be=n,s()}finally{Be=l}},Zs=function(n,s,l){switch(s){case"input":if(ti(n,l),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==n&&h.form===n.form){var f=Fu(h);if(!f)throw Error(t(90));Zr(h),ti(h,f)}}}break;case"textarea":Xe(n,l);break;case"select":s=l.value,s!=null&&ce(n,!!l.multiple,s,!1)}},Zi=df,xa=vs;var tT={usingClientEntryPoint:!1,Events:[Ja,Ao,Fu,ur,ka,df]},dl={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nT={bundleType:dl.bundleType,version:dl.version,rendererPackageName:dl.rendererPackageName,rendererConfig:dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ue.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ba(n),n===null?null:n.stateNode},findFiberByHostInstance:dl.findFiberByHostInstance||ZI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ic.isDisabled&&Ic.supportsFiber)try{is=Ic.inject(nT),yn=Ic}catch{}}return mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tT,mn.createPortal=function(n,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wf(s))throw Error(t(200));return JI(n,s,null,l)},mn.createRoot=function(n,s){if(!wf(n))throw Error(t(299));var l=!1,h="",f=Cy;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=_f(n,1,!1,null,null,l,!1,h,f),n[Vr]=s.current,Qa(n.nodeType===8?n.parentNode:n),new Ef(s)},mn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ba(s),n=n===null?null:n.stateNode,n},mn.flushSync=function(n){return vs(n)},mn.hydrate=function(n,s,l){if(!Ec(s))throw Error(t(200));return wc(null,n,s,!0,l)},mn.hydrateRoot=function(n,s,l){if(!wf(n))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,f=!1,g="",v=Cy;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),s=Ry(s,null,n,1,l??null,f,!1,g,v),n[Vr]=s.current,Qa(n),h)for(n=0;n<h.length;n++)l=h[n],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new vc(s)},mn.render=function(n,s,l){if(!Ec(s))throw Error(t(200));return wc(null,n,s,!1,l)},mn.unmountComponentAtNode=function(n){if(!Ec(n))throw Error(t(40));return n._reactRootContainer?(vs(function(){wc(null,null,n,!1,function(){n._reactRootContainer=null,n[Vr]=null})}),!0):!1},mn.unstable_batchedUpdates=df,mn.unstable_renderSubtreeIntoContainer=function(n,s,l,h){if(!Ec(l))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return wc(n,s,l,!1,h)},mn.version="18.3.1-next-f1338f8080-20240426",mn}var Oy;function lT(){if(Oy)return Tf.exports;Oy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Tf.exports=aT(),Tf.exports}var My;function uT(){if(My)return Tc;My=1;var i=lT();return Tc.createRoot=i.createRoot,Tc.hydrateRoot=i.hydrateRoot,Tc}var cT=uT();const hT=Mv(cT),dT=()=>{};var Ly={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},fT=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=i[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=i[t++],c=i[t++],d=i[t++],p=((o&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const a=i[t++],c=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Uv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const a=i[o],c=o+1<i.length,d=c?i[o+1]:0,p=o+2<i.length,y=p?i[o+2]:0,E=a>>2,I=(a&3)<<4|d>>4;let T=(d&15)<<2|y>>6,V=y&63;p||(V=64,c||(T=64)),r.push(t[E],t[I],t[T],t[V])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Fv(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):fT(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const a=t[i.charAt(o++)],d=o<i.length?t[i.charAt(o)]:0;++o;const y=o<i.length?t[i.charAt(o)]:64;++o;const I=o<i.length?t[i.charAt(o)]:64;if(++o,a==null||d==null||y==null||I==null)throw new pT;const T=a<<2|d>>4;if(r.push(T),y!==64){const V=d<<4&240|y>>2;if(r.push(V),I!==64){const j=y<<6&192|I;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class pT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mT=function(i){const e=Fv(i);return Uv.encodeByteArray(e,!0)},Qc=function(i){return mT(i).replace(/\./g,"")},Bv=function(i){try{return Uv.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=()=>zv().__FIREBASE_DEFAULTS__,yT=()=>{if(typeof process>"u"||typeof Ly>"u")return;const i=Ly.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},_T=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Bv(i[1]);return e&&JSON.parse(e)},vh=()=>{try{return dT()||gT()||yT()||_T()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},jv=i=>{var e,t;return(t=(e=vh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},vT=i=>{const e=jv(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},$v=()=>{var i;return(i=vh())===null||i===void 0?void 0:i.config},qv=i=>{var e;return(e=vh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(i){return i.endsWith(".cloudworkstations.dev")}async function Kv(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,a=i.sub||i.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Qc(JSON.stringify(t)),Qc(JSON.stringify(c)),""].join(".")}const Tl={};function IT(){const i={prod:[],emulator:[]};for(const e of Object.keys(Tl))Tl[e]?i.emulator.push(e):i.prod.push(e);return i}function TT(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Fy=!1;function Hv(i,e){if(typeof window>"u"||typeof document>"u"||!ya(window.location.host)||Tl[i]===e||Tl[i]||Fy)return;Tl[i]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",a=IT().prod.length>0;function c(){const T=document.getElementById(r);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,V){T.setAttribute("width","24"),T.setAttribute("id",V),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Fy=!0,c()},T}function E(T,V){T.setAttribute("id",V),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function I(){const T=TT(r),V=t("text"),j=document.getElementById(V)||document.createElement("span"),H=t("learnmore"),q=document.getElementById(H)||document.createElement("a"),Ee=t("preprendIcon"),J=document.getElementById(Ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const te=T.element;d(te),E(q,H);const ue=y();p(J,Ee),te.append(J,j,q,ue),document.body.appendChild(te)}a?(j.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ST(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function Gv(){var i;const e=(i=vh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function PT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CT(){const i=xt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Wv(){return!Gv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qv(){return!Gv()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Yv(){try{return typeof indexedDB=="object"}catch{return!1}}function kT(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="FirebaseError";class Yr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=xT,Object.setPrototypeOf(this,Yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yl.prototype.create)}}class Yl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?NT(a,r):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Yr(o,d,r)}}function NT(i,e){return i.replace(DT,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const DT=/\{\$([^}]+)}/g;function bT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Fs(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=i[o],c=e[o];if(Uy(a)&&Uy(c)){if(!Fs(a,c))return!1}else if(a!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Uy(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function VT(i,e){const t=new OT(i,e);return t.subscribe.bind(t)}class OT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");MT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Rf),o.error===void 0&&(o.error=Rf),o.complete===void 0&&(o.complete=Rf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MT(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Rf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(i){return i&&i._delegate?i._delegate:i}class Us{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ET;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UT(e))try{this.getOrInitializeService({instanceIdentifier:Ss})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=Ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ss){return this.instances.has(e)}getOptions(e=Ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&c.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FT(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ss){return this.component?this.component.multipleInstances?e:Ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FT(i){return i===Ss?void 0:i}function UT(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new LT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Fe||(Fe={}));const zT={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},jT=Fe.INFO,$T={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},qT=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=$T[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wp{constructor(e){this.name=e,this._logLevel=jT,this._logHandler=qT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const KT=(i,e)=>e.some(t=>i instanceof t);let By,zy;function HT(){return By||(By=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GT(){return zy||(zy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xv=new WeakMap,Bf=new WeakMap,Jv=new WeakMap,Pf=new WeakMap,Ip=new WeakMap;function WT(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",a),i.removeEventListener("error",c)},a=()=>{t(Oi(i.result)),o()},c=()=>{r(i.error),o()};i.addEventListener("success",a),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Xv.set(t,i)}).catch(()=>{}),Ip.set(e,i),e}function QT(i){if(Bf.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",a),i.removeEventListener("error",c),i.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",a),i.addEventListener("error",c),i.addEventListener("abort",c)});Bf.set(i,e)}let zf={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Bf.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Jv.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Oi(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function YT(i){zf=i(zf)}function XT(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Cf(this),e,...t);return Jv.set(r,e.sort?e.sort():[e]),Oi(r)}:GT().includes(i)?function(...e){return i.apply(Cf(this),e),Oi(Xv.get(this))}:function(...e){return Oi(i.apply(Cf(this),e))}}function JT(i){return typeof i=="function"?XT(i):(i instanceof IDBTransaction&&QT(i),KT(i,HT())?new Proxy(i,zf):i)}function Oi(i){if(i instanceof IDBRequest)return WT(i);if(Pf.has(i))return Pf.get(i);const e=JT(i);return e!==i&&(Pf.set(i,e),Ip.set(e,i)),e}const Cf=i=>Ip.get(i);function ZT(i,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const c=indexedDB.open(i,e),d=Oi(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Oi(c.result),p.oldVersion,p.newVersion,Oi(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const eS=["get","getKey","getAll","getAllKeys","count"],tS=["put","add","delete","clear"],kf=new Map;function jy(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(kf.get(e))return kf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=tS.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||eS.includes(t)))return;const a=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return r&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return kf.set(e,a),a}YT(i=>({...i,get:(e,t,r)=>jy(e,t)||i.get(e,t,r),has:(e,t)=>!!jy(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(rS(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function rS(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jf="@firebase/app",$y="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new wp("@firebase/app"),iS="@firebase/app-compat",sS="@firebase/analytics-compat",oS="@firebase/analytics",aS="@firebase/app-check-compat",lS="@firebase/app-check",uS="@firebase/auth",cS="@firebase/auth-compat",hS="@firebase/database",dS="@firebase/data-connect",fS="@firebase/database-compat",pS="@firebase/functions",mS="@firebase/functions-compat",gS="@firebase/installations",yS="@firebase/installations-compat",_S="@firebase/messaging",vS="@firebase/messaging-compat",ES="@firebase/performance",wS="@firebase/performance-compat",IS="@firebase/remote-config",TS="@firebase/remote-config-compat",SS="@firebase/storage",AS="@firebase/storage-compat",RS="@firebase/firestore",PS="@firebase/ai",CS="@firebase/firestore-compat",kS="firebase",xS="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="[DEFAULT]",NS={[jf]:"fire-core",[iS]:"fire-core-compat",[oS]:"fire-analytics",[sS]:"fire-analytics-compat",[lS]:"fire-app-check",[aS]:"fire-app-check-compat",[uS]:"fire-auth",[cS]:"fire-auth-compat",[hS]:"fire-rtdb",[dS]:"fire-data-connect",[fS]:"fire-rtdb-compat",[pS]:"fire-fn",[mS]:"fire-fn-compat",[gS]:"fire-iid",[yS]:"fire-iid-compat",[_S]:"fire-fcm",[vS]:"fire-fcm-compat",[ES]:"fire-perf",[wS]:"fire-perf-compat",[IS]:"fire-rc",[TS]:"fire-rc-compat",[SS]:"fire-gcs",[AS]:"fire-gcs-compat",[RS]:"fire-fst",[CS]:"fire-fst-compat",[PS]:"fire-vertex","fire-js":"fire-js",[kS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new Map,DS=new Map,qf=new Map;function qy(i,e){try{i.container.addComponent(e)}catch(t){Hr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function ta(i){const e=i.name;if(qf.has(e))return Hr.debug(`There were multiple attempts to register component ${e}.`),!1;qf.set(e,i);for(const t of Yc.values())qy(t,i);for(const t of DS.values())qy(t,i);return!0}function Tp(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function rr(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mi=new Yl("app","Firebase",bS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=xS;function Zv(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$f,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw Mi.create("bad-app-name",{appName:String(o)});if(t||(t=$v()),!t)throw Mi.create("no-options");const a=Yc.get(o);if(a){if(Fs(t,a.options)&&Fs(r,a.config))return a;throw Mi.create("duplicate-app",{appName:o})}const c=new BT(o);for(const p of qf.values())c.addComponent(p);const d=new VS(t,r,c);return Yc.set(o,d),d}function eE(i=$f){const e=Yc.get(i);if(!e&&i===$f&&$v())return Zv();if(!e)throw Mi.create("no-app",{appName:i});return e}function Li(i,e,t){var r;let o=(r=NS[i])!==null&&r!==void 0?r:i;t&&(o+=`-${t}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hr.warn(d.join(" "));return}ta(new Us(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="firebase-heartbeat-database",MS=1,Vl="firebase-heartbeat-store";let xf=null;function tE(){return xf||(xf=ZT(OS,MS,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Vl)}catch(t){console.warn(t)}}}}).catch(i=>{throw Mi.create("idb-open",{originalErrorMessage:i.message})})),xf}async function LS(i){try{const t=(await tE()).transaction(Vl),r=await t.objectStore(Vl).get(nE(i));return await t.done,r}catch(e){if(e instanceof Yr)Hr.warn(e.message);else{const t=Mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hr.warn(t.message)}}}async function Ky(i,e){try{const r=(await tE()).transaction(Vl,"readwrite");await r.objectStore(Vl).put(e,nE(i)),await r.done}catch(t){if(t instanceof Yr)Hr.warn(t.message);else{const r=Mi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Hr.warn(r.message)}}}function nE(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=1024,US=30;class BS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jS(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Hy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>US){const c=$S(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Hy(),{heartbeatsToSend:r,unsentEntries:o}=zS(this._heartbeatsCache.heartbeats),a=Qc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Hr.warn(t),""}}}function Hy(){return new Date().toISOString().substring(0,10)}function zS(i,e=FS){const t=[];let r=i.slice();for(const o of i){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),Gy(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Gy(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class jS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yv()?kT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await LS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Gy(i){return Qc(JSON.stringify({version:2,heartbeats:i})).length}function $S(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(i){ta(new Us("platform-logger",e=>new nS(e),"PRIVATE")),ta(new Us("heartbeat",e=>new BS(e),"PRIVATE")),Li(jf,$y,i),Li(jf,$y,"esm2017"),Li("fire-js","")}qS("");var Wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fi,rE;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function P(){}P.prototype=S.prototype,x.D=S.prototype,x.prototype=new P,x.prototype.constructor=x,x.C=function(N,b,M){for(var R=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)R[ht-2]=arguments[ht];return S.prototype[b].apply(N,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,S,P){P||(P=0);var N=Array(16);if(typeof S=="string")for(var b=0;16>b;++b)N[b]=S.charCodeAt(P++)|S.charCodeAt(P++)<<8|S.charCodeAt(P++)<<16|S.charCodeAt(P++)<<24;else for(b=0;16>b;++b)N[b]=S[P++]|S[P++]<<8|S[P++]<<16|S[P++]<<24;S=x.g[0],P=x.g[1],b=x.g[2];var M=x.g[3],R=S+(M^P&(b^M))+N[0]+3614090360&4294967295;S=P+(R<<7&4294967295|R>>>25),R=M+(b^S&(P^b))+N[1]+3905402710&4294967295,M=S+(R<<12&4294967295|R>>>20),R=b+(P^M&(S^P))+N[2]+606105819&4294967295,b=M+(R<<17&4294967295|R>>>15),R=P+(S^b&(M^S))+N[3]+3250441966&4294967295,P=b+(R<<22&4294967295|R>>>10),R=S+(M^P&(b^M))+N[4]+4118548399&4294967295,S=P+(R<<7&4294967295|R>>>25),R=M+(b^S&(P^b))+N[5]+1200080426&4294967295,M=S+(R<<12&4294967295|R>>>20),R=b+(P^M&(S^P))+N[6]+2821735955&4294967295,b=M+(R<<17&4294967295|R>>>15),R=P+(S^b&(M^S))+N[7]+4249261313&4294967295,P=b+(R<<22&4294967295|R>>>10),R=S+(M^P&(b^M))+N[8]+1770035416&4294967295,S=P+(R<<7&4294967295|R>>>25),R=M+(b^S&(P^b))+N[9]+2336552879&4294967295,M=S+(R<<12&4294967295|R>>>20),R=b+(P^M&(S^P))+N[10]+4294925233&4294967295,b=M+(R<<17&4294967295|R>>>15),R=P+(S^b&(M^S))+N[11]+2304563134&4294967295,P=b+(R<<22&4294967295|R>>>10),R=S+(M^P&(b^M))+N[12]+1804603682&4294967295,S=P+(R<<7&4294967295|R>>>25),R=M+(b^S&(P^b))+N[13]+4254626195&4294967295,M=S+(R<<12&4294967295|R>>>20),R=b+(P^M&(S^P))+N[14]+2792965006&4294967295,b=M+(R<<17&4294967295|R>>>15),R=P+(S^b&(M^S))+N[15]+1236535329&4294967295,P=b+(R<<22&4294967295|R>>>10),R=S+(b^M&(P^b))+N[1]+4129170786&4294967295,S=P+(R<<5&4294967295|R>>>27),R=M+(P^b&(S^P))+N[6]+3225465664&4294967295,M=S+(R<<9&4294967295|R>>>23),R=b+(S^P&(M^S))+N[11]+643717713&4294967295,b=M+(R<<14&4294967295|R>>>18),R=P+(M^S&(b^M))+N[0]+3921069994&4294967295,P=b+(R<<20&4294967295|R>>>12),R=S+(b^M&(P^b))+N[5]+3593408605&4294967295,S=P+(R<<5&4294967295|R>>>27),R=M+(P^b&(S^P))+N[10]+38016083&4294967295,M=S+(R<<9&4294967295|R>>>23),R=b+(S^P&(M^S))+N[15]+3634488961&4294967295,b=M+(R<<14&4294967295|R>>>18),R=P+(M^S&(b^M))+N[4]+3889429448&4294967295,P=b+(R<<20&4294967295|R>>>12),R=S+(b^M&(P^b))+N[9]+568446438&4294967295,S=P+(R<<5&4294967295|R>>>27),R=M+(P^b&(S^P))+N[14]+3275163606&4294967295,M=S+(R<<9&4294967295|R>>>23),R=b+(S^P&(M^S))+N[3]+4107603335&4294967295,b=M+(R<<14&4294967295|R>>>18),R=P+(M^S&(b^M))+N[8]+1163531501&4294967295,P=b+(R<<20&4294967295|R>>>12),R=S+(b^M&(P^b))+N[13]+2850285829&4294967295,S=P+(R<<5&4294967295|R>>>27),R=M+(P^b&(S^P))+N[2]+4243563512&4294967295,M=S+(R<<9&4294967295|R>>>23),R=b+(S^P&(M^S))+N[7]+1735328473&4294967295,b=M+(R<<14&4294967295|R>>>18),R=P+(M^S&(b^M))+N[12]+2368359562&4294967295,P=b+(R<<20&4294967295|R>>>12),R=S+(P^b^M)+N[5]+4294588738&4294967295,S=P+(R<<4&4294967295|R>>>28),R=M+(S^P^b)+N[8]+2272392833&4294967295,M=S+(R<<11&4294967295|R>>>21),R=b+(M^S^P)+N[11]+1839030562&4294967295,b=M+(R<<16&4294967295|R>>>16),R=P+(b^M^S)+N[14]+4259657740&4294967295,P=b+(R<<23&4294967295|R>>>9),R=S+(P^b^M)+N[1]+2763975236&4294967295,S=P+(R<<4&4294967295|R>>>28),R=M+(S^P^b)+N[4]+1272893353&4294967295,M=S+(R<<11&4294967295|R>>>21),R=b+(M^S^P)+N[7]+4139469664&4294967295,b=M+(R<<16&4294967295|R>>>16),R=P+(b^M^S)+N[10]+3200236656&4294967295,P=b+(R<<23&4294967295|R>>>9),R=S+(P^b^M)+N[13]+681279174&4294967295,S=P+(R<<4&4294967295|R>>>28),R=M+(S^P^b)+N[0]+3936430074&4294967295,M=S+(R<<11&4294967295|R>>>21),R=b+(M^S^P)+N[3]+3572445317&4294967295,b=M+(R<<16&4294967295|R>>>16),R=P+(b^M^S)+N[6]+76029189&4294967295,P=b+(R<<23&4294967295|R>>>9),R=S+(P^b^M)+N[9]+3654602809&4294967295,S=P+(R<<4&4294967295|R>>>28),R=M+(S^P^b)+N[12]+3873151461&4294967295,M=S+(R<<11&4294967295|R>>>21),R=b+(M^S^P)+N[15]+530742520&4294967295,b=M+(R<<16&4294967295|R>>>16),R=P+(b^M^S)+N[2]+3299628645&4294967295,P=b+(R<<23&4294967295|R>>>9),R=S+(b^(P|~M))+N[0]+4096336452&4294967295,S=P+(R<<6&4294967295|R>>>26),R=M+(P^(S|~b))+N[7]+1126891415&4294967295,M=S+(R<<10&4294967295|R>>>22),R=b+(S^(M|~P))+N[14]+2878612391&4294967295,b=M+(R<<15&4294967295|R>>>17),R=P+(M^(b|~S))+N[5]+4237533241&4294967295,P=b+(R<<21&4294967295|R>>>11),R=S+(b^(P|~M))+N[12]+1700485571&4294967295,S=P+(R<<6&4294967295|R>>>26),R=M+(P^(S|~b))+N[3]+2399980690&4294967295,M=S+(R<<10&4294967295|R>>>22),R=b+(S^(M|~P))+N[10]+4293915773&4294967295,b=M+(R<<15&4294967295|R>>>17),R=P+(M^(b|~S))+N[1]+2240044497&4294967295,P=b+(R<<21&4294967295|R>>>11),R=S+(b^(P|~M))+N[8]+1873313359&4294967295,S=P+(R<<6&4294967295|R>>>26),R=M+(P^(S|~b))+N[15]+4264355552&4294967295,M=S+(R<<10&4294967295|R>>>22),R=b+(S^(M|~P))+N[6]+2734768916&4294967295,b=M+(R<<15&4294967295|R>>>17),R=P+(M^(b|~S))+N[13]+1309151649&4294967295,P=b+(R<<21&4294967295|R>>>11),R=S+(b^(P|~M))+N[4]+4149444226&4294967295,S=P+(R<<6&4294967295|R>>>26),R=M+(P^(S|~b))+N[11]+3174756917&4294967295,M=S+(R<<10&4294967295|R>>>22),R=b+(S^(M|~P))+N[2]+718787259&4294967295,b=M+(R<<15&4294967295|R>>>17),R=P+(M^(b|~S))+N[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+b&4294967295,x.g[3]=x.g[3]+M&4294967295}r.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var P=S-this.blockSize,N=this.B,b=this.h,M=0;M<S;){if(b==0)for(;M<=P;)o(this,x,M),M+=this.blockSize;if(typeof x=="string"){for(;M<S;)if(N[b++]=x.charCodeAt(M++),b==this.blockSize){o(this,N),b=0;break}}else for(;M<S;)if(N[b++]=x[M++],b==this.blockSize){o(this,N),b=0;break}}this.h=b,this.o+=S},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var P=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=P&255,P/=256;for(this.u(x),x=Array(16),S=P=0;4>S;++S)for(var N=0;32>N;N+=8)x[P++]=this.g[S]>>>N&255;return x};function a(x,S){var P=d;return Object.prototype.hasOwnProperty.call(P,x)?P[x]:P[x]=S(x)}function c(x,S){this.h=S;for(var P=[],N=!0,b=x.length-1;0<=b;b--){var M=x[b]|0;N&&M==S||(P[b]=M,N=!1)}this.g=P}var d={};function p(x){return-128<=x&&128>x?a(x,function(S){return new c([S|0],0>S?-1:0)}):new c([x|0],0>x?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return I;if(0>x)return q(y(-x));for(var S=[],P=1,N=0;x>=P;N++)S[N]=x/P|0,P*=4294967296;return new c(S,0)}function E(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return q(E(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=y(Math.pow(S,8)),N=I,b=0;b<x.length;b+=8){var M=Math.min(8,x.length-b),R=parseInt(x.substring(b,b+M),S);8>M?(M=y(Math.pow(S,M)),N=N.j(M).add(y(R))):(N=N.j(P),N=N.add(y(R)))}return N}var I=p(0),T=p(1),V=p(16777216);i=c.prototype,i.m=function(){if(H(this))return-q(this).m();for(var x=0,S=1,P=0;P<this.g.length;P++){var N=this.i(P);x+=(0<=N?N:4294967296+N)*S,S*=4294967296}return x},i.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(j(this))return"0";if(H(this))return"-"+q(this).toString(x);for(var S=y(Math.pow(x,6)),P=this,N="";;){var b=ue(P,S).g;P=Ee(P,b.j(S));var M=((0<P.g.length?P.g[0]:P.h)>>>0).toString(x);if(P=b,j(P))return M+N;for(;6>M.length;)M="0"+M;N=M+N}},i.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function j(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function H(x){return x.h==-1}i.l=function(x){return x=Ee(this,x),H(x)?-1:j(x)?0:1};function q(x){for(var S=x.g.length,P=[],N=0;N<S;N++)P[N]=~x.g[N];return new c(P,~x.h).add(T)}i.abs=function(){return H(this)?q(this):this},i.add=function(x){for(var S=Math.max(this.g.length,x.g.length),P=[],N=0,b=0;b<=S;b++){var M=N+(this.i(b)&65535)+(x.i(b)&65535),R=(M>>>16)+(this.i(b)>>>16)+(x.i(b)>>>16);N=R>>>16,M&=65535,R&=65535,P[b]=R<<16|M}return new c(P,P[P.length-1]&-2147483648?-1:0)};function Ee(x,S){return x.add(q(S))}i.j=function(x){if(j(this)||j(x))return I;if(H(this))return H(x)?q(this).j(q(x)):q(q(this).j(x));if(H(x))return q(this.j(q(x)));if(0>this.l(V)&&0>x.l(V))return y(this.m()*x.m());for(var S=this.g.length+x.g.length,P=[],N=0;N<2*S;N++)P[N]=0;for(N=0;N<this.g.length;N++)for(var b=0;b<x.g.length;b++){var M=this.i(N)>>>16,R=this.i(N)&65535,ht=x.i(b)>>>16,At=x.i(b)&65535;P[2*N+2*b]+=R*At,J(P,2*N+2*b),P[2*N+2*b+1]+=M*At,J(P,2*N+2*b+1),P[2*N+2*b+1]+=R*ht,J(P,2*N+2*b+1),P[2*N+2*b+2]+=M*ht,J(P,2*N+2*b+2)}for(N=0;N<S;N++)P[N]=P[2*N+1]<<16|P[2*N];for(N=S;N<2*S;N++)P[N]=0;return new c(P,0)};function J(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function te(x,S){this.g=x,this.h=S}function ue(x,S){if(j(S))throw Error("division by zero");if(j(x))return new te(I,I);if(H(x))return S=ue(q(x),S),new te(q(S.g),q(S.h));if(H(S))return S=ue(x,q(S)),new te(q(S.g),S.h);if(30<x.g.length){if(H(x)||H(S))throw Error("slowDivide_ only works with positive integers.");for(var P=T,N=S;0>=N.l(x);)P=de(P),N=de(N);var b=_e(P,1),M=_e(N,1);for(N=_e(N,2),P=_e(P,2);!j(N);){var R=M.add(N);0>=R.l(x)&&(b=b.add(P),M=R),N=_e(N,1),P=_e(P,1)}return S=Ee(x,b.j(S)),new te(b,S)}for(b=I;0<=x.l(S);){for(P=Math.max(1,Math.floor(x.m()/S.m())),N=Math.ceil(Math.log(P)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),M=y(P),R=M.j(S);H(R)||0<R.l(x);)P-=N,M=y(P),R=M.j(S);j(M)&&(M=T),b=b.add(M),x=Ee(x,R)}return new te(b,x)}i.A=function(x){return ue(this,x).h},i.and=function(x){for(var S=Math.max(this.g.length,x.g.length),P=[],N=0;N<S;N++)P[N]=this.i(N)&x.i(N);return new c(P,this.h&x.h)},i.or=function(x){for(var S=Math.max(this.g.length,x.g.length),P=[],N=0;N<S;N++)P[N]=this.i(N)|x.i(N);return new c(P,this.h|x.h)},i.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),P=[],N=0;N<S;N++)P[N]=this.i(N)^x.i(N);return new c(P,this.h^x.h)};function de(x){for(var S=x.g.length+1,P=[],N=0;N<S;N++)P[N]=x.i(N)<<1|x.i(N-1)>>>31;return new c(P,x.h)}function _e(x,S){var P=S>>5;S%=32;for(var N=x.g.length-P,b=[],M=0;M<N;M++)b[M]=0<S?x.i(M+P)>>>S|x.i(M+P+1)<<32-S:x.i(M+P);return new c(b,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rE=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=E,Fi=c}).apply(typeof Wy<"u"?Wy:typeof self<"u"?self:typeof window<"u"?window:{});var Sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iE,_l,sE,bc,Kf,oE,aE,lE;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sc=="object"&&Sc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function o(u,m){if(m)e:{var _=r;u=u.split(".");for(var w=0;w<u.length-1;w++){var L=u[w];if(!(L in _))break e;_=_[L]}u=u[u.length-1],w=_[u],m=m(w),m!=w&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function a(u,m){u instanceof String&&(u+="");var _=0,w=!1,L={next:function(){if(!w&&_<u.length){var $=_++;return{value:m($,u[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(u){return u||function(){return a(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,_){return u.call.apply(u.bind,arguments)}function I(u,m,_){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,w),u.apply(m,L)}}return function(){return u.apply(m,arguments)}}function T(u,m,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:I,T.apply(null,arguments)}function V(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function j(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(w,L,$){for(var ne=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)ne[Je-2]=arguments[Je];return m.prototype[L].apply(w,ne)}}function H(u){const m=u.length;if(0<m){const _=Array(m);for(let w=0;w<m;w++)_[w]=u[w];return _}return[]}function q(u,m){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(p(w)){const L=u.length||0,$=w.length||0;u.length=L+$;for(let ne=0;ne<$;ne++)u[L+ne]=w[ne]}else u.push(w)}}class Ee{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function J(u){return/^[\s\xa0]*$/.test(u)}function te(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function ue(u){return ue[" "](u),u}ue[" "]=function(){};var de=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function _e(u,m,_){for(const w in u)m.call(_,u[w],w,u)}function x(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,m){let _,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(_ in w)u[_]=w[_];for(let $=0;$<P.length;$++)_=P[$],Object.prototype.hasOwnProperty.call(w,_)&&(u[_]=w[_])}}function b(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function M(u){d.setTimeout(()=>{throw u},0)}function R(){var u=we;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ht{constructor(){this.h=this.g=null}add(m,_){const w=At.get();w.set(m,_),this.h?this.h.next=w:this.g=w,this.h=w}}var At=new Ee(()=>new Dt,u=>u.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let We,ie=!1,we=new ht,ae=()=>{const u=d.Promise.resolve(void 0);We=()=>{u.then(O)}};var O=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){M(_)}var m=At;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ie=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,m),d.removeEventListener("test",_,m)}catch{}return u}();function be(u,m){if(ge.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(de){e:{try{ue(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Me[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&be.aa.h.call(this)}}j(be,ge);var Me={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),qe=0;function Ye(u,m,_,w,L){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!w,this.ha=L,this.key=++qe,this.da=this.fa=!1}function _t(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Bn(u){this.src=u,this.g={},this.h=0}Bn.prototype.add=function(u,m,_,w,L){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var ne=or(u,m,w,L);return-1<ne?(m=u[ne],_||(m.fa=!1)):(m=new Ye(m,this.src,$,!!w,L),m.fa=_,u.push(m)),m};function Zr(u,m){var _=m.type;if(_ in u.g){var w=u.g[_],L=Array.prototype.indexOf.call(w,m,void 0),$;($=0<=L)&&Array.prototype.splice.call(w,L,1),$&&(_t(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function or(u,m,_,w){for(var L=0;L<u.length;++L){var $=u[L];if(!$.da&&$.listener==m&&$.capture==!!_&&$.ha==w)return L}return-1}var ar="closure_lm_"+(1e6*Math.random()|0),Pr={};function ei(u,m,_,w,L){if(Array.isArray(m)){for(var $=0;$<m.length;$++)ei(u,m[$],_,w,L);return null}return _=xe(_),u&&u[ze]?u.K(m,_,y(w)?!!w.capture:!1,L):ti(u,m,_,!1,w,L)}function ti(u,m,_,w,L,$){if(!m)throw Error("Invalid event type");var ne=y(L)?!!L.capture:!!L,Je=Pe(u);if(Je||(u[ar]=Je=new Bn(u)),_=Je.add(m,_,w,ne,$),_.proxy)return _;if(w=Wi(),_.proxy=w,w.src=u,w.listener=_,u.addEventListener)De||(L=ne),L===void 0&&(L=!1),u.addEventListener(m.toString(),w,L);else if(u.attachEvent)u.attachEvent(ce(m.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Wi(){function u(_){return m.call(u.src,u.listener,_)}const m=Ae;return u}function G(u,m,_,w,L){if(Array.isArray(m))for(var $=0;$<m.length;$++)G(u,m[$],_,w,L);else w=y(w)?!!w.capture:!!w,_=xe(_),u&&u[ze]?(u=u.i,m=String(m).toString(),m in u.g&&($=u.g[m],_=or($,_,w,L),-1<_&&(_t($[_]),Array.prototype.splice.call($,_,1),$.length==0&&(delete u.g[m],u.h--)))):u&&(u=Pe(u))&&(m=u.g[m.toString()],u=-1,m&&(u=or(m,_,w,L)),(_=-1<u?m[u]:null)&&re(_))}function re(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ze])Zr(m.i,u);else{var _=u.type,w=u.proxy;m.removeEventListener?m.removeEventListener(_,w,u.capture):m.detachEvent?m.detachEvent(ce(_),w):m.addListener&&m.removeListener&&m.removeListener(w),(_=Pe(m))?(Zr(_,u),_.h==0&&(_.src=null,m[ar]=null)):_t(u)}}}function ce(u){return u in Pr?Pr[u]:Pr[u]="on"+u}function Ae(u,m){if(u.da)u=!0;else{m=new be(m,this);var _=u.listener,w=u.ha||u.src;u.fa&&re(u),u=_.call(w,m)}return u}function Pe(u){return u=u[ar],u instanceof Bn?u:null}var Xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function xe(u){return typeof u=="function"?u:(u[Xe]||(u[Xe]=function(m){return u.handleEvent(m)}),u[Xe])}function Le(){W.call(this),this.i=new Bn(this),this.M=this,this.F=null}j(Le,W),Le.prototype[ze]=!0,Le.prototype.removeEventListener=function(u,m,_,w){G(this,u,m,_,w)};function nt(u,m){var _,w=u.F;if(w)for(_=[];w;w=w.F)_.push(w);if(u=u.M,w=m.type||m,typeof m=="string")m=new ge(m,u);else if(m instanceof ge)m.target=m.target||u;else{var L=m;m=new ge(w,u),N(m,L)}if(L=!0,_)for(var $=_.length-1;0<=$;$--){var ne=m.g=_[$];L=Rt(ne,w,!0,m)&&L}if(ne=m.g=u,L=Rt(ne,w,!0,m)&&L,L=Rt(ne,w,!1,m)&&L,_)for($=0;$<_.length;$++)ne=m.g=_[$],L=Rt(ne,w,!1,m)&&L}Le.prototype.N=function(){if(Le.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],w=0;w<_.length;w++)_t(_[w]);delete u.g[m],u.h--}}this.F=null},Le.prototype.K=function(u,m,_,w){return this.i.add(String(u),m,!1,_,w)},Le.prototype.L=function(u,m,_,w){return this.i.add(String(u),m,!0,_,w)};function Rt(u,m,_,w){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,$=0;$<m.length;++$){var ne=m[$];if(ne&&!ne.da&&ne.capture==_){var Je=ne.listener,Pt=ne.ha||ne.src;ne.fa&&Zr(u.i,ne),L=Je.call(Pt,w)!==!1&&L}}return L&&!w.defaultPrevented}function Qi(u,m,_){if(typeof u=="function")_&&(u=T(u,_));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function ni(u){u.g=Qi(()=>{u.g=null,u.i&&(u.i=!1,ni(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Yi extends W{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ni(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xi(u){W.call(this),this.h=u,this.g={}}j(Xi,W);var Sa=[];function Aa(u){_e(u.g,function(m,_){this.g.hasOwnProperty(_)&&re(m)},u),u.g={}}Xi.prototype.N=function(){Xi.aa.N.call(this),Aa(this)},Xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ra=d.JSON.stringify,Pa=d.JSON.parse,Ca=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Ji(){}Ji.prototype.h=null;function Js(u){return u.h||(u.h=u.i())}function Zs(){}var Pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lr(){ge.call(this,"d")}j(lr,ge);function eo(){ge.call(this,"c")}j(eo,ge);var ur={},ka=null;function Zi(){return ka=ka||new Le}ur.La="serverreachability";function xa(u){ge.call(this,ur.La,u)}j(xa,ge);function Cr(u){const m=Zi();nt(m,new xa(m))}ur.STAT_EVENT="statevent";function Na(u,m){ge.call(this,ur.STAT_EVENT,u),this.stat=m}j(Na,ge);function vt(u){const m=Zi();nt(m,new Na(m,u))}ur.Ma="timingevent";function to(u,m){ge.call(this,ur.Ma,u),this.size=m}j(to,ge);function zn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function es(){this.g=!0}es.prototype.xa=function(){this.g=!1};function ts(u,m,_,w,L,$){u.info(function(){if(u.g)if($)for(var ne="",Je=$.split("&"),Pt=0;Pt<Je.length;Pt++){var je=Je[Pt].split("=");if(1<je.length){var bt=je[0];je=je[1];var wt=bt.split("_");ne=2<=wt.length&&wt[1]=="type"?ne+(bt+"="+je+"&"):ne+(bt+"=redacted&")}}else ne=null;else ne=$;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+m+`
`+_+`
`+ne})}function no(u,m,_,w,L,$,ne){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+m+`
`+_+`
`+$+" "+ne})}function jn(u,m,_,w){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Qh(u,_)+(w?" "+w:"")})}function Da(u,m){u.info(function(){return"TIMEOUT: "+m})}es.prototype.info=function(){};function Qh(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var w=_[u];if(!(2>w.length)){var L=w[1];if(Array.isArray(L)&&!(1>L.length)){var $=L[0];if($!="noop"&&$!="stop"&&$!="close")for(var ne=1;ne<L.length;ne++)L[ne]=""}}}}return Ra(_)}catch{return m}}var ro={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},uu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$n;function ns(){}j(ns,Ji),ns.prototype.g=function(){return new XMLHttpRequest},ns.prototype.i=function(){return{}},$n=new ns;function qn(u,m,_,w){this.j=u,this.i=m,this.l=_,this.R=w||1,this.U=new Xi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cu}function cu(){this.i=null,this.g="",this.h=!1}var ba={},io={};function so(u,m,_){u.L=1,u.v=ai(_n(m)),u.m=_,u.P=!0,Va(u,null)}function Va(u,m){u.F=Date.now(),rt(u),u.A=_n(u.v);var _=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),ui(_.i,"t",w),u.C=0,_=u.j.J,u.h=new cu,u.g=Cu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Yi(T(u.Y,u,u.g),u.O)),m=u.U,_=u.g,w=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(Sa[0]=L.toString()),L=Sa);for(var $=0;$<L.length;$++){var ne=ei(_,L[$],w||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Cr(),ts(u.i,u.u,u.A,u.l,u.R,u.m)}qn.prototype.ca=function(u){u=u.target;const m=this.M;m&&un(u)==3?m.j():this.Y(u)},qn.prototype.Y=function(u){try{if(u==this.g)e:{const wt=un(this.g);var m=this.g.Ba();const xn=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||Ba(this.g)))){this.J||wt!=4||m==7||(m==8||0>=xn?Cr(3):Cr(2)),rs(this);var _=this.g.Z();this.X=_;t:if(hu(this)){var w=Ba(this.g);u="";var L=w.length,$=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cn(this),ri(this);var ne="";break t}this.h.i=new d.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,u+=this.h.i.decode(w[m],{stream:!($&&m==L-1)});w.length=0,this.h.g+=u,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=_==200,no(this.i,this.u,this.A,this.l,this.R,wt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Pt=this.g;if((Je=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(Je)){var je=Je;break t}}je=null}if(_=je)jn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oa(this,_);else{this.o=!1,this.s=3,vt(12),Cn(this),ri(this);break e}}if(this.P){_=!0;let En;for(;!this.J&&this.C<ne.length;)if(En=Yh(this,ne),En==io){wt==4&&(this.s=4,vt(14),_=!1),jn(this.i,this.l,null,"[Incomplete Response]");break}else if(En==ba){this.s=4,vt(15),jn(this.i,this.l,ne,"[Invalid Chunk]"),_=!1;break}else jn(this.i,this.l,En,null),Oa(this,En);if(hu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||ne.length!=0||this.h.h||(this.s=1,vt(16),_=!1),this.o=this.o&&_,!_)jn(this.i,this.l,ne,"[Invalid Chunked Response]"),Cn(this),ri(this);else if(0<ne.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),ja(bt),bt.M=!0,vt(11))}}else jn(this.i,this.l,ne,null),Oa(this,ne);wt==4&&Cn(this),this.o&&!this.J&&(wt==4?yo(this.j,this):(this.o=!1,rt(this)))}else ho(this.g),_==400&&0<ne.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),Cn(this),ri(this)}}}catch{}finally{}};function hu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Yh(u,m){var _=u.C,w=m.indexOf(`
`,_);return w==-1?io:(_=Number(m.substring(_,w)),isNaN(_)?ba:(w+=1,w+_>m.length?io:(m=m.slice(w,w+_),u.C=w+_,m)))}qn.prototype.cancel=function(){this.J=!0,Cn(this)};function rt(u){u.S=Date.now()+u.I,du(u,u.I)}function du(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=zn(T(u.ba,u),m)}function rs(u){u.B&&(d.clearTimeout(u.B),u.B=null)}qn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Da(this.i,this.A),this.L!=2&&(Cr(),vt(17)),Cn(this),this.s=2,ri(this)):du(this,this.S-u)};function ri(u){u.j.G==0||u.J||yo(u.j,u)}function Cn(u){rs(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Aa(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Oa(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||en(_.h,u))){if(!u.K&&en(_.h,u)&&_.G==3){try{var w=_.Da.g.parse(m)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)go(_),Qn(_);else break e;mo(_),vt(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=zn(T(_.Za,_),6e3));if(1>=pu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else br(_,11)}else if((u.K||_.g==u)&&go(_),!J(m))for(L=_.Da.g.parse(m),m=0;m<L.length;m++){let je=L[m];if(_.T=je[0],je=je[1],_.G==2)if(je[0]=="c"){_.K=je[1],_.ia=je[2];const bt=je[3];bt!=null&&(_.la=bt,_.j.info("VER="+_.la));const wt=je[4];wt!=null&&(_.Aa=wt,_.j.info("SVER="+_.Aa));const xn=je[5];xn!=null&&typeof xn=="number"&&0<xn&&(w=1.5*xn,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const En=u.g;if(En){const cs=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cs){var $=w.h;$.g||cs.indexOf("spdy")==-1&&cs.indexOf("quic")==-1&&cs.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Ma($,$.h),$.h=null))}if(w.D){const vo=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;vo&&(w.ya=vo,tt(w.I,w.D,vo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var ne=u;if(w.qa=Pu(w,w.J?w.ia:null,w.W),ne.K){mu(w.h,ne);var Je=ne,Pt=w.L;Pt&&(Je.I=Pt),Je.B&&(rs(Je),rt(Je)),w.g=ne}else us(w);0<_.i.length&&fr(_)}else je[0]!="stop"&&je[0]!="close"||br(_,7);else _.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?br(_,7):Ut(_):je[0]!="noop"&&_.l&&_.l.ta(je),_.v=0)}}Cr(4)}catch{}}var fu=class{constructor(u,m){this.g=u,this.map=m}};function is(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function pu(u){return u.h?1:u.g?u.g.size:0}function en(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Ma(u,m){u.g?u.g.add(m):u.h=m}function mu(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}is.prototype.cancel=function(){if(this.i=gu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function gu(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return H(u.i)}function oo(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,w=0;w<_;w++)m.push(u[w]);return m}m=[],_=0;for(w in u)m[_++]=u[w];return m}function ao(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const w in u)m[_++]=w;return m}}}function ii(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=ao(u),w=oo(u),L=w.length,$=0;$<L;$++)m.call(void 0,w[$],_&&_[$],u)}var ss=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var w=u[_].indexOf("="),L=null;if(0<=w){var $=u[_].substring(0,w);L=u[_].substring(w+1)}else $=u[_];m($,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function kr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof kr){this.h=u.h,os(this,u.j),this.o=u.o,this.g=u.g,si(this,u.s),this.l=u.l;var m=u.i,_=new cr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),oi(this,_),this.m=u.m}else u&&(m=String(u).match(ss))?(this.h=!1,os(this,m[1]||"",!0),this.o=Be(m[2]||""),this.g=Be(m[3]||"",!0),si(this,m[4]),this.l=Be(m[5]||"",!0),oi(this,m[6]||"",!0),this.m=Be(m[7]||"")):(this.h=!1,this.i=new cr(null,this.h))}kr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(li(m,lo,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(li(m,lo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(li(_,_.charAt(0)=="/"?vu:_u,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",li(_,La)),u.join("")};function _n(u){return new kr(u)}function os(u,m,_){u.j=_?Be(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function si(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function oi(u,m,_){m instanceof cr?(u.i=m,hr(u.i,u.h)):(_||(m=li(m,Eu)),u.i=new cr(m,u.h))}function tt(u,m,_){u.i.set(m,_)}function ai(u){return tt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Be(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function li(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,yu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function yu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var lo=/[#\/\?@]/g,_u=/[#\?:]/g,vu=/[#\?]/g,Eu=/[#\?@]/g,La=/#/g;function cr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Ft(u){u.g||(u.g=new Map,u.h=0,u.i&&Xh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}i=cr.prototype,i.add=function(u,m){Ft(this),this.i=null,u=kn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Kn(u,m){Ft(u),m=kn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Hn(u,m){return Ft(u),m=kn(u,m),u.g.has(m)}i.forEach=function(u,m){Ft(this),this.g.forEach(function(_,w){_.forEach(function(L){u.call(m,L,w,this)},this)},this)},i.na=function(){Ft(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let w=0;w<m.length;w++){const L=u[w];for(let $=0;$<L.length;$++)_.push(m[w])}return _},i.V=function(u){Ft(this);let m=[];if(typeof u=="string")Hn(this,u)&&(m=m.concat(this.g.get(kn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},i.set=function(u,m){return Ft(this),this.i=null,u=kn(this,u),Hn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},i.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function ui(u,m,_){Kn(u,m),0<_.length&&(u.i=null,u.g.set(kn(u,m),H(_)),u.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var w=m[_];const $=encodeURIComponent(String(w)),ne=this.V(w);for(w=0;w<ne.length;w++){var L=$;ne[w]!==""&&(L+="="+encodeURIComponent(String(ne[w]))),u.push(L)}}return this.i=u.join("&")};function kn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function hr(u,m){m&&!u.j&&(Ft(u),u.i=null,u.g.forEach(function(_,w){var L=w.toLowerCase();w!=L&&(Kn(this,w),ui(this,L,_))},u)),u.j=m}function Jh(u,m){const _=new es;if(d.Image){const w=new Image;w.onload=V(ln,_,"TestLoadImage: loaded",!0,m,w),w.onerror=V(ln,_,"TestLoadImage: error",!1,m,w),w.onabort=V(ln,_,"TestLoadImage: abort",!1,m,w),w.ontimeout=V(ln,_,"TestLoadImage: timeout",!1,m,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else m(!1)}function wu(u,m){const _=new es,w=new AbortController,L=setTimeout(()=>{w.abort(),ln(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:w.signal}).then($=>{clearTimeout(L),$.ok?ln(_,"TestPingServer: ok",!0,m):ln(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),ln(_,"TestPingServer: error",!1,m)})}function ln(u,m,_,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(_)}catch{}}function Zh(){this.g=new Ca}function Iu(u,m,_){const w=_||"";try{ii(u,function(L,$){let ne=L;y(L)&&(ne=Ra(L)),m.push(w+$+"="+encodeURIComponent(ne))})}catch(L){throw m.push(w+"type="+encodeURIComponent("_badmap")),L}}function xr(u){this.l=u.Ub||null,this.j=u.eb||!1}j(xr,Ji),xr.prototype.g=function(){return new as(this.l,this.j)},xr.prototype.i=function(u){return function(){return u}}({});function as(u,m){Le.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(as,Le),i=as.prototype,i.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Wn(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gn(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tu(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tu(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Gn(this):Wn(this),this.readyState==3&&Tu(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,Gn(this))},i.Qa=function(u){this.g&&(this.response=u,Gn(this))},i.ga=function(){this.g&&Gn(this)};function Gn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Wn(u)}i.setRequestHeader=function(u,m){this.u.append(u,m)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Wn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(as.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Nr(u){let m="";return _e(u,function(_,w){m+=w,m+=":",m+=_,m+=`\r
`}),m}function ci(u,m,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=Nr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):tt(u,m,_))}function at(u){Le.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(at,Le);var ed=/^https?$/i,Fa=["POST","PUT"];i=at.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,m,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$n.g(),this.v=this.o?Js(this.o):Js($n),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch($){ls(this,$);return}if(u=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)_.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())_.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),L=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Fa,m,void 0))||w||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ne]of _)this.g.setRequestHeader($,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{co(this),this.u=!0,this.g.send(u),this.u=!1}catch($){ls(this,$)}};function ls(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,uo(u),vn(u)}function uo(u){u.A||(u.A=!0,nt(u,"complete"),nt(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,nt(this,"complete"),nt(this,"abort"),vn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vn(this,!0)),at.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ua(this):this.bb())},i.bb=function(){Ua(this)};function Ua(u){if(u.h&&typeof c<"u"&&(!u.v[1]||un(u)!=4||u.Z()!=2)){if(u.u&&un(u)==4)Qi(u.Ea,0,u);else if(nt(u,"readystatechange"),un(u)==4){u.h=!1;try{const ne=u.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var w;if(w=ne===0){var L=String(u.D).match(ss)[1]||null;!L&&d.self&&d.self.location&&(L=d.self.location.protocol.slice(0,-1)),w=!ed.test(L?L.toLowerCase():"")}_=w}if(_)nt(u,"complete"),nt(u,"success");else{u.m=6;try{var $=2<un(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",uo(u)}}finally{vn(u)}}}}function vn(u,m){if(u.g){co(u);const _=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||nt(u,"ready");try{_.onreadystatechange=w}catch{}}}function co(u){u.I&&(d.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function un(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Pa(m)}};function Ba(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ho(u){const m={};u=(u.g&&2<=un(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(J(u[w]))continue;var _=b(u[w]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=m[L]||[];m[L]=$,$.push(_)}x(m,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dr(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function za(u){this.Aa=0,this.i=[],this.j=new es,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dr("baseRetryDelayMs",5e3,u),this.cb=dr("retryDelaySeedMs",1e4,u),this.Wa=dr("forwardChannelMaxRetries",2,u),this.wa=dr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new is(u&&u.concurrentRequestLimit),this.Da=new Zh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=za.prototype,i.la=8,i.G=1,i.connect=function(u,m,_,w){vt(0),this.W=u,this.H=m||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=Pu(this,null,this.W),fr(this)};function Ut(u){if(fo(u),u.G==3){var m=u.U++,_=_n(u.I);if(tt(_,"SID",u.K),tt(_,"RID",m),tt(_,"TYPE","terminate"),Dr(u,_),m=new qn(u,u.j,m),m.L=2,m.v=ai(_n(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=m.v,_=!0),_||(m.g=Cu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),rt(m)}Ru(u)}function Qn(u){u.g&&(ja(u),u.g.cancel(),u.g=null)}function fo(u){Qn(u),u.u&&(d.clearTimeout(u.u),u.u=null),go(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function fr(u){if(!yn(u.h)&&!u.s){u.s=!0;var m=u.Ga;We||ae(),ie||(We(),ie=!0),we.add(m,u),u.B=0}}function td(u,m){return pu(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=zn(T(u.Ga,u,m),Au(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new qn(this,this.j,u);let $=this.o;if(this.S&&($?($=S($),N($,this.S)):$=this.S),this.m!==null||this.O||(L.H=$,$=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(m+=w,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=hi(this,L,m),_=_n(this.I),tt(_,"RID",u),tt(_,"CVER",22),this.D&&tt(_,"X-HTTP-Session-Id",this.D),Dr(this,_),$&&(this.O?m="headers="+encodeURIComponent(String(Nr($)))+"&"+m:this.m&&ci(_,this.m,$)),Ma(this.h,L),this.Ua&&tt(_,"TYPE","init"),this.P?(tt(_,"$req",m),tt(_,"SID","null"),L.T=!0,so(L,_,null)):so(L,_,m),this.G=2}}else this.G==3&&(u?po(this,u):this.i.length==0||yn(this.h)||po(this))};function po(u,m){var _;m?_=m.l:_=u.U++;const w=_n(u.I);tt(w,"SID",u.K),tt(w,"RID",_),tt(w,"AID",u.T),Dr(u,w),u.m&&u.o&&ci(w,u.m,u.o),_=new qn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=hi(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ma(u.h,_),so(_,w,m)}function Dr(u,m){u.H&&_e(u.H,function(_,w){tt(m,w,_)}),u.l&&ii({},function(_,w){tt(m,w,_)})}function hi(u,m,_){_=Math.min(u.i.length,_);var w=u.l?T(u.l.Na,u.l,u):null;e:{var L=u.i;let $=-1;for(;;){const ne=["count="+_];$==-1?0<_?($=L[0].g,ne.push("ofs="+$)):$=0:ne.push("ofs="+$);let Je=!0;for(let Pt=0;Pt<_;Pt++){let je=L[Pt].g;const bt=L[Pt].map;if(je-=$,0>je)$=Math.max(0,L[Pt].g-100),Je=!1;else try{Iu(bt,ne,"req"+je+"_")}catch{w&&w(bt)}}if(Je){w=ne.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,w}function us(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;We||ae(),ie||(We(),ie=!0),we.add(m,u),u.v=0}}function mo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=zn(T(u.Fa,u),Au(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,Su(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=zn(T(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),Qn(this),Su(this))};function ja(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function Su(u){u.g=new qn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=_n(u.qa);tt(m,"RID","rpc"),tt(m,"SID",u.K),tt(m,"AID",u.T),tt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&tt(m,"TO",u.ja),tt(m,"TYPE","xmlhttp"),Dr(u,m),u.m&&u.o&&ci(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ai(_n(m)),_.m=null,_.P=!0,Va(_,u)}i.Za=function(){this.C!=null&&(this.C=null,Qn(this),mo(this),vt(19))};function go(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function yo(u,m){var _=null;if(u.g==m){go(u),ja(u),u.g=null;var w=2}else if(en(u.h,m))_=m.D,mu(u.h,m),w=1;else return;if(u.G!=0){if(m.o)if(w==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var L=u.B;w=Zi(),nt(w,new to(w,_)),fr(u)}else us(u);else if(L=m.s,L==3||L==0&&0<m.X||!(w==1&&td(u,m)||w==2&&mo(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),L){case 1:br(u,5);break;case 4:br(u,10);break;case 3:br(u,6);break;default:br(u,2)}}}function Au(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function br(u,m){if(u.j.info("Error code "+m),m==2){var _=T(u.fb,u),w=u.Xa;const L=!w;w=new kr(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||os(w,"https"),ai(w),L?Jh(w.toString(),_):wu(w.toString(),_)}else vt(2);u.G=0,u.l&&u.l.sa(m),Ru(u),fo(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function Ru(u){if(u.G=0,u.ka=[],u.l){const m=gu(u.h);(m.length!=0||u.i.length!=0)&&(q(u.ka,m),q(u.ka,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.ra()}}function Pu(u,m,_){var w=_ instanceof kr?_n(_):new kr(_);if(w.g!="")m&&(w.g=m+"."+w.g),si(w,w.s);else{var L=d.location;w=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var $=new kr(null);w&&os($,w),m&&($.g=m),L&&si($,L),_&&($.l=_),w=$}return _=u.D,m=u.ya,_&&m&&tt(w,_,m),tt(w,"VER",u.la),Dr(u,w),w}function Cu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new at(new xr({eb:_})):new at(u.pa),m.Ha(u.J),m}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function $a(){}i=$a.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function _o(){}_o.prototype.g=function(u,m){return new tn(u,m)};function tn(u,m){Le.call(this),this.g=new za(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!J(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!J(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new pr(this)}j(tn,Le),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Ut(this.g)},tn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Ra(u),u=_);m.i.push(new fu(m.Ya++,u)),m.G==3&&fr(m)},tn.prototype.N=function(){this.g.l=null,delete this.j,Ut(this.g),delete this.g,tn.aa.N.call(this)};function ku(u){lr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}j(ku,lr);function xu(){eo.call(this),this.status=1}j(xu,eo);function pr(u){this.g=u}j(pr,$a),pr.prototype.ua=function(){nt(this.g,"a")},pr.prototype.ta=function(u){nt(this.g,new ku(u))},pr.prototype.sa=function(u){nt(this.g,new xu)},pr.prototype.ra=function(){nt(this.g,"b")},_o.prototype.createWebChannel=_o.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,lE=function(){return new _o},aE=function(){return Zi()},oE=ur,Kf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ro.NO_ERROR=0,ro.TIMEOUT=8,ro.HTTP_ERROR=6,bc=ro,uu.COMPLETE="complete",sE=uu,Zs.EventType=Pn,Pn.OPEN="a",Pn.CLOSE="b",Pn.ERROR="c",Pn.MESSAGE="d",Le.prototype.listen=Le.prototype.K,_l=Zs,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,iE=at}).apply(typeof Sc<"u"?Sc:typeof self<"u"?self:typeof window<"u"?window:{});const Qy="@firebase/firestore",Yy="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let va="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new wp("@firebase/firestore");function Ho(){return Bs.logLevel}function Z(i,...e){if(Bs.logLevel<=Fe.DEBUG){const t=e.map(Sp);Bs.debug(`Firestore (${va}): ${i}`,...t)}}function sn(i,...e){if(Bs.logLevel<=Fe.ERROR){const t=e.map(Sp);Bs.error(`Firestore (${va}): ${i}`,...t)}}function zs(i,...e){if(Bs.logLevel<=Fe.WARN){const t=e.map(Sp);Bs.warn(`Firestore (${va}): ${i}`,...t)}}function Sp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,uE(i,r,t)}function uE(i,e,t){let r=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw sn(r),new Error(r)}function ve(i,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,i||uE(e,o,r)}function Ne(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Yr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(jt.UNAUTHENTICATED))}shutdown(){}}class HS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class GS{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let a=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Tr,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=a;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Tr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new cE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new jt(e)}}class WS{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class QS{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new WS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ve(this.o===void 0,3512);const r=a=>{a.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Z("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const o=a=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Xy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Xy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=XS(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%62))}return r}}function Re(i,e){return i<e?-1:i>e?1:0}function Hf(i,e){let t=0;for(;t<i.length&&t<e.length;){const r=i.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return Re(r,o);{const a=hE(),c=JS(a.encode(Jy(i,t)),a.encode(Jy(e,t)));return c!==0?c:Re(r,o)}}t+=r>65535?2:1}return Re(i.length,e.length)}function Jy(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function JS(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return Re(i[t],e[t]);return Re(i.length,e.length)}function na(i,e,t){return i.length===e.length&&i.every((r,o)=>t(r,e[o]))}function fE(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=-62135596800,e_=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*e_);return new mt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Zy)throw new se(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/e_}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Zy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new mt(0,0))}static max(){return new Ie(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="__name__";class vr{constructor(e,t,r){t===void 0?t=0:t>e.length&&pe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&pe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return vr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=vr.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Re(e.length,t.length)}static compareSegments(e,t){const r=vr.isNumericId(e),o=vr.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?vr.extractNumericId(e).compare(vr.extractNumericId(t)):Hf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fi.fromString(e.substring(4,e.length-2))}}class Qe extends vr{construct(e,t,r){return new Qe(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Qe(t)}static emptyPath(){return new Qe([])}}const ZS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends vr{construct(e,t,r){return new pt(e,t,r)}static isValidIdentifier(e){return ZS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===t_}static keyField(){return new pt([t_])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new se(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new se(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new se(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(r+=d,o++):(a(),o++)}if(a(),c)throw new se(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pt(t)}static emptyPath(){return new pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Qe.fromString(e))}static fromName(e){return new oe(Qe.fromString(e).popFirst(5))}static empty(){return new oe(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=-1;class Xc{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Gf(i){return i.fields.find(e=>e.kind===2)}function As(i){return i.fields.filter(e=>e.kind!==2)}Xc.UNKNOWN_ID=-1;class Vc{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ml{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ml(0,Rn.min())}}function e1(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(r===1e9?new mt(t+1,0):new mt(t,r));return new Rn(o,oe.empty(),e)}function pE(i){return new Rn(i.readTime,i.key,Ol)}class Rn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Rn(Ie.min(),oe.empty(),Ol)}static max(){return new Rn(Ie.max(),oe.empty(),Ol)}}function Ap(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=oe.comparator(i.documentKey,e.documentKey),t!==0?t:Re(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(i){if(i.code!==K.FAILED_PRECONDITION||i.message!==mE)throw i;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):F.reject(t)}static resolve(e){return new F((t,r)=>{t(e)})}static reject(e){return new F((t,r)=>{r(e)})}static waitFor(e){return new F((t,r)=>{let o=0,a=0,c=!1;e.forEach(d=>{++o,d.next(()=>{++a,c&&a===o&&t()},p=>r(p))}),c=!0,a===o&&t()})}static or(e){let t=F.resolve(!1);for(const r of e)t=t.next(o=>o?F.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,a)=>{r.push(t.call(this,o,a))}),this.waitFor(r)}static mapArray(e,t){return new F((r,o)=>{const a=e.length,c=new Array(a);let d=0;for(let p=0;p<a;p++){const y=p;t(e[y]).next(E=>{c[y]=E,++d,d===a&&r(c)},E=>o(E))}})}static doWhile(e,t){return new F((r,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):r()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="SimpleDb";class Eh{static open(e,t,r,o){try{return new Eh(t,e.transaction(o,r))}catch(a){throw new Sl(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Tr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Sl(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Rp(r.target.error);this.S.reject(new Sl(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Z(Sn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new n1(t)}}class Ui{static delete(e){return Z(Sn,"Removing database:",e),Cs(zv().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Yv())return!1;if(Ui.F())return!0;const e=xt(),t=Ui.M(e),r=0<t&&t<10,o=yE(e),a=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,Ui.M(xt())===12.2&&sn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(Z(Sn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=a=>{const c=a.target.result;t(c)},o.onblocked=()=>{r(new Sl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=a=>{const c=a.target.error;c.name==="VersionError"?r(new se(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new se(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Sl(e,c))},o.onupgradeneeded=a=>{Z(Sn,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const c=a.target.result;if(this.L!==null&&this.L!==a.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${a.oldVersion}, event.newVersion=${a.newVersion}, db.version=${c.version}`);this.B.q(c,o.transaction,a.oldVersion,this.version).next(()=>{Z(Sn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{const r=t.target;this.L=r.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,o){const a=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.k(e);const d=Eh.open(this.db,e,a?"readonly":"readwrite",r),p=o(d).next(y=>(d.v(),y)).catch(y=>(d.abort(y),F.reject(y))).toPromise();return p.catch(()=>{}),await d.D,p}catch(d){const p=d,y=p.name!=="FirebaseError"&&c<3;if(Z(Sn,"Transaction failed with error:",p.message,"Retrying:",y),this.close(),!y)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function yE(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class t1{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return Cs(this.K.delete())}}class Sl extends se{constructor(e,t){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ki(i){return i.name==="IndexedDbTransactionError"}class n1{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Z(Sn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Z(Sn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cs(r)}add(e){return Z(Sn,"ADD",this.store.name,e,e),Cs(this.store.add(e))}get(e){return Cs(this.store.get(e)).next(t=>(t===void 0&&(t=null),Z(Sn,"GET",this.store.name,e,t),t))}delete(e){return Z(Sn,"DELETE",this.store.name,e),Cs(this.store.delete(e))}count(){return Z(Sn,"COUNT",this.store.name),Cs(this.store.count())}J(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const a=o.getAll(r.range);return new F((c,d)=>{a.onerror=p=>{d(p.target.error)},a.onsuccess=p=>{c(p.target.result)}})}{const a=this.cursor(r),c=[];return this.Y(a,(d,p)=>{c.push(p)}).next(()=>c)}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new F((o,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}X(e,t){Z(Sn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.ee=!1;const o=this.cursor(r);return this.Y(o,(a,c,d)=>d.delete())}te(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Y(o,t)}ne(e){const t=this.cursor({});return new F((r,o)=>{t.onerror=a=>{const c=Rp(a.target.error);o(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}Y(e,t){const r=[];return new F((o,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void o();const p=new t1(d),y=t(d.primaryKey,d.value,p);if(y instanceof F){const E=y.catch(I=>(p.done(),F.reject(I)));r.push(E)}p.isDone?o():p.j===null?d.continue():d.continue(p.j)}}).next(()=>F.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cs(i){return new F((e,t)=>{i.onsuccess=r=>{const o=r.target.result;e(o)},i.onerror=r=>{const o=Rp(r.target.error);t(o)}})}let n_=!1;function Rp(i){const e=Ui.M(xt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return n_||(n_=!0,setTimeout(()=>{throw r},0)),r}}return i}const Al="IndexBackfiller";class r1{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){Z(Al,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.re.se();Z(Al,`Documents written: ${t}`)}catch(t){Ki(t)?Z(Al,"Ignoring IndexedDB error during index backfill: ",t):await Qs(t)}await this.ie(6e4)})}}class i1{constructor(e,t){this.localStore=e,this.persistence=t}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))}oe(e,t){const r=new Set;let o=t,a=!0;return F.doWhile(()=>a===!0&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return Z(Al,`Processing collection: ${c}`),this._e(e,c,o).next(d=>{o-=d,r.add(c)});a=!1})).next(()=>t-o)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ae(o,a)).next(d=>(Z(Al,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}ae(e,t){let r=e;return t.changes.forEach((o,a)=>{const c=pE(a);Ap(c,r)>0&&(r=c)}),new Rn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Ln.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=-1;function wh(i){return i==null}function Ll(i){return i===0&&1/i==-1/0}function s1(i){return typeof i=="number"&&Number.isInteger(i)&&!Ll(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc="";function Jt(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=r_(e)),e=o1(i.get(t),e);return r_(e)}function o1(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const a=i.charAt(o);switch(a){case"\0":t+="";break;case Jc:t+="";break;default:t+=a}}return t}function r_(i){return i+Jc+""}function wr(i){const e=i.length;if(ve(e>=2,64408,{path:i}),e===2)return ve(i.charAt(0)===Jc&&i.charAt(1)==="",56145,{path:i}),Qe.emptyPath();const t=e-2,r=[];let o="";for(let a=0;a<e;){const c=i.indexOf(Jc,a);switch((c<0||c>t)&&pe(50515,{path:i}),i.charAt(c+1)){case"":const d=i.substring(a,c);let p;o.length===0?p=d:(o+=d,p=o,o=""),r.push(p);break;case"":o+=i.substring(a,c),o+="\0";break;case"":o+=i.substring(a,c+1);break;default:pe(61167,{path:i})}a=c+2}return new Qe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="remoteDocuments",Jl="owner",Bo="owner",Fl="mutationQueues",a1="userId",nr="mutations",i_="batchId",Ds="userMutationsIndex",s_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(i,e){return[i,Jt(e)]}function _E(i,e,t){return[i,Jt(e),t]}const l1={},ra="documentMutations",Zc="remoteDocumentsV14",u1=["prefixPath","collectionGroup","readTime","documentId"],Mc="documentKeyIndex",c1=["prefixPath","collectionGroup","documentId"],vE="collectionGroupIndex",h1=["collectionGroup","readTime","prefixPath","documentId"],Ul="remoteDocumentGlobal",Wf="remoteDocumentGlobalKey",ia="targets",EE="queryTargetsIndex",d1=["canonicalId","targetId"],sa="targetDocuments",f1=["targetId","path"],Pp="documentTargetsIndex",p1=["path","targetId"],eh="targetGlobalKey",Os="targetGlobal",Bl="collectionParents",m1=["collectionId","parent"],oa="clientMetadata",g1="clientId",Ih="bundles",y1="bundleId",Th="namedQueries",_1="name",Cp="indexConfiguration",v1="indexId",Qf="collectionGroupIndex",E1="collectionGroup",Rl="indexState",w1=["indexId","uid"],wE="sequenceNumberIndex",I1=["uid","sequenceNumber"],Pl="indexEntries",T1=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],IE="documentKeyIndex",S1=["indexId","uid","orderedDocumentKey"],Sh="documentOverlays",A1=["userId","collectionPath","documentId"],Yf="collectionPathOverlayIndex",R1=["userId","collectionPath","largestBatchId"],TE="collectionGroupOverlayIndex",P1=["userId","collectionGroup","largestBatchId"],kp="globals",C1="name",SE=[Fl,nr,ra,Rs,ia,Jl,Os,sa,oa,Ul,Bl,Ih,Th],k1=[...SE,Sh],AE=[Fl,nr,ra,Zc,ia,Jl,Os,sa,oa,Ul,Bl,Ih,Th,Sh],RE=AE,xp=[...RE,Cp,Rl,Pl],x1=xp,PE=[...xp,kp],N1=PE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf extends gE{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function Nt(i,e){const t=Ne(i);return Ui.N(t.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Hi(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function CE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||$t.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ac(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ac(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ac(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ac(this.root,e,this.comparator,!0)}}class Ac{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??$t.RED,this.left=o??$t.EMPTY,this.right=a??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new $t(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return $t.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,t,r,o,a){return this}insert(e,t,r){return new $t(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new a_(this.data.getIterator())}getIteratorFrom(e){return new a_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new et(this.comparator);return t.data=e,t}}class a_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zo(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new gn([])}unionWith(e){let t=new et(pt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return na(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new kE("Invalid base64 string: "+a):a}}(e);return new St(t)}static fromUint8Array(e){const t=function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a}(e);return new St(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const D1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(i){if(ve(!!i,39018),typeof i=="string"){let e=0;const t=D1.exec(i);if(ve(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ut(i.seconds),nanos:ut(i.nanos)}}function ut(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Wr(i){return typeof i=="string"?St.fromBase64String(i):St.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="server_timestamp",NE="__type__",DE="__previous_value__",bE="__local_write_time__";function Np(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[NE])===null||t===void 0?void 0:t.stringValue)===xE}function Ah(i){const e=i.mapValue.fields[DE];return Np(e)?Ah(e):e}function zl(i){const e=Gr(i.mapValue.fields[bE].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,t,r,o,a,c,d,p,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=E}}const th="(default)";class js{constructor(e,t){this.projectId=e,this.database=t||th}static empty(){return new js("","")}get isDefaultDatabase(){return this.database===th}isEqual(e){return e instanceof js&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="__type__",VE="__max__",Vi={mapValue:{fields:{__type__:{stringValue:VE}}}},bp="__vector__",aa="value",Lc={nullValue:"NULL_VALUE"};function zi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Np(i)?4:OE(i)?9007199254740991:Rh(i)?10:11:pe(28295,{value:i})}function Ar(i,e){if(i===e)return!0;const t=zi(i);if(t!==zi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return zl(i).isEqual(zl(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=Gr(o.timestampValue),d=Gr(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,a){return Wr(o.bytesValue).isEqual(Wr(a.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,a){return ut(o.geoPointValue.latitude)===ut(a.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(a.geoPointValue.longitude)}(i,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return ut(o.integerValue)===ut(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=ut(o.doubleValue),d=ut(a.doubleValue);return c===d?Ll(c)===Ll(d):isNaN(c)&&isNaN(d)}return!1}(i,e);case 9:return na(i.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return function(o,a){const c=o.mapValue.fields||{},d=a.mapValue.fields||{};if(o_(c)!==o_(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Ar(c[p],d[p])))return!1;return!0}(i,e);default:return pe(52216,{left:i})}}function jl(i,e){return(i.values||[]).find(t=>Ar(t,e))!==void 0}function ji(i,e){if(i===e)return 0;const t=zi(i),r=zi(e);if(t!==r)return Re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(i.booleanValue,e.booleanValue);case 2:return function(a,c){const d=ut(a.integerValue||a.doubleValue),p=ut(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(i,e);case 3:return l_(i.timestampValue,e.timestampValue);case 4:return l_(zl(i),zl(e));case 5:return Hf(i.stringValue,e.stringValue);case 6:return function(a,c){const d=Wr(a),p=Wr(c);return d.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(a,c){const d=a.split("/"),p=c.split("/");for(let y=0;y<d.length&&y<p.length;y++){const E=Re(d[y],p[y]);if(E!==0)return E}return Re(d.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(a,c){const d=Re(ut(a.latitude),ut(c.latitude));return d!==0?d:Re(ut(a.longitude),ut(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return u_(i.arrayValue,e.arrayValue);case 10:return function(a,c){var d,p,y,E;const I=a.fields||{},T=c.fields||{},V=(d=I[aa])===null||d===void 0?void 0:d.arrayValue,j=(p=T[aa])===null||p===void 0?void 0:p.arrayValue,H=Re(((y=V==null?void 0:V.values)===null||y===void 0?void 0:y.length)||0,((E=j==null?void 0:j.values)===null||E===void 0?void 0:E.length)||0);return H!==0?H:u_(V,j)}(i.mapValue,e.mapValue);case 11:return function(a,c){if(a===Vi.mapValue&&c===Vi.mapValue)return 0;if(a===Vi.mapValue)return 1;if(c===Vi.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),y=c.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let I=0;I<p.length&&I<E.length;++I){const T=Hf(p[I],E[I]);if(T!==0)return T;const V=ji(d[p[I]],y[E[I]]);if(V!==0)return V}return Re(p.length,E.length)}(i.mapValue,e.mapValue);default:throw pe(23264,{Pe:t})}}function l_(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Re(i,e);const t=Gr(i),r=Gr(e),o=Re(t.seconds,r.seconds);return o!==0?o:Re(t.nanos,r.nanos)}function u_(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=ji(t[o],r[o]);if(a)return a}return Re(t.length,r.length)}function la(i){return Jf(i)}function Jf(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const r=Gr(t);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return Wr(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return oe.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=Jf(a);return r+"]"}(i.arrayValue):"mapValue"in i?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of r)a?a=!1:o+=",",o+=`${c}:${Jf(t.fields[c])}`;return o+"}"}(i.mapValue):pe(61005,{value:i})}function Fc(i){switch(zi(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ah(i);return e?16+Fc(e):16;case 5:return 2*i.stringValue.length;case 6:return Wr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,a)=>o+Fc(a),0)}(i.arrayValue);case 10:case 11:return function(r){let o=0;return Hi(r.fields,(a,c)=>{o+=a.length+Fc(c)}),o}(i.mapValue);default:throw pe(13486,{value:i})}}function $l(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Zf(i){return!!i&&"integerValue"in i}function ql(i){return!!i&&"arrayValue"in i}function c_(i){return!!i&&"nullValue"in i}function h_(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Uc(i){return!!i&&"mapValue"in i}function Rh(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Dp])===null||t===void 0?void 0:t.stringValue)===bp}function Cl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Hi(i.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Cl(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cl(i.arrayValue.values[t]);return e}return Object.assign({},i)}function OE(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===VE}const ME={mapValue:{fields:{[Dp]:{stringValue:bp},[aa]:{arrayValue:{}}}}};function V1(i){return"nullValue"in i?Lc:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?$l(js.empty(),oe.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Rh(i)?ME:{mapValue:{}}:pe(35942,{value:i})}function O1(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?$l(js.empty(),oe.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?ME:"mapValue"in i?Rh(i)?{mapValue:{}}:Vi:pe(61959,{value:i})}function d_(i,e){const t=ji(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function f_(i,e){const t=ji(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Uc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cl(t)}setAll(e){let t=pt.emptyPath(),r={},o=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=d.popLast()}c?r[d.lastSegment()]=Cl(c):o.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());Uc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Uc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Hi(t,(o,a)=>e[o]=a);for(const o of r)delete e[o]}clone(){return new Yt(Cl(this.value))}}function LE(i){const e=[];return Hi(i.fields,(t,r)=>{const o=new pt([t]);if(Uc(r)){const a=LE(r.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t,r,o,a,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new yt(e,0,Ie.min(),Ie.min(),Ie.min(),Yt.empty(),0)}static newFoundDocument(e,t,r,o){return new yt(e,1,t,Ie.min(),r,o,0)}static newNoDocument(e,t){return new yt(e,2,t,Ie.min(),Ie.min(),Yt.empty(),0)}static newUnknownDocument(e,t){return new yt(e,3,t,Ie.min(),Ie.min(),Yt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,t){this.position=e,this.inclusive=t}}function p_(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const a=e[o],c=i.position[o];if(a.field.isKeyField()?r=oe.comparator(oe.fromName(c.referenceValue),t.key):r=ji(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function m_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ar(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,t="asc"){this.field=e,this.dir=t}}function M1(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{}class Ue extends FE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new L1(e,t,r):t==="array-contains"?new B1(e,r):t==="in"?new qE(e,r):t==="not-in"?new z1(e,r):t==="array-contains-any"?new j1(e,r):new Ue(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new F1(e,r):new U1(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ji(t,this.value)):t!==null&&zi(this.value)===zi(t)&&this.matchesComparison(ji(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ze extends FE{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Ze(e,t)}matches(e){return ca(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ca(i){return i.op==="and"}function ep(i){return i.op==="or"}function Vp(i){return UE(i)&&ca(i)}function UE(i){for(const e of i.filters)if(e instanceof Ze)return!1;return!0}function tp(i){if(i instanceof Ue)return i.field.canonicalString()+i.op.toString()+la(i.value);if(Vp(i))return i.filters.map(e=>tp(e)).join(",");{const e=i.filters.map(t=>tp(t)).join(",");return`${i.op}(${e})`}}function BE(i,e){return i instanceof Ue?function(r,o){return o instanceof Ue&&r.op===o.op&&r.field.isEqual(o.field)&&Ar(r.value,o.value)}(i,e):i instanceof Ze?function(r,o){return o instanceof Ze&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((a,c,d)=>a&&BE(c,o.filters[d]),!0):!1}(i,e):void pe(19439)}function zE(i,e){const t=i.filters.concat(e);return Ze.create(t,i.op)}function jE(i){return i instanceof Ue?function(t){return`${t.field.canonicalString()} ${t.op} ${la(t.value)}`}(i):i instanceof Ze?function(t){return t.op.toString()+" {"+t.getFilters().map(jE).join(" ,")+"}"}(i):"Filter"}class L1 extends Ue{constructor(e,t,r){super(e,t,r),this.key=oe.fromName(r.referenceValue)}matches(e){const t=oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class F1 extends Ue{constructor(e,t){super(e,"in",t),this.keys=$E("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class U1 extends Ue{constructor(e,t){super(e,"not-in",t),this.keys=$E("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $E(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>oe.fromName(r.referenceValue))}class B1 extends Ue{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ql(t)&&jl(t.arrayValue,this.value)}}class qE extends Ue{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&jl(this.value.arrayValue,t)}}class z1 extends Ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jl(this.value.arrayValue,t)}}class j1 extends Ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ql(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t=null,r=[],o=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=c,this.endAt=d,this.Ie=null}}function np(i,e=null,t=[],r=[],o=null,a=null,c=null){return new $1(i,e,t,r,o,a,c)}function $s(i){const e=Ne(i);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>tp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),wh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>la(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>la(r)).join(",")),e.Ie=t}return e.Ie}function Zl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!M1(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!BE(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!m_(i.startAt,e.startAt)&&m_(i.endAt,e.endAt)}function nh(i){return oe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function rh(i,e){return i.filters.filter(t=>t instanceof Ue&&t.field.isEqual(e))}function g_(i,e,t){let r=Lc,o=!0;for(const a of rh(i,e)){let c=Lc,d=!0;switch(a.op){case"<":case"<=":c=V1(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,d=!1;break;case"!=":case"not-in":c=Lc}d_({value:r,inclusive:o},{value:c,inclusive:d})<0&&(r=c,o=d)}if(t!==null){for(let a=0;a<i.orderBy.length;++a)if(i.orderBy[a].field.isEqual(e)){const c=t.position[a];d_({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}function y_(i,e,t){let r=Vi,o=!0;for(const a of rh(i,e)){let c=Vi,d=!0;switch(a.op){case">=":case">":c=O1(a.value),d=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,d=!1;break;case"!=":case"not-in":c=Vi}f_({value:r,inclusive:o},{value:c,inclusive:d})>0&&(r=c,o=d)}if(t!==null){for(let a=0;a<i.orderBy.length;++a)if(i.orderBy[a].field.isEqual(e)){const c=t.position[a];f_({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t=null,r=[],o=[],a=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function q1(i,e,t,r,o,a,c,d){return new Ea(i,e,t,r,o,a,c,d)}function Ph(i){return new Ea(i)}function __(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function KE(i){return i.collectionGroup!==null}function kl(i){const e=Ne(i);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new et(pt.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(d=d.add(y.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Kl(a,r))}),t.has(pt.keyField().canonicalString())||e.Ee.push(new Kl(pt.keyField(),r))}return e.Ee}function Fn(i){const e=Ne(i);return e.de||(e.de=K1(e,kl(i))),e.de}function K1(i,e){if(i.limitType==="F")return np(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new Kl(o.field,a)});const t=i.endAt?new ua(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new ua(i.startAt.position,i.startAt.inclusive):null;return np(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function rp(i,e){const t=i.filters.concat([e]);return new Ea(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function ip(i,e,t){return new Ea(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Ch(i,e){return Zl(Fn(i),Fn(e))&&i.limitType===e.limitType}function HE(i){return`${$s(Fn(i))}|lt:${i.limitType}`}function Go(i){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>jE(o)).join(", ")}]`),wh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>la(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>la(o)).join(",")),`Target(${r})`}(Fn(i))}; limitType=${i.limitType})`}function eu(i,e){return e.isFoundDocument()&&function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):oe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(i,e)&&function(r,o){for(const a of kl(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(i,e)&&function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0}(i,e)&&function(r,o){return!(r.startAt&&!function(c,d,p){const y=p_(c,d,p);return c.inclusive?y<=0:y<0}(r.startAt,kl(r),o)||r.endAt&&!function(c,d,p){const y=p_(c,d,p);return c.inclusive?y>=0:y>0}(r.endAt,kl(r),o))}(i,e)}function H1(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function GE(i){return(e,t)=>{let r=!1;for(const o of kl(i)){const a=G1(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function G1(i,e,t){const r=i.field.isKeyField()?oe.comparator(e.key,t.key):function(a,c,d){const p=c.data.field(a),y=d.data.field(a);return p!==null&&y!==null?ji(p,y):pe(42886)}(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return pe(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,(t,r)=>{for(const[o,a]of r)e(o,a)})}isEmpty(){return CE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=new ct(oe.comparator);function An(){return W1}const WE=new ct(oe.comparator);function vl(...i){let e=WE;for(const t of i)e=e.insert(t.key,t);return e}function QE(i){let e=WE;return i.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ir(){return xl()}function YE(){return xl()}function xl(){return new Xr(i=>i.toString(),(i,e)=>i.isEqual(e))}const Q1=new ct(oe.comparator),Y1=new et(oe.comparator);function Ve(...i){let e=Y1;for(const t of i)e=e.add(t);return e}const X1=new et(Re);function J1(){return X1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ll(e)?"-0":e}}function XE(i){return{integerValue:""+i}}function Z1(i,e){return s1(e)?XE(e):Op(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this._=void 0}}function eA(i,e,t){return i instanceof Hl?function(o,a){const c={fields:{[NE]:{stringValue:xE},[bE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Np(a)&&(a=Ah(a)),a&&(c.fields[DE]=a),{mapValue:c}}(t,e):i instanceof ha?ZE(i,e):i instanceof da?ew(i,e):function(o,a){const c=JE(o,a),d=v_(c)+v_(o.Re);return Zf(c)&&Zf(o.Re)?XE(d):Op(o.serializer,d)}(i,e)}function tA(i,e,t){return i instanceof ha?ZE(i,e):i instanceof da?ew(i,e):t}function JE(i,e){return i instanceof Gl?function(r){return Zf(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Hl extends kh{}class ha extends kh{constructor(e){super(),this.elements=e}}function ZE(i,e){const t=tw(e);for(const r of i.elements)t.some(o=>Ar(o,r))||t.push(r);return{arrayValue:{values:t}}}class da extends kh{constructor(e){super(),this.elements=e}}function ew(i,e){let t=tw(e);for(const r of i.elements)t=t.filter(o=>!Ar(o,r));return{arrayValue:{values:t}}}class Gl extends kh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function v_(i){return ut(i.integerValue||i.doubleValue)}function tw(i){return ql(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,t){this.field=e,this.transform=t}}function rA(i,e){return i.field.isEqual(e.field)&&function(r,o){return r instanceof ha&&o instanceof ha||r instanceof da&&o instanceof da?na(r.elements,o.elements,Ar):r instanceof Gl&&o instanceof Gl?Ar(r.Re,o.Re):r instanceof Hl&&o instanceof Hl}(i.transform,e.transform)}class iA{constructor(e,t){this.version=e,this.transformResults=t}}class Xt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xt}static exists(e){return new Xt(void 0,e)}static updateTime(e){return new Xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bc(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class xh{}function nw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Nh(i.key,Xt.none()):new wa(i.key,i.data,Xt.none());{const t=i.data,r=Yt.empty();let o=new et(pt.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),o=o.add(a)}return new Jr(i.key,r,new gn(o.toArray()),Xt.none())}}function sA(i,e,t){i instanceof wa?function(o,a,c){const d=o.value.clone(),p=w_(o.fieldTransforms,a,c.transformResults);d.setAll(p),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(i,e,t):i instanceof Jr?function(o,a,c){if(!Bc(o.precondition,a))return void a.convertToUnknownDocument(c.version);const d=w_(o.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(rw(o)),p.setAll(d),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(i,e,t):function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Nl(i,e,t,r){return i instanceof wa?function(a,c,d,p){if(!Bc(a.precondition,c))return d;const y=a.value.clone(),E=I_(a.fieldTransforms,p,c);return y.setAll(E),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null}(i,e,t,r):i instanceof Jr?function(a,c,d,p){if(!Bc(a.precondition,c))return d;const y=I_(a.fieldTransforms,p,c),E=c.data;return E.setAll(rw(a)),E.setAll(y),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(I=>I.field))}(i,e,t,r):function(a,c,d){return Bc(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(i,e,t)}function oA(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),a=JE(r.transform,o||null);a!=null&&(t===null&&(t=Yt.empty()),t.set(r.field,a))}return t||null}function E_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&na(r,o,(a,c)=>rA(a,c))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class wa extends xh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Jr extends xh{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function rw(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}}),e}function w_(i,e,t){const r=new Map;ve(i.length===t.length,32656,{Ve:t.length,me:i.length});for(let o=0;o<t.length;o++){const a=i[o],c=a.transform,d=e.data.field(a.field);r.set(a.field,tA(c,d,t[o]))}return r}function I_(i,e,t){const r=new Map;for(const o of i){const a=o.transform,c=t.data.field(o.field);r.set(o.field,eA(a,c,e))}return r}class Nh extends xh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iw extends xh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&sA(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Nl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Nl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=YE();return this.mutations.forEach(o=>{const a=e.get(o.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(o.key)?null:d;const p=nw(c,d);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ie.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&na(this.mutations,e.mutations,(t,r)=>E_(t,r))&&na(this.baseMutations,e.baseMutations,(t,r)=>E_(t,r))}}class Lp{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ve(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let o=function(){return Q1}();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,r[c].version);return new Lp(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,$e;function lA(i){switch(i){case K.OK:return pe(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return pe(15467,{code:i})}}function sw(i){if(i===void 0)return sn("GRPC error has no .code"),K.UNKNOWN;switch(i){case Tt.OK:return K.OK;case Tt.CANCELLED:return K.CANCELLED;case Tt.UNKNOWN:return K.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return K.INTERNAL;case Tt.UNAVAILABLE:return K.UNAVAILABLE;case Tt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Tt.NOT_FOUND:return K.NOT_FOUND;case Tt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Tt.ABORTED:return K.ABORTED;case Tt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Tt.DATA_LOSS:return K.DATA_LOSS;default:return pe(39323,{code:i})}}($e=Tt||(Tt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new Fi([4294967295,4294967295],0);function T_(i){const e=hE().encode(i),t=new rE;return t.update(e),new Uint8Array(t.digest())}function S_(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Fi([t,r],0),new Fi([o,a],0)]}class Up{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new El(`Invalid padding: ${t}`);if(r<0)throw new El(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new El(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new El(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Fi.fromNumber(this.pe)}we(e,t,r){let o=e.add(t.multiply(Fi.fromNumber(r)));return o.compare(uA)===1&&(o=new Fi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=T_(e),[r,o]=S_(t);for(let a=0;a<this.hashCount;a++){const c=this.we(r,o,a);if(!this.be(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Up(a,o,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const t=T_(e),[r,o]=S_(t);for(let a=0;a<this.hashCount;a++){const c=this.we(r,o,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class El extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,tu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Dh(Ie.min(),o,new ct(Re),An(),Ve())}}class tu{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new tu(r,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t,r,o){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=o}}class ow{constructor(e,t){this.targetId=e,this.Ce=t}}class aw{constructor(e,t,r=St.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class A_{constructor(){this.Fe=0,this.Me=R_(),this.xe=St.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ve(),t=Ve(),r=Ve();return this.Me.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:pe(38017,{changeType:a})}}),new tu(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=R_()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ve(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class cA{constructor(e){this.ze=e,this.je=new Map,this.He=An(),this.Je=Rc(),this.Ye=Rc(),this.Ze=new ct(Re)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:pe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,r=e.Ce.count,o=this._t(t);if(o){const a=o.target;if(nh(a))if(r===0){const c=new oe(a.path);this.tt(t,c,yt.newNoDocument(c,Ie.min()))}else ve(r===1,20013,{expectedCount:r});else{const c=this.ut(t);if(c!==r){const d=this.ct(e),p=d?this.lt(d,e,c):1;if(p!==0){this.st(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let c,d;try{c=Wr(r).toUint8Array()}catch(p){if(p instanceof kE)return zs("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Up(c,o,a)}catch(p){return zs(p instanceof El?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.pe===0?null:d}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let o=0;return r.forEach(a=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.tt(t,a,null),o++)}),o}It(e){const t=new Map;this.je.forEach((a,c)=>{const d=this._t(c);if(d){if(a.current&&nh(d.target)){const p=new oe(d.target.path);this.Et(p).has(c)||this.dt(c,p)||this.tt(c,p,yt.newNoDocument(p,e))}a.Le&&(t.set(c,a.qe()),a.Qe())}});let r=Ve();this.Ye.forEach((a,c)=>{let d=!0;c.forEachWhile(p=>{const y=this._t(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(a))}),this.He.forEach((a,c)=>c.setReadTime(e));const o=new Dh(e,t,this.Ze,this.He,r);return this.He=An(),this.Je=Rc(),this.Ye=Rc(),this.Ze=new ct(Re),o}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new A_,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new et(Re),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new et(Re),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Z("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new A_),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Rc(){return new ct(oe.comparator)}function R_(){return new ct(oe.comparator)}const hA={asc:"ASCENDING",desc:"DESCENDING"},dA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fA={and:"AND",or:"OR"};class pA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sp(i,e){return i.useProto3Json||wh(e)?e:{value:e}}function fa(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function mA(i,e){return fa(i,e.toTimestamp())}function on(i){return ve(!!i,49232),Ie.fromTimestamp(function(t){const r=Gr(t);return new mt(r.seconds,r.nanos)}(i))}function Bp(i,e){return op(i,e).canonicalString()}function op(i,e){const t=function(o){return new Qe(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?t:t.child(e)}function uw(i){const e=Qe.fromString(i);return ve(_w(e),10190,{key:e.toString()}),e}function ih(i,e){return Bp(i.databaseId,e.path)}function Ms(i,e){const t=uw(e);if(t.get(1)!==i.databaseId.projectId)throw new se(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new se(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new oe(dw(t))}function cw(i,e){return Bp(i.databaseId,e)}function hw(i){const e=uw(i);return e.length===4?Qe.emptyPath():dw(e)}function ap(i){return new Qe(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function dw(i){return ve(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function P_(i,e,t){return{name:ih(i,e),fields:t.value.mapValue.fields}}function gA(i,e,t){const r=Ms(i,e.name),o=on(e.updateTime),a=e.createTime?on(e.createTime):Ie.min(),c=new Yt({mapValue:{fields:e.fields}}),d=yt.newFoundDocument(r,o,a,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function yA(i,e){let t;if("targetChange"in e){e.targetChange;const r=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:pe(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(y,E){return y.useProto3Json?(ve(E===void 0||typeof E=="string",58123),St.fromBase64String(E||"")):(ve(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),St.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(y){const E=y.code===void 0?K.UNKNOWN:sw(y.code);return new se(E,y.message||"")}(c);t=new aw(r,o,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Ms(i,r.document.name),a=on(r.document.updateTime),c=r.document.createTime?on(r.document.createTime):Ie.min(),d=new Yt({mapValue:{fields:r.document.fields}}),p=yt.newFoundDocument(o,a,c,d),y=r.targetIds||[],E=r.removedTargetIds||[];t=new zc(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Ms(i,r.document),a=r.readTime?on(r.readTime):Ie.min(),c=yt.newNoDocument(o,a),d=r.removedTargetIds||[];t=new zc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Ms(i,r.document),a=r.removedTargetIds||[];t=new zc([],a,o,null)}else{if(!("filter"in e))return pe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,c=new aA(o,a),d=r.targetId;t=new ow(d,c)}}return t}function sh(i,e){let t;if(e instanceof wa)t={update:P_(i,e.key,e.value)};else if(e instanceof Nh)t={delete:ih(i,e.key)};else if(e instanceof Jr)t={update:P_(i,e.key,e.data),updateMask:TA(e.fieldMask)};else{if(!(e instanceof iw))return pe(16599,{ft:e.type});t={verify:ih(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const d=c.transform;if(d instanceof Hl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ha)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof da)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Gl)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw pe(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:mA(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:pe(27497)}(i,e.precondition)),t}function lp(i,e){const t=e.currentDocument?function(a){return a.updateTime!==void 0?Xt.updateTime(on(a.updateTime)):a.exists!==void 0?Xt.exists(a.exists):Xt.none()}(e.currentDocument):Xt.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(c,d){let p=null;if("setToServerValue"in d)ve(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new Hl;else if("appendMissingElements"in d){const E=d.appendMissingElements.values||[];p=new ha(E)}else if("removeAllFromArray"in d){const E=d.removeAllFromArray.values||[];p=new da(E)}else"increment"in d?p=new Gl(c,d.increment):pe(16584,{proto:d});const y=pt.fromServerFormat(d.fieldPath);return new nA(y,p)}(i,o)):[];if(e.update){e.update.name;const o=Ms(i,e.update.name),a=new Yt({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(p){const y=p.fieldPaths||[];return new gn(y.map(E=>pt.fromServerFormat(E)))}(e.updateMask);return new Jr(o,a,c,t,r)}return new wa(o,a,t,r)}if(e.delete){const o=Ms(i,e.delete);return new Nh(o,t)}if(e.verify){const o=Ms(i,e.verify);return new iw(o,t)}return pe(1463,{proto:e})}function _A(i,e){return i&&i.length>0?(ve(e!==void 0,14353),i.map(t=>function(o,a){let c=o.updateTime?on(o.updateTime):on(a);return c.isEqual(Ie.min())&&(c=on(a)),new iA(c,o.transformResults||[])}(t,e))):[]}function fw(i,e){return{documents:[cw(i,e.path)]}}function pw(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=cw(i,o);const a=function(y){if(y.length!==0)return yw(Ze.create(y,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(y){if(y.length!==0)return y.map(E=>function(T){return{field:Wo(T.field),direction:EA(T.dir)}}(E))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=sp(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:t,parent:o}}function mw(i){let e=hw(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ve(r===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let a=[];t.where&&(a=function(I){const T=gw(I);return T instanceof Ze&&Vp(T)?T.getFilters():[T]}(t.where));let c=[];t.orderBy&&(c=function(I){return I.map(T=>function(j){return new Kl(Qo(j.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(T))}(t.orderBy));let d=null;t.limit&&(d=function(I){let T;return T=typeof I=="object"?I.value:I,wh(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(I){const T=!!I.before,V=I.values||[];return new ua(V,T)}(t.startAt));let y=null;return t.endAt&&(y=function(I){const T=!I.before,V=I.values||[];return new ua(V,T)}(t.endAt)),q1(e,o,c,a,d,"F",p,y)}function vA(i,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function gw(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Qo(t.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Qo(t.unaryFilter.field);return Ue.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Qo(t.unaryFilter.field);return Ue.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Qo(t.unaryFilter.field);return Ue.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}}(i):i.fieldFilter!==void 0?function(t){return Ue.create(Qo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return Ze.create(t.compositeFilter.filters.map(r=>gw(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return pe(1026)}}(t.compositeFilter.op))}(i):pe(30097,{filter:i})}function EA(i){return hA[i]}function wA(i){return dA[i]}function IA(i){return fA[i]}function Wo(i){return{fieldPath:i.canonicalString()}}function Qo(i){return pt.fromServerFormat(i.fieldPath)}function yw(i){return i instanceof Ue?function(t){if(t.op==="=="){if(h_(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NAN"}};if(c_(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(h_(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NOT_NAN"}};if(c_(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wo(t.field),op:wA(t.op),value:t.value}}}(i):i instanceof Ze?function(t){const r=t.getFilters().map(o=>yw(o));return r.length===1?r[0]:{compositeFilter:{op:IA(t.op),filters:r}}}(i):pe(54877,{filter:i})}function TA(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function _w(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,t,r,o,a=Ie.min(),c=Ie.min(),d=St.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new $r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e){this.wt=e}}function SA(i,e){let t;if(e.document)t=gA(i.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=oe.fromSegments(e.noDocument.path),o=Ks(e.noDocument.readTime);t=yt.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe(56709);{const r=oe.fromSegments(e.unknownDocument.path),o=Ks(e.unknownDocument.version);t=yt.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(o){const a=new mt(o[0],o[1]);return Ie.fromTimestamp(a)}(e.readTime)),t}function C_(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:oh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(a,c){return{name:ih(a,c.key),fields:c.data.value.mapValue.fields,updateTime:fa(a,c.version.toTimestamp()),createTime:fa(a,c.createTime.toTimestamp())}}(i.wt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:qs(e.version)};else{if(!e.isUnknownDocument())return pe(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:qs(e.version)}}return r}function oh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function qs(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ks(i){const e=new mt(i.seconds,i.nanoseconds);return Ie.fromTimestamp(e)}function ks(i,e){const t=(e.baseMutations||[]).map(a=>lp(i.wt,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const d=e.mutations[a+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map(a=>lp(i.wt,a)),o=mt.fromMillis(e.localWriteTimeMs);return new Mp(e.batchId,o,t,r)}function wl(i){const e=Ks(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?Ks(i.lastLimboFreeSnapshotVersion):Ie.min();let r;return r=function(a){return a.documents!==void 0}(i.query)?function(a){const c=a.documents.length;return ve(c===1,1966,{count:c}),Fn(Ph(hw(a.documents[0])))}(i.query):function(a){return Fn(mw(a))}(i.query),new $r(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,St.fromBase64String(i.resumeToken))}function Ew(i,e){const t=qs(e.snapshotVersion),r=qs(e.lastLimboFreeSnapshotVersion);let o;o=nh(e.target)?fw(i.wt,e.target):pw(i.wt,e.target).gt;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$s(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function ww(i){const e=mw({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ip(e,e.limit,"L"):e}function Nf(i,e){return new Fp(e.largestBatchId,lp(i.wt,e.overlayMutation))}function k_(i,e){const t=e.path.lastSegment();return[i,Jt(e.path.popLast()),t]}function x_(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:qs(r.readTime),documentKey:Jt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{getBundleMetadata(e,t){return N_(e).get(t).next(r=>{if(r)return function(a){return{id:a.bundleId,createTime:Ks(a.createTime),version:a.version}}(r)})}saveBundleMetadata(e,t){return N_(e).put(function(o){return{bundleId:o.id,createTime:qs(on(o.createTime)),version:o.version}}(t))}getNamedQuery(e,t){return D_(e).get(t).next(r=>{if(r)return function(a){return{name:a.name,query:ww(a.bundledQuery),readTime:Ks(a.readTime)}}(r)})}saveNamedQuery(e,t){return D_(e).put(function(o){return{name:o.name,readTime:qs(on(o.readTime)),bundledQuery:o.bundledQuery}}(t))}}function N_(i){return Nt(i,Ih)}function D_(i){return Nt(i,Th)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){const r=t.uid||"";return new bh(e,r)}getOverlay(e,t){return fl(e).get(k_(this.userId,t)).next(r=>r?Nf(this.serializer,r):null)}getOverlays(e,t){const r=Ir();return F.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&r.set(o,a)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((a,c)=>{const d=new Fp(t,c);o.push(this.St(e,d))}),F.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(Jt(c.getCollectionPath())));const a=[];return o.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(fl(e).X(Yf,d))}),F.waitFor(a)}getOverlaysForCollection(e,t,r){const o=Ir(),a=Jt(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return fl(e).J(Yf,c).next(d=>{for(const p of d){const y=Nf(this.serializer,p);o.set(y.getKey(),y)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const a=Ir();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fl(e).te({index:TE,range:d},(p,y,E)=>{const I=Nf(this.serializer,y);a.size()<o||I.largestBatchId===c?(a.set(I.getKey(),I),c=I.largestBatchId):E.done()}).next(()=>a)}St(e,t){return fl(e).put(function(o,a,c){const[d,p,y]=k_(a,c.mutation.key);return{userId:a,collectionPath:p,documentId:y,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:sh(o.wt,c.mutation)}}(this.serializer,this.userId,t))}}function fl(i){return Nt(i,Sh)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{Dt(e){return Nt(e,kp)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?St.fromUint8Array(r):St.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(ut(e.integerValue));else if("doubleValue"in e){const r=ut(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Ll(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=Gr(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Wr(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?OE(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Rh(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):pe(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const r=e.fields||{};this.Mt(t,55);for(const o of Object.keys(r))this.Nt(o,t),this.Ct(r[o],t)}qt(e,t){var r,o;const a=e.fields||{};this.Mt(t,53);const c=aa,d=((o=(r=a[c].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.length)||0;this.Mt(t,15),t.xt(ut(d)),this.Nt(c,t),this.Ct(a[c],t)}$t(e,t){const r=e.values||[];this.Mt(t,50);for(const o of r)this.Ct(o,t)}kt(e,t){this.Mt(t,37),oe.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}xs.Wt=new xs;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=255;function PA(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function b_(i){const e=64-function(r){let o=0;for(let a=0;a<8;++a){const c=PA(255&r[a]);if(o+=c,c!==8)break}return o}(i);return Math.ceil(e/8)}class CA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{const o=t.codePointAt(0);this.zt(240|o>>>18),this.zt(128|63&o>>>12),this.zt(128|63&o>>>6),this.zt(128|63&o)}}this.jt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Yt()}en(e){const t=this.tn(e),r=b_(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}rn(e){const t=this.tn(e),r=b_(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}sn(){this._n(jo),this._n(255)}an(){this.un(jo),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}zt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===jo?(this._n(jo),this._n(0)):this._n(t)}Jt(e){const t=255&e;t===0?(this.un(0),this.un(255)):t===jo?(this.un(jo),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class kA{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class xA{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class pl{constructor(){this.ln=new CA,this.hn=new kA(this.ln),this.Pn=new xA(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t,r,o){this.In=e,this.En=t,this.dn=r,this.An=o}Rn(){const e=this.An.length,t=e===0||this.An[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.An,0),t!==e?r.set([0],this.An.length):++r[r.length-1],new Ns(this.In,this.En,this.dn,r)}Vn(e,t,r){return{indexId:this.In,uid:e,arrayValue:jc(this.dn),directionalValue:jc(this.An),orderedDocumentKey:jc(t),documentKey:r.path.toArray()}}mn(e,t,r){const o=this.Vn(e,t,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function Ri(i,e){let t=i.In-e.In;return t!==0?t:(t=V_(i.dn,e.dn),t!==0?t:(t=V_(i.An,e.An),t!==0?t:oe.comparator(i.En,e.En)))}function V_(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function jc(i){return Qv()?function(t){let r="";for(let o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r}(i):i}function O_(i){return typeof i!="string"?i:function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(i)}class M_{constructor(e){this.fn=new et((t,r)=>pt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const t of e.filters){const r=t;r.isInequality()?this.fn=this.fn.add(r):this.pn.push(r)}}get yn(){return this.fn.size>1}wn(e){if(ve(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const t=Gf(e);if(t!==void 0&&!this.bn(t))return!1;const r=As(e);let o=new Set,a=0,c=0;for(;a<r.length&&this.bn(r[a]);++a)o=o.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.fn.size>0){const d=this.fn.getIterator().getNext();if(!o.has(d.field.canonicalString())){const p=r[a];if(!this.Sn(d,p)||!this.Dn(this.gn[c++],p))return!1}++a}for(;a<r.length;++a){const d=r[a];if(c>=this.gn.length||!this.Dn(this.gn[c++],d))return!1}return!0}vn(){if(this.yn)return null;let e=new et(pt.comparator);const t=[];for(const r of this.pn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Vc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Vc(r.field,0))}for(const r of this.gn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Vc(r.field,r.dir==="asc"?0:1)));return new Xc(Xc.UNKNOWN_ID,this.collectionId,t,Ml.empty())}bn(e){for(const t of this.pn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Dn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(i){var e,t;if(ve(i instanceof Ue||i instanceof Ze,20012),i instanceof Ue){if(i instanceof qE){const o=((t=(e=i.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(a=>Ue.create(i.field,"==",a)))||[];return Ze.create(o,"or")}return i}const r=i.filters.map(o=>Iw(o));return Ze.create(r,i.op)}function NA(i){if(i.getFilters().length===0)return[];const e=hp(Iw(i));return ve(Tw(e),7391),up(e)||cp(e)?[e]:e.getFilters()}function up(i){return i instanceof Ue}function cp(i){return i instanceof Ze&&Vp(i)}function Tw(i){return up(i)||cp(i)||function(t){if(t instanceof Ze&&ep(t)){for(const r of t.getFilters())if(!up(r)&&!cp(r))return!1;return!0}return!1}(i)}function hp(i){if(ve(i instanceof Ue||i instanceof Ze,34018),i instanceof Ue)return i;if(i.filters.length===1)return hp(i.filters[0]);const e=i.filters.map(r=>hp(r));let t=Ze.create(e,i.op);return t=ah(t),Tw(t)?t:(ve(t instanceof Ze,64498),ve(ca(t),40251),ve(t.filters.length>1,57927),t.filters.reduce((r,o)=>zp(r,o)))}function zp(i,e){let t;return ve(i instanceof Ue||i instanceof Ze,38388),ve(e instanceof Ue||e instanceof Ze,25473),t=i instanceof Ue?e instanceof Ue?function(o,a){return Ze.create([o,a],"and")}(i,e):L_(i,e):e instanceof Ue?L_(e,i):function(o,a){if(ve(o.filters.length>0&&a.filters.length>0,48005),ca(o)&&ca(a))return zE(o,a.getFilters());const c=ep(o)?o:a,d=ep(o)?a:o,p=c.filters.map(y=>zp(y,d));return Ze.create(p,"or")}(i,e),ah(t)}function L_(i,e){if(ca(e))return zE(e,i.getFilters());{const t=e.filters.map(r=>zp(i,r));return Ze.create(t,"or")}}function ah(i){if(ve(i instanceof Ue||i instanceof Ze,11850),i instanceof Ue)return i;const e=i.getFilters();if(e.length===1)return ah(e[0]);if(UE(i))return i;const t=e.map(o=>ah(o)),r=[];return t.forEach(o=>{o instanceof Ue?r.push(o):o instanceof Ze&&(o.op===i.op?r.push(...o.filters):r.push(o))}),r.length===1?r[0]:Ze.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.Cn=new jp}addToCollectionParentIndex(e,t){return this.Cn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(Rn.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(Rn.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class jp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new et(Qe.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new et(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="IndexedDbIndexManager",Pc=new Uint8Array(0);class bA{constructor(e,t){this.databaseId=t,this.Fn=new jp,this.Mn=new Xr(r=>$s(r),(r,o)=>Zl(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Fn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Fn.add(t)});const a={collectionId:r,parent:Jt(o)};return U_(e).put(a)}return F.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[fE(t),""],!1,!0);return U_(e).J(o).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(wr(c.parent))}return r})}addFieldIndex(e,t){const r=ml(e),o=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])}}(t);delete o.indexId;const a=r.add(o);if(t.indexState){const c=qo(e);return a.next(d=>{c.put(x_(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=ml(e),o=qo(e),a=$o(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=ml(e),r=$o(e),o=qo(e);return t.X().next(()=>r.X()).next(()=>o.X())}createTargetIndexes(e,t){return F.forEach(this.xn(t),r=>this.getIndexType(e,r).next(o=>{if(o===0||o===1){const a=new M_(r).vn();if(a!=null)return this.addFieldIndex(e,a)}}))}getDocumentsMatchingTarget(e,t){const r=$o(e);let o=!0;const a=new Map;return F.forEach(this.xn(t),c=>this.On(e,c).next(d=>{o&&(o=!!d),a.set(c,d)})).next(()=>{if(o){let c=Ve();const d=[];return F.forEach(a,(p,y)=>{Z(F_,`Using index ${function(te){return`id=${te.indexId}|cg=${te.collectionGroup}|f=${te.fields.map(ue=>`${ue.fieldPath}:${ue.kind}`).join(",")}`}(p)} to execute ${$s(t)}`);const E=function(te,ue){const de=Gf(ue);if(de===void 0)return null;for(const _e of rh(te,de.fieldPath))switch(_e.op){case"array-contains-any":return _e.value.arrayValue.values||[];case"array-contains":return[_e.value]}return null}(y,p),I=function(te,ue){const de=new Map;for(const _e of As(ue))for(const x of rh(te,_e.fieldPath))switch(x.op){case"==":case"in":de.set(_e.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return de.set(_e.fieldPath.canonicalString(),x.value),Array.from(de.values())}return null}(y,p),T=function(te,ue){const de=[];let _e=!0;for(const x of As(ue)){const S=x.kind===0?g_(te,x.fieldPath,te.startAt):y_(te,x.fieldPath,te.startAt);de.push(S.value),_e&&(_e=S.inclusive)}return new ua(de,_e)}(y,p),V=function(te,ue){const de=[];let _e=!0;for(const x of As(ue)){const S=x.kind===0?y_(te,x.fieldPath,te.endAt):g_(te,x.fieldPath,te.endAt);de.push(S.value),_e&&(_e=S.inclusive)}return new ua(de,_e)}(y,p),j=this.Nn(p,y,T),H=this.Nn(p,y,V),q=this.Bn(p,y,I),Ee=this.Ln(p.indexId,E,j,T.inclusive,H,V.inclusive,q);return F.forEach(Ee,J=>r.Z(J,t.limit).next(te=>{te.forEach(ue=>{const de=oe.fromSegments(ue.documentKey);c.has(de)||(c=c.add(de),d.push(de))})}))}).next(()=>d)}return F.resolve(null)})}xn(e){let t=this.Mn.get(e);return t||(e.filters.length===0?t=[e]:t=NA(Ze.create(e.filters,"and")).map(r=>np(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,t),t)}Ln(e,t,r,o,a,c,d){const p=(t!=null?t.length:1)*Math.max(r.length,a.length),y=p/(t!=null?t.length:1),E=[];for(let I=0;I<p;++I){const T=t?this.kn(t[I/y]):Pc,V=this.qn(e,T,r[I%y],o),j=this.Qn(e,T,a[I%y],c),H=d.map(q=>this.qn(e,T,q,!0));E.push(...this.createRange(V,j,H))}return E}qn(e,t,r,o){const a=new Ns(e,oe.empty(),t,r);return o?a:a.Rn()}Qn(e,t,r,o){const a=new Ns(e,oe.empty(),t,r);return o?a.Rn():a}On(e,t){const r=new M_(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(a=>{let c=null;for(const d of a)r.wn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;const o=this.xn(t);return F.forEach(o,a=>this.On(e,a).next(c=>{c?r!==0&&c.fields.length<function(p){let y=new et(pt.comparator),E=!1;for(const I of p.filters)for(const T of I.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?E=!0:y=y.add(T.field));for(const I of p.orderBy)I.field.isKeyField()||(y=y.add(I.field));return y.size+(E?1:0)}(a)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&o.length>1&&r===2?1:r)}$n(e,t){const r=new pl;for(const o of As(e)){const a=t.data.field(o.fieldPath);if(a==null)return null;const c=r.Tn(o.kind);xs.Wt.vt(a,c)}return r.cn()}kn(e){const t=new pl;return xs.Wt.vt(e,t.Tn(0)),t.cn()}Un(e,t){const r=new pl;return xs.Wt.vt($l(this.databaseId,t),r.Tn(function(a){const c=As(a);return c.length===0?0:c[c.length-1].kind}(e))),r.cn()}Bn(e,t,r){if(r===null)return[];let o=[];o.push(new pl);let a=0;for(const c of As(e)){const d=r[a++];for(const p of o)if(this.Kn(t,c.fieldPath)&&ql(d))o=this.Wn(o,c,d);else{const y=p.Tn(c.kind);xs.Wt.vt(d,y)}}return this.Gn(o)}Nn(e,t,r){return this.Bn(e,t,r.position)}Gn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}Wn(e,t,r){const o=[...e],a=[];for(const c of r.arrayValue.values||[])for(const d of o){const p=new pl;p.seed(d.cn()),xs.Wt.vt(c,p.Tn(t.kind)),a.push(p)}return a}Kn(e,t){return!!e.filters.find(r=>r instanceof Ue&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=ml(e),o=qo(e);return(t?r.J(Qf,IDBKeyRange.bound(t,t)):r.J()).next(a=>{const c=[];return F.forEach(a,d=>o.get([d.indexId,this.uid]).next(p=>{c.push(function(E,I){const T=I?new Ml(I.sequenceNumber,new Rn(Ks(I.readTime),new oe(wr(I.documentKey)),I.largestBatchId)):Ml.empty(),V=E.fields.map(([j,H])=>new Vc(pt.fromServerFormat(j),H));return new Xc(E.indexId,E.collectionGroup,V,T)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,o)=>{const a=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return a!==0?a:Re(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=ml(e),a=qo(e);return this.zn(e).next(c=>o.J(Qf,IDBKeyRange.bound(t,t)).next(d=>F.forEach(d,p=>a.put(x_(p.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return F.forEach(t,(o,a)=>{const c=r.get(o.collectionGroup);return(c?F.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(d=>(r.set(o.collectionGroup,d),F.forEach(d,p=>this.jn(e,o,p).next(y=>{const E=this.Hn(a,p);return y.isEqual(E)?F.resolve():this.Jn(e,a,p,y,E)}))))})}Yn(e,t,r,o){return $o(e).put(o.Vn(this.uid,this.Un(r,t.key),t.key))}Zn(e,t,r,o){return $o(e).delete(o.mn(this.uid,this.Un(r,t.key),t.key))}jn(e,t,r){const o=$o(e);let a=new et(Ri);return o.te({index:IE,range:IDBKeyRange.only([r.indexId,this.uid,jc(this.Un(r,t))])},(c,d)=>{a=a.add(new Ns(r.indexId,t,O_(d.arrayValue),O_(d.directionalValue)))}).next(()=>a)}Hn(e,t){let r=new et(Ri);const o=this.$n(t,e);if(o==null)return r;const a=Gf(t);if(a!=null){const c=e.data.field(a.fieldPath);if(ql(c))for(const d of c.arrayValue.values||[])r=r.add(new Ns(t.indexId,e.key,this.kn(d),o))}else r=r.add(new Ns(t.indexId,e.key,Pc,o));return r}Jn(e,t,r,o,a){Z(F_,"Updating index entries for document '%s'",t.key);const c=[];return function(p,y,E,I,T){const V=p.getIterator(),j=y.getIterator();let H=zo(V),q=zo(j);for(;H||q;){let Ee=!1,J=!1;if(H&&q){const te=E(H,q);te<0?J=!0:te>0&&(Ee=!0)}else H!=null?J=!0:Ee=!0;Ee?(I(q),q=zo(j)):J?(T(H),H=zo(V)):(H=zo(V),q=zo(j))}}(o,a,Ri,d=>{c.push(this.Yn(e,t,r,d))},d=>{c.push(this.Zn(e,t,r,d))}),F.waitFor(c)}zn(e){let t=1;return qo(e).te({index:wE,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,a)=>{a.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>Ri(c,d)).filter((c,d,p)=>!d||Ri(c,p[d-1])!==0);const o=[];o.push(e);for(const c of r){const d=Ri(c,e),p=Ri(c,t);if(d===0)o[0]=e.Rn();else if(d>0&&p<0)o.push(c),o.push(c.Rn());else if(p>0)break}o.push(t);const a=[];for(let c=0;c<o.length;c+=2){if(this.Xn(o[c],o[c+1]))return[];const d=o[c].mn(this.uid,Pc,oe.empty()),p=o[c+1].mn(this.uid,Pc,oe.empty());a.push(IDBKeyRange.bound(d,p))}return a}Xn(e,t){return Ri(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(B_)}getMinOffset(e,t){return F.mapArray(this.xn(t),r=>this.On(e,r).next(o=>o||pe(44426))).next(B_)}}function U_(i){return Nt(i,Bl)}function $o(i){return Nt(i,Pl)}function ml(i){return Nt(i,Cp)}function qo(i){return Nt(i,Rl)}function B_(i){ve(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const o=i[r].indexState.offset;Ap(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Rn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sw=41943040;class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(i,e,t){const r=i.store(nr),o=i.store(ra),a=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=r.te({range:c},(E,I,T)=>(d++,T.delete()));a.push(p.next(()=>{ve(d===1,47070,{batchId:t.batchId})}));const y=[];for(const E of t.mutations){const I=_E(e,E.key.path,t.batchId);a.push(o.delete(I)),y.push(E.key)}return F.waitFor(a).next(()=>y)}function lh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw pe(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(Sw,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);class Vh{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.er={}}static bt(e,t,r,o){ve(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new Vh(a,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pi(e).te({index:Ds,range:r},(o,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const a=Yo(e),c=Pi(e);return c.add({}).next(d=>{ve(typeof d=="number",49019);const p=new Mp(d,t,r,o),y=function(V,j,H){const q=H.baseMutations.map(J=>sh(V.wt,J)),Ee=H.mutations.map(J=>sh(V.wt,J));return{userId:j,batchId:H.batchId,localWriteTimeMs:H.localWriteTime.toMillis(),baseMutations:q,mutations:Ee}}(this.serializer,this.userId,p),E=[];let I=new et((T,V)=>Re(T.canonicalString(),V.canonicalString()));for(const T of o){const V=_E(this.userId,T.key.path,d);I=I.add(T.key.path.popLast()),E.push(c.put(y)),E.push(a.put(V,l1))}return I.forEach(T=>{E.push(this.indexManager.addToCollectionParentIndex(e,T))}),e.addOnCommittedListener(()=>{this.er[d]=p.keys()}),F.waitFor(E).next(()=>p)})}lookupMutationBatch(e,t){return Pi(e).get(t).next(r=>r?(ve(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ks(this.serializer,r)):null)}tr(e,t){return this.er[t]?F.resolve(this.er[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.er[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Pi(e).te({index:Ds,range:o},(c,d,p)=>{d.userId===this.userId&&(ve(d.batchId>=r,47524,{nr:r}),a=ks(this.serializer,d)),p.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Vs;return Pi(e).te({index:Ds,range:t,reverse:!0},(o,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Vs],[this.userId,Number.POSITIVE_INFINITY]);return Pi(e).J(Ds,t).next(r=>r.map(o=>ks(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Oc(this.userId,t.path),o=IDBKeyRange.lowerBound(r),a=[];return Yo(e).te({range:o},(c,d,p)=>{const[y,E,I]=c,T=wr(E);if(y===this.userId&&t.path.isEqual(T))return Pi(e).get(I).next(V=>{if(!V)throw pe(61480,{rr:c,batchId:I});ve(V.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:V.userId,batchId:I}),a.push(ks(this.serializer,V))});p.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new et(Re);const o=[];return t.forEach(a=>{const c=Oc(this.userId,a.path),d=IDBKeyRange.lowerBound(c),p=Yo(e).te({range:d},(y,E,I)=>{const[T,V,j]=y,H=wr(V);T===this.userId&&a.path.isEqual(H)?r=r.add(j):I.done()});o.push(p)}),F.waitFor(o).next(()=>this.ir(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,a=Oc(this.userId,r),c=IDBKeyRange.lowerBound(a);let d=new et(Re);return Yo(e).te({range:c},(p,y,E)=>{const[I,T,V]=p,j=wr(T);I===this.userId&&r.isPrefixOf(j)?j.length===o&&(d=d.add(V)):E.done()}).next(()=>this.ir(e,d))}ir(e,t){const r=[],o=[];return t.forEach(a=>{o.push(Pi(e).get(a).next(c=>{if(c===null)throw pe(35274,{batchId:a});ve(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:a}),r.push(ks(this.serializer,c))}))}),F.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Aw(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.sr(t.batchId)}),F.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return F.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),o=[];return Yo(e).te({range:r},(a,c,d)=>{if(a[0]===this.userId){const p=wr(a[1]);o.push(p)}else d.done()}).next(()=>{ve(o.length===0,56720,{_r:o.map(a=>a.canonicalString())})})})}containsKey(e,t){return Rw(e,this.userId,t)}ar(e){return Pw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Vs,lastStreamToken:""})}}function Rw(i,e,t){const r=Oc(e,t.path),o=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return Yo(i).te({range:a,ee:!0},(d,p,y)=>{const[E,I,T]=d;E===e&&I===o&&(c=!0),y.done()}).next(()=>c)}function Pi(i){return Nt(i,nr)}function Yo(i){return Nt(i,ra)}function Pw(i){return Nt(i,Fl)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Hs(0)}static lr(){return new Hs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.hr(e).next(t=>{const r=new Hs(t.highestTargetId);return t.highestTargetId=r.next(),this.Pr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(t=>Ie.fromTimestamp(new mt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.hr(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Pr(e,o)))}addTargetData(e,t){return this.Tr(e,t).next(()=>this.hr(e).next(r=>(r.targetCount+=1,this.Ir(t,r),this.Pr(e,r))))}updateTargetData(e,t){return this.Tr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ko(e).delete(t.targetId)).next(()=>this.hr(e)).next(r=>(ve(r.targetCount>0,8065),r.targetCount-=1,this.Pr(e,r)))}removeTargets(e,t,r){let o=0;const a=[];return Ko(e).te((c,d)=>{const p=wl(d);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(o++,a.push(this.removeTargetData(e,p)))}).next(()=>F.waitFor(a)).next(()=>o)}forEachTarget(e,t){return Ko(e).te((r,o)=>{const a=wl(o);t(a)})}hr(e){return j_(e).get(eh).next(t=>(ve(t!==null,2888),t))}Pr(e,t){return j_(e).put(eh,t)}Tr(e,t){return Ko(e).put(Ew(this.serializer,t))}Ir(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.hr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=$s(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Ko(e).te({range:o,index:EE},(c,d,p)=>{const y=wl(d);Zl(t,y.target)&&(a=y,p.done())}).next(()=>a)}addMatchingKeys(e,t,r){const o=[],a=xi(e);return t.forEach(c=>{const d=Jt(c.path);o.push(a.put({targetId:r,path:d})),o.push(this.referenceDelegate.addReference(e,r,c))}),F.waitFor(o)}removeMatchingKeys(e,t,r){const o=xi(e);return F.forEach(t,a=>{const c=Jt(a.path);return F.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=xi(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=xi(e);let a=Ve();return o.te({range:r,ee:!0},(c,d,p)=>{const y=wr(c[1]),E=new oe(y);a=a.add(E)}).next(()=>a)}containsKey(e,t){const r=Jt(t.path),o=IDBKeyRange.bound([r],[fE(r)],!1,!0);let a=0;return xi(e).te({index:Pp,ee:!0,range:o},([c,d],p,y)=>{c!==0&&(a++,y.done())}).next(()=>a>0)}Rt(e,t){return Ko(e).get(t).next(r=>r?wl(r):null)}}function Ko(i){return Nt(i,ia)}function j_(i){return Nt(i,Os)}function xi(i){return Nt(i,sa)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="LruGarbageCollector",OA=1048576;function q_([i,e],[t,r]){const o=Re(i,t);return o===0?Re(e,r):o}class MA{constructor(e){this.Er=e,this.buffer=new et(q_),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();q_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Cw{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Z($_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ki(t)?Z($_,"Ignoring IndexedDB error during garbage collection: ",t):await Qs(t)}await this.mr(3e5)})}}class LA{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return F.resolve(Ln.le);const r=new MA(t);return this.gr.forEachTarget(e,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(z_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z_):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,o,a,c,d,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,c=Date.now(),this.nthSequenceNumber(e,o))).next(I=>(r=I,d=Date.now(),this.removeTargets(e,r,t))).next(I=>(a=I,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(I=>(y=Date.now(),Ho()<=Fe.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${I} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:I})))}}function kw(i,e){return new LA(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,t){this.db=e,this.garbageCollector=kw(this,t)}pr(e){const t=this.br(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}yr(e,t){return this.Sr(e,(r,o)=>t(o))}addReference(e,t,r){return Cc(e,r)}removeReference(e,t,r){return Cc(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Cc(e,t)}Dr(e,t){return function(o,a){let c=!1;return Pw(o).ne(d=>Rw(o,d,a).next(p=>(p&&(c=!0),F.resolve(!p)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let a=0;return this.Sr(e,(c,d)=>{if(d<=t){const p=this.Dr(e,c).next(y=>{if(!y)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ie.min()),xi(e).delete(function(I){return[0,Jt(I.path)]}(c))))});o.push(p)}}).next(()=>F.waitFor(o)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Cc(e,t)}Sr(e,t){const r=xi(e);let o,a=Ln.le;return r.te({index:Pp},([c,d],{path:p,sequenceNumber:y})=>{c===0?(a!==Ln.le&&t(new oe(wr(o)),a),a=y,o=p):a=Ln.le}).next(()=>{a!==Ln.le&&t(new oe(wr(o)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Cc(i,e){return xi(i).put(function(r,o){return{targetId:0,path:Jt(r.path),sequenceNumber:o}}(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(){this.changes=new Xr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ts(e).put(r)}removeEntry(e,t,r){return Ts(e).delete(function(a,c){const d=a.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],oh(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.vr(e,r)))}getEntry(e,t){let r=yt.newInvalidDocument(t);return Ts(e).te({index:Mc,range:IDBKeyRange.only(gl(t))},(o,a)=>{r=this.Cr(t,a)}).next(()=>r)}Fr(e,t){let r={size:0,document:yt.newInvalidDocument(t)};return Ts(e).te({index:Mc,range:IDBKeyRange.only(gl(t))},(o,a)=>{r={document:this.Cr(t,a),size:lh(a)}}).next(()=>r)}getEntries(e,t){let r=An();return this.Mr(e,t,(o,a)=>{const c=this.Cr(o,a);r=r.insert(o,c)}).next(()=>r)}Or(e,t){let r=An(),o=new ct(oe.comparator);return this.Mr(e,t,(a,c)=>{const d=this.Cr(a,c);r=r.insert(a,d),o=o.insert(a,lh(c))}).next(()=>({documents:r,Nr:o}))}Mr(e,t,r){if(t.isEmpty())return F.resolve();let o=new et(G_);t.forEach(p=>o=o.add(p));const a=IDBKeyRange.bound(gl(o.first()),gl(o.last())),c=o.getIterator();let d=c.getNext();return Ts(e).te({index:Mc,range:a},(p,y,E)=>{const I=oe.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&G_(d,I)<0;)r(d,null),d=c.getNext();d&&d.isEqual(I)&&(r(d,y),d=c.hasNext()?c.getNext():null),d?E.H(gl(d)):E.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,o,a){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),oh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ts(e).J(IDBKeyRange.bound(d,p,!0)).next(y=>{a==null||a.incrementDocumentReadCount(y.length);let E=An();for(const I of y){const T=this.Cr(oe.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);T.isFoundDocument()&&(eu(t,T)||o.has(T.key))&&(E=E.insert(T.key,T))}return E})}getAllFromCollectionGroup(e,t,r,o){let a=An();const c=H_(t,r),d=H_(t,Rn.max());return Ts(e).te({index:vE,range:IDBKeyRange.bound(c,d,!0)},(p,y,E)=>{const I=this.Cr(oe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);a=a.insert(I.key,I),a.size===o&&E.done()}).next(()=>a)}newChangeBuffer(e){return new BA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return K_(e).get(Wf).next(t=>(ve(!!t,20021),t))}vr(e,t){return K_(e).put(Wf,t)}Cr(e,t){if(t){const r=SA(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ie.min())))return r}return yt.newInvalidDocument(e)}}function Nw(i){return new UA(i)}class BA extends xw{constructor(e,t){super(),this.Br=e,this.trackRemovals=t,this.Lr=new Xr(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new et((a,c)=>Re(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const d=this.Lr.get(a);if(t.push(this.Br.removeEntry(e,a,d.readTime)),c.isValidDocument()){const p=C_(this.Br.serializer,c);o=o.add(a.path.popLast());const y=lh(p);r+=y-d.size,t.push(this.Br.addEntry(e,a,p))}else if(r-=d.size,this.trackRemovals){const p=C_(this.Br.serializer,c.convertToNoDocument(Ie.min()));t.push(this.Br.addEntry(e,a,p))}}),o.forEach(a=>{t.push(this.Br.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Br.updateMetadata(e,r)),F.waitFor(t)}getFromCache(e,t){return this.Br.Fr(e,t).next(r=>(this.Lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Br.Or(e,t).next(({documents:r,Nr:o})=>(o.forEach((a,c)=>{this.Lr.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function K_(i){return Nt(i,Ul)}function Ts(i){return Nt(i,Zc)}function gl(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function H_(i,e){const t=e.documentKey.path.toArray();return[i,oh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function G_(i,e){const t=i.path.toArray(),r=e.path.toArray();let o=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(o=Re(t[a],r[a]),o)return o;return o=Re(t.length,r.length),o||(o=Re(t[t.length-2],r[r.length-2]),o||Re(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&Nl(r.mutation,o,gn.empty(),mt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ve()){const o=Ir();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(a=>{let c=vl();return a.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Ir();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ve()))}populateOverlays(e,t,r){const o=[];return r.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,o){let a=An();const c=xl(),d=function(){return xl()}();return t.forEach((p,y)=>{const E=r.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Jr)?a=a.insert(y.key,y):E!==void 0?(c.set(y.key,E.mutation.getFieldMask()),Nl(E.mutation,y,E.mutation.getFieldMask(),mt.now())):c.set(y.key,gn.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((y,E)=>c.set(y,E)),t.forEach((y,E)=>{var I;return d.set(y,new zA(E,(I=c.get(y))!==null&&I!==void 0?I:null))}),d))}recalculateAndSaveOverlays(e,t){const r=xl();let o=new ct((c,d)=>c-d),a=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let E=r.get(p)||gn.empty();E=d.applyToLocalView(y,E),r.set(p,E);const I=(o.get(d.batchId)||Ve()).add(p);o=o.insert(d.batchId,I)})}).next(()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,E=p.value,I=YE();E.forEach(T=>{if(!a.has(T)){const V=nw(t.get(T),r.get(T));V!==null&&I.set(T,V),a=a.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,I))}return F.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(c){return oe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):KE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):F.resolve(Ir());let d=Ol,p=a;return c.next(y=>F.forEach(y,(E,I)=>(d<I.largestBatchId&&(d=I.largestBatchId),a.get(E)?F.resolve():this.remoteDocumentCache.getEntry(e,E).next(T=>{p=p.insert(E,T)}))).next(()=>this.populateOverlays(e,y,a)).next(()=>this.computeViews(e,p,y,Ve())).next(E=>({batchId:d,changes:QE(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oe(t)).next(r=>{let o=vl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let c=vl();return this.indexManager.getCollectionParents(e,a).next(d=>F.forEach(d,p=>{const y=function(I,T){return new Ea(T,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next(E=>{E.forEach((I,T)=>{c=c.insert(I,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o))).next(c=>{a.forEach((p,y)=>{const E=y.getKey();c.get(E)===null&&(c=c.insert(E,yt.newInvalidDocument(E)))});let d=vl();return c.forEach((p,y)=>{const E=a.get(p);E!==void 0&&Nl(E.mutation,y,gn.empty(),mt.now()),eu(t,y)&&(d=d.insert(p,y))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return F.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:on(o.createTime)}}(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:ww(o.bundledQuery),readTime:on(o.readTime)}}(t)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.overlays=new ct(oe.comparator),this.Qr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ir();return F.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&r.set(o,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,a)=>{this.St(e,t,a)}),F.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){const o=Ir(),a=t.length+1,c=new oe(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&p.largestBatchId>r&&o.set(p.getKey(),p)}return F.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new ct((y,E)=>y-E);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let E=a.get(y.largestBatchId);E===null&&(E=Ir(),a=a.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const d=Ir(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>d.set(y,E)),!(d.size()>=o)););return F.resolve(d)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Fp(t,r));let a=this.Qr.get(t);a===void 0&&(a=Ve(),this.Qr.set(t,a)),this.Qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.$r=new et(Lt.Ur),this.Kr=new et(Lt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Lt(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Lt(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new oe(new Qe([])),r=new Lt(t,e),o=new Lt(t,e+1),a=[];return this.Kr.forEachInRange([r,o],c=>{this.zr(c),a.push(c.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new oe(new Qe([])),r=new Lt(t,e),o=new Lt(t,e+1);let a=Ve();return this.Kr.forEachInRange([r,o],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Lt(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Lt{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return oe.comparator(e.key,t.key)||Re(e.Zr,t.Zr)}static Wr(e,t){return Re(e.Zr,t.Zr)||oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new et(Lt.Ur)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Mp(a,t,r,o);this.mutationQueue.push(c);for(const d of o)this.Xr=this.Xr.add(new Lt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return F.resolve(c)}lookupMutationBatch(e,t){return F.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ti(r),a=o<0?0:o;return F.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Vs:this.nr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Lt(t,0),o=new Lt(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,o],c=>{const d=this.ei(c.Zr);a.push(d)}),F.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new et(Re);return t.forEach(o=>{const a=new Lt(o,0),c=new Lt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,c],d=>{r=r.add(d.Zr)})}),F.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;oe.isDocumentKey(a)||(a=a.child(""));const c=new Lt(new oe(a),0);let d=new et(Re);return this.Xr.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.Zr)),!0)},c),F.resolve(this.ni(d))}ni(e){const t=[];return e.forEach(r=>{const o=this.ei(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){ve(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return F.forEach(t.mutations,o=>{const a=new Lt(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Lt(t,0),o=this.Xr.firstAfterOrEqual(r);return F.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e){this.ii=e,this.docs=function(){return new ct(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,c=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(t))}getEntries(e,t){let r=An();return t.forEach(o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():yt.newInvalidDocument(o))}),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=An();const c=t.path,d=new oe(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||Ap(pE(E),r)<=0||(o.has(E.key)||eu(t,E))&&(a=a.insert(E.key,E.mutableCopy()))}return F.resolve(a)}getAllFromCollectionGroup(e,t,r,o){pe(9500)}si(e,t){return F.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new GA(this)}getSize(e){return F.resolve(this.size)}}class GA extends xw{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(r)}),F.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.persistence=e,this.oi=new Xr(t=>$s(t),Zl),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this._i=0,this.ai=new $p,this.targetCount=0,this.ui=Hs.cr()}forEachTarget(e,t){return this.oi.forEach((r,o)=>t(o)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),F.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Hs(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Tr(t),F.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.oi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),F.waitFor(a).next(()=>o)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(c=>{a.push(o.markPotentiallyOrphaned(e,c))}),F.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t){this.ci={},this.overlays={},this.li=new Ln(0),this.hi=!1,this.hi=!0,this.Pi=new qA,this.referenceDelegate=e(this),this.Ti=new WA(this),this.indexManager=new DA,this.remoteDocumentCache=function(o){return new HA(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new vw(t),this.Ei=new jA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $A,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new KA(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){Z("MemoryPersistence","Starting transaction:",e);const o=new QA(this.li.next());return this.referenceDelegate.di(),r(o).next(a=>this.referenceDelegate.Ai(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Ri(e,t){return F.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class QA extends gE{constructor(e){super(),this.currentSequenceNumber=e}}class Oh{constructor(e){this.persistence=e,this.Vi=new $p,this.mi=null}static fi(e){return new Oh(e)}get gi(){if(this.mi)return this.mi;throw pe(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),F.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.gi,r=>{const o=oe.fromPath(r);return this.pi(e,o).next(a=>{a||t.removeEntry(o,Ie.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return F.or([()=>F.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class uh{constructor(e,t){this.persistence=e,this.yi=new Xr(r=>Jt(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=kw(this,t)}static fi(e,t){return new uh(e,t)}di(){}Ai(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return F.forEach(this.yi,(r,o)=>this.Dr(e,r,o).next(a=>a?F.resolve():t(o)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.si(e,c=>this.Dr(e,c,t).next(d=>{d||(r++,a.removeEntry(c,Ie.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),F.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fc(e.data.value)),t}Dr(e,t,r){return F.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return F.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.serializer=e}q(e,t,r,o){const a=new Eh("createOrUpgrade",t);r<1&&o>=1&&(function(p){p.createObjectStore(Jl)}(e),function(p){p.createObjectStore(Fl,{keyPath:a1}),p.createObjectStore(nr,{keyPath:i_,autoIncrement:!0}).createIndex(Ds,s_,{unique:!0}),p.createObjectStore(ra)}(e),W_(e),function(p){p.createObjectStore(Rs)}(e));let c=F.resolve();return r<3&&o>=3&&(r!==0&&(function(p){p.deleteObjectStore(sa),p.deleteObjectStore(ia),p.deleteObjectStore(Os)}(e),W_(e)),c=c.next(()=>function(p){const y=p.store(Os),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ie.min().toTimestamp(),targetCount:0};return y.put(eh,E)}(a))),r<4&&o>=4&&(r!==0&&(c=c.next(()=>function(p,y){return y.store(nr).J().next(I=>{p.deleteObjectStore(nr),p.createObjectStore(nr,{keyPath:i_,autoIncrement:!0}).createIndex(Ds,s_,{unique:!0});const T=y.store(nr),V=I.map(j=>T.put(j));return F.waitFor(V)})}(e,a))),c=c.next(()=>{(function(p){p.createObjectStore(oa,{keyPath:g1})})(e)})),r<5&&o>=5&&(c=c.next(()=>this.wi(a))),r<6&&o>=6&&(c=c.next(()=>(function(p){p.createObjectStore(Ul)}(e),this.bi(a)))),r<7&&o>=7&&(c=c.next(()=>this.Si(a))),r<8&&o>=8&&(c=c.next(()=>this.Di(e,a))),r<9&&o>=9&&(c=c.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&o>=10&&(c=c.next(()=>this.Ci(a))),r<11&&o>=11&&(c=c.next(()=>{(function(p){p.createObjectStore(Ih,{keyPath:y1})})(e),function(p){p.createObjectStore(Th,{keyPath:_1})}(e)})),r<12&&o>=12&&(c=c.next(()=>{(function(p){const y=p.createObjectStore(Sh,{keyPath:A1});y.createIndex(Yf,R1,{unique:!1}),y.createIndex(TE,P1,{unique:!1})})(e)})),r<13&&o>=13&&(c=c.next(()=>function(p){const y=p.createObjectStore(Zc,{keyPath:u1});y.createIndex(Mc,c1),y.createIndex(vE,h1)}(e)).next(()=>this.Fi(e,a)).next(()=>e.deleteObjectStore(Rs))),r<14&&o>=14&&(c=c.next(()=>this.Mi(e,a))),r<15&&o>=15&&(c=c.next(()=>function(p){p.createObjectStore(Cp,{keyPath:v1,autoIncrement:!0}).createIndex(Qf,E1,{unique:!1}),p.createObjectStore(Rl,{keyPath:w1}).createIndex(wE,I1,{unique:!1}),p.createObjectStore(Pl,{keyPath:T1}).createIndex(IE,S1,{unique:!1})}(e))),r<16&&o>=16&&(c=c.next(()=>{t.objectStore(Rl).clear()}).next(()=>{t.objectStore(Pl).clear()})),r<17&&o>=17&&(c=c.next(()=>{(function(p){p.createObjectStore(kp,{keyPath:C1})})(e)})),r<18&&o>=18&&Qv()&&(c=c.next(()=>{t.objectStore(Rl).clear()}).next(()=>{t.objectStore(Pl).clear()})),c}bi(e){let t=0;return e.store(Rs).te((r,o)=>{t+=lh(o)}).next(()=>{const r={byteSize:t};return e.store(Ul).put(Wf,r)})}wi(e){const t=e.store(Fl),r=e.store(nr);return t.J().next(o=>F.forEach(o,a=>{const c=IDBKeyRange.bound([a.userId,Vs],[a.userId,a.lastAcknowledgedBatchId]);return r.J(Ds,c).next(d=>F.forEach(d,p=>{ve(p.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const y=ks(this.serializer,p);return Aw(e,a.userId,y).next(()=>{})}))}))}Si(e){const t=e.store(sa),r=e.store(Rs);return e.store(Os).get(eh).next(o=>{const a=[];return r.te((c,d)=>{const p=new Qe(c),y=function(I){return[0,Jt(I)]}(p);a.push(t.get(y).next(E=>E?F.resolve():(I=>t.put({targetId:0,path:Jt(I),sequenceNumber:o.highestListenSequenceNumber}))(p)))}).next(()=>F.waitFor(a))})}Di(e,t){e.createObjectStore(Bl,{keyPath:m1});const r=t.store(Bl),o=new jp,a=c=>{if(o.add(c)){const d=c.lastSegment(),p=c.popLast();return r.put({collectionId:d,parent:Jt(p)})}};return t.store(Rs).te({ee:!0},(c,d)=>{const p=new Qe(c);return a(p.popLast())}).next(()=>t.store(ra).te({ee:!0},([c,d,p],y)=>{const E=wr(d);return a(E.popLast())}))}Ci(e){const t=e.store(ia);return t.te((r,o)=>{const a=wl(o),c=Ew(this.serializer,a);return t.put(c)})}Fi(e,t){const r=t.store(Rs),o=[];return r.te((a,c)=>{const d=t.store(Zc),p=function(I){return I.document?new oe(Qe.fromString(I.document.name).popFirst(5)):I.noDocument?oe.fromSegments(I.noDocument.path):I.unknownDocument?oe.fromSegments(I.unknownDocument.path):pe(36783)}(c).path.toArray(),y={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(d.put(y))}).next(()=>F.waitFor(o))}Mi(e,t){const r=t.store(nr),o=Nw(this.serializer),a=new qp(Oh.fi,this.serializer.wt);return r.J().next(c=>{const d=new Map;return c.forEach(p=>{var y;let E=(y=d.get(p.userId))!==null&&y!==void 0?y:Ve();ks(this.serializer,p).keys().forEach(I=>E=E.add(I)),d.set(p.userId,E)}),F.forEach(d,(p,y)=>{const E=new jt(y),I=bh.bt(this.serializer,E),T=a.getIndexManager(E),V=Vh.bt(E,this.serializer,T,a.referenceDelegate);return new Dw(o,V,I,T).recalculateAndSaveOverlaysForDocumentKeys(new Xf(t,Ln.le),p).next()})})}}function W_(i){i.createObjectStore(sa,{keyPath:f1}).createIndex(Pp,p1,{unique:!0}),i.createObjectStore(ia,{keyPath:"targetId"}).createIndex(EE,d1,{unique:!0}),i.createObjectStore(Os)}const Ci="IndexedDbPersistence",Df=18e5,bf=5e3,Vf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",XA="main";class Kp{constructor(e,t,r,o,a,c,d,p,y,E,I=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.xi=a,this.window=c,this.document=d,this.Oi=y,this.Ni=E,this.Bi=I,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=T=>Promise.resolve(),!Kp.C())throw new se(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FA(this,o),this.Ui=t+XA,this.serializer=new vw(p),this.Ki=new Ui(this.Ui,this.Bi,new YA(this.serializer)),this.Pi=new RA,this.Ti=new VA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Nw(this.serializer),this.Ei=new AA,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,E===!1&&sn(Ci,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new se(K.FAILED_PRECONDITION,Vf);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new Ln(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(t=>{t||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(t=>this.isPrimary&&!t?this.Xi(e).next(()=>!1):!!t&&this.es(e).next(()=>!0))).catch(e=>{if(Ki(e))return Z(Ci,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Z(Ci,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return yl(e).get(Bo).next(t=>F.resolve(this.ts(t)))}ns(e){return kc(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,Df)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Nt(t,oa);return r.J().next(o=>{const a=this._s(o,Df),c=o.filter(d=>a.indexOf(d)===-1);return F.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Wi)for(const t of e)this.Wi.removeItem(this.us(t.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?F.resolve(!0):yl(e).get(Bo).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,bf)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new se(K.FAILED_PRECONDITION,Vf);return!1}}return!(!this.networkEnabled||!this.inForeground)||kc(e).J().next(r=>this._s(r,bf).find(o=>{if(this.clientId!==o.clientId){const a=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,d=this.networkEnabled===o.networkEnabled;if(a||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Z(Ci,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[Jl,oa],e=>{const t=new Xf(e,Ln.le);return this.Xi(t).next(()=>this.ns(t))}),this.Ki.close(),this.Ts()}_s(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>kc(e).J().next(t=>this._s(t,Df).map(r=>r.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,t){return Vh.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bA(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return bh.bt(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,t,r){Z(Ci,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",a=function(p){return p===18?N1:p===17?PE:p===16?x1:p===15?xp:p===14?RE:p===13?AE:p===12?k1:p===11?SE:void pe(60245)}(this.Bi);let c;return this.Ki.runTransaction(e,o,a,d=>(c=new Xf(d,this.li?this.li.next():Ln.le),t==="readwrite-primary"?this.Yi(c).next(p=>!!p||this.Zi(c)).next(p=>{if(!p)throw sn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new se(K.FAILED_PRECONDITION,mE);return r(c)}).next(p=>this.es(c).next(()=>p)):this.Es(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}Es(e){return yl(e).get(Bo).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,bf)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Ni||this.allowTabSynchronization&&t.allowTabSynchronization))throw new se(K.FAILED_PRECONDITION,Vf)})}es(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yl(e).put(Bo,t)}static C(){return Ui.C()}Xi(e){const t=yl(e);return t.get(Bo).next(r=>this.ts(r)?(Z(Ci,"Releasing primary lease."),t.delete(Bo)):F.resolve())}ss(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(sn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}zi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground=this.document.visibilityState==="visible")}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Li=()=>{this.ls();const t=/(?:Version|Mobile)\/1[456]/;Wv()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var t;try{const r=((t=this.Wi)===null||t===void 0?void 0:t.getItem(this.us(e)))!==null;return Z(Ci,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return sn(Ci,"Failed to get zombied client id.",r),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(e){sn("Failed to set zombie client id.",e)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch{}}us(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yl(i){return Nt(i,Jl)}function kc(i){return Nt(i,oa)}function JA(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.ds=r,this.As=o}static Rs(e,t){let r=Ve(),o=Ve();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Hp(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Wv()?8:yE(xt())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.ws(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.bs(e,t,o,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new ZA;return this.Ss(e,t,c).next(d=>{if(a.result=d,this.fs)return this.Ds(e,t,c,d.size)})}).next(()=>a.result)}Ds(e,t,r,o){return r.documentReadCount<this.gs?(Ho()<=Fe.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Go(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),F.resolve()):(Ho()<=Fe.DEBUG&&Z("QueryEngine","Query:",Go(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(Ho()<=Fe.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Go(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(t))):F.resolve())}ws(e,t){if(__(t))return F.resolve(null);let r=Fn(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=ip(t,null,"F"),r=Fn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Ve(...a);return this.ys.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.vs(t,d);return this.Cs(t,y,c,p.readTime)?this.ws(e,ip(t,null,"F")):this.Fs(e,y,t,p)}))})))}bs(e,t,r,o){return __(t)||o.isEqual(Ie.min())?F.resolve(null):this.ys.getDocuments(e,r).next(a=>{const c=this.vs(t,a);return this.Cs(t,c,r,o)?F.resolve(null):(Ho()<=Fe.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Go(t)),this.Fs(e,c,t,e1(o,Ol)).next(d=>d))})}vs(e,t){let r=new et(GE(e));return t.forEach((o,a)=>{eu(e,a)&&(r=r.add(a))}),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,r){return Ho()<=Fe.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Go(t)),this.ys.getDocumentsMatchingQuery(e,t,Rn.min(),r)}Fs(e,t,r,o){return this.ys.getDocumentsMatchingQuery(e,r,o).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="LocalStore",eR=3e8;class tR{constructor(e,t,r,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new ct(Re),this.Os=new Xr(a=>$s(a),Zl),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Dw(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function Vw(i,e,t,r){return new tR(i,e,t,r)}async function Ow(i,e){const t=Ne(i);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(a=>(o=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],d=[];let p=Ve();for(const y of o){c.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of a){d.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(r,p).next(y=>({ks:y,removedBatchIds:c,addedBatchIds:d}))})})}function nR(i,e){const t=Ne(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(d,p,y,E){const I=y.batch,T=I.keys();let V=F.resolve();return T.forEach(j=>{V=V.next(()=>E.getEntry(p,j)).next(H=>{const q=y.docVersions.get(j);ve(q!==null,48541),H.version.compareTo(q)<0&&(I.applyToRemoteDocument(H,y),H.isValidDocument()&&(H.setReadTime(y.commitVersion),E.addEntry(H)))})}),V.next(()=>d.mutationQueue.removeMutationBatch(p,I))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=Ve();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function Mw(i){const e=Ne(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function rR(i,e){const t=Ne(i),r=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const d=[];e.targetChanges.forEach((E,I)=>{const T=o.get(I);if(!T)return;d.push(t.Ti.removeMatchingKeys(a,E.removedDocuments,I).next(()=>t.Ti.addMatchingKeys(a,E.addedDocuments,I)));let V=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(I)!==null?V=V.withResumeToken(St.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):E.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(E.resumeToken,r)),o=o.insert(I,V),function(H,q,Ee){return H.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=eR?!0:Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0}(T,V,E)&&d.push(t.Ti.updateTargetData(a,V))});let p=An(),y=Ve();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))}),d.push(iR(a,c,e.documentUpdates).next(E=>{p=E.qs,y=E.Qs})),!r.isEqual(Ie.min())){const E=t.Ti.getLastRemoteSnapshotVersion(a).next(I=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(E)}return F.waitFor(d).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,y)).next(()=>p)}).then(a=>(t.xs=o,a))}function iR(i,e,t){let r=Ve(),o=Ve();return t.forEach(a=>r=r.add(a)),e.getEntries(i,r).next(a=>{let c=An();return t.forEach((d,p)=>{const y=a.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):Z(Gp,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{qs:c,Qs:o}})}function sR(i,e){const t=Ne(i);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Vs),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oR(i,e){const t=Ne(i);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ti.getTargetData(r,e).next(a=>a?(o=a,F.resolve(o)):t.Ti.allocateTargetId(r).next(c=>(o=new $r(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function dp(i,e,t){const r=Ne(i),o=r.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!Ki(c))throw c;Z(Gp,`Failed to update sequence numbers for target ${e}: ${c}`)}r.xs=r.xs.remove(e),r.Os.delete(o.target)}function Q_(i,e,t){const r=Ne(i);let o=Ie.min(),a=Ve();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,y,E){const I=Ne(p),T=I.Os.get(E);return T!==void 0?F.resolve(I.xs.get(T)):I.Ti.getTargetData(y,E)}(r,c,Fn(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,d.targetId).next(p=>{a=p})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,e,t?o:Ie.min(),t?a:Ve())).next(d=>(aR(r,H1(e),d),{documents:d,$s:a})))}function aR(i,e,t){let r=i.Ns.get(e)||Ie.min();t.forEach((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),i.Ns.set(e,r)}class Y_{constructor(){this.activeTargetIds=J1()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lw{constructor(){this.xo=new Y_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Y_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="ConnectivityMonitor";class J_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Z(X_,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Z(X_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc=null;function fp(){return xc===null?xc=function(){return 268435456+Math.round(2147483648*Math.random())}():xc++,"0x"+xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="RestConnection",uR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cR{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===th?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(e,t,r,o,a){const c=fp(),d=this.jo(e,t.toUriEncodedString());Z(Of,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,o,a);const{host:y}=new URL(d),E=ya(y);return this.Jo(e,d,p,r,E).then(I=>(Z(Of,`Received RPC '${e}' ${c}: `,I),I),I=>{throw zs(Of,`RPC '${e}' ${c} failed with error: `,I,"url: ",d,"request:",r),I})}Yo(e,t,r,o,a,c){return this.zo(e,t,r,o,a)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+va}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,a)=>e[a]=o),r&&r.headers.forEach((o,a)=>e[a]=o)}jo(e,t){const r=uR[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class dR extends cR{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,a){const c=fp();return new Promise((d,p)=>{const y=new iE;y.setWithCredentials(!0),y.listenOnce(sE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case bc.NO_ERROR:const I=y.getResponseJson();Z(Wt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(I)),d(I);break;case bc.TIMEOUT:Z(Wt,`RPC '${e}' ${c} timed out`),p(new se(K.DEADLINE_EXCEEDED,"Request time out"));break;case bc.HTTP_ERROR:const T=y.getStatus();if(Z(Wt,`RPC '${e}' ${c} failed with status:`,T,"response text:",y.getResponseText()),T>0){let V=y.getResponseJson();Array.isArray(V)&&(V=V[0]);const j=V==null?void 0:V.error;if(j&&j.status&&j.message){const H=function(Ee){const J=Ee.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(J)>=0?J:K.UNKNOWN}(j.status);p(new se(H,j.message))}else p(new se(K.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new se(K.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{h_:e,streamId:c,P_:y.getLastErrorCode(),T_:y.getLastError()})}}finally{Z(Wt,`RPC '${e}' ${c} completed.`)}});const E=JSON.stringify(o);Z(Wt,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",E,r,15)})}I_(e,t,r){const o=fp(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=lE(),d=aE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const E=a.join("");Z(Wt,`Creating RPC '${e}' stream ${o}: ${E}`,p);const I=c.createWebChannel(E,p);this.E_(I);let T=!1,V=!1;const j=new hR({Zo:q=>{V?Z(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(T||(Z(Wt,`Opening RPC '${e}' stream ${o} transport.`),I.open(),T=!0),Z(Wt,`RPC '${e}' stream ${o} sending:`,q),I.send(q))},Xo:()=>I.close()}),H=(q,Ee,J)=>{q.listen(Ee,te=>{try{J(te)}catch(ue){setTimeout(()=>{throw ue},0)}})};return H(I,_l.EventType.OPEN,()=>{V||(Z(Wt,`RPC '${e}' stream ${o} transport opened.`),j.__())}),H(I,_l.EventType.CLOSE,()=>{V||(V=!0,Z(Wt,`RPC '${e}' stream ${o} transport closed`),j.u_(),this.d_(I))}),H(I,_l.EventType.ERROR,q=>{V||(V=!0,zs(Wt,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),j.u_(new se(K.UNAVAILABLE,"The operation could not be completed")))}),H(I,_l.EventType.MESSAGE,q=>{var Ee;if(!V){const J=q.data[0];ve(!!J,16349);const te=J,ue=(te==null?void 0:te.error)||((Ee=te[0])===null||Ee===void 0?void 0:Ee.error);if(ue){Z(Wt,`RPC '${e}' stream ${o} received error:`,ue);const de=ue.status;let _e=function(P){const N=Tt[P];if(N!==void 0)return sw(N)}(de),x=ue.message;_e===void 0&&(_e=K.INTERNAL,x="Unknown error status: "+de+" with message "+ue.message),V=!0,j.u_(new se(_e,x)),I.close()}else Z(Wt,`RPC '${e}' stream ${o} received:`,J),j.c_(J)}}),H(d,oE.STAT_EVENT,q=>{q.stat===Kf.PROXY?Z(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===Kf.NOPROXY&&Z(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{j.a_()},0),j}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(){return typeof window<"u"?window:null}function $c(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(i){return new pA(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t,r=1e3,o=1.5,a=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=o,this.V_=a,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,t-r);o>0&&Z("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="PersistentStream";class Uw{constructor(e,t,r,o,a,c,d,p){this.xi=e,this.S_=r,this.D_=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Fw(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(sn(t.toString()),sn("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===t&&this.z_(r,o)},r=>{e(()=>{const o=new se(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Z(Z_,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(Z(Z_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pR extends Uw{constructor(e,t,r,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=yA(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ie.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?on(c.readTime):Ie.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=ap(this.serializer),t.addTarget=function(a,c){let d;const p=c.target;if(d=nh(p)?{documents:fw(a,p)}:{query:pw(a,p).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=lw(a,c.resumeToken);const y=sp(a,c.expectedCount);y!==null&&(d.expectedCount=y)}else if(c.snapshotVersion.compareTo(Ie.min())>0){d.readTime=fa(a,c.snapshotVersion.toTimestamp());const y=sp(a,c.expectedCount);y!==null&&(d.expectedCount=y)}return d}(this.serializer,e);const r=vA(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=ap(this.serializer),t.removeTarget=e,this.Q_(t)}}class mR extends Uw{constructor(e,t,r,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=_A(e.writeResults,e.commitTime),r=on(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=ap(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>sh(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{}class yR extends gR{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new se(K.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.zo(e,op(t,r),o,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new se(K.UNKNOWN,a.toString())})}Yo(e,t,r,o,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(e,op(t,r),o,c,d,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se(K.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class _R{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(sn(t),this.ua=!1):Z("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="RemoteStore";class vR{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=a,this.Ra.No(c=>{r.enqueueAndForget(async()=>{Ys(this)&&(Z(Gs,"Restarting streams for network reachability change."),await async function(p){const y=Ne(p);y.da.add(4),await nu(y),y.Va.set("Unknown"),y.da.delete(4),await Lh(y)}(this))})}),this.Va=new _R(r,o)}}async function Lh(i){if(Ys(i))for(const e of i.Aa)await e(!0)}async function nu(i){for(const e of i.Aa)await e(!1)}function Bw(i,e){const t=Ne(i);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),Xp(t)?Yp(t):Ia(t).N_()&&Qp(t,e))}function Wp(i,e){const t=Ne(i),r=Ia(t);t.Ea.delete(e),r.N_()&&zw(t,e),t.Ea.size===0&&(r.N_()?r.k_():Ys(t)&&t.Va.set("Unknown"))}function Qp(i,e){if(i.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ia(i).Z_(e)}function zw(i,e){i.ma.Ke(e),Ia(i).X_(e)}function Yp(i){i.ma=new cA({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i.Ea.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),Ia(i).start(),i.Va.ca()}function Xp(i){return Ys(i)&&!Ia(i).O_()&&i.Ea.size>0}function Ys(i){return Ne(i).da.size===0}function jw(i){i.ma=void 0}async function ER(i){i.Va.set("Online")}async function wR(i){i.Ea.forEach((e,t)=>{Qp(i,e)})}async function IR(i,e){jw(i),Xp(i)?(i.Va.Pa(e),Yp(i)):i.Va.set("Unknown")}async function TR(i,e,t){if(i.Va.set("Online"),e instanceof aw&&e.state===2&&e.cause)try{await async function(o,a){const c=a.cause;for(const d of a.targetIds)o.Ea.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ea.delete(d),o.ma.removeTarget(d))}(i,e)}catch(r){Z(Gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ch(i,r)}else if(e instanceof zc?i.ma.Xe(e):e instanceof ow?i.ma.ot(e):i.ma.nt(e),!t.isEqual(Ie.min()))try{const r=await Mw(i.localStore);t.compareTo(r)>=0&&await function(a,c){const d=a.ma.It(c);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=a.Ea.get(y);E&&a.Ea.set(y,E.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,y)=>{const E=a.Ea.get(p);if(!E)return;a.Ea.set(p,E.withResumeToken(St.EMPTY_BYTE_STRING,E.snapshotVersion)),zw(a,p);const I=new $r(E.target,p,y,E.sequenceNumber);Qp(a,I)}),a.remoteSyncer.applyRemoteEvent(d)}(i,t)}catch(r){Z(Gs,"Failed to raise snapshot:",r),await ch(i,r)}}async function ch(i,e,t){if(!Ki(e))throw e;i.da.add(1),await nu(i),i.Va.set("Offline"),t||(t=()=>Mw(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Z(Gs,"Retrying IndexedDB access"),await t(),i.da.delete(1),await Lh(i)})}function $w(i,e){return e().catch(t=>ch(i,t,e))}async function ru(i){const e=Ne(i),t=$i(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Vs;for(;SR(e);)try{const o=await sR(e.localStore,r);if(o===null){e.Ia.length===0&&t.k_();break}r=o.batchId,AR(e,o)}catch(o){await ch(e,o)}qw(e)&&Kw(e)}function SR(i){return Ys(i)&&i.Ia.length<10}function AR(i,e){i.Ia.push(e);const t=$i(i);t.N_()&&t.ea&&t.ta(e.mutations)}function qw(i){return Ys(i)&&!$i(i).O_()&&i.Ia.length>0}function Kw(i){$i(i).start()}async function RR(i){$i(i).ia()}async function PR(i){const e=$i(i);for(const t of i.Ia)e.ta(t.mutations)}async function CR(i,e,t){const r=i.Ia.shift(),o=Lp.from(r,e,t);await $w(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await ru(i)}async function kR(i,e){e&&$i(i).ea&&await async function(r,o){if(function(c){return lA(c)&&c!==K.ABORTED}(o.code)){const a=r.Ia.shift();$i(r).L_(),await $w(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o)),await ru(r)}}(i,e),qw(i)&&Kw(i)}async function ev(i,e){const t=Ne(i);t.asyncQueue.verifyOperationInProgress(),Z(Gs,"RemoteStore received new credentials");const r=Ys(t);t.da.add(3),await nu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await Lh(t)}async function xR(i,e){const t=Ne(i);e?(t.da.delete(2),await Lh(t)):e||(t.da.add(2),await nu(t),t.Va.set("Unknown"))}function Ia(i){return i.fa||(i.fa=function(t,r,o){const a=Ne(t);return a.oa(),new pR(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(i.datastore,i.asyncQueue,{e_:ER.bind(null,i),n_:wR.bind(null,i),i_:IR.bind(null,i),Y_:TR.bind(null,i)}),i.Aa.push(async e=>{e?(i.fa.L_(),Xp(i)?Yp(i):i.Va.set("Unknown")):(await i.fa.stop(),jw(i))})),i.fa}function $i(i){return i.ga||(i.ga=function(t,r,o){const a=Ne(t);return a.oa(),new mR(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(i.datastore,i.asyncQueue,{e_:()=>Promise.resolve(),n_:RR.bind(null,i),i_:kR.bind(null,i),na:PR.bind(null,i),ra:CR.bind(null,i)}),i.Aa.push(async e=>{e?(i.ga.L_(),await ru(i)):(await i.ga.stop(),i.Ia.length>0&&(Z(Gs,`Stopping write stream with ${i.Ia.length} pending writes`),i.Ia=[]))})),i.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const c=Date.now()+r,d=new Jp(e,t,c,o,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zp(i,e){if(sn("AsyncQueue",`${e}: ${i}`),Ki(i))return new se(K.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{static emptySet(e){return new Xo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||oe.comparator(t.key,r.key):(t,r)=>oe.comparator(t.key,r.key),this.keyedMap=vl(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Xo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(){this.pa=new ct(oe.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):pe(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class pa{constructor(e,t,r,o,a,c,d,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,o,a){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new pa(e,t,Xo.emptySet(t),c,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class DR{constructor(){this.queries=nv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=Ne(t),a=o.queries;o.queries=nv(),a.forEach((c,d)=>{for(const p of d.Sa)p.onError(r)})})(this,new se(K.ABORTED,"Firestore shutting down"))}}function nv(){return new Xr(i=>HE(i),Ch)}async function Hw(i,e){const t=Ne(i);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.Da()&&e.va()&&(r=2):(a=new NR,r=e.va()?0:1);try{switch(r){case 0:a.ba=await t.onListen(o,!0);break;case 1:a.ba=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=Zp(c,`Initialization of query '${Go(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.Sa.push(e),e.Fa(t.onlineState),a.ba&&e.Ma(a.ba)&&em(t)}async function Gw(i,e){const t=Ne(i),r=e.query;let o=3;const a=t.queries.get(r);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?o=e.va()?0:1:!a.Da()&&e.va()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function bR(i,e){const t=Ne(i);let r=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const d of c.Sa)d.Ma(o)&&(r=!0);c.ba=o}}r&&em(t)}function VR(i,e,t){const r=Ne(i),o=r.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);r.queries.delete(e)}function em(i){i.Ca.forEach(e=>{e.next()})}var pp,rv;(rv=pp||(pp={})).xa="default",rv.Cache="cache";class Ww{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==pp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e){this.key=e}}class Yw{constructor(e){this.key=e}}class OR{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ve(),this.mutatedKeys=Ve(),this.Za=GE(e),this.Xa=new Xo(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new tv,o=t?t.Xa:this.Xa;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,I)=>{const T=o.get(E),V=eu(this.query,I)?I:null,j=!!T&&this.mutatedKeys.has(T.key),H=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let q=!1;T&&V?T.data.isEqual(V.data)?j!==H&&(r.track({type:3,doc:V}),q=!0):this.ru(T,V)||(r.track({type:2,doc:V}),q=!0,(p&&this.Za(V,p)>0||y&&this.Za(V,y)<0)&&(d=!0)):!T&&V?(r.track({type:0,doc:V}),q=!0):T&&!V&&(r.track({type:1,doc:T}),q=!0,(p||y)&&(d=!0)),q&&(V?(c=c.add(V),a=H?a.add(E):a.delete(E)):(c=c.delete(E),a=a.delete(E)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),a=a.delete(E.key),r.track({type:1,doc:E})}return{Xa:c,nu:r,Cs:d,mutatedKeys:a}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const c=e.nu.wa();c.sort((E,I)=>function(V,j){const H=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Vt:q})}};return H(V)-H(j)}(E.type,I.type)||this.Za(E.doc,I.doc)),this.iu(r),o=o!=null&&o;const d=t&&!o?this.su():[],p=this.Ya.size===0&&this.current&&!o?1:0,y=p!==this.Ja;return this.Ja=p,c.length!==0||y?{snapshot:new pa(this.query,e.Xa,a,c,e.mutatedKeys,p===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new tv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Ve(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new Yw(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new Qw(r))}),t}au(e){this.Ha=e.$s,this.Ya=Ve();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return pa.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const tm="SyncEngine";class MR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class LR{constructor(e){this.key=e,this.cu=!1}}class FR{constructor(e,t,r,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new Xr(d=>HE(d),Ch),this.Pu=new Map,this.Tu=new Set,this.Iu=new ct(oe.comparator),this.Eu=new Map,this.du=new $p,this.Au={},this.Ru=new Map,this.Vu=Hs.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function UR(i,e,t=!0){const r=n0(i);let o;const a=r.hu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.uu()):o=await Xw(r,e,t,!0),o}async function BR(i,e){const t=n0(i);await Xw(t,e,!0,!1)}async function Xw(i,e,t,r){const o=await oR(i.localStore,Fn(e)),a=o.targetId,c=i.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await zR(i,e,a,c==="current",o.resumeToken)),i.isPrimaryClient&&t&&Bw(i.remoteStore,o),d}async function zR(i,e,t,r,o){i.fu=(I,T,V)=>async function(H,q,Ee,J){let te=q.view.tu(Ee);te.Cs&&(te=await Q_(H.localStore,q.query,!1).then(({documents:x})=>q.view.tu(x,te)));const ue=J&&J.targetChanges.get(q.targetId),de=J&&J.targetMismatches.get(q.targetId)!=null,_e=q.view.applyChanges(te,H.isPrimaryClient,ue,de);return sv(H,q.targetId,_e.ou),_e.snapshot}(i,I,T,V);const a=await Q_(i.localStore,e,!0),c=new OR(e,a.$s),d=c.tu(a.documents),p=tu.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),y=c.applyChanges(d,i.isPrimaryClient,p);sv(i,t,y.ou);const E=new MR(e,t,c);return i.hu.set(e,E),i.Pu.has(t)?i.Pu.get(t).push(e):i.Pu.set(t,[e]),y.snapshot}async function jR(i,e,t){const r=Ne(i),o=r.hu.get(e),a=r.Pu.get(o.targetId);if(a.length>1)return r.Pu.set(o.targetId,a.filter(c=>!Ch(c,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await dp(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Wp(r.remoteStore,o.targetId),mp(r,o.targetId)}).catch(Qs)):(mp(r,o.targetId),await dp(r.localStore,o.targetId,!0))}async function $R(i,e){const t=Ne(i),r=t.hu.get(e),o=t.Pu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Wp(t.remoteStore,r.targetId))}async function qR(i,e,t){const r=r0(i);try{const o=await function(c,d){const p=Ne(c),y=mt.now(),E=d.reduce((V,j)=>V.add(j.key),Ve());let I,T;return p.persistence.runTransaction("Locally write mutations","readwrite",V=>{let j=An(),H=Ve();return p.Bs.getEntries(V,E).next(q=>{j=q,j.forEach((Ee,J)=>{J.isValidDocument()||(H=H.add(Ee))})}).next(()=>p.localDocuments.getOverlayedDocuments(V,j)).next(q=>{I=q;const Ee=[];for(const J of d){const te=oA(J,I.get(J.key).overlayedDocument);te!=null&&Ee.push(new Jr(J.key,te,LE(te.value.mapValue),Xt.exists(!0)))}return p.mutationQueue.addMutationBatch(V,y,Ee,d)}).next(q=>{T=q;const Ee=q.applyToLocalDocumentSet(I,H);return p.documentOverlayCache.saveOverlays(V,q.batchId,Ee)})}).then(()=>({batchId:T.batchId,changes:QE(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,d,p){let y=c.Au[c.currentUser.toKey()];y||(y=new ct(Re)),y=y.insert(d,p),c.Au[c.currentUser.toKey()]=y}(r,o.batchId,t),await iu(r,o.changes),await ru(r.remoteStore)}catch(o){const a=Zp(o,"Failed to persist write");t.reject(a)}}async function Jw(i,e){const t=Ne(i);try{const r=await rR(t.localStore,e);e.targetChanges.forEach((o,a)=>{const c=t.Eu.get(a);c&&(ve(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.cu=!0:o.modifiedDocuments.size>0?ve(c.cu,14607):o.removedDocuments.size>0&&(ve(c.cu,42227),c.cu=!1))}),await iu(t,r,e)}catch(r){await Qs(r)}}function iv(i,e,t){const r=Ne(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.hu.forEach((a,c)=>{const d=c.view.Fa(e);d.snapshot&&o.push(d.snapshot)}),function(c,d){const p=Ne(c);p.onlineState=d;let y=!1;p.queries.forEach((E,I)=>{for(const T of I.Sa)T.Fa(d)&&(y=!0)}),y&&em(p)}(r.eventManager,e),o.length&&r.lu.Y_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KR(i,e,t){const r=Ne(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),a=o&&o.key;if(a){let c=new ct(oe.comparator);c=c.insert(a,yt.newNoDocument(a,Ie.min()));const d=Ve().add(a),p=new Dh(Ie.min(),new Map,new ct(Re),c,d);await Jw(r,p),r.Iu=r.Iu.remove(a),r.Eu.delete(e),nm(r)}else await dp(r.localStore,e,!1).then(()=>mp(r,e,t)).catch(Qs)}async function HR(i,e){const t=Ne(i),r=e.batch.batchId;try{const o=await nR(t.localStore,e);e0(t,r,null),Zw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await iu(t,o)}catch(o){await Qs(o)}}async function GR(i,e,t){const r=Ne(i);try{const o=await function(c,d){const p=Ne(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return p.mutationQueue.lookupMutationBatch(y,d).next(I=>(ve(I!==null,37113),E=I.keys(),p.mutationQueue.removeMutationBatch(y,I))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>p.localDocuments.getDocuments(y,E))})}(r.localStore,e);e0(r,e,t),Zw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await iu(r,o)}catch(o){await Qs(o)}}function Zw(i,e){(i.Ru.get(e)||[]).forEach(t=>{t.resolve()}),i.Ru.delete(e)}function e0(i,e,t){const r=Ne(i);let o=r.Au[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.Au[r.currentUser.toKey()]=o}}function mp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Pu.get(e))i.hu.delete(r),t&&i.lu.gu(r,t);i.Pu.delete(e),i.isPrimaryClient&&i.du.Hr(e).forEach(r=>{i.du.containsKey(r)||t0(i,r)})}function t0(i,e){i.Tu.delete(e.path.canonicalString());const t=i.Iu.get(e);t!==null&&(Wp(i.remoteStore,t),i.Iu=i.Iu.remove(e),i.Eu.delete(t),nm(i))}function sv(i,e,t){for(const r of t)r instanceof Qw?(i.du.addReference(r.key,e),WR(i,r)):r instanceof Yw?(Z(tm,"Document no longer in limbo: "+r.key),i.du.removeReference(r.key,e),i.du.containsKey(r.key)||t0(i,r.key)):pe(19791,{pu:r})}function WR(i,e){const t=e.key,r=t.path.canonicalString();i.Iu.get(t)||i.Tu.has(r)||(Z(tm,"New document in limbo: "+t),i.Tu.add(r),nm(i))}function nm(i){for(;i.Tu.size>0&&i.Iu.size<i.maxConcurrentLimboResolutions;){const e=i.Tu.values().next().value;i.Tu.delete(e);const t=new oe(Qe.fromString(e)),r=i.Vu.next();i.Eu.set(r,new LR(t)),i.Iu=i.Iu.insert(t,r),Bw(i.remoteStore,new $r(Fn(Ph(t.path)),r,"TargetPurposeLimboResolution",Ln.le))}}async function iu(i,e,t){const r=Ne(i),o=[],a=[],c=[];r.hu.isEmpty()||(r.hu.forEach((d,p)=>{c.push(r.fu(p,e,t).then(y=>{var E;if((y||t)&&r.isPrimaryClient){const I=y?!y.fromCache:(E=t==null?void 0:t.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;r.sharedClientState.updateQueryState(p.targetId,I?"current":"not-current")}if(y){o.push(y);const I=Hp.Rs(p.targetId,y);a.push(I)}}))}),await Promise.all(c),r.lu.Y_(o),await async function(p,y){const E=Ne(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>F.forEach(y,T=>F.forEach(T.ds,V=>E.persistence.referenceDelegate.addReference(I,T.targetId,V)).next(()=>F.forEach(T.As,V=>E.persistence.referenceDelegate.removeReference(I,T.targetId,V)))))}catch(I){if(!Ki(I))throw I;Z(Gp,"Failed to update sequence numbers: "+I)}for(const I of y){const T=I.targetId;if(!I.fromCache){const V=E.xs.get(T),j=V.snapshotVersion,H=V.withLastLimboFreeSnapshotVersion(j);E.xs=E.xs.insert(T,H)}}}(r.localStore,a))}async function QR(i,e){const t=Ne(i);if(!t.currentUser.isEqual(e)){Z(tm,"User change. New user:",e.toKey());const r=await Ow(t.localStore,e);t.currentUser=e,function(a,c){a.Ru.forEach(d=>{d.forEach(p=>{p.reject(new se(K.CANCELLED,c))})}),a.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await iu(t,r.ks)}}function YR(i,e){const t=Ne(i),r=t.Eu.get(e);if(r&&r.cu)return Ve().add(r.key);{let o=Ve();const a=t.Pu.get(e);if(!a)return o;for(const c of a){const d=t.hu.get(c);o=o.unionWith(d.view.eu)}return o}}function n0(i){const e=Ne(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KR.bind(null,e),e.lu.Y_=bR.bind(null,e.eventManager),e.lu.gu=VR.bind(null,e.eventManager),e}function r0(i){const e=Ne(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GR.bind(null,e),e}class Wl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return Vw(this.persistence,new bw,e.initialUser,this.serializer)}Su(e){return new qp(Oh.fi,this.serializer)}bu(e){return new Lw}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wl.provider={build:()=>new Wl};class XR extends Wl{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){ve(this.persistence.referenceDelegate instanceof uh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Cw(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new qp(r=>uh.fi(r,t),this.serializer)}}class JR extends Wl{constructor(e,t,r){super(),this.Fu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Fu.initialize(this,e),await r0(this.Fu.syncEngine),await ru(this.Fu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Du(e){return Vw(this.persistence,new bw,e.initialUser,this.serializer)}vu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new Cw(r,e.asyncQueue,t)}Cu(e,t){const r=new i1(t,this.persistence);return new r1(e.asyncQueue,r)}Su(e){const t=JA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new Kp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,fR(),$c(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new Lw}}class hh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>iv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QR.bind(null,this.syncEngine),await xR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DR}()}createDatastore(e){const t=Mh(e.databaseInfo.databaseId),r=function(a){return new dR(a)}(e.databaseInfo);return function(a,c,d,p){return new yR(a,c,d,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,a,c,d){return new vR(r,o,a,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>iv(this.syncEngine,t,0),function(){return J_.C()?new J_:new lR}())}createSyncEngine(e,t){return function(o,a,c,d,p,y,E){const I=new FR(o,a,c,d,p,y);return E&&(I.mu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=Ne(o);Z(Gs,"RemoteStore shutting down."),a.da.add(5),await nu(a),a.Ra.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}hh.provider={build:()=>new hh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):sn("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="FirestoreClient";class ZR{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=jt.UNAUTHENTICATED,this.clientId=dE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{Z(qi,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Z(qi,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Zp(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Mf(i,e){i.asyncQueue.verifyOperationInProgress(),Z(qi,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener(async o=>{r.isEqual(o)||(await Ow(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function ov(i,e){i.asyncQueue.verifyOperationInProgress();const t=await eP(i);Z(qi,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(r=>ev(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,o)=>ev(e.remoteStore,o)),i._onlineComponents=e}async function eP(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Z(qi,"Using user provided OfflineComponentProvider");try{await Mf(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;zs("Error using user provided cache. Falling back to memory cache: "+t),await Mf(i,new Wl)}}else Z(qi,"Using default OfflineComponentProvider"),await Mf(i,new XR(void 0));return i._offlineComponents}async function s0(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Z(qi,"Using user provided OnlineComponentProvider"),await ov(i,i._uninitializedComponentsProvider._online)):(Z(qi,"Using default OnlineComponentProvider"),await ov(i,new hh))),i._onlineComponents}function tP(i){return s0(i).then(e=>e.syncEngine)}async function o0(i){const e=await s0(i),t=e.eventManager;return t.onListen=UR.bind(null,e.syncEngine),t.onUnlisten=jR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$R.bind(null,e.syncEngine),t}function nP(i,e,t={}){const r=new Tr;return i.asyncQueue.enqueueAndForget(async()=>function(a,c,d,p,y){const E=new i0({next:T=>{E.xu(),c.enqueueAndForget(()=>Gw(a,I));const V=T.docs.has(d);!V&&T.fromCache?y.reject(new se(K.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&T.fromCache&&p&&p.source==="server"?y.reject(new se(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),I=new Ww(Ph(d.path),E,{includeMetadataChanges:!0,Qa:!0});return Hw(a,I)}(await o0(i),i.asyncQueue,e,t,r)),r.promise}function rP(i,e,t={}){const r=new Tr;return i.asyncQueue.enqueueAndForget(async()=>function(a,c,d,p,y){const E=new i0({next:T=>{E.xu(),c.enqueueAndForget(()=>Gw(a,I)),T.fromCache&&p.source==="server"?y.reject(new se(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),I=new Ww(d,E,{includeMetadataChanges:!0,Qa:!0});return Hw(a,I)}(await o0(i),i.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(i,e,t){if(!t)throw new se(K.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function iP(i,e,t,r){if(e===!0&&r===!0)throw new se(K.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function lv(i){if(!oe.isDocumentKey(i))throw new se(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function uv(i){if(oe.isDocumentKey(i))throw new se(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Fh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":pe(12329,{type:typeof i})}function Un(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new se(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fh(i);throw new se(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="firestore.googleapis.com",cv=!0;class hv{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=u0,this.ssl=cv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:cv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Sw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OA)throw new se(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new se(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new se(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new se(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uh{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new KS;switch(r.type){case"firstParty":return new QS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=av.get(t);r&&(Z("ComponentProvider","Removing Datastore"),av.delete(t),r.terminate())}(this),Promise.resolve()}}function sP(i,e,t,r={}){var o;i=Un(i,Uh);const a=ya(e),c=i._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:i._getEmulatorOptions()}),p=`${e}:${t}`;a&&(Kv(`https://${p}`),Hv("Firestore",!0)),c.host!==u0&&c.host!==p&&zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},c),{host:p,ssl:a,emulatorOptions:r});if(!Fs(y,d)&&(i._setSettings(y),r.mockUserToken)){let E,I;if(typeof r.mockUserToken=="string")E=r.mockUserToken,I=jt.MOCK_USER;else{E=wT(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new se(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new jt(T)}i._authCredentials=new HS(new cE(E,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xs(this.firestore,e,this._query)}}class an{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class Bi extends Xs{constructor(e,t,r){super(e,t,Ph(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new oe(e))}withConverter(e){return new Bi(this.firestore,e,this._path)}}function gp(i,e,...t){if(i=Zt(i),l0("collection","path",e),i instanceof Uh){const r=Qe.fromString(e,...t);return uv(r),new Bi(i,null,r)}{if(!(i instanceof an||i instanceof Bi))throw new se(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Qe.fromString(e,...t));return uv(r),new Bi(i.firestore,null,r)}}function Ps(i,e,...t){if(i=Zt(i),arguments.length===1&&(e=dE.newId()),l0("doc","path",e),i instanceof Uh){const r=Qe.fromString(e,...t);return lv(r),new an(i,null,new oe(r))}{if(!(i instanceof an||i instanceof Bi))throw new se(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Qe.fromString(e,...t));return lv(r),new an(i.firestore,i instanceof Bi?i.converter:null,new oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="AsyncQueue";class fv{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Fw(this,"async_queue_retry"),this.rc=()=>{const r=$c();r&&Z(dv,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=$c();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=$c();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Tr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Ki(e))throw e;Z(dv,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,sn("INTERNAL UNHANDLED ERROR: ",pv(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const o=Jp.createAndSchedule(this,e,t,r,a=>this.uc(a));return this.Zu.push(o),o}oc(){this.Xu&&pe(47125,{cc:pv(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function pv(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Gi extends Uh{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new fv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fv(e),this._firestoreClient=void 0,await e}}}function oP(i,e){const t=typeof i=="object"?i:eE(),r=typeof i=="string"?i:th,o=Tp(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const a=vT("firestore");a&&sP(o,...a)}return o}function rm(i){if(i._terminated)throw new se(K.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||c0(i),i._firestoreClient}function c0(i){var e,t,r;const o=i._freezeSettings(),a=function(d,p,y,E){return new b1(d,p,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,a0(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new ZR(i._authCredentials,i._appCheckCredentials,i._queue,a,i._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(i._componentsProvider))}function aP(i,e){zs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings();return lP(i,hh.provider,{build:r=>new JR(r,t.cacheSizeBytes,void 0)}),Promise.resolve()}function lP(i,e,t){if((i=Un(i,Gi))._firestoreClient||i._terminated)throw new se(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new se(K.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:e,_offline:t},c0(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ma(St.fromBase64String(e))}catch(t){throw new se(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ma(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=/^__.*__$/;class cP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Jr(e,this.data,this.fieldMask,t,this.fieldTransforms):new wa(e,this.data,t,this.fieldTransforms)}}class h0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Jr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function d0(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ic:i})}}class am{constructor(e,t,r,o,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.Ec(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new am(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Vc(e),o}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return dh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(d0(this.Ic)&&uP.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class hP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Mh(e)}bc(e,t,r,o=!1){return new am({Ic:e,methodName:t,wc:r,path:pt.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zh(i){const e=i._freezeSettings(),t=Mh(i._databaseId);return new hP(i._databaseId,!!e.ignoreUndefinedProperties,t)}function f0(i,e,t,r,o,a={}){const c=i.bc(a.merge||a.mergeFields?2:0,e,t,o);lm("Data must be an object, but it was:",c,r);const d=p0(r,c);let p,y;if(a.merge)p=new gn(c.fieldMask),y=c.fieldTransforms;else if(a.mergeFields){const E=[];for(const I of a.mergeFields){const T=yp(e,I,t);if(!c.contains(T))throw new se(K.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);g0(E,T)||E.push(T)}p=new gn(E),y=c.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,y=c.fieldTransforms;return new cP(new Yt(d),p,y)}class jh extends im{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jh}}function dP(i,e,t,r){const o=i.bc(1,e,t);lm("Data must be an object, but it was:",o,r);const a=[],c=Yt.empty();Hi(r,(p,y)=>{const E=um(e,p,t);y=Zt(y);const I=o.mc(E);if(y instanceof jh)a.push(E);else{const T=su(y,I);T!=null&&(a.push(E),c.set(E,T))}});const d=new gn(a);return new h0(c,d,o.fieldTransforms)}function fP(i,e,t,r,o,a){const c=i.bc(1,e,t),d=[yp(e,r,t)],p=[o];if(a.length%2!=0)throw new se(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)d.push(yp(e,a[T])),p.push(a[T+1]);const y=[],E=Yt.empty();for(let T=d.length-1;T>=0;--T)if(!g0(y,d[T])){const V=d[T];let j=p[T];j=Zt(j);const H=c.mc(V);if(j instanceof jh)y.push(V);else{const q=su(j,H);q!=null&&(y.push(V),E.set(V,q))}}const I=new gn(y);return new h0(E,I,c.fieldTransforms)}function pP(i,e,t,r=!1){return su(t,i.bc(r?4:3,e))}function su(i,e){if(m0(i=Zt(i)))return lm("Unsupported field value:",e,i),p0(i,e);if(i instanceof im)return function(r,o){if(!d0(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,o){const a=[];let c=0;for(const d of r){let p=su(d,o.fc(c));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}}(i,e)}return function(r,o){if((r=Zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Z1(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=mt.fromDate(r);return{timestampValue:fa(o.serializer,a)}}if(r instanceof mt){const a=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fa(o.serializer,a)}}if(r instanceof sm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ma)return{bytesValue:lw(o.serializer,r._byteString)};if(r instanceof an){const a=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw o.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Bp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof om)return function(c,d){return{mapValue:{fields:{[Dp]:{stringValue:bp},[aa]:{arrayValue:{values:c.toArray().map(y=>{if(typeof y!="number")throw d.gc("VectorValues must only contain numeric values.");return Op(d.serializer,y)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${Fh(r)}`)}(i,e)}function p0(i,e){const t={};return CE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(i,(r,o)=>{const a=su(o,e.Ac(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function m0(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof mt||i instanceof sm||i instanceof ma||i instanceof an||i instanceof im||i instanceof om)}function lm(i,e,t){if(!m0(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=Fh(t);throw r==="an object"?e.gc(i+" a custom object"):e.gc(i+" "+r)}}function yp(i,e,t){if((e=Zt(e))instanceof Bh)return e._internalPath;if(typeof e=="string")return um(i,e);throw dh("Field path arguments must be of type string or ",i,!1,void 0,t)}const mP=new RegExp("[~\\*/\\[\\]]");function um(i,e,t){if(e.search(mP)>=0)throw dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Bh(...e.split("."))._internalPath}catch{throw dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function dh(i,e,t,r,o){const a=r&&!r.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new se(K.INVALID_ARGUMENT,d+i+p)}function g0(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($h("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class gP extends y0{data(){return super.data()}}function $h(i,e){return typeof e=="string"?um(i,e):e instanceof Bh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new se(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cm{}class _0 extends cm{}function _P(i,e,...t){let r=[];e instanceof cm&&r.push(e),r=r.concat(t),function(a){const c=a.filter(p=>p instanceof hm).length,d=a.filter(p=>p instanceof qh).length;if(c>1||c>0&&d>0)throw new se(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)i=o._apply(i);return i}class qh extends _0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new qh(e,t,r)}_apply(e){const t=this._parse(e);return v0(e._query,t),new Xs(e.firestore,e.converter,rp(e._query,t))}_parse(e){const t=zh(e.firestore);return function(a,c,d,p,y,E,I){let T;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new se(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){gv(I,E);const j=[];for(const H of I)j.push(mv(p,a,H));T={arrayValue:{values:j}}}else T=mv(p,a,I)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||gv(I,E),T=pP(d,c,I,E==="in"||E==="not-in");return Ue.create(y,E,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function vP(i,e,t){const r=e,o=$h("where",i);return qh._create(o,r,t)}class hm extends cm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ze.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,a){let c=o;const d=a.getFlattenedFilters();for(const p of d)v0(c,p),c=rp(c,p)}(e._query,t),new Xs(e.firestore,e.converter,rp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dm extends _0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dm(e,t)}_apply(e){const t=function(o,a,c){if(o.startAt!==null)throw new se(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new se(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kl(a,c)}(e._query,this._field,this._direction);return new Xs(e.firestore,e.converter,function(o,a){const c=o.explicitOrderBy.concat([a]);return new Ea(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function EP(i,e="asc"){const t=e,r=$h("orderBy",i);return dm._create(r,t)}function mv(i,e,t){if(typeof(t=Zt(t))=="string"){if(t==="")throw new se(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KE(e)&&t.indexOf("/")!==-1)throw new se(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qe.fromString(t));if(!oe.isDocumentKey(r))throw new se(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $l(i,new oe(r))}if(t instanceof an)return $l(i,t._key);throw new se(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fh(t)}.`)}function gv(i,e){if(!Array.isArray(i)||i.length===0)throw new se(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function v0(i,e){const t=function(o,a){for(const c of o)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new se(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class wP{convertValue(e,t="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Hi(e,(o,a)=>{r[o]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,o;const a=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[aa].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(c=>ut(c.doubleValue));return new om(a)}convertGeoPoint(e){return new sm(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ah(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zl(e));default:return null}}convertTimestamp(e){const t=Gr(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qe.fromString(e);ve(_w(r),9688,{name:e});const o=new js(r.get(1),r.get(3)),a=new oe(r.popFirst(5));return o.isEqual(t)||sn(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(i,e,t){let r;return r=i?i.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class w0 extends y0{constructor(e,t,r,o,a,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field($h("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class qc extends w0{data(e={}){return super.data(e)}}class IP{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Il(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qc(this._firestore,this._userDataWriter,r.key,r,new Il(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(d=>{const p=new qc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Il(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const p=new qc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Il(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return d.type!==0&&(y=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),E=c.indexOf(d.doc.key)),{type:TP(d.type),doc:p,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function TP(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(i){i=Un(i,an);const e=Un(i.firestore,Gi);return nP(rm(e),i._key).then(t=>CP(e,i,t))}class I0 extends wP{constructor(e){super(),this.firestore=e}convertBytes(e){return new ma(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,t)}}function T0(i){i=Un(i,Xs);const e=Un(i.firestore,Gi),t=rm(e),r=new I0(e);return yP(i._query),rP(t,i._query).then(o=>new IP(e,r,i,o))}function Lf(i,e,t){i=Un(i,an);const r=Un(i.firestore,Gi),o=E0(i.converter,e);return Kh(r,[f0(zh(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,Xt.none())])}function AP(i,e,t,...r){i=Un(i,an);const o=Un(i.firestore,Gi),a=zh(o);let c;return c=typeof(e=Zt(e))=="string"||e instanceof Bh?fP(a,"updateDoc",i._key,e,t,r):dP(a,"updateDoc",i._key,e),Kh(o,[c.toMutation(i._key,Xt.exists(!0))])}function RP(i){return Kh(Un(i.firestore,Gi),[new Nh(i._key,Xt.none())])}function PP(i,e){const t=Un(i.firestore,Gi),r=Ps(i),o=E0(i.converter,e);return Kh(t,[f0(zh(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,Xt.exists(!1))]).then(()=>r)}function Kh(i,e){return function(r,o){const a=new Tr;return r.asyncQueue.enqueueAndForget(async()=>qR(await tP(r),o,a)),a.promise}(rm(i),e)}function CP(i,e,t){const r=t.docs.get(e._key),o=new I0(i);return new w0(i,o,e._key,r,new Il(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){va=o})(_a),ta(new Us("firestore",(r,{instanceIdentifier:o,options:a})=>{const c=r.getProvider("app").getImmediate(),d=new Gi(new GS(r.getProvider("auth-internal")),new YS(c,r.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new se(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new js(y.options.projectId,E)}(c,o),c);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Li(Qy,Yy,e),Li(Qy,Yy,"esm2017")})();var kP="firebase",xP="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li(kP,xP,"app");function fm(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(i);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(i,r[o])&&(t[r[o]]=i[r[o]]);return t}function S0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NP=S0,A0=new Yl("auth","Firebase",S0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new wp("@firebase/auth");function DP(i,...e){fh.logLevel<=Fe.WARN&&fh.warn(`Auth (${_a}): ${i}`,...e)}function Kc(i,...e){fh.logLevel<=Fe.ERROR&&fh.error(`Auth (${_a}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(i,...e){throw mm(i,...e)}function sr(i,...e){return mm(i,...e)}function pm(i,e,t){const r=Object.assign(Object.assign({},NP()),{[e]:t});return new Yl("auth","Firebase",r).create(e,{appName:i.name})}function Ls(i){return pm(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bP(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Rr(i,"argument-error"),pm(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mm(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return A0.create(i,...e)}function ke(i,e,...t){if(!i)throw mm(e,...t)}function qr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Kc(e),new Error(e)}function Qr(i,e){i||qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function VP(){return yv()==="http:"||yv()==="https:"}function yv(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VP()||RT()||"connection"in navigator)?navigator.onLine:!0}function MP(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,t){this.shortDelay=e,this.longDelay=t,Qr(t>e,"Short delay should be less than long delay!"),this.isMobile=ST()||PT()}get(){return OP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(i,e){Qr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UP=new ou(3e4,6e4);function ym(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Ta(i,e,t,r,o={}){return P0(i,o,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const d=Xl(Object.assign({key:i.config.apiKey},c)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const y=Object.assign({method:e,headers:p},a);return AT()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&ya(i.emulatorConfig.host)&&(y.credentials="include"),R0.fetch()(await C0(i,i.config.apiHost,t,d),y)})}async function P0(i,e,t){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},LP),e);try{const o=new zP(i),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Nc(i,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nc(i,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Nc(i,"email-already-in-use",c);if(p==="USER_DISABLED")throw Nc(i,"user-disabled",c);const E=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw pm(i,E,y);Rr(i,E)}}catch(o){if(o instanceof Yr)throw o;Rr(i,"network-request-failed",{message:String(o)})}}async function BP(i,e,t,r,o={}){const a=await Ta(i,e,t,r,o);return"mfaPendingCredential"in a&&Rr(i,"multi-factor-auth-required",{_serverResponse:a}),a}async function C0(i,e,t,r){const o=`${e}${t}?${r}`,a=i,c=a.config.emulator?gm(i.config,o):`${i.config.apiScheme}://${o}`;return FP.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}class zP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(sr(this.auth,"network-request-failed")),UP.get())})}}function Nc(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=sr(i,e,r);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(i,e){return Ta(i,"POST","/v1/accounts:delete",e)}async function ph(i,e){return Ta(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $P(i,e=!1){const t=Zt(i),r=await t.getIdToken(e),o=_m(r);ke(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:o,token:r,authTime:Dl(Ff(o.auth_time)),issuedAtTime:Dl(Ff(o.iat)),expirationTime:Dl(Ff(o.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Ff(i){return Number(i)*1e3}function _m(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Kc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Bv(t);return o?JSON.parse(o):(Kc("Failed to decode base64 JWT payload"),null)}catch(o){return Kc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function _v(i){const e=_m(i);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Yr&&qP(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function qP({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mh(i){var e;const t=i.auth,r=await i.getIdToken(),o=await Ql(i,ph(t,{idToken:r}));ke(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];i._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?k0(a.providerUserInfo):[],d=GP(i.providerData,c),p=i.isAnonymous,y=!(i.email&&a.passwordHash)&&!(d!=null&&d.length),E=p?y:!1,I={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new vp(a.createdAt,a.lastLoginAt),isAnonymous:E};Object.assign(i,I)}async function HP(i){const e=Zt(i);await mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GP(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function k0(i){return i.map(e=>{var{providerId:t}=e,r=fm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WP(i,e){const t=await P0(i,{},async()=>{const r=Xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=i.config,c=await C0(i,o,"/v1/token",`key=${a}`),d=await i._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:r};return i.emulatorConfig&&ya(i.emulatorConfig.host)&&(p.credentials="include"),R0.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function QP(i,e){return Ta(i,"POST","/v2/accounts:revokeToken",ym(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_v(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=_v(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:a}=await WP(e,t);this.updateTokensAndExpiration(r,o,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:a}=t,c=new Jo;return r&&(ke(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(ke(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(ke(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(i,e){ke(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ir{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,a=fm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new vp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Ql(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $P(this,e)}reload(){return HP(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ir(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rr(this.auth.app))return Promise.reject(Ls(this.auth));const e=await this.getIdToken();return await Ql(this,jP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,a,c,d,p,y,E;const I=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(o=t.email)!==null&&o!==void 0?o:void 0,V=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,j=(c=t.photoURL)!==null&&c!==void 0?c:void 0,H=(d=t.tenantId)!==null&&d!==void 0?d:void 0,q=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,Ee=(y=t.createdAt)!==null&&y!==void 0?y:void 0,J=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:te,emailVerified:ue,isAnonymous:de,providerData:_e,stsTokenManager:x}=t;ke(te&&x,e,"internal-error");const S=Jo.fromJSON(this.name,x);ke(typeof te=="string",e,"internal-error"),ki(I,e.name),ki(T,e.name),ke(typeof ue=="boolean",e,"internal-error"),ke(typeof de=="boolean",e,"internal-error"),ki(V,e.name),ki(j,e.name),ki(H,e.name),ki(q,e.name),ki(Ee,e.name),ki(J,e.name);const P=new ir({uid:te,auth:e,email:T,emailVerified:ue,displayName:I,isAnonymous:de,photoURL:j,phoneNumber:V,tenantId:H,stsTokenManager:S,createdAt:Ee,lastLoginAt:J});return _e&&Array.isArray(_e)&&(P.providerData=_e.map(N=>Object.assign({},N))),q&&(P._redirectEventId=q),P}static async _fromIdTokenResponse(e,t,r=!1){const o=new Jo;o.updateFromServerResponse(t);const a=new ir({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await mh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];ke(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?k0(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new Jo;d.updateFromIdToken(r);const p=new ir({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new vp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=new Map;function Kr(i){Qr(i instanceof Function,"Expected a class definition");let e=vv.get(i);return e?(Qr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,vv.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}x0.type="NONE";const Ev=x0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(i,e,t){return`firebase:${i}:${e}:${t}`}class Zo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:a}=this.auth;this.fullUserKey=Hc(this.userKey,o.apiKey,a),this.fullPersistenceKey=Hc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ph(this.auth,{idToken:e}).catch(()=>{});return t?ir._fromGetAccountInfoResponse(this.auth,t,e):null}return ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Zo(Kr(Ev),e,r);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let a=o[0]||Kr(Ev);const c=Hc(r,e.config.apiKey,e.name);let d=null;for(const y of t)try{const E=await y._get(c);if(E){let I;if(typeof E=="string"){const T=await ph(e,{idToken:E}).catch(()=>{});if(!T)break;I=await ir._fromGetAccountInfoResponse(e,T,E)}else I=ir._fromJSON(e,E);y!==a&&(d=I),a=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new Zo(a,e,r):(a=p[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==a)try{await y._remove(c)}catch{}})),new Zo(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(V0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(N0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(M0(e))return"Blackberry";if(L0(e))return"Webos";if(D0(e))return"Safari";if((e.includes("chrome/")||b0(e))&&!e.includes("edge/"))return"Chrome";if(O0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function N0(i=xt()){return/firefox\//i.test(i)}function D0(i=xt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function b0(i=xt()){return/crios\//i.test(i)}function V0(i=xt()){return/iemobile/i.test(i)}function O0(i=xt()){return/android/i.test(i)}function M0(i=xt()){return/blackberry/i.test(i)}function L0(i=xt()){return/webos/i.test(i)}function vm(i=xt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function YP(i=xt()){var e;return vm(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XP(){return CT()&&document.documentMode===10}function F0(i=xt()){return vm(i)||O0(i)||L0(i)||M0(i)||/windows phone/i.test(i)||V0(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(i,e=[]){let t;switch(i){case"Browser":t=wv(xt());break;case"Worker":t=`${wv(xt())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_a}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,d)=>{try{const p=e(a);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP(i,e={}){return Ta(i,"GET","/v2/passwordPolicy",ym(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=6;class tC{constructor(e){var t,r,o,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:eC,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,a,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Iv(this),this.idTokenSubscription=new Iv(this),this.beforeStateQueue=new JP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=A0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kr(t)),this._initializationPromise=this.queue(async()=>{var r,o,a;if(!this._deleted&&(this.persistenceManager=await Zo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ph(this,{idToken:e}),r=await ir._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(rr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rr(this.app))return Promise.reject(Ls(this));const t=e?Zt(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rr(this.app)?Promise.reject(Ls(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rr(this.app)?Promise.reject(Ls(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZP(this),t=new tC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yl("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await QP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Kr(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[Kr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=U0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&DP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Hh(i){return Zt(i)}class Iv{constructor(e){this.auth=e,this.observer=null,this.addObserver=VT(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Em={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rC(i){Em=i}function iC(i){return Em.loadJS(i)}function sC(){return Em.gapiScript}function oC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(i,e){const t=Tp(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Fs(a,e??{}))return o;Rr(o,"already-initialized")}return t.initialize({options:e})}function lC(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Kr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uC(i,e,t){const r=Hh(i);ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,a=B0(e),{host:c,port:d}=cC(e),p=d===null?"":`:${d}`,y={url:`${a}//${c}${p}/`},E=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){ke(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ke(Fs(y,r.config.emulator)&&Fs(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,ya(c)?(Kv(`${a}//${c}${p}`),Hv("Auth",!0)):hC()}function B0(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function cC(i){const e=B0(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const a=o[1];return{host:a,port:Tv(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:Tv(c)}}}function Tv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function hC(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qr("not implemented")}_getIdTokenResponse(e){return qr("not implemented")}_linkToIdToken(e,t){return qr("not implemented")}_getReauthenticationResolver(e){return qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(i,e){return BP(i,"POST","/v1/accounts:signInWithIdp",ym(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="http://localhost";class Ws extends z0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,a=fm(t,["providerId","signInMethod"]);if(!r||!o)return null;const c=new Ws(r,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ea(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ea(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ea(e,t)}buildRequest(){const e={requestUri:dC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends wm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends au{constructor(){super("facebook.com")}static credential(e){return Ws._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ni.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ws._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return jr.credential(t,r)}catch{return null}}}jr.GOOGLE_SIGN_IN_METHOD="google.com";jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends au{constructor(){super("github.com")}static credential(e){return Ws._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.GITHUB_SIGN_IN_METHOD="github.com";Di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends au{constructor(){super("twitter.com")}static credential(e,t){return Ws._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return bi.credential(t,r)}catch{return null}}}bi.TWITTER_SIGN_IN_METHOD="twitter.com";bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const a=await ir._fromIdTokenResponse(e,r,o),c=Sv(r);return new ga({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=Sv(r);return new ga({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function Sv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends Yr{constructor(e,t,r,o){var a;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new gh(e,t,r,o)}}function j0(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(i,a,e,r):a})}async function fC(i,e,t=!1){const r=await Ql(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return ga._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(i,e,t=!1){const{auth:r}=i;if(rr(r.app))return Promise.reject(Ls(r));const o="reauthenticate";try{const a=await Ql(i,j0(r,o,e,i),t);ke(a.idToken,r,"internal-error");const c=_m(a.idToken);ke(c,r,"internal-error");const{sub:d}=c;return ke(i.uid===d,r,"user-mismatch"),ga._forOperation(i,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Rr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(i,e,t=!1){if(rr(i.app))return Promise.reject(Ls(i));const r="signIn",o=await j0(i,r,e),a=await ga._fromIdTokenResponse(i,r,o);return t||await i._updateCurrentUser(a.user),a}function gC(i,e,t,r){return Zt(i).onIdTokenChanged(e,t,r)}function yC(i,e,t){return Zt(i).beforeAuthStateChanged(e,t)}function _C(i){return Zt(i).signOut()}const yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yh,"1"),this.storage.removeItem(yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=1e3,EC=10;class q0 extends $0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=F0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);XP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,EC):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},vC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}q0.type="LOCAL";const wC=q0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0 extends $0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}K0.type="SESSION";const H0=K0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Gh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const d=Array.from(c).map(async y=>y(t.origin,a)),p=await IC(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((d,p)=>{const y=Im("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(I){const T=I;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(E),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(T.data.response);break;default:clearTimeout(E),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(){return window}function SC(i){Sr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}async function AC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RC(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function PC(){return G0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="firebaseLocalStorageDb",CC=1,_h="firebaseLocalStorage",Q0="fbase_key";class lu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wh(i,e){return i.transaction([_h],e?"readwrite":"readonly").objectStore(_h)}function kC(){const i=indexedDB.deleteDatabase(W0);return new lu(i).toPromise()}function Ep(){const i=indexedDB.open(W0,CC);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(_h,{keyPath:Q0})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(_h)?e(r):(r.close(),await kC(),e(await Ep()))})})}async function Av(i,e,t){const r=Wh(i,!0).put({[Q0]:e,value:t});return new lu(r).toPromise()}async function xC(i,e){const t=Wh(i,!1).get(e),r=await new lu(t).toPromise();return r===void 0?null:r.value}function Rv(i,e){const t=Wh(i,!0).delete(e);return new lu(t).toPromise()}const NC=800,DC=3;class Y0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ep(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>DC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return G0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gh._getInstance(PC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await AC(),!this.activeServiceWorker)return;this.sender=new TC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ep();return await Av(e,yh,"1"),await Rv(e,yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Av(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>xC(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Rv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Wh(o,!1).getAll();return new lu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y0.type="LOCAL";const bC=Y0;new ou(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(i,e){return e?Kr(e):(ke(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm extends z0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ea(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ea(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function VC(i){return mC(i.auth,new Tm(i),i.bypassAuthState)}function OC(i){const{auth:e,user:t}=i;return ke(t,e,"internal-error"),pC(t,new Tm(i),i.bypassAuthState)}async function MC(i){const{auth:e,user:t}=i;return ke(t,e,"internal-error"),fC(t,new Tm(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,t,r,o,a=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VC;case"linkViaPopup":case"linkViaRedirect":return MC;case"reauthViaPopup":case"reauthViaRedirect":return OC;default:Rr(this.auth,"internal-error")}}resolve(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new ou(2e3,1e4);async function FC(i,e,t){if(rr(i.app))return Promise.reject(sr(i,"operation-not-supported-in-this-environment"));const r=Hh(i);bP(i,e,wm);const o=X0(r,t);return new bs(r,"signInViaPopup",e,o).executeNotNull()}class bs extends J0{constructor(e,t,r,o,a){super(e,t,o,a),this.provider=r,this.authWindow=null,this.pollId=null,bs.currentPopupAction&&bs.currentPopupAction.cancel(),bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Qr(this.filter.length===1,"Popup operations only handle one event");const e=Im();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LC.get())};e()}}bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="pendingRedirect",Gc=new Map;class BC extends J0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Gc.get(this.auth._key());if(!e){try{const r=await zC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Gc.set(this.auth._key(),e)}return this.bypassAuthState||Gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zC(i,e){const t=qC(e),r=$C(i);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function jC(i,e){Gc.set(i._key(),e)}function $C(i){return Kr(i._redirectPersistence)}function qC(i){return Hc(UC,i.config.apiKey,i.name)}async function KC(i,e,t=!1){if(rr(i.app))return Promise.reject(Ls(i));const r=Hh(i),o=X0(r,e),c=await new BC(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=10*60*1e3;class GC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Z0(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(sr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pv(e))}saveEventToCache(e){this.cachedEventUids.add(Pv(e)),this.lastProcessedEventTime=Date.now()}}function Pv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Z0({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Z0(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(i,e={}){return Ta(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XC=/^https?/;async function JC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await QC(i);for(const t of e)try{if(ZC(t))return}catch{}Rr(i,"unauthorized-domain")}function ZC(i){const e=_p(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!XC.test(t))return!1;if(YC.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=new ou(3e4,6e4);function Cv(){const i=Sr().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function tk(i){return new Promise((e,t)=>{var r,o,a;function c(){Cv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cv(),t(sr(i,"network-request-failed"))},timeout:ek.get()})}if(!((o=(r=Sr().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Sr().gapi)===null||a===void 0)&&a.load)c();else{const d=oC("iframefcb");return Sr()[d]=()=>{gapi.load?c():t(sr(i,"network-request-failed"))},iC(`${sC()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Wc=null,e})}let Wc=null;function nk(i){return Wc=Wc||tk(i),Wc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=new ou(5e3,15e3),ik="__/auth/iframe",sk="emulator/auth/iframe",ok={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ak=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lk(i){const e=i.config;ke(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?gm(e,sk):`https://${i.config.authDomain}/${ik}`,r={apiKey:e.apiKey,appName:i.name,v:_a},o=ak.get(i.config.apiHost);o&&(r.eid=o);const a=i._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Xl(r).slice(1)}`}async function uk(i){const e=await nk(i),t=Sr().gapi;return ke(t,i,"internal-error"),e.open({where:document.body,url:lk(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ok,dontclear:!0},r=>new Promise(async(o,a)=>{await r.restyle({setHideOnLeave:!1});const c=sr(i,"network-request-failed"),d=Sr().setTimeout(()=>{a(c)},rk.get());function p(){Sr().clearTimeout(d),o(r)}r.ping(p).then(p,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hk=500,dk=600,fk="_blank",pk="http://localhost";class kv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mk(i,e,t,r=hk,o=dk){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},ck),{width:r.toString(),height:o.toString(),top:a,left:c}),y=xt().toLowerCase();t&&(d=b0(y)?fk:t),N0(y)&&(e=e||pk,p.scrollbars="yes");const E=Object.entries(p).reduce((T,[V,j])=>`${T}${V}=${j},`,"");if(YP(y)&&d!=="_self")return gk(e||"",d),new kv(null);const I=window.open(e||"",d,E);ke(I,i,"popup-blocked");try{I.focus()}catch{}return new kv(I)}function gk(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="__/auth/handler",_k="emulator/auth/handler",vk=encodeURIComponent("fac");async function xv(i,e,t,r,o,a){ke(i.config.authDomain,i,"auth-domain-config-required"),ke(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:_a,eventId:o};if(e instanceof wm){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",bT(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries({}))c[E]=I}if(e instanceof au){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(c.scopes=E.join(","))}i.tenantId&&(c.tid=i.tenantId);const d=c;for(const E of Object.keys(d))d[E]===void 0&&delete d[E];const p=await i._getAppCheckToken(),y=p?`#${vk}=${encodeURIComponent(p)}`:"";return`${Ek(i)}?${Xl(d).slice(1)}${y}`}function Ek({config:i}){return i.emulator?gm(i,_k):`https://${i.authDomain}/${yk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="webStorageSupport";class wk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=H0,this._completeRedirectFn=KC,this._overrideRedirectResult=jC}async _openPopup(e,t,r,o){var a;Qr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await xv(e,t,r,_p(),o);return mk(e,c,Im())}async _openRedirect(e,t,r,o){await this._originValidation(e);const a=await xv(e,t,r,_p(),o);return SC(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Qr(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await uk(e),r=new GC(e);return t.register("authEvent",o=>(ke(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Uf,{type:Uf},o=>{var a;const c=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[Uf];c!==void 0&&t(!!c),Rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return F0()||D0()||vm()}}const Ik=wk;var Nv="@firebase/auth",Dv="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ak(i){ta(new Us("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;ke(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:U0(i)},y=new nC(r,o,a,p);return lC(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ta(new Us("auth-internal",e=>{const t=Hh(e.getProvider("auth").getImmediate());return(r=>new Tk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Li(Nv,Dv,Sk(i)),Li(Nv,Dv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=5*60,Pk=qv("authIdTokenMaxAge")||Rk;let bv=null;const Ck=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Pk)return;const o=t==null?void 0:t.token;bv!==o&&(bv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function kk(i=eE()){const e=Tp(i,"auth");if(e.isInitialized())return e.getImmediate();const t=aC(i,{popupRedirectResolver:Ik,persistence:[bC,wC,H0]}),r=qv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=Ck(a.toString());yC(t,c,()=>c(t.currentUser)),gC(t,d=>c(d))}}const o=jv("auth");return o&&uC(t,`http://${o}`),t}function xk(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}rC({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const a=sr("internal-error");a.customData=o,t(a)},r.type="text/javascript",r.charset="UTF-8",xk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ak("Browser");const Nk={apiKey:"AIzaSyBuxTa1BC-QdKY4DtMWKzNNorjHfkbEXik",authDomain:"food-tracker-19c9d.firebaseapp.com",projectId:"food-tracker-19c9d",storageBucket:"food-tracker-19c9d.appspot.com",messagingSenderId:"961928172022",appId:"1:961928172022:web:9a85ac5ae45a10de35b7d7"},eI=Zv(Nk),Er=oP(eI),bl=kk(eI),Dk=new jr;aP(Er).catch(i=>{i.code==="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):i.code==="unimplemented"&&console.warn("The current browser does not support persistence.")});function bk({onNutritionixAdd:i}){const[e,t]=Ge.useState([]),[r,o]=Ge.useState(null),[a,c]=Ge.useState(!0),[d,p]=Ge.useState(""),[y,E]=Ge.useState(!1),[I,T]=Ge.useState(null),[V,j]=Ge.useState(!1);Ge.useEffect(()=>{(async()=>{try{console.log("Fetching food library...");const te=await T0(gp(Er,"foods"));if(console.log("Query snapshot:",te),te.empty){console.log("No food items found in the database");const ue=[{label:"Whey protein 🥛",calories:120,fat:1,carbs:3,protein:25,fiber:0},{label:"Sautéed chicken",calories:220,fat:10,carbs:0,protein:26,fiber:0},{label:"3 Fried Eggs",calories:255,fat:18,carbs:2,protein:18,fiber:0}];for(const de of ue)await PP(gp(Er,"foods"),de);t(ue)}else{const ue=te.docs.map(de=>({id:de.id,...de.data()}));console.log("Fetched foods:",ue),t(ue)}}catch(te){console.error("Error fetching food library:",te),o(te.message)}finally{c(!1)}})()},[]);const H=async J=>{E(!0),j(!1);try{console.log("Searching Nutritionix for:",J);const te=await fetch("https://trackapi.nutritionix.com/v2/natural/nutrients",{method:"POST",headers:{"x-app-id":"131fa0b3","x-app-key":"3733def5ca528b11d7fa11a41f23703b","Content-Type":"application/json"},body:JSON.stringify({query:J})});console.log("Nutritionix response status:",te.status);const ue=await te.json();if(console.log("Nutritionix response data:",ue),!ue.foods||ue.foods.length===0)throw j(!0),new Error("No foods found matching your query");const de=ue.foods[0],_e={calories:Math.round(de.nf_calories)||0,fat:Math.round(de.nf_total_fat*10)/10||0,carbs:Math.round(de.nf_total_carbohydrate*10)/10||0,protein:Math.round(de.nf_protein*10)/10||0,fiber:Math.round(de.nf_dietary_fiber*10)/10||0,sodium:Math.round((de.nf_sodium||0)*10)/10,potassium:Math.round((de.nf_potassium||0)*10)/10,vitamin_c:de.nf_vitamin_c||0,vitamin_b6:de.nf_vitamin_b6||0,iron:de.nf_iron||0},x={label:de.food_name,default_serving:{label:`${de.serving_qty} ${de.serving_unit}`,grams:de.serving_weight_grams||0},base_unit:"g",base_amount:100,nutrition:_e,tags:de.tags||[]};T(x)}catch(te){console.error("Nutritionix error:",te),V||alert(te.message||"Failed to fetch from Nutritionix. Please try again.")}finally{E(!1)}},q=()=>{I&&i&&(i(I),T(null),p(""))},Ee=()=>{T(null),p("")};return a?[]:r?(console.error("FoodLibrary error:",r),[]):(e.fetchNutritionix=H,e.nutritionixLoading=y,e.nutritionixQuery=d,e.setNutritionixQuery=p,e.nutritionixPreview=I,e.setNutritionixPreview=T,e.confirmNutritionixAdd=q,e.cancelNutritionixAdd=Ee,e)}function Vk(){const[i,e]=Ge.useState(null),[t,r]=Ge.useState(!0);Ge.useEffect(()=>{const c=bl.onAuthStateChanged(d=>{e(d),r(!1)});return()=>c()},[]);const o=async()=>{try{await FC(bl,Dk)}catch(c){console.error("Error signing in with Google:",c)}},a=async()=>{try{await _C(bl)}catch(c){console.error("Error signing out:",c)}};return t?C.createElement("div",{className:"text-center py-4"},"Loading..."):i?C.createElement("div",{className:"flex items-center gap-4"},C.createElement("img",{src:i.photoURL,alt:i.displayName,className:"w-8 h-8 rounded-full"}),C.createElement("span",{className:"text-sm"},i.displayName),C.createElement("button",{onClick:a,className:"text-sm text-red-600 hover:text-red-800"},"Sign Out")):C.createElement("button",{onClick:o,className:"flex items-center gap-2 bg-white border border-gray-300 rounded-lg px-4 py-2 hover:bg-gray-50"},C.createElement("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-4 h-4"}),"Sign in with Google")}function Ok({onClose:i,onOpenGoals:e,onSignOut:t}){return C.createElement("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded-lg shadow-lg z-50"},C.createElement("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100",onClick:()=>{e(),i()}},"Daily Goals"),C.createElement("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600",onClick:t},"Sign Out"))}const Mk={carbs:40,fat:25,protein:35},Vv={carbs:"🍞",fat:"🥑",protein:"🍗",fiber:"🌱"};function Lk(i){return Math.round(i/1e3*14)}function Fk(i,e){return{carbs:Math.round(i*e.carbs/100/4),fat:Math.round(i*e.fat/100/9),protein:Math.round(i*e.protein/100/4)}}function Uk({onClose:i,initialGoals:e={calories:2300,...Mk},onSave:t}){const[r,o]=Ge.useState(e.calories),[a,c]=Ge.useState(()=>e.carbs<=100&&e.fat<=100&&e.protein<=100?{carbs:e.carbs,fat:e.fat,protein:e.protein}:{carbs:Math.round(e.carbs*4/e.calories*100),fat:Math.round(e.fat*9/e.calories*100),protein:Math.round(e.protein*4/e.calories*100)}),d=a.carbs+a.fat+a.protein,p=Lk(r),y=Fk(r,a),E=(V,j)=>{let H=parseInt(j,10);isNaN(H)&&(H=0),c({...a,[V]:H})},I=(V,j)=>{c(H=>({...H,[V]:Math.max(0,H[V]+j)}))},T=()=>{if(d!==100){alert("Macros must add up to 100%.");return}t&&t({calories:r,carbs:y.carbs,fat:y.fat,protein:y.protein,fiber:p,macroPercents:{...a}}),i()};return C.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},C.createElement("div",{className:"bg-white rounded-lg p-6 w-full max-w-md shadow-lg"},C.createElement("h2",{className:"text-xl font-bold mb-4 text-center"},"Daily Goals"),C.createElement("div",{className:"space-y-4"},C.createElement("div",{className:"flex flex-col items-center"},C.createElement("label",{className:"block text-sm font-medium mb-1 text-center"},"Calories"),C.createElement("div",{className:"flex items-center justify-center"},C.createElement("input",{type:"number",className:"w-20 border rounded px-2 py-1 text-center text-lg",value:r,min:0,max:9999,onChange:V=>o(Number(V.target.value))}))),C.createElement("div",null,C.createElement("label",{className:"block text-sm font-medium mb-1 text-center"},"Macros (%)"),C.createElement("div",{className:"grid grid-cols-3 gap-2"},["carbs","fat","protein"].map(V=>C.createElement("div",{key:V,className:"flex flex-col items-center"},C.createElement("span",{className:"capitalize mb-1"},Vv[V]," ",V),C.createElement("div",{className:"flex items-center gap-1"},C.createElement("button",{className:"px-2 py-1 bg-gray-200 rounded hover:bg-gray-300",onClick:()=>I(V,-1),type:"button"},"-"),C.createElement("input",{type:"number",className:"w-12 border rounded text-center",value:a[V],min:0,max:100,onChange:j=>E(V,j.target.value)}),C.createElement("button",{className:"px-2 py-1 bg-gray-200 rounded hover:bg-gray-300",onClick:()=>I(V,1),type:"button"},"+")),C.createElement("div",{className:"text-xs text-gray-500 mt-1"},y[V],"g")))),C.createElement("div",{className:`text-xs text-center mt-1 font-semibold ${d===100?"text-green-600":"text-red-600"}`},"Total: ",d,"%")),C.createElement("div",{className:"flex flex-col items-center"},C.createElement("label",{className:"block text-sm font-medium mb-1 text-center"},Vv.fiber," Recommended Fiber"),C.createElement("div",{className:"w-24 border rounded px-2 py-1 bg-gray-100 text-gray-700 text-center mx-auto"},p," g"),C.createElement("div",{className:"text-xs text-gray-500 mt-1 text-center"},"(Based on 14g per 1000 kcal)"))),C.createElement("div",{className:"flex justify-end gap-2 mt-6"},C.createElement("button",{className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",onClick:i},"Cancel"),C.createElement("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:T},"Save"))))}const Dc={calories:2300,fat:65,carbs:280,protein:180,fiber:32},Ov=i=>{const e=i.getHours();return e>=0&&e<9?"Morning":e>=9&&e<16?"Midday":"Evening"};function Bk(){var ar,Pr,ei,ti,Wi;const[i,e]=Ge.useState([]),[t,r]=Ge.useState([]),[o,a]=Ge.useState(!1),[c,d]=Ge.useState({label:"",calories:"",fat:"",carbs:"",protein:"",fiber:""}),[p,y]=Ge.useState(!0),[E,I]=Ge.useState([]),[T,V]=Ge.useState(null),[j,H]=Ge.useState(null),q=Ge.useRef(!1),Ee=(G,re=1)=>{e(ce=>{const Ae=ce.findIndex(Pe=>Pe.label===G.label&&Pe.units===G.units);if(Ae!==-1){const Pe=[...ce];return Pe[Ae].quantity+=re,Pe}else return[...ce,{...G,quantity:re}]})},J=bk({onNutritionixAdd:Ee}),[te,ue]=Ge.useState(!1),[de,_e]=Ge.useState(!1),[x,S]=Ge.useState(null),[P,N]=Ge.useState(!1),[b,M]=Ge.useState(()=>new Date().toISOString().slice(0,10)),[R,ht]=Ge.useState("Morning");Ge.useEffect(()=>{const G=bl.onAuthStateChanged(re=>{H(re),y(!1)});return()=>G()},[]),Ge.useEffect(()=>{(async()=>{if(!q.current&&j)try{const re=_P(gp(Er,"foodLog"),vP("userId","==",j.uid),EP("timestamp","desc")),Ae=(await T0(re)).docs.map(Pe=>({id:Pe.id,...Pe.data()}));r(Ae),q.current=!0}catch(re){console.error("Error fetching food logs:",re)}finally{y(!1)}})()},[j]),Ge.useEffect(()=>{(async()=>{if(j){const re=Ps(Er,"userGoals",j.uid),ce=await SP(re);ce.exists()?S(ce.data()):S(null)}})()},[j]);const At=G=>J.find(re=>re.id===G),Dt=async G=>{if(!G||!G.label)return null;const re=G.id||G.label.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"").slice(0,32);if(J.some(ce=>ce.id===re))return re;try{return await Lf(Ps(Er,"foods",re),{...G,id:re}),J.push({...G,id:re}),re}catch(ce){return console.error("Error saving new food to Firestore:",ce,G),null}},We=async(G,re,ce)=>{try{const Ae=Ps(Er,"foodLog",G),Pe=t.find(xe=>xe.id===G);let Xe={};if(re==="date"||re==="time"){const xe=new Date(Pe.timestamp);if(re==="date"){const Le=xe.toTimeString().slice(0,5);Xe.timestamp=new Date(`${ce}T${Le}`).toISOString()}else{const Le=xe.toISOString().slice(0,10);Xe.timestamp=new Date(`${Le}T${ce}`).toISOString()}}else{const xe=re==="serving"?parseFloat(ce)||1:ce;Xe[re]=xe}await AP(Ae,Xe),r(t.map(xe=>xe.id===G?{...xe,...Xe}:xe))}catch(Ae){console.error("Error updating food log:",Ae)}},ie=async G=>{try{await RP(Ps(Er,"foodLog",G)),r(t.filter(re=>re.id!==G))}catch(re){console.error("Error deleting food log:",re)}},we=new Date().toDateString(),ae=t.filter(G=>new Date(G.timestamp).toDateString()===we),O=ae.reduce((G,re)=>{const ce=new Date(re.timestamp).toDateString();return G[ce]=G[ce]||[],G[ce].push(re),G},{}),W=G=>G.reduce((re,ce)=>{const Ae=Ov(new Date(ce.timestamp));return re[Ae]=re[Ae]||[],re[Ae].push(ce),re},{Morning:[],Midday:[],Evening:[]}),ge=G=>G.reduce((re,ce)=>{var Pe;const Ae=At(ce.foodId);if(Ae&&Ae.nutrition){const Xe=ce.serving/(((Pe=Ae.default_serving)==null?void 0:Pe.grams)||1);Object.keys(Dc).forEach(xe=>{re[xe]+=(Ae.nutrition[xe]||0)*Xe})}return re},{calories:0,fat:0,carbs:0,protein:0,fiber:0}),De=(G,re,ce)=>{const Ae=Math.min(re/ce*100,100);return C.createElement("div",{key:G,className:"space-y-1"},C.createElement("p",{className:"text-sm font-medium"},G),C.createElement("div",{className:"w-full bg-gray-200 rounded-full h-3"},C.createElement("div",{className:"bg-blue-600 h-3 rounded-full",style:{width:`${Ae}%`}})),C.createElement("p",{className:"text-xs text-gray-600"},Math.round(re)," / ",ce," (",Ae.toFixed(1),"%)"))},be=G=>{I([...E,G])},Me=()=>{const G=new Date;return G.setDate(G.getDate()-3),t.reduce((re,ce)=>(new Date(ce.timestamp)>=G&&(re[ce.foodId]=(re[ce.foodId]||0)+1),re),{})},ze=()=>{const G=Me();return[...J].sort((re,ce)=>{const Ae=G[re.id]||0;return(G[ce.id]||0)-Ae})},qe=async G=>{if(!j)return;const re=Ps(Er,"userGoals",j.uid);await Lf(re,G),S(G)};let Ye=x||Dc,_t=Ye;x&&x.macroPercents&&(_t={calories:x.calories,...x.macroPercents});const Bn=(G,re)=>{e(ce=>ce.filter(Ae=>!(Ae.label===G&&Ae.units===re)))},Zr=(G,re,ce)=>{e(Ae=>Ae.map(Pe=>Pe.label===G&&Pe.units===re?{...Pe,quantity:ce}:Pe))},or=async()=>{var Ae;if(console.log("logCart called",i),!j){console.warn("No user logged in");return}if(i.length===0){console.warn("Cart is empty");return}const G=new Date(b),[re,ce]=R==="Morning"?[4,0]:R==="Midday"?[12,0]:[20,0];G.setHours(re,ce,0,0);for(const Pe of i){let Xe=J.find(xe=>{var Le;return xe.label===Pe.label&&(xe.units===Pe.units||((Le=xe.default_serving)==null?void 0:Le.label)===Pe.units)});if(!Xe){const xe=await Dt(Pe);if(xe)Xe={...Pe,id:xe};else{console.warn("Could not save new food for cart item:",Pe);continue}}for(let xe=0;xe<Pe.quantity;xe++){const Le=G.toISOString(),nt={foodId:Xe.id,timestamp:Le,serving:Pe.serving||1,units:Pe.units||((Ae=Xe.default_serving)==null?void 0:Ae.label)||"serving",userId:j.uid};try{const Rt=`${Le}_${Xe.id}`;await Lf(Ps(Er,"foodLog",Rt),nt),r(Qi=>[{id:Rt,...nt},...Qi]),console.log("Successfully logged cart item:",nt)}catch(Rt){console.error("Error adding food log from cart:",Rt,nt)}}}e([])};return C.createElement("div",{className:"max-w-4xl mx-auto p-4 space-y-4"},p?C.createElement("div",{className:"text-center py-4"},"Loading..."):j?C.createElement(C.Fragment,null,C.createElement("div",{className:"relative flex items-center justify-center mb-6"},C.createElement("h1",{className:"text-3xl font-bold absolute left-1/2 transform -translate-x-1/2 w-full text-center"},C.createElement("span",{role:"img","aria-label":"Chef"},"👨🏻‍🍳")," GORDON ",C.createElement("span",{role:"img","aria-label":"Chef"},"👨🏻‍🍳")),C.createElement("div",{className:"ml-auto z-10 flex items-center gap-4"},C.createElement("button",{className:"relative",onClick:()=>setCartModalOpen(!0),title:"Open Cart",style:{background:"none",border:"none",cursor:"pointer"}},C.createElement("span",{style:{fontSize:"2em"},role:"img","aria-label":"Cart"},"🛒"),i.length>0&&C.createElement("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full text-xs px-1.5 py-0.5"},i.length)),C.createElement("img",{src:j.photoURL,alt:j.displayName,className:"w-10 h-10 rounded-full cursor-pointer border-2 border-gray-300 hover:border-blue-500",onClick:()=>ue(G=>!G)}),te&&C.createElement(Ok,{onClose:()=>ue(!1),onOpenGoals:()=>{_e(!0)},onSignOut:()=>{bl.signOut(),ue(!1)}}))),de&&C.createElement(Uk,{onClose:()=>_e(!1),initialGoals:_t,onSave:qe}),C.createElement("div",{className:"bg-white rounded-lg shadow p-4 space-y-4"},C.createElement("div",{className:"flex justify-end mb-2"},C.createElement("button",{className:"text-blue-600 text-sm flex items-center gap-1 hover:underline",onClick:()=>N(G=>!G),title:P?"Show Less":"Show All"},C.createElement("span",{style:{fontSize:"1.2em"}},"⤢")," ",P?"Show Less":"Show All")),C.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2"},J&&J.length>0?C.createElement(C.Fragment,null,(P?ze():ze().slice(0,20)).filter(G=>!E.includes(G.id||G.label)).map(G=>{var re,ce,Ae,Pe;return C.createElement("div",{key:G.id||G.label,className:"relative"},C.createElement("button",{onClick:()=>Ee(G),className:"bg-gray-100 border hover:bg-blue-100 rounded p-2 text-sm flex flex-col w-full"},C.createElement("span",null,G.label),C.createElement("span",{className:"text-xs text-gray-500"},G.serving,G.units," • ",((re=G.nutrition)==null?void 0:re.calories)??0,"c ",((ce=G.nutrition)==null?void 0:ce.fat)??0,"f ",((Ae=G.nutrition)==null?void 0:Ae.carbs)??0,"c ",((Pe=G.nutrition)==null?void 0:Pe.protein)??0,"p")),C.createElement("button",{className:"absolute top-1 right-1 text-red-500 hover:text-red-700 text-lg font-bold bg-white rounded-full w-6 h-6 flex items-center justify-center border border-gray-300",onClick:Xe=>{Xe.stopPropagation(),be(G.id||G.label)},title:"Hide food",style:{lineHeight:1}},"−"))}),C.createElement("div",{className:"relative"},C.createElement("button",{className:"bg-green-500 hover:bg-green-600 text-white rounded p-2 flex flex-col items-center justify-center w-full h-full min-h-[60px] border-2 border-green-700 text-3xl",style:{minHeight:"60px"},onClick:()=>a(!0),title:"Add New Food"},C.createElement("span",null,"+")))):C.createElement("div",{className:"col-span-full text-center py-4"},"No food items available. Add some using the form below.")),(o||i.length>0)&&C.createElement("div",{className:"relative max-w-lg mx-auto mt-6"},C.createElement("div",{className:"bg-white border rounded-lg p-4 flex flex-col gap-2 shadow-lg"},o&&C.createElement(C.Fragment,null,C.createElement("div",{className:"mb-2"},C.createElement("label",{className:"block text-sm font-medium mb-1"},"Search Nutritionix"),C.createElement("div",{className:"flex gap-2"},C.createElement("input",{className:"border rounded px-2 py-1 flex-1",placeholder:"e.g. 3 beef tacos",value:J.nutritionixQuery||"",onChange:G=>J.setNutritionixQuery(G.target.value),disabled:J.nutritionixLoading}),C.createElement("button",{className:"bg-blue-500 hover:bg-blue-600 text-white rounded px-3 py-1",disabled:J.nutritionixLoading||!J.nutritionixQuery,onClick:()=>J.fetchNutritionix(J.nutritionixQuery,Ee),type:"button"},J.nutritionixLoading?"Searching...":"Search")),C.createElement("div",{className:"text-xs text-gray-500 mt-1"},"Powered by Nutritionix")),J.nutritionixPreview&&C.createElement("div",{className:"mt-2 p-2 border rounded bg-gray-50"},C.createElement("h4",{className:"font-semibold"},J.nutritionixPreview.label),C.createElement("div",{className:"text-sm"},C.createElement("div",null,"Calories: ",(ar=J.nutritionixPreview.nutrition)==null?void 0:ar.calories),C.createElement("div",null,"Protein: ",(Pr=J.nutritionixPreview.nutrition)==null?void 0:Pr.protein,"g"),C.createElement("div",null,"Carbs: ",(ei=J.nutritionixPreview.nutrition)==null?void 0:ei.carbs,"g"),C.createElement("div",null,"Fat: ",(ti=J.nutritionixPreview.nutrition)==null?void 0:ti.fat,"g"),C.createElement("div",null,"Fiber: ",(Wi=J.nutritionixPreview.nutrition)==null?void 0:Wi.fiber,"g")),C.createElement("div",{className:"mt-2 flex gap-2"},C.createElement("button",{onClick:()=>J.confirmNutritionixAdd(),className:"bg-green-500 hover:bg-green-600 text-white rounded px-3 py-1 text-sm"},"Add to Cart"),C.createElement("button",{onClick:J.cancelNutritionixAdd,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 rounded px-3 py-1 text-sm"},"Cancel"))),C.createElement("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-800 rounded px-3 py-1 mb-2 w-fit",onClick:()=>{},type:"button"},"+ Custom Food")),i.length>0&&C.createElement("div",{className:"mt-2"},C.createElement("div",{className:"flex flex-col sm:flex-row gap-2 mb-2 items-center justify-between"},C.createElement("div",null,C.createElement("label",{className:"text-sm mr-2"},"Date:"),C.createElement("input",{type:"date",className:"border rounded px-2 py-1",value:b,onChange:G=>M(G.target.value)})),C.createElement("div",null,C.createElement("label",{className:"text-sm mr-2"},"Time of Day:"),C.createElement("select",{className:"border rounded px-2 py-1",value:R,onChange:G=>ht(G.target.value)},C.createElement("option",{value:"Morning"},"Morning"),C.createElement("option",{value:"Midday"},"Midday"),C.createElement("option",{value:"Evening"},"Evening")))),C.createElement("h3",{className:"font-semibold mb-2"},"Food Cart"),C.createElement("table",{className:"min-w-full text-sm mb-2"},C.createElement("thead",null,C.createElement("tr",null,C.createElement("th",null,"Food"),C.createElement("th",null,"Qty"),C.createElement("th",null,"Unit"),C.createElement("th",null,"🍽️"),C.createElement("th",null,"🥑"),C.createElement("th",null,"🍞"),C.createElement("th",null,"🍗"),C.createElement("th",null,"🌱"),C.createElement("th",null))),C.createElement("tbody",null,i.map(G=>{var re,ce,Ae,Pe,Xe;return C.createElement("tr",{key:G.label+G.units},C.createElement("td",null,G.label),C.createElement("td",null,C.createElement("input",{type:"number",min:1,className:"w-12 border rounded text-center",value:G.quantity,onChange:xe=>Zr(G.label,G.units,Math.max(1,parseInt(xe.target.value)||1))})),C.createElement("td",null,G.units),C.createElement("td",null,((re=G.nutrition)==null?void 0:re.calories)??0),C.createElement("td",null,((ce=G.nutrition)==null?void 0:ce.fat)??0),C.createElement("td",null,((Ae=G.nutrition)==null?void 0:Ae.carbs)??0),C.createElement("td",null,((Pe=G.nutrition)==null?void 0:Pe.protein)??0),C.createElement("td",null,((Xe=G.nutrition)==null?void 0:Xe.fiber)??0),C.createElement("td",null,C.createElement("button",{className:"text-red-500",onClick:()=>Bn(G.label,G.units)},"✖️")))}))),C.createElement("button",{className:"bg-green-500 hover:bg-green-600 text-white rounded px-4 py-2 mt-2",disabled:i.length===0,onClick:or},"Log All (",R,")"))))),C.createElement("div",{className:"bg-white rounded-lg shadow p-4"},C.createElement("h2",{className:"text-lg font-semibold mb-2"},"Daily Summary"),C.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"},Object.keys(Dc).map(G=>De(G,ge(ae)[G],Ye[G])))),C.createElement("div",{className:"bg-white rounded-lg shadow p-4 overflow-auto"},C.createElement("table",{className:"min-w-full text-sm text-left"},C.createElement("thead",null,C.createElement("tr",{className:"border-b"},C.createElement("th",{className:"px-2 py-1"},"Food"),C.createElement("th",{className:"px-2 py-1"},"Amount"),C.createElement("th",{className:"px-2 py-1"},"Unit"),C.createElement("th",{className:"px-2 py-1"},C.createElement("span",{role:"img","aria-label":"Calories"},"🍽️")," Calories"),C.createElement("th",{className:"px-2 py-1"},C.createElement("span",{role:"img","aria-label":"Fat"},"🥑")," Fat"),C.createElement("th",{className:"px-2 py-1"},C.createElement("span",{role:"img","aria-label":"Carbs"},"🍞")," Carbs"),C.createElement("th",{className:"px-2 py-1"},C.createElement("span",{role:"img","aria-label":"Protein"},"🍗")," Protein"),C.createElement("th",{className:"px-2 py-1"},C.createElement("span",{role:"img","aria-label":"Fiber"},"🌱")," Fiber"),C.createElement("th",{className:"px-2 py-1"},"❌"))),C.createElement("tbody",null,Object.entries(O).map(([G,re])=>{const ce=ge(re),Ae=W(re);return C.createElement(C.Fragment,{key:G},C.createElement("tr",{className:"bg-gray-100 font-semibold"},C.createElement("td",{colSpan:3,className:"px-2 py-2"},C.createElement("span",{role:"img","aria-label":"Calendar"},"🗓️")," ",new Date(G).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})),C.createElement("td",{className:"px-2 py-2"},Math.round(ce.calories)),C.createElement("td",{className:"px-2 py-2"},Math.round(ce.fat),"g"),C.createElement("td",{className:"px-2 py-2"},Math.round(ce.carbs),"g"),C.createElement("td",{className:"px-2 py-2"},Math.round(ce.protein),"g"),C.createElement("td",{className:"px-2 py-2"},Math.round(ce.fiber),"g"),C.createElement("td",null)),Object.entries(Ae).map(([Pe,Xe])=>Xe.length>0&&C.createElement(C.Fragment,{key:Pe},C.createElement("tr",{className:"bg-gray-50"},C.createElement("td",{colSpan:3,className:"px-2 py-1 font-medium"},Pe),(()=>{const xe=ge(Xe);return C.createElement(C.Fragment,null,C.createElement("td",{className:"px-2 py-1"},Math.round(xe.calories)),C.createElement("td",{className:"px-2 py-1"},Math.round(xe.fat),"g"),C.createElement("td",{className:"px-2 py-1"},Math.round(xe.carbs),"g"),C.createElement("td",{className:"px-2 py-1"},Math.round(xe.protein),"g"),C.createElement("td",{className:"px-2 py-1"},Math.round(xe.fiber),"g"),C.createElement("td",null))})()),Xe.map(xe=>{const Le=At(xe.foodId),nt=Le?xe.serving/(Le.serving||1):1;return C.createElement("tr",{key:xe.id,className:"border-t hover:bg-gray-50 cursor-pointer",onClick:()=>V(xe)},C.createElement("td",{className:"px-2 py-1"},Le?Le.label:xe.foodId),C.createElement("td",{className:"px-2 py-1"},xe.serving),C.createElement("td",{className:"px-2 py-1"},xe.units),Object.keys(Dc).map(Rt=>C.createElement("td",{key:Rt,className:"px-2 py-1"},Le?Math.round((Le.nutrition[Rt]||0)*nt):"")),C.createElement("td",{className:"px-2 py-1"},C.createElement("button",{onClick:Rt=>{Rt.stopPropagation(),ie(xe.id)},className:"text-red-600"},"❌")))}))))})))),T&&C.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},C.createElement("div",{className:"bg-white rounded-lg p-6 max-w-md w-full"},C.createElement("h3",{className:"text-lg font-semibold mb-4"},"Edit Entry"),C.createElement("div",{className:"space-y-4"},C.createElement("div",null,C.createElement("label",{className:"block text-sm font-medium mb-1"},"Date"),C.createElement("input",{type:"date",className:"w-full border rounded px-2 py-1",value:new Date(T.timestamp).toISOString().slice(0,10),onChange:G=>{const re=new Date(T.timestamp),[ce,Ae,Pe]=G.target.value.split("-");re.setFullYear(ce,Ae-1,Pe),V({...T,timestamp:re.toISOString()})}})),C.createElement("div",null,C.createElement("label",{className:"block text-sm font-medium mb-1"},"Time of Day"),C.createElement("select",{className:"w-full border rounded px-2 py-1",value:Ov(new Date(T.timestamp)),onChange:G=>{const re=new Date(T.timestamp),[ce,Ae]=G.target.value==="Morning"?[4,0]:G.target.value==="Midday"?[12,0]:[20,0];re.setHours(ce,Ae),V({...T,timestamp:re.toISOString()})}},C.createElement("option",{value:"Morning"},"Morning"),C.createElement("option",{value:"Midday"},"Midday"),C.createElement("option",{value:"Evening"},"Evening"))),C.createElement("div",null,C.createElement("label",{className:"block text-sm font-medium mb-1"},"Amount"),C.createElement("input",{type:"number",step:"0.1",className:"w-full border rounded px-2 py-1",value:T.serving,onChange:G=>V({...T,serving:parseFloat(G.target.value)||1})})),C.createElement("div",{className:"flex justify-end gap-2 mt-6"},C.createElement("button",{className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",onClick:()=>V(null)},"Cancel"),C.createElement("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:()=>{We(T.id,"timestamp",T.timestamp),We(T.id,"serving",T.serving),V(null)}},"Save Changes")))))):C.createElement("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-4"},C.createElement("h1",{className:"text-3xl font-bold text-center mb-6"},C.createElement("span",{role:"img","aria-label":"Chef"},"👨🏻‍🍳")," GORDON ",C.createElement("span",{role:"img","aria-label":"Chef"},"👨🏻‍🍳")),C.createElement(Vk,null)))}hT.createRoot(document.getElementById("root")).render(C.createElement(C.StrictMode,null,C.createElement(Bk,null)));
